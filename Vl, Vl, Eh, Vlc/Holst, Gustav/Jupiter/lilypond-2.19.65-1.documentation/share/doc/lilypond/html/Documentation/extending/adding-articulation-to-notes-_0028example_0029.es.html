<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 2003-2015 por los autores.

La traducción de la siguiente nota de copyright se ofrece como
cortesía para las personas de habla no inglesa, pero únicamente la
nota en inglés tiene validez legal.

The translation of the following copyright notice is provided
for courtesy to non-English speakers, but only the notice in English
legally counts.

Se otorga permiso para copiar, distribuir y/o modificar este documento
bajo los términos de la Licencia de Documentación Libre de GNU, versión 1.1
o cualquier versión posterior publicada por la Free Software Foundation;
sin ninguna de las secciones invariantes.
Se incluye una copia de esta licencia dentro de la sección titulada "Licencia
de Documentación Libre de GNU".


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on el 6 agosto 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Extender LilyPond: A.3.4 Añadir articulaciones a las notas (ejemplo)</title>

<meta name="description" content="Extender LilyPond: A.3.4 Añadir articulaciones a las notas (ejemplo)">
<meta name="keywords" content="Extender LilyPond: A.3.4 Añadir articulaciones a las notas (ejemplo)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.es.html#index" rel="start" title="LilyPond &mdash; Extender">
<link href="lilypond-index.es.html#lilypond-index" rel="index" title="E. Índice de LilyPond">
<link href="index_toc.es.html#SEC_Contents" rel="contents" title="&Iacute;ndice General">
<link href="index_abt.es.html#SEC_About" rel="help" title="Acerca de este documento">
<link href="building-complicated-functions.es.html#building-complicated-functions" rel="up" title="A.3 Construir funciones complicadas">
<link href="lilypond-index.es.html#lilypond-index" rel="next" title="E. Índice de LilyPond">
<link href="doubling-a-note-with-slurs-_0028example_0029.es.html#doubling-a-note-with-slurs-_0028example_0029" rel="previous" title="A.3.3 Duplicar una nota con ligaduras (ejemplo)">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-manuals-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="es" class="extending devStatus">


<div id="main">
<a name="A_00f1adir-articulaciones-a-las-notas-_0028ejemplo_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="scheme-tutorial.es.html" title="Inicio de este cap&iacute;tulo o cap&iacute;tulo anterior"> &lt;&lt; Tutorial de Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.es.html" title="Portada del documento" rel="start">Arriba</a>][<a href="index_toc.es.html#SEC_Contents" title="&Iacute;ndice general" rel="contents">&Iacute;ndice general</a>][<a href="lilypond-index.es.html" title="&Iacute;ndice" rel="index">&Iacute;ndice</a>][<a href="index_abt.es.html#SEC_About" title="Acerca de (p&aacute;gina de ayuda)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="interfaces-for-programmers.es.html" title="Cap&iacute;tulo siguiente">&nbsp;Interfaces para programadores &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="doubling-a-note-with-slurs-_0028example_0029.es.html" title="Secci&oacute;n anterior en orden de lectura" accesskey="p" rel="previous"> &lt; Duplicar una nota con ligaduras (ejemplo)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="building-complicated-functions.es.html" title="Subir secci&oacute;n" accesskey="u" rel="up">&nbsp; Subir :&nbsp;Construir funciones complicadas&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="interfaces-for-programmers.es.html" title="Secci&oacute;n siguiente en orden de lectura" accesskey="n" rel="next">&nbsp;Interfaces para programadores &gt; </a>]</td></tr></table>
<a name="adding-articulation-to-notes-_0028example_0029"></a>
<h3 class="subsection">A.3.4 Añadir articulaciones a las notas (ejemplo)</h3>

<p>La manera fácil de añadir articulación a las notas es mezclar dos
expresiones musicales en un solo contexto.  Sin embargo,
supongamos que queremos escribir una función musical que lo haga.
Esto tiene la ventaja adicional de que podemos usar esa función
musical para añadir una articulación (como una instrucción de
digitación) a una nota única dentro de un acorde, lo cual no es
posible si nos limitamos a mezclar fragmentos de música
independientes.
</p>
<p>Una <code>$variable</code> dentro de la notación <code>#{&hellip;#}</code> es
como una <code>\variable</code> normal en la notación clásica de
LilyPond.  Sabemos que
</p>
<blockquote><pre class="example">{ \music -. -&gt; }
</pre></blockquote>

<p>no funciona en LilyPond.  Podríamos evitar este problema
adjuntando la articulación a un acorde vacío,
</p>
<blockquote><pre class="example">{ &lt;&lt; \music &lt;&gt; -. -&gt; &gt;&gt; }
</pre></blockquote>

<p>pero a los efectos de este ejemplo, aprenderemos ahora cómo
hacerlo en Scheme.  Empezamos examinando nuestra entrada y la
salida deseada.
</p>
<blockquote><pre class="example">%  input
\displayMusic c4
===&gt;
(make-music
  'NoteEvent
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch -1 0 0))))
=====
%  desired output
\displayMusic c4-&gt;
===&gt;
(make-music
  'NoteEvent
  'articulations
  (list (make-music
          'ArticulationEvent
          'articulation-type
          &quot;accent&quot;))
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch -1 0 0))
</pre></blockquote>

<p>Vemos que una nota (<code>c4</code>) se representa como una expresión
<code>NoteEvent</code>.  Para añadir una articulación de acento, se debe
añadir una expresión <code>ArticulationEvent</code> a la propiedad
<code>articulations</code> de la expresión <code>NoteEvent</code>.
</p>
<p>Para construir esta función, empezamos con
</p>
<blockquote><pre class="example">(define (add-accent note-event)
  &quot;Add an accent ArticulationEvent to the articulations of `note-event',
  which is supposed to be a NoteEvent expression.&quot;
  (set! (ly:music-property note-event 'articulations)
        (cons (make-music 'ArticulationEvent
                'articulation-type &quot;accent&quot;)
              (ly:music-property note-event 'articulations)))
  note-event)
</pre></blockquote>

<p>La primera línea es la forma de definir una función en Scheme: el
nombre de la función es <code>add-accent</code>, y tiene una variable
llamada <code>note-event</code>.  En Scheme, el tipo de variable suele
quedar claro a partir de su nombre (¡esto también es una buena
práctica en otros lenguajes de programación!)
</p>
<blockquote><pre class="example">&quot;Add an accent&hellip;&quot;
</pre></blockquote>

<p>es una descripción de lo que hace la función.  No es estrictamente
necesaria, pero de igual forma que los nombres claros de variable,
es una buena práctica.
</p>
<p>Se preguntará por qué modificamos el evento de nota directamente
en lugar de trabajar sobre una copia (se puede usar
<code>ly:music-deep-copy</code> para ello).  La razón es un contrato
silencioso: se permite que las funciones musicales modifiquen sus
argumentos; o bien se generan partiendo de cero (como la entrada
del usuario) o están ya copiadas (referenciar una variable de
música con &lsquo;<samp>\name</samp>&rsquo; o la música procedente de expresiones de
Scheme inmediatas &lsquo;<samp>$(&hellip;)</samp>&rsquo; proporcionan una copia).  Dado
que sería ineficiente crear copias innecesarias, el valor devuelto
de una función musical <em>no</em> se copia.  Así pues, para cumplir
dicho contrato, no debemos usar ningún argumento más de una vez, y
devolverlo cuenta como una vez.
</p>
<p>En un ejemplo anterior, hemos construido música mediante la
repetición de un argumento musical dado.  En tal caso, al menos
una repetidión tuvo que ser una copia de sí misma.  Si no lo
fuese, podrían ocurrir cosas muy extrañas.  Por ejemplo, si usamos
<code>\relative</code> o <code>\transpose</code> sobre la música resultante
que contiene los mismos elementos varias veces, estarían sujetos
varias veces a la relativización o al transporte.  Si los
asignamos a una variable de música, se rompe el curso porque hacer
referencia a &lsquo;<samp>\name</samp>&rsquo; creará de nuevo una copia que no retiene
la identidad de los elementos repetidos.
</p>
<p>Ahora bien, aun cuando la función anterior no es una función
musical, se usará normalmente dentro de funciones musicales.  Así
pues, tiene sentido obedecer el mismo convenio que usamos para las
funciones musicales: la entrada puede modificarse para producir la
salida, y el código que llama es responsable de crear las copias
si aún necesita el propio argumento sin modificar.  Si observamos
las propias funciones de LilyPond como <code>music-map</code>, veremos
que se atienen a los mismos principios.
</p>
<p>¿En qué punto nos encontramos?  Ahora tenemos un <code>note-event</code>
que podemos modificar, no a causa de la utilización de
<code>ly:music-deep-copy</code> sino por una explicación muy
desarrollada.  Añadimos el acento a su propiedad de lista
<code>'articulations</code>.
</p>
<blockquote><pre class="example">(set! place new-value)
</pre></blockquote>

<p>Aquí, lo que queremos establecer (el &lsquo;place&rsquo;) es la propiedad
<code>'articulations</code> de la expresión <code>note-event</code>.
</p>
<blockquote><pre class="example">(ly:music-property note-event 'articulations)
</pre></blockquote>

<p><code>ly:music-property</code> es la función ustilizada para acceder a las
propiedades musicales (las <code>'articulations</code>, <code>'duration</code>,
<code>'pitch</code>, etc, que vemos arriba en la salida de
<code>\displayMusic</code>).  El nuevo valor es la antigua propiedad
<code>'articulations</code>, con un elemento adicional: la expresión
<code>ArticulationEvent</code>, que copiamos a partir de la salida de
<code>\displayMusic</code>,
</p>
<blockquote><pre class="example">(cons (make-music 'ArticulationEvent
        'articulation-type &quot;accent&quot;)
      (ly:music-property result-event-chord 'articulations))
</pre></blockquote>

<p>Se usa <code>cons</code> para añadir un elemento a la parte delantera de
una lista sin modificar la lista original.  Esto es lo que
queremos: la misma lista de antes, más la nueva expresión
<code>ArticulationEvent</code>.  El orden dentro de la propiedad
<code>'articulations</code> no tiene importancia aquí.
</p>
<p>Finalmente, una vez hemos añadido la articulación de acento a su
propiedad <code>articulations</code>, podemos devolver
<code>note-event</code>, de aquí la última línea de la función.
</p>
<p>Ahora transformamos la función <code>add-accent</code> en una función
musical (es cuestión de un poco de aderezo sintáctico y una
declaración del tipo de su argumento).
</p>
<blockquote><pre class="example">addAccent = #(define-music-function (note-event)
                                     (ly:music?)
  &quot;Add an accent ArticulationEvent to the articulations of `note-event',
  which is supposed to be a NoteEvent expression.&quot;
  (set! (ly:music-property note-event 'articulations)
        (cons (make-music 'ArticulationEvent
                'articulation-type &quot;accent&quot;)
              (ly:music-property note-event 'articulations)))
  note-event)
</pre></blockquote>

<p>A continuación verificamos que esta función musical funciona
correctamente:
</p>
<blockquote><pre class="example">\displayMusic \addAccent c4
</pre></blockquote>






<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="scheme-tutorial.es.html" title="Inicio de este cap&iacute;tulo o cap&iacute;tulo anterior"> &lt;&lt; Tutorial de Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.es.html" title="Portada del documento" rel="start">Arriba</a>][<a href="index_toc.es.html#SEC_Contents" title="&Iacute;ndice general" rel="contents">&Iacute;ndice general</a>][<a href="lilypond-index.es.html" title="&Iacute;ndice" rel="index">&Iacute;ndice</a>][<a href="index_abt.es.html#SEC_About" title="Acerca de (p&aacute;gina de ayuda)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="interfaces-for-programmers.es.html" title="Cap&iacute;tulo siguiente">&nbsp;Interfaces para programadores &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="doubling-a-note-with-slurs-_0028example_0029.es.html" title="Secci&oacute;n anterior en orden de lectura" accesskey="p" rel="previous"> &lt; Duplicar una nota con ligaduras (ejemplo)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="building-complicated-functions.es.html" title="Subir secci&oacute;n" accesskey="u" rel="up">&nbsp; Subir :&nbsp;Construir funciones complicadas&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="interfaces-for-programmers.es.html" title="Secci&oacute;n siguiente en orden de lectura" accesskey="n" rel="next">&nbsp;Interfaces para programadores &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
<p class="footer_version">
Esta página corresponde a LilyPond-2.19.65 (rama de desarrollo).
</p>
<p class="footer_report">
Se agradecen las <a href="http://lilypond.org/help-us.html">sugerencias para la documentación</a>. Informe de los fallos a través de la lista en español <a href="http://lists.gnu.org/mailman/listinfo/lilypond-es">lilypond-es</a>, o en inglés a través de <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">la lista oficial de fallos</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
 Otros idiomas: <a href="adding-articulation-to-notes-_0028example_0029.html">English</a>, <a href="adding-articulation-to-notes-_0028example_0029.de.html">deutsch</a>, <a href="adding-articulation-to-notes-_0028example_0029.fr.html">français</a>.
 <br>
 Acerca de la <a href="http://www.lilypond.org/website/misc/browser-language">selección automática del idioma</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.es.html"
         title="Documentation Index">&lt;&lt; Volver al índice de la documentación</a></p>
<h4 class="toc_header"> <a href="index.es.html" title="Start of the manual">LilyPond &mdash; Extender  v2.19.65 (rama de desarrollo). </a></h4>
<div class="contents">
<ul class="toc">
  <li class=" toc_current"><a name="toc-Tutorial-de-Scheme-1" href="scheme-tutorial.es.html">A. Tutorial de Scheme</a>
  <ul class="toc">
    <li class=""><a name="toc-Introduccion-a-Scheme" href="introduction-to-scheme.es.html">A.1 Introducción a Scheme</a>    </li>
    <li class=""><a name="toc-Scheme-dentro-de-LilyPond-1" href="scheme-in-lilypond.es.html">A.2 Scheme dentro de LilyPond</a>    </li>
    <li class=" toc_current"><a name="toc-Construir-funciones-complicadas-1" href="building-complicated-functions.es.html">A.3 Construir funciones complicadas</a>
    <ul class="toc">
      <li class=""><a name="toc-Presentacion-de-las-expresiones-musicales" href="displaying-music-expressions.es.html">A.3.1 Presentación de las expresiones musicales</a>      </li>
      <li class=""><a name="toc-Propiedades-musicales-1" href="music-properties.es.html">A.3.2 Propiedades musicales</a>      </li>
      <li class=""><a name="toc-Duplicar-una-nota-con-ligaduras-_0028ejemplo_0029-1" href="doubling-a-note-with-slurs-_0028example_0029.es.html">A.3.3 Duplicar una nota con ligaduras (ejemplo)</a>      </li>
      <li class=" toc_current"><a name="toc-Anadir-articulaciones-a-las-notas-_0028ejemplo_0029" href="adding-articulation-to-notes-_0028example_0029.es.html">A.3.4 Añadir articulaciones a las notas (ejemplo)</a>      </li>
    </ul>
    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Interfaces-para-programadores-1" href="interfaces-for-programmers.es.html">B. Interfaces para programadores</a>
  <ul class="toc">
    <li class=""><a name="toc-Bloques-de-codigo-de-LilyPond" href="lilypond-code-blocks.es.html">B.1 Bloques de código de LilyPond</a>    </li>
    <li class=""><a name="toc-Funciones-de-Scheme-1" href="scheme-functions.es.html">B.2 Funciones de Scheme</a>    </li>
    <li class=""><a name="toc-Funciones-musicales-1" href="music-functions.es.html">B.3 Funciones musicales</a>    </li>
    <li class=""><a name="toc-Funciones-de-eventos-1" href="event-functions.es.html">B.4 Funciones de eventos</a>    </li>
    <li class=""><a name="toc-Funciones-de-marcado-1" href="markup-functions.es.html">B.5 Funciones de marcado</a>    </li>
    <li class=""><a name="toc-Contextos-para-programadores-1" href="contexts-for-programmers.es.html">B.6 Contextos para programadores</a>    </li>
    <li class=""><a name="toc-Funciones-de-callback-1" href="callback-functions.es.html">B.7 Funciones de callback</a>    </li>
    <li class=""><a name="toc-Trucos-dificiles" href="difficult-tweaks.es.html">B.8 Trucos difíciles</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Interfaces-de-Scheme-de-LilyPond-1" href="lilypond-scheme-interfaces.es.html">C. Interfaces de Scheme de LilyPond</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.es.html">D. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-Indice-de-LilyPond" href="lilypond-index.es.html">E. Índice de LilyPond</a>  </li>
<li>
<!--
    Translation of GIT committish: 1df9fc42197a6b2931f448cfba717527aead5e5a

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.

we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.19 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.19 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.19 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Búsqueda de Google">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Buscar">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
