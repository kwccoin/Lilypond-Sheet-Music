<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This document has been placed in the public domain.
 -->
<!-- Created on August 6, 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond snippets</title>

<meta name="description" content="LilyPond snippets">
<meta name="keywords" content="LilyPond snippets">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#index" rel="start" title="LilyPond &mdash; Snippets">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="#SEC_About" rel="help" title="About This Document">
<link rel="stylesheet" type="text/css" title="Default style" href="../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../Documentation/css/lilypond-manuals-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" class="snippets devStatus">


<div id="main">
<a name="Top"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<a name="index"></a>
<h1 class="settitle">LilyPond &mdash; Snippets</h1>

<table class="cartouche" border="1"><tr><td>
<p>This document shows a selected set of LilyPond snippets from the
<a href="http://lsr.di.unimi.it">LilyPond Snippet Repository</a>
(LSR).  It is in the public domain.
</p>
<p>We would like to address many thanks to Sebastiano Vigna for maintaining
LSR web site and database, and the University of Milano for hosting LSR.
</p>
<p>Please note that this document is not an exact subset of LSR: some
snippets come from &lsquo;<tt>input/new</tt>&rsquo; LilyPond sources directory, and
snippets from LSR are converted through <code>convert-ly</code>, as LSR is
based on a stable LilyPond version, and this document is for
version 2.19.65.
</p>
<p>Snippets are grouped by tags; tags listed in the table of contents match
a section of LilyPond notation manual.  Snippets may have several tags,
and not all LSR tags may appear in this document.
</p>
<p>In the HTML version of this document, you can click on the file name
or figure for each example to see the corresponding input file.
</p>
</td></tr></table>






<table class="menu" border="0" cellspacing="0">
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">Musical notation
</pre></th></tr><tr><td align="left" valign="top"><a href="#pitches" accesskey="1">Pitches</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#rhythms" accesskey="2">Rhythms</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#expressive-marks" accesskey="3">Expressive marks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#repeats" accesskey="4">Repeats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#simultaneous-notes" accesskey="5">Simultaneous notes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#staff-notation" accesskey="6">Staff notation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#editorial-annotations" accesskey="7">Editorial annotations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#text" accesskey="8">Text</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Specialist notation
</pre></th></tr><tr><td align="left" valign="top"><a href="#vocal-music" accesskey="9">Vocal music</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#chords">Chords</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#keyboards">Keyboards</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#percussion">Percussion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#fretted-strings">Fretted strings</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#unfretted-strings">Unfretted strings</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#winds">Winds</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ancient-notation">Ancient notation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#world-music">World music</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Other collections
</pre></th></tr><tr><td align="left" valign="top"><a href="#contexts-and-engravers">Contexts and engravers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#tweaks-and-overrides">Tweaks and overrides</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#paper-and-layout">Paper and layout</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#titles">Titles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#spacing">Spacing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#midi">MIDI</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#templates">Templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<table class="cartouche" border="1"><tr><td>
<p>For more information about how this manual fits with the other
documentation, or to read this manual in other formats, see
<a name="index-Manuals"></a>
<a href="web-big-page.html#manuals">Manuals</a>.
</p>
<p>If you are missing any manuals, the complete documentation can be
found at <a href="http://lilypond.org">http://lilypond.org/</a>.
</p></td></tr></table>





<hr size="1">
<a name="Pitches"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#index" title="Beginning of this chapter or previous chapter"> &lt;&lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#index" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-adding-ambitus-per-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Adding ambitus per voice &gt; </a>]</td></tr></table>
<a name="pitches"></a>
<h1 class="unnumbered">Pitches</h1>

<a name="index-Pitches"></a>
<p><a href="notation-big-page.html#pitches">Pitches</a>
</p>

<a name="adding-ambitus-per-voice.ly"></a>

<hr size="6">
<a name="Pitches_003a-Adding-ambitus-per-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-adding-an-ottava-marking-to-a-single-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Adding an ottava marking to a single voice &gt; </a>]</td></tr></table>
<a name="pitches-adding-ambitus-per-voice"></a>
<h2 class="unnumberedsec">Adding ambitus per voice</h2>


<p>Ambitus can be added per voice. In this case, the ambitus must be moved
manually to prevent collisions.
</p>

<pre class="verbatim">\new Staff &lt;&lt;
  \new Voice \with {
    \consists &quot;Ambitus_engraver&quot;
  } \relative c'' {
    \override Ambitus.X-offset = #2.0
    \voiceOne
    c4 a d e
    f1
  }
  \new Voice \with {
    \consists &quot;Ambitus_engraver&quot;
  } \relative c' {
    \voiceTwo
    es4 f g as
    b1
  }
&gt;&gt;
</pre><p>
 <a href="53/lily-04b16abb.ly">
  <img align="middle"
       border="0"
       src="53/lily-04b16abb.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-an-ottava-marking-to-a-single-voice.ly"></a>

<hr size="6">
<a name="Pitches_003a-Adding-an-ottava-marking-to-a-single-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-adding-ambitus-per-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Adding ambitus per voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-altering-the-length-of-beamed-stems" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Altering the length of beamed stems &gt; </a>]</td></tr></table>
<a name="pitches-adding-an-ottava-marking-to-a-single-voice"></a>
<h2 class="unnumberedsec">Adding an ottava marking to a single voice</h2>


<p>If you have more than one voice on the staff, setting octavation in one
voice will transpose the position of notes in all voices for the
duration of the ottava bracket. If the ottavation is only intended to
apply to one voice, the middleCPosition and ottava bracket may be set
explicitly.  In this snippet, the bass clef usually has middleCPosition
set to 6, six positions above the center  line, so in the 8va portion
middleCPosition is 7 positions (one octave) higher still.
</p>

<pre class="verbatim">{
  \clef bass
  &lt;&lt; { &lt;g d'&gt;1~ q2 &lt;c' e'&gt; }
  \\
    {
      r2.
      \set Staff.ottavation = #&quot;8vb&quot;
      \once \override Staff.OttavaBracket.direction = #DOWN
      \set Voice.middleCPosition = #(+ 6 7)
      &lt;b,,, b,,&gt;4 ~ |
      q2
      \unset Staff.ottavation
      \unset Voice.middleCPosition
      &lt;c e&gt;2
    }
  &gt;&gt;
}
</pre><p>
 <a href="5c/lily-e5006f5e.ly">
  <img align="middle"
       border="0"
       src="5c/lily-e5006f5e.png"
       alt="[image of music]">
 </a>
</p>




<a name="altering-the-length-of-beamed-stems.ly"></a>

<hr size="6">
<a name="Pitches_003a-Altering-the-length-of-beamed-stems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-adding-an-ottava-marking-to-a-single-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Adding an ottava marking to a single voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-ambitus-with-multiple-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Ambitus with multiple voices &gt; </a>]</td></tr></table>
<a name="pitches-altering-the-length-of-beamed-stems"></a>
<h2 class="unnumberedsec">Altering the length of beamed stems</h2>


<p>Stem lengths on beamed notes can be varied by overriding the
<code>beamed-lengths</code> property of the <code>details</code> of the
<code>Stem</code>.  If a single value is used as an argument, the length
applies to all stems.  When multiple arguments are used, the first
applies to eighth notes, the second to sixteenth notes and so on.  The
final argument also applies to all notes shorter than the note length
of the final argument.  Non-integer arguments may also be used.
</p>

<pre class="verbatim">\relative c'' {
  \override Stem.details.beamed-lengths = #'(2)
  a8[ a] a16[ a] a32[ a]
  \override Stem.details.beamed-lengths = #'(8 10 12)
  a8[ a] a16[ a] a32[ a] r8
  \override Stem.details.beamed-lengths = #'(8)
  a8[ a]
  \override Stem.details.beamed-lengths = #'(8.5)
  a8[ a]
  \revert Stem.details
  a8[ a] a16[ a] a32[ a] r16
}
</pre><p>
 <a href="08/lily-87c42240.ly">
  <img align="middle"
       border="0"
       src="08/lily-87c42240.png"
       alt="[image of music]">
 </a>
</p>




<a name="ambitus-with-multiple-voices.ly"></a>

<hr size="6">
<a name="Pitches_003a-Ambitus-with-multiple-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-altering-the-length-of-beamed-stems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Altering the length of beamed stems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-ambitus" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Ambitus &gt; </a>]</td></tr></table>
<a name="pitches-ambitus-with-multiple-voices"></a>
<h2 class="unnumberedsec">Ambitus with multiple voices</h2>


<p>Adding the <code>Ambitus_engraver</code> to the <code>Staff</code> context creates
a single ambitus per staff, even in the case of staves with multiple
voices.
</p>

<pre class="verbatim">\new Staff \with {
  \consists &quot;Ambitus_engraver&quot;
  }
&lt;&lt;
  \new Voice \relative c'' {
    \voiceOne
    c4 a d e
    f1
  }
  \new Voice \relative c' {
    \voiceTwo
    es4 f g as
    b1
  }
&gt;&gt;
</pre><p>
 <a href="96/lily-df33b2cc.ly">
  <img align="middle"
       border="0"
       src="96/lily-df33b2cc.png"
       alt="[image of music]">
 </a>
</p>




<a name="ambitus.ly"></a>

<hr size="6">
<a name="Pitches_003a-Ambitus"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-ambitus-with-multiple-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Ambitus with multiple voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-applying-note-head-styles-depending-on-the-step-of-the-scale" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Applying note head styles depending on the step of the scale &gt; </a>]</td></tr></table>
<a name="pitches-ambitus"></a>
<h2 class="unnumberedsec">Ambitus</h2>


<p>Ambitus indicate pitch ranges for voices.
</p>

<p>Accidentals only show up if they are not part of the key signature.
<code>AmbitusNoteHead</code> grobs also have ledger lines.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Ambitus_engraver&quot;
  }
}

&lt;&lt;
  \new Staff {
    \relative c' {
      \time 2/4
      c4 f'
    }
  }
  \new Staff {
    \relative c' {
      \time  2/4
      \key d \major
      cis4 as'
    }
  }
&gt;&gt;
</pre><p>
 <a href="47/lily-5e5c67f8.ly">
  <img align="middle"
       border="0"
       src="47/lily-5e5c67f8.png"
       alt="[image of music]">
 </a>
</p>




<a name="applying-note-head-styles-depending-on-the-step-of-the-scale.ly"></a>

<hr size="6">
<a name="Pitches_003a-Applying-note-head-styles-depending-on-the-step-of-the-scale"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-ambitus" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Ambitus&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Automatically changing the stem direction of the middle note based on the melody &gt; </a>]</td></tr></table>
<a name="pitches-applying-note-head-styles-depending-on-the-step-of-the-scale"></a>
<h2 class="unnumberedsec">Applying note head styles depending on the step of the scale</h2>


<p>The <code>shapeNoteStyles</code> property can be used to define various note
head styles for each step of the scale (as set by the key signature or
the <code>tonic</code> property). This property requires a set of symbols,
which can be purely arbitrary (geometrical expressions such as
<code>triangle</code>, <code>cross</code>, and <code>xcircle</code> are allowed) or based
on old American engraving tradition (some latin note names are also
allowed).
</p>
<p>That said, to imitate old American song books, there are several
predefined note head styles available through shortcut commands such as
<code>\aikenHeads</code> or <code>\sacredHarpHeads</code>.
</p>
<p>This example shows different ways to obtain shape note heads, and
demonstrates the ability to transpose a melody without losing the
correspondence between harmonic functions and note head styles.
</p>

<pre class="verbatim">fragment = {
  \key c \major
  c2 d
  e2 f
  g2 a
  b2 c
}

\new Staff {
  \transpose c d
  \relative c' {
    \set shapeNoteStyles = ##(do re mi fa
                               #f la ti)
    \fragment
  }

  \break

  \relative c' {
    \set shapeNoteStyles = ##(cross triangle fa #f
                               mensural xcircle diamond)
    \fragment
  }
}
</pre><p>
 <a href="2b/lily-b5daf06f.ly">
  <img align="middle"
       border="0"
       src="2b/lily-b5daf06f.png"
       alt="[image of music]">
 </a>
</p>




<a name="automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody.ly"></a>

<hr size="6">
<a name="Pitches_003a-Automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-applying-note-head-styles-depending-on-the-step-of-the-scale" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Applying note head styles depending on the step of the scale&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-changing-ottava-text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Changing ottava text &gt; </a>]</td></tr></table>
<a name="pitches-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody"></a>
<h2 class="unnumberedsec">Automatically changing the stem direction of the middle note based on the melody</h2>


<p>LilyPond can alter the stem direction of the middle note on a staff so
that it follows the melody, by adding the <code>Melody_engraver</code> to the
Voice context and overriding the <code>neutral-direction</code> of Stem.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  a8 b g f b g |
  c  b d c b c |
}

\layout {
  \context {
    \Voice
    \consists &quot;Melody_engraver&quot;
    \autoBeamOff
    \override Stem.neutral-direction = #'()
  }
}
</pre><p>
 <a href="bf/lily-e8fb50cf.ly">
  <img align="middle"
       border="0"
       src="bf/lily-e8fb50cf.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-ottava-text.ly"></a>

<hr size="6">
<a name="Pitches_003a-Changing-ottava-text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Automatically changing the stem direction of the middle note based on the melody&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-changing-the-ambitus-gap" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Changing the ambitus gap &gt; </a>]</td></tr></table>
<a name="pitches-changing-ottava-text"></a>
<h2 class="unnumberedsec">Changing ottava text</h2>


<p>Internally, <code>\ottava</code> sets the properties <code>ottavation</code> (for
example, to <code>8va</code> or <code>8vb</code>) and <code>middleCPosition</code>.  To
override the text of the bracket, set <code>ottavation</code> after invoking
<code>\ottava</code>.
</p>
<p>Short text is especially useful when a brief ottava is used.
</p>

<pre class="verbatim">{
  c'2
  \ottava #1
  \set Staff.ottavation = #&quot;8&quot;
  c''2
  \ottava #0
  c'1
  \ottava #1
  \set Staff.ottavation = #&quot;Text&quot;
  c''1
}
</pre><p>
 <a href="87/lily-c8f983d7.ly">
  <img align="middle"
       border="0"
       src="87/lily-c8f983d7.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-ambitus-gap.ly"></a>

<hr size="6">
<a name="Pitches_003a-Changing-the-ambitus-gap"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-changing-ottava-text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Changing ottava text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-changing-the-interval-of-lines-on-the-stave" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Changing the interval of lines on the stave &gt; </a>]</td></tr></table>
<a name="pitches-changing-the-ambitus-gap"></a>
<h2 class="unnumberedsec">Changing the ambitus gap</h2>


<p>It is possible to change the default gap between the ambitus noteheads
and the line joining them.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Ambitus_engraver&quot;
  }
}

\new Staff {
  \time 2/4
  % Default setting
  c'4 g''
}

\new Staff {
  \time 2/4
  \override AmbitusLine.gap = #0
  c'4 g''
}

\new Staff {
  \time 2/4
  \override AmbitusLine.gap = #1
  c'4 g''
}

\new Staff {
  \time 2/4
  \override AmbitusLine.gap = #1.5
  c'4 g''
}
</pre><p>
 <a href="8b/lily-5c580c82.ly">
  <img align="middle"
       border="0"
       src="8b/lily-5c580c82.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-interval-of-lines-on-the-stave.ly"></a>

<hr size="6">
<a name="Pitches_003a-Changing-the-interval-of-lines-on-the-stave"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-changing-the-ambitus-gap" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Changing the ambitus gap&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-clefs-can-be-transposed-by-arbitrary-amounts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Clefs can be transposed by arbitrary amounts &gt; </a>]</td></tr></table>
<a name="pitches-changing-the-interval-of-lines-on-the-stave"></a>
<h2 class="unnumberedsec">Changing the interval of lines on the stave</h2>


<p><code>staffLineLayoutFunction</code> is used to change the position of notes.
This snippet shows setting its value to <code>ly:pitch-semitones</code> in
order to produce a chromatic scale with the distance between each space
and line of the stave equal to one semitone.
</p>

<pre class="verbatim">scale = \relative c' {
  a4 ais b c
  cis4 d dis e
  f4 fis g gis
  a1
}

\new Staff \with {
  \remove &quot;Accidental_engraver&quot;
  staffLineLayoutFunction = #ly:pitch-semitones
}
{
  &lt;&lt;
    \scale
    \context NoteNames {
      \set printOctaveNames = ##f
      \scale
    }
  &gt;&gt;
}
</pre><p>
 <a href="a6/lily-3d77b850.ly">
  <img align="middle"
       border="0"
       src="a6/lily-3d77b850.png"
       alt="[image of music]">
 </a>
</p>




<a name="clefs-can-be-transposed-by-arbitrary-amounts.ly"></a>

<hr size="6">
<a name="Pitches_003a-Clefs-can-be-transposed-by-arbitrary-amounts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-changing-the-interval-of-lines-on-the-stave" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Changing the interval of lines on the stave&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-coloring-notes-depending-on-their-pitch" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Coloring notes depending on their pitch &gt; </a>]</td></tr></table>
<a name="pitches-clefs-can-be-transposed-by-arbitrary-amounts"></a>
<h2 class="unnumberedsec">Clefs can be transposed by arbitrary amounts</h2>


<p>Clefs can be transposed by arbitrary amounts, not just by octaves.
</p>

<pre class="verbatim">\relative c' {
  \clef treble
  c4 c c c
  \clef &quot;treble_8&quot;
  c4 c c c
  \clef &quot;treble_5&quot;
  c4 c c c
  \clef &quot;treble^3&quot;
  c4 c c c
}
</pre><p>
 <a href="4f/lily-03f18f75.ly">
  <img align="middle"
       border="0"
       src="4f/lily-03f18f75.png"
       alt="[image of music]">
 </a>
</p>




<a name="coloring-notes-depending-on-their-pitch.ly"></a>

<hr size="6">
<a name="Pitches_003a-Coloring-notes-depending-on-their-pitch"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-clefs-can-be-transposed-by-arbitrary-amounts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Clefs can be transposed by arbitrary amounts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-creating-a-sequence-of-notes-on-various-pitches" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Creating a sequence of notes on various pitches &gt; </a>]</td></tr></table>
<a name="pitches-coloring-notes-depending-on-their-pitch"></a>
<h2 class="unnumberedsec">Coloring notes depending on their pitch</h2>


<p>It is possible to color note heads depending on their pitch and/or
their names: the function used in this example even makes it possible
to distinguish enharmonics.
</p>

<pre class="verbatim">%Association list of pitches to colors.
#(define color-mapping
   (list
    (cons (ly:make-pitch 0 0 NATURAL) (x11-color 'red))
    (cons (ly:make-pitch 0 0 SHARP) (x11-color 'green))
    (cons (ly:make-pitch 0 1 FLAT) (x11-color 'green))
    (cons (ly:make-pitch 0 2 NATURAL) (x11-color 'red))
    (cons (ly:make-pitch 0 2 SHARP) (x11-color 'green))
    (cons (ly:make-pitch 0 3 FLAT) (x11-color 'red))
    (cons (ly:make-pitch 0 3 NATURAL) (x11-color 'green))
    (cons (ly:make-pitch 0 4 SHARP) (x11-color 'red))
    (cons (ly:make-pitch 0 5 NATURAL) (x11-color 'green))
    (cons (ly:make-pitch 0 5 FLAT) (x11-color 'red))
    (cons (ly:make-pitch 0 6 SHARP) (x11-color 'red))
    (cons (ly:make-pitch 0 1 NATURAL) (x11-color 'blue))
    (cons (ly:make-pitch 0 3 SHARP) (x11-color 'blue))
    (cons (ly:make-pitch 0 4 FLAT) (x11-color 'blue))
    (cons (ly:make-pitch 0 5 SHARP) (x11-color 'blue))
    (cons (ly:make-pitch 0 6 FLAT) (x11-color 'blue))))

%Compare pitch and alteration (not octave).
#(define (pitch-equals? p1 p2)
   (and
    (= (ly:pitch-alteration p1) (ly:pitch-alteration p2))
    (= (ly:pitch-notename p1) (ly:pitch-notename p2))))

#(define (pitch-to-color pitch)
   (let ((color (assoc pitch color-mapping pitch-equals?)))
     (if color
         (cdr color))))

#(define (color-notehead grob)
   (pitch-to-color
    (ly:event-property (event-cause grob) 'pitch)))

\score {
  \new Staff \relative c' {
    \override NoteHead.color = #color-notehead
    c8 b d dis ees f g aes
  }
}
</pre><p>
 <a href="91/lily-db1eeb1b.ly">
  <img align="middle"
       border="0"
       src="91/lily-db1eeb1b.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-a-sequence-of-notes-on-various-pitches.ly"></a>

<hr size="6">
<a name="Pitches_003a-Creating-a-sequence-of-notes-on-various-pitches"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-coloring-notes-depending-on-their-pitch" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Coloring notes depending on their pitch&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-creating-custom-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Creating custom key signatures &gt; </a>]</td></tr></table>
<a name="pitches-creating-a-sequence-of-notes-on-various-pitches"></a>
<h2 class="unnumberedsec">Creating a sequence of notes on various pitches</h2>


<p>In music that contains many occurrences of the same sequence of notes
at different pitches, the following music function may prove useful.
It takes a note, of which only the pitch is used.   This example
creates the rhythm used throughout Mars, from Gustav Holst&rsquo;s The
Planets.
</p>

<pre class="verbatim">rhythm =
#(define-music-function (p) (ly:pitch?)
   &quot;Make the rhythm in Mars (the Planets) at the given pitch&quot;
  #{ \tuplet 3/2 { $p 8 8 8 } 4 4 8 8 4 #})

\new Staff {
  \time 5/4
  \rhythm c'
  \rhythm c''
  \rhythm g
}
</pre><p>
 <a href="83/lily-9d13fb58.ly">
  <img align="middle"
       border="0"
       src="83/lily-9d13fb58.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-custom-key-signatures.ly"></a>

<hr size="6">
<a name="Pitches_003a-Creating-custom-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-creating-a-sequence-of-notes-on-various-pitches" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Creating a sequence of notes on various pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi &gt; </a>]</td></tr></table>
<a name="pitches-creating-custom-key-signatures"></a>
<h2 class="unnumberedsec">Creating custom key signatures</h2>


<p>LilyPond supports custom key signatures.  In this example, print for D
minor with an extended range of printed flats.
</p>

<pre class="verbatim">\new Staff \with {
  \override StaffSymbol.line-count = #8
  \override KeySignature.flat-positions = #'((-7 . 6))
  \override KeyCancellation.flat-positions = #'((-7 . 6))
  % presumably sharps are also printed in both octaves
  \override KeySignature.sharp-positions = #'((-6 . 7))
  \override KeyCancellation.sharp-positions = #'((-6 . 7))

  \override Clef.stencil = #
  (lambda (grob)(grob-interpret-markup grob
  #{ \markup\combine
    \musicglyph #&quot;clefs.C&quot;
    \translate #'(-3 . -2)
    \musicglyph #&quot;clefs.F&quot;
   #}))
    clefPosition = #3
    middleCPosition = #3
    middleCClefPosition = #3
}

{
  \key d\minor
  f bes, f bes,
}
</pre><p>
 <a href="e7/lily-35b90923.ly">
  <img align="middle"
       border="0"
       src="e7/lily-35b90923.png"
       alt="[image of music]">
 </a>
</p>




<a name="customize-drumpitchnames,-drumstyletable-and-drumpitchtable-in-layout-and-midi.ly"></a>

<hr size="6">
<a name="Pitches_003a-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-creating-custom-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Creating custom key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-forcing-a-clef-symbol-to-be-displayed" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Forcing a clef symbol to be displayed &gt; </a>]</td></tr></table>
<a name="pitches-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi"></a>
<h2 class="unnumberedsec">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</h2>


<p>If you want to use customized drum-pitch-names for an own drum-style
with proper output for layout and midi, follow the steps as
demonstrated in the code below. In short:
</p>
<p>* define the names * define the appearence * tell LilyPond to use it
for layout * assign pitches to the names * tell LilyPond to use them
for midi
</p>

<pre class="verbatim">%% This snippet tries to amend
%% NR 2.5.1 Common notation for percussion - Custom percussion staves
%% http://lilypond.org/doc/v2.18/Documentation/notation/common-notation-for-percussion#custom-percussion-staves

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% To use custom drum-pitch-names for your score and midi you need to follow
%% this route:
%%
%%%%%%%%%%%%
%% LAYOUT:
%%%%%%%%%%%%
%%
%% (1) Define a name and put it in `drumPitchNames'
%%     This can be done at toplevel with
%%         drumPitchNames #'my-name  = #'my-name
%%     or shorter:
%%         drumPitchNames.my-name  = #'my-name
%%     It's possible to add an alias as well.
%% (2) Define how it should be printed
%%     Therefore put them into a toplevel-list, where each entry should look:
%%         (my-name
%%           note-head-style-or-default
%%             articulation-string-or-#f
%%               staff-position)
%%     Example:
%%         #(define my-style
%%           '(
%%             (my-name default &quot;tenuto&quot; -1)
%%             ; ...
%%             ))
%% (3) Tell LilyPond to use this custom-definitions, with
%%         drumStyleTable = #(alist-&gt;hash-table my-style)
%%     in a \layout or \with
%%
%%     Now we're done for layout, here a short, but complete example:
%%         \new DrumStaff
%%           \with { drumStyleTable = #(alist-&gt;hash-table my-style) }
%%           \drummode { my-name }
%%
%%%%%%%%%%%%
%% MIDI:
%%%%%%%%%%%%
%%
%% (1) Again at toplvel, assign a pitch to your custom-note-name
%%         midiDrumPitches #'my-name = #(ly:make-pitch -1 4 FLAT)
%%     or shorter:
%%         midiDrumPitches.my-name = ges
%%     Note that you have to use the name, which is in drumPitchNames, no alias
%% (2) Tell LilyPond to use this pitch(es), with
%%         drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
%%
%%     Example:
%%         \score {
%%            \new DrumStaff
%%             \with {
%%               drumStyleTable = #(alist-&gt;hash-table my-style)
%%               drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
%%             }
%%             \drummode { my-name4 }
%%           \layout {}
%%           \midi {}
%%         }
%%
%%%%%%%%%%%%
%% TESTING
%%%%%%%%%%%%
%%
%% To test whether all is fine, run the following sequence in terminal:
%%         lilypond my-file.ly
%%         midi2ly my-file.midi
%%         gedit my-file-midi.ly
%%
%% Which will do:
%% 1. create pdf and midi
%% 2. transform the midi back to a .ly-file
%%    (note: midi2ly is not always good in correctly identifying enharmonic pitches)
%% 3. open this file in gedit (or use another editor)
%% Now watch what you've got.
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% FULL EXAMPLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

drumPitchNames.dbass      = #'dbass
drumPitchNames.dba        = #'dbass  % 'db is in use already
drumPitchNames.dbassmute  = #'dbassmute
drumPitchNames.dbm        = #'dbassmute
drumPitchNames.do         = #'dopen
drumPitchNames.dopenmute  = #'dopenmute
drumPitchNames.dom        = #'dopenmute
drumPitchNames.dslap      = #'dslap
drumPitchNames.ds         = #'dslap
drumPitchNames.dslapmute  = #'dslapmute
drumPitchNames.dsm        = #'dslapmute

#(define djembe
  '((dbass      default  #f         -2)
    (dbassmute  default  &quot;stopped&quot;  -2)
    (dopen      default  #f          0)
    (dopenmute  default  &quot;stopped&quot;   0)
    (dslap      default  #f          2)
    (dslapmute  default  &quot;stopped&quot;   2)))

midiDrumPitches.dbass = g
midiDrumPitches.dbassmute = fis
midiDrumPitches.dopen =  a
midiDrumPitches.dopenmute = gis
midiDrumPitches.dslap =  b
midiDrumPitches.dslapmute = ais

one = \drummode { r4 dba4 do ds r dbm dom dsm }

\score {
   \new DrumStaff
    \with {
      \override StaffSymbol.line-count =  #3
      instrumentName = #&quot;Djembe &quot;
      drumStyleTable = #(alist-&gt;hash-table djembe)
      drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
    }
    \one
  \layout {}
  \midi {}
}
</pre><p>
 <a href="24/lily-1782ec30.ly">
  <img align="middle"
       border="0"
       src="24/lily-1782ec30.png"
       alt="[image of music]">
 </a>
</p>




<a name="forcing-a-clef-symbol-to-be-displayed.ly"></a>

<hr size="6">
<a name="Pitches_003a-Forcing-a-clef-symbol-to-be-displayed"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-generating-random-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Generating random notes &gt; </a>]</td></tr></table>
<a name="pitches-forcing-a-clef-symbol-to-be-displayed"></a>
<h2 class="unnumberedsec">Forcing a clef symbol to be displayed</h2>


<p>When a clef sign has already been displayed and it has not been changed
to a different clef, then repeating the <code>\clef</code> command will be
ignored by LilyPond, since it is not a change of clef.  It is possible
to force the clef to be redisplayed using the command <code>\set
Staff.forceClef = ##t</code>.
</p>

<pre class="verbatim">\relative c' {
  \clef treble
  c1
  \clef treble
  c1
  \set Staff.forceClef = ##t
  c1
  \clef treble
  c1
}
</pre><p>
 <a href="56/lily-e84655dc.ly">
  <img align="middle"
       border="0"
       src="56/lily-e84655dc.png"
       alt="[image of music]">
 </a>
</p>




<a name="generating-random-notes.ly"></a>

<hr size="6">
<a name="Pitches_003a-Generating-random-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-forcing-a-clef-symbol-to-be-displayed" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Forcing a clef symbol to be displayed&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Hiding accidentals on tied notes at the start of a new system &gt; </a>]</td></tr></table>
<a name="pitches-generating-random-notes"></a>
<h2 class="unnumberedsec">Generating random notes</h2>


<p>This Scheme-based snippet generates 24 random notes (or as many as
required), based on the current time (or any randomish number specified
instead, in order to obtain the same random notes each time): i.e., to
get different random note patterns, just change this number.
</p>

<pre class="verbatim">\score {
  {
    $(let ((random-state (seed-&gt;random-state (current-time))))
       (make-sequential-music
         (map (lambda (x)
                (let ((idx (random 12 random-state)))
                  (make-event-chord
                   (list
                    (make-music 'NoteEvent
                                'duration (ly:make-duration 2 0 1/1)
                                'pitch (ly:make-pitch
                                        (quotient idx 7)
                                        (remainder idx 7)
                                        0))))))
              (make-list 24))))
  }
}
</pre><p>
 <a href="90/lily-b65bec75.ly">
  <img align="middle"
       border="0"
       src="90/lily-b65bec75.png"
       alt="[image of music]">
 </a>
</p>




<a name="hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system.ly"></a>

<hr size="6">
<a name="Pitches_003a-Hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-generating-random-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Generating random notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-keep-change-clefs-full-sized" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Keep change clefs full sized &gt; </a>]</td></tr></table>
<a name="pitches-hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system"></a>
<h2 class="unnumberedsec">Hiding accidentals on tied notes at the start of a new system</h2>


<p>This shows how to hide accidentals on tied notes at the start of a new
system.
</p>

<pre class="verbatim">\relative c'' {
  \override Accidental.hide-tied-accidental-after-break = ##t
  cis1~ cis~
  \break
  cis
}
</pre><p>
 <a href="5f/lily-d26fb84b.ly">
  <img align="middle"
       border="0"
       src="5f/lily-d26fb84b.png"
       alt="[image of music]">
 </a>
</p>




<a name="keep-change-clefs-full-sized.ly"></a>

<hr size="6">
<a name="Pitches_003a-Keep-change-clefs-full-sized"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Hiding accidentals on tied notes at the start of a new system&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-makam-example" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Makam example &gt; </a>]</td></tr></table>
<a name="pitches-keep-change-clefs-full-sized"></a>
<h2 class="unnumberedsec">Keep change clefs full sized</h2>


<p>When a clef is changed, the clef sign displayed is smaller than the
initial clef.  This can be overridden with <code>full-size-change</code>.
</p>

<pre class="verbatim">\relative c' {
  \clef &quot;treble&quot;
  c1
  \clef &quot;bass&quot;
  c1
  \clef &quot;treble&quot;
  c1
  \override Staff.Clef.full-size-change = ##t
  \clef &quot;bass&quot;
  c1
  \clef &quot;treble&quot;
  c1
  \revert Staff.Clef.full-size-change
  \clef &quot;bass&quot;
  c1
  \clef &quot;treble&quot;
  c1
}
</pre><p>
 <a href="47/lily-ccfbe696.ly">
  <img align="middle"
       border="0"
       src="47/lily-ccfbe696.png"
       alt="[image of music]">
 </a>
</p>




<a name="makam-example.ly"></a>

<hr size="6">
<a name="Pitches_003a-Makam-example"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-keep-change-clefs-full-sized" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Keep change clefs full sized&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-modifying-the-ottava-spanner-slope" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Modifying the Ottava spanner slope &gt; </a>]</td></tr></table>
<a name="pitches-makam-example"></a>
<h2 class="unnumberedsec">Makam example</h2>


<p>Makam is a type of melody from Turkey using 1/9th-tone microtonal
alterations. Consult the initialization file &lsquo;<samp>ly/makam.ly</samp>&rsquo; for
details of pitch names and alterations.
</p>

<pre class="verbatim">% Initialize makam settings
\include &quot;makam.ly&quot;

\relative c' {
  \set Staff.keyAlterations = #`((6 . ,(- KOMA)) (3 . ,BAKIYE))
  c4 cc db fk
  gbm4 gfc gfb efk
  fk4 db cc c
}
</pre><p>
 <a href="a9/lily-db98967e.ly">
  <img align="middle"
       border="0"
       src="a9/lily-db98967e.png"
       alt="[image of music]">
 </a>
</p>




<a name="modifying-the-ottava-spanner-slope.ly"></a>

<hr size="6">
<a name="Pitches_003a-Modifying-the-Ottava-spanner-slope"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-makam-example" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Makam example&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-non_002dtraditional-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Non-traditional key signatures &gt; </a>]</td></tr></table>
<a name="pitches-modifying-the-ottava-spanner-slope"></a>
<h2 class="unnumberedsec">Modifying the Ottava spanner slope</h2>


<p>It is possible to change the slope of the Ottava spanner.
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.OttavaBracket.stencil = #ly:line-spanner::print
  \override Staff.OttavaBracket.bound-details =
    #`((left . ((Y . 0) ; Change the integer here
                (attach-dir . ,LEFT)
                (padding . 0)
                (stencil-align-dir-y . ,CENTER)))
       (right . ((Y . 5) ; Change the integer here
                 (padding . 0)
                 (attach-dir . ,RIGHT)
                 (text . ,(make-draw-dashed-line-markup (cons 0 -1.2))))))
  \override Staff.OttavaBracket.left-bound-info =
     #ly:line-spanner::calc-left-bound-info-and-text
  \override Staff.OttavaBracket.right-bound-info =
     #ly:line-spanner::calc-right-bound-info
  \ottava #1
  c1
  c'''1
}
</pre><p>
 <a href="7f/lily-1df7a0af.ly">
  <img align="middle"
       border="0"
       src="7f/lily-1df7a0af.png"
       alt="[image of music]">
 </a>
</p>




<a name="non-traditional-key-signatures.ly"></a>

<hr size="6">
<a name="Pitches_003a-Non_002dtraditional-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-modifying-the-ottava-spanner-slope" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Modifying the Ottava spanner slope&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-numbers-as-easy-note-heads" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Numbers as easy note heads &gt; </a>]</td></tr></table>
<a name="pitches-non_002dtraditional-key-signatures"></a>
<h2 class="unnumberedsec">Non-traditional key signatures</h2>


<p>The commonly used <code>\key</code> command sets the <code>keyAlterations</code>
property, in the <code>Staff</code> context.
</p>
<p>To create non-standard key signatures, set this property directly. The
format of this command is a list:
</p>
<p><code> \set Staff.keyAlterations = #`(((octave . step) . alter) ((octave
. step) . alter) ...) </code> where, for each element in the list,
<code>octave</code> specifies the octave (0 being the octave from middle C to
the B above), <code>step</code> specifies the note within the octave (0 means
C and 6 means B), and <code>alter</code> is <code>,SHARP ,FLAT ,DOUBLE-SHARP</code>
etc. (Note the leading comma.)
</p>

<p>Alternatively, for each item in the list, using the more concise format
<code>(step . alter)</code> specifies that the same alteration should hold in
all octaves.
</p>

<p>For microtonal scales where a &ldquo;sharp&rdquo; is not 100 cents, <code>alter</code>
refers to the alteration as a proportion of a 200-cent whole tone.
</p>

<p>Here is an example of a possible key signature for generating a
whole-tone scale:
</p>

<pre class="verbatim">\relative {
  \set Staff.keyAlterations = #`((6 . ,FLAT)
                                 (5 . ,FLAT)
                                 (3 . ,SHARP))
  c'4 d e fis
  aes4 bes c2
}
</pre><p>
 <a href="8b/lily-3d2ec144.ly">
  <img align="middle"
       border="0"
       src="8b/lily-3d2ec144.png"
       alt="[image of music]">
 </a>
</p>




<a name="numbers-as-easy-note-heads.ly"></a>

<hr size="6">
<a name="Pitches_003a-Numbers-as-easy-note-heads"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-non_002dtraditional-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Non-traditional key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-orchestra-choir-and-piano-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Orchestra choir and piano template &gt; </a>]</td></tr></table>
<a name="pitches-numbers-as-easy-note-heads"></a>
<h2 class="unnumberedsec">Numbers as easy note heads</h2>


<p>Easy notation note heads use the <code>note-names</code> property of the
<code>NoteHead</code> object to determine what appears inside the note head.
By overriding this property, it is possible to print numbers
representing the scale-degree.
</p>
<p>A simple engraver can be created to do this for every note head object
it sees.
</p>

<pre class="verbatim">#(define Ez_numbers_engraver
   (make-engraver
    (acknowledgers
     ((note-head-interface engraver grob source-engraver)
      (let* ((context (ly:translator-context engraver))
	     (tonic-pitch (ly:context-property context 'tonic))
	     (tonic-name (ly:pitch-notename tonic-pitch))
	     (grob-pitch
	      (ly:event-property (event-cause grob) 'pitch))
	     (grob-name (ly:pitch-notename grob-pitch))
	     (delta (modulo (- grob-name tonic-name) 7))
	     (note-names
	      (make-vector 7 (number-&gt;string (1+ delta)))))
	(ly:grob-set-property! grob 'note-names note-names))))))

#(set-global-staff-size 26)

\layout {
  ragged-right = ##t
  \context {
    \Voice
    \consists \Ez_numbers_engraver
  }
}

\relative c' {
  \easyHeadsOn
  c4 d e f
  g4 a b c \break

  \key a \major
  a,4 b cis d
  e4 fis gis a \break

  \key d \dorian
  d,4 e f g
  a4 b c d
}
</pre><p>
 <a href="b2/lily-1a370561.ly">
  <img align="middle"
       border="0"
       src="b2/lily-1a370561.png"
       alt="[image of music]">
 </a>
</p>




<a name="orchestra,-choir-and-piano-template.ly"></a>

<hr size="6">
<a name="Pitches_003a-Orchestra-choir-and-piano-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-numbers-as-easy-note-heads" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Numbers as easy note heads&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-ottava-text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Ottava text &gt; </a>]</td></tr></table>
<a name="pitches-orchestra-choir-and-piano-template"></a>
<h2 class="unnumberedsec">Orchestra choir and piano template</h2>


<p>This template demonstrates the use of nested <code>StaffGroup</code> and
<code>GrandStaff</code> contexts to sub-group instruments of the same type
together, and a way to use <code>\transpose</code> so that variables hold
music for transposing instruments at concert pitch.
</p>

<pre class="verbatim">fluteMusic = \relative c' { \key g \major g'1 b }

% Pitches as written on a manuscript for Clarinet in A
% are transposed to concert pitch.

clarinetMusic = \transpose c' a
  \relative c'' { \key bes \major bes1 d }

trumpetMusic = \relative c { \key g \major g''1 b }

% Key signature is often omitted for horns

hornMusic = \transpose c' f
  \relative c { d'1 fis }

percussionMusic = \relative c { \key g \major g1 b }

sopranoMusic = \relative c'' { \key g \major g'1 b }

sopranoLyrics = \lyricmode { Lyr -- ics }

altoIMusic = \relative c' { \key g \major g'1 b }

altoIIMusic = \relative c' { \key g \major g'1 b }

altoILyrics =  \sopranoLyrics

altoIILyrics = \lyricmode { Ah -- ah }

tenorMusic = \relative c' { \clef &quot;treble_8&quot; \key g \major g1 b }

tenorLyrics = \sopranoLyrics

pianoRHMusic = \relative c { \key g \major g''1 b }

pianoLHMusic = \relative c { \clef bass \key g \major g1 b }

violinIMusic = \relative c' { \key g \major g'1 b }

violinIIMusic = \relative c' { \key g \major g'1 b }

violaMusic = \relative c { \clef alto \key g \major g'1 b }

celloMusic = \relative c { \clef bass \key g \major g1 b }

bassMusic = \relative c { \clef &quot;bass_8&quot; \key g \major g,1 b }

\score {
  &lt;&lt;
    \new StaffGroup = &quot;StaffGroup_woodwinds&quot; &lt;&lt;
      \new Staff = &quot;Staff_flute&quot; \with { instrumentName = #&quot;Flute&quot; }
      \fluteMusic

      \new Staff = &quot;Staff_clarinet&quot; \with {
        instrumentName = \markup { \concat { &quot;Clarinet in B&quot; \flat } }
      }

      % Declare that written Middle C in the music
      % to follow sounds a concert B flat, for
      % output using sounded pitches such as MIDI.
      %\transposition bes

      % Print music for a B-flat clarinet
      \transpose bes c' \clarinetMusic
    &gt;&gt;

    \new StaffGroup = &quot;StaffGroup_brass&quot; &lt;&lt;
      \new Staff = &quot;Staff_hornI&quot; \with { instrumentName = #&quot;Horn in F&quot; }
       % \transposition f
        \transpose f c' \hornMusic

      \new Staff = &quot;Staff_trumpet&quot; \with { instrumentName = #&quot;Trumpet in  C&quot; }
      \trumpetMusic

    &gt;&gt;
    \new RhythmicStaff = &quot;RhythmicStaff_percussion&quot;
    \with { instrumentName = #&quot;Percussion&quot; }
    &lt;&lt;
      \percussionMusic
    &gt;&gt;
    \new PianoStaff \with { instrumentName = #&quot;Piano&quot; }
    &lt;&lt;
      \new Staff { \pianoRHMusic }
      \new Staff { \pianoLHMusic }
    &gt;&gt;
    \new ChoirStaff = &quot;ChoirStaff_choir&quot; &lt;&lt;
      \new Staff = &quot;Staff_soprano&quot; \with { instrumentName = #&quot;Soprano&quot; }
      \new Voice = &quot;soprano&quot;
      \sopranoMusic

      \new Lyrics \lyricsto &quot;soprano&quot; { \sopranoLyrics }
      \new GrandStaff = &quot;GrandStaff_altos&quot;
      \with { \accepts Lyrics } &lt;&lt;
        \new Staff = &quot;Staff_altoI&quot;  \with { instrumentName = #&quot;Alto I&quot; }
        \new Voice = &quot;altoI&quot;
        \altoIMusic

        \new Lyrics \lyricsto &quot;altoI&quot; { \altoILyrics }
        \new Staff = &quot;Staff_altoII&quot; \with { instrumentName = #&quot;Alto II&quot; }
        \new Voice = &quot;altoII&quot;
        \altoIIMusic

        \new Lyrics \lyricsto &quot;altoII&quot; { \altoIILyrics }
      &gt;&gt;

      \new Staff = &quot;Staff_tenor&quot; \with { instrumentName = #&quot;Tenor&quot; }
        \new Voice = &quot;tenor&quot;
        \tenorMusic

      \new Lyrics \lyricsto &quot;tenor&quot; { \tenorLyrics }
    &gt;&gt;
    \new StaffGroup = &quot;StaffGroup_strings&quot; &lt;&lt;
      \new GrandStaff = &quot;GrandStaff_violins&quot; &lt;&lt;
        \new Staff = &quot;Staff_violinI&quot; \with { instrumentName = #&quot;Violin I&quot; }
        \violinIMusic

        \new Staff = &quot;Staff_violinII&quot; \with { instrumentName = #&quot;Violin II&quot; }
        \violinIIMusic
      &gt;&gt;

      \new Staff = &quot;Staff_viola&quot; \with { instrumentName = #&quot;Viola&quot; }
      \violaMusic

      \new Staff = &quot;Staff_cello&quot; \with { instrumentName = #&quot;Cello&quot; }
      \celloMusic

      \new Staff = &quot;Staff_bass&quot; \with { instrumentName = #&quot;Double Bass&quot; }
      \bassMusic
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre><p>
 <a href="63/lily-1cd18f77.ly">
  <img align="middle"
       border="0"
       src="63/lily-1cd18f77.png"
       alt="[image of music]">
 </a>
</p>




<a name="ottava-text.ly"></a>

<hr size="6">
<a name="Pitches_003a-Ottava-text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-orchestra-choir-and-piano-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Orchestra choir and piano template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-preventing-extra-naturals-from-being-automatically-added" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Preventing extra naturals from being automatically added &gt; </a>]</td></tr></table>
<a name="pitches-ottava-text"></a>
<h2 class="unnumberedsec">Ottava text</h2>


<p>Internally, <code>\ottava</code> sets the properties <code>ottavation</code> (for
example, to <code>8va</code> or <code>8vb</code>) and <code>middleCPosition</code>.  To
override the text of the bracket, set <code>ottavation</code> after invoking
<code>\ottava</code>.
</p>

<pre class="verbatim">{
  \ottava #1
  \set Staff.ottavation = #&quot;8&quot;
  c''1
  \ottava #0
  c'1
  \ottava #1
  \set Staff.ottavation = #&quot;Text&quot;
  c''1
}
</pre><p>
 <a href="11/lily-fdce2e3d.ly">
  <img align="middle"
       border="0"
       src="11/lily-fdce2e3d.png"
       alt="[image of music]">
 </a>
</p>




<a name="preventing-extra-naturals-from-being-automatically-added.ly"></a>

<hr size="6">
<a name="Pitches_003a-Preventing-extra-naturals-from-being-automatically-added"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-ottava-text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Ottava text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-preventing-natural-signs-from-being-printed-when-the-key-signature-changes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Preventing natural signs from being printed when the key signature changes &gt; </a>]</td></tr></table>
<a name="pitches-preventing-extra-naturals-from-being-automatically-added"></a>
<h2 class="unnumberedsec">Preventing extra naturals from being automatically added</h2>


<p>In accordance with traditional typesetting rules, a natural sign is
printed before a sharp or flat if a previous double sharp or flat on
the same note  is canceled.  To change this behavior to contemporary
practice, set the  <code>extraNatural</code> property to <code>f</code> in the
<code>Staff</code> context.
</p>



<pre class="verbatim">\relative c'' {
  aeses4 aes ais a
  \set Staff.extraNatural = ##f
  aeses4 aes ais a
}
</pre><p>
 <a href="51/lily-90102ec5.ly">
  <img align="middle"
       border="0"
       src="51/lily-90102ec5.png"
       alt="[image of music]">
 </a>
</p>




<a name="preventing-natural-signs-from-being-printed-when-the-key-signature-changes.ly"></a>

<hr size="6">
<a name="Pitches_003a-Preventing-natural-signs-from-being-printed-when-the-key-signature-changes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-preventing-extra-naturals-from-being-automatically-added" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Preventing extra naturals from being automatically added&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-quoting-another-voice-with-transposition" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Quoting another voice with transposition &gt; </a>]</td></tr></table>
<a name="pitches-preventing-natural-signs-from-being-printed-when-the-key-signature-changes"></a>
<h2 class="unnumberedsec">Preventing natural signs from being printed when the key signature changes</h2>


<p>When the key signature changes, natural signs are automatically printed
to cancel any accidentals from previous key signatures.  This may be
prevented by setting to <code>f</code> the <code>printKeyCancellation</code>
property in the <code>Staff</code> context.
</p>

<pre class="verbatim">\relative c' {
  \key d \major
  a4 b cis d
  \key g \minor
  a4 bes c d
  \set Staff.printKeyCancellation = ##f
  \key d \major
  a4 b cis d
  \key g \minor
  a4 bes c d
}
</pre><p>
 <a href="c0/lily-f1bbb6f6.ly">
  <img align="middle"
       border="0"
       src="c0/lily-f1bbb6f6.png"
       alt="[image of music]">
 </a>
</p>




<a name="quoting-another-voice-with-transposition.ly"></a>

<hr size="6">
<a name="Pitches_003a-Quoting-another-voice-with-transposition"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-preventing-natural-signs-from-being-printed-when-the-key-signature-changes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Preventing natural signs from being printed when the key signature changes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-separating-key-cancellations-from-key-signature-changes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Separating key cancellations from key signature changes &gt; </a>]</td></tr></table>
<a name="pitches-quoting-another-voice-with-transposition"></a>
<h2 class="unnumberedsec">Quoting another voice with transposition</h2>


<p>Quotations take into account the transposition of both source and
target.  In this example, all instruments play sounding middle C; the
target is an instrument in F.  The target part may be transposed using
<code>\transpose</code>.  In this case, all the pitches (including the
quoted ones) are transposed.
</p>

<pre class="verbatim">}

\addQuote sax {
  \transposition es'
  \repeat unfold 16 { a8 }
}

quoteTest = {
  % french horn
  \transposition f
  g'4
  &lt;&lt; \quoteDuring #&quot;clarinet&quot; { \skip 4 } s4^&quot;clar.&quot; &gt;&gt;
  &lt;&lt; \quoteDuring #&quot;sax&quot; { \skip 4 } s4^&quot;sax.&quot; &gt;&gt;
  g'4
}

{
  \new Staff \with {
    instrumentName = \markup { \column { Horn &quot;in F&quot; } }
  }
  \quoteTest
  \transpose c' d' &lt;&lt; \quoteTest s4_&quot;up a tone&quot; &gt;&gt;
}
</pre><p>
 <a href="36/lily-cf60a827.ly">
  <img align="middle"
       border="0"
       src="36/lily-cf60a827.png"
       alt="[image of music]">
 </a>
</p>




<a name="separating-key-cancellations-from-key-signature-changes.ly"></a>

<hr size="6">
<a name="Pitches_003a-Separating-key-cancellations-from-key-signature-changes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-quoting-another-voice-with-transposition" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Quoting another voice with transposition&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-transposing-pitches-with-minimum-accidentals-_0028_0022smart_0022-transpose_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Transposing pitches with minimum accidentals (&quot;Smart&quot; transpose) &gt; </a>]</td></tr></table>
<a name="pitches-separating-key-cancellations-from-key-signature-changes"></a>
<h2 class="unnumberedsec">Separating key cancellations from key signature changes</h2>


<p>By default, the accidentals used for key cancellations are placed
adjacent to those for key signature changes.  This behavior can be
changed by overriding the <code>'break-align-orders</code> property of the
<code>BreakAlignment</code> grob.
</p>

<p>The value of <code>'break-align-orders</code> is a vector of length 3, with
quoted lists of breakable items as elements.  This example only
modifies the second list, moving <code>key-cancellation</code> before
<code>staff-bar</code>; by modifying the second list, break alignment
behavior only changes in the middle of a system, not at the beginning
or the end.
</p>

<pre class="verbatim">\new Staff {
  \override Score.BreakAlignment.break-align-orders =
    ##((left-edge ambitus breathing-sign clef staff-bar
                   key-cancellation key-signature time-signature custos)

        (left-edge ambitus breathing-sign clef key-cancellation
                   staff-bar key-signature time-signature custos)

        (left-edge ambitus breathing-sign clef key-cancellation
                   key-signature staff-bar time-signature custos))

  \key des \major
  c'1
  \bar &quot;||&quot;
  \key bes \major
  c'1
}
</pre><p>
 <a href="ad/lily-a28fa83e.ly">
  <img align="middle"
       border="0"
       src="ad/lily-a28fa83e.png"
       alt="[image of music]">
 </a>
</p>




<a name="transposing-pitches-with-minimum-accidentals-smart-transpose.ly"></a>

<hr size="6">
<a name="Pitches_003a-Transposing-pitches-with-minimum-accidentals-_0028_0022Smart_0022-transpose_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-separating-key-cancellations-from-key-signature-changes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Separating key cancellations from key signature changes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-tweaking-clef-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Tweaking clef properties &gt; </a>]</td></tr></table>
<a name="pitches-transposing-pitches-with-minimum-accidentals-_0028_0022smart_0022-transpose_0029"></a>
<h2 class="unnumberedsec">Transposing pitches with minimum accidentals (&quot;Smart&quot; transpose)</h2>


<p>This example uses some Scheme code to enforce enharmonic modifications
for notes in order to have the minimum number of accidentals.  In this
case, the following rules apply:
</p>
<p>Double accidentals should be removed
</p>

<p>B sharp -&gt; C
</p>

<p>E sharp -&gt; F
</p>

<p>C flat -&gt; B
</p>

<p>F flat -&gt; E
</p>

<p>In this manner, the most natural enharmonic notes are chosen.
</p>

<pre class="verbatim">#(define (naturalize-pitch p)
   (let ((o (ly:pitch-octave p))
         (a (* 4 (ly:pitch-alteration p)))
         ;; alteration, a, in quarter tone steps,
         ;; for historical reasons
         (n (ly:pitch-notename p)))
     (cond
      ((and (&gt; a 1) (or (eqv? n 6) (eqv? n 2)))
       (set! a (- a 2))
       (set! n (+ n 1)))
      ((and (&lt; a -1) (or (eqv? n 0) (eqv? n 3)))
       (set! a (+ a 2))
       (set! n (- n 1))))
     (cond
      ((&gt; a 2) (set! a (- a 4)) (set! n (+ n 1)))
      ((&lt; a -2) (set! a (+ a 4)) (set! n (- n 1))))
     (if (&lt; n 0) (begin (set! o (- o 1)) (set! n (+ n 7))))
     (if (&gt; n 6) (begin (set! o (+ o 1)) (set! n (- n 7))))
     (ly:make-pitch o n (/ a 4))))

#(define (naturalize music)
   (let ((es (ly:music-property music 'elements))
         (e (ly:music-property music 'element))
         (p (ly:music-property music 'pitch)))
     (if (pair? es)
         (ly:music-set-property!
          music 'elements
          (map naturalize es)))
     (if (ly:music? e)
         (ly:music-set-property!
          music 'element
          (naturalize e)))
     (if (ly:pitch? p)
         (begin
           (set! p (naturalize-pitch p))
           (ly:music-set-property! music 'pitch p)))
     music))

naturalizeMusic =
#(define-music-function (m)
   (ly:music?)
   (naturalize m))

music = \relative c' { c4 d e g }

\score {
  \new Staff {
    \transpose c ais { \music }
    \naturalizeMusic \transpose c ais { \music }
    \transpose c deses { \music }
    \naturalizeMusic \transpose c deses { \music }
  }
  \layout { }
}
</pre><p>
 <a href="3e/lily-6e454542.ly">
  <img align="middle"
       border="0"
       src="3e/lily-6e454542.png"
       alt="[image of music]">
 </a>
</p>




<a name="tweaking-clef-properties.ly"></a>

<hr size="6">
<a name="Pitches_003a-Tweaking-clef-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-transposing-pitches-with-minimum-accidentals-_0028_0022smart_0022-transpose_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Transposing pitches with minimum accidentals (&quot;Smart&quot; transpose)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#pitches-using-autochange-with-more-than-one-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Pitches: Using autochange with more than one voice &gt; </a>]</td></tr></table>
<a name="pitches-tweaking-clef-properties"></a>
<h2 class="unnumberedsec">Tweaking clef properties</h2>


<p>Changing the Clef glyph, its position, or the ottavation does not
change the position of subsequent notes on the staff.  To get key
signatures on their correct staff lines <code>middleCClefPosition</code> must
also be specified, with positive or negative values moving <code>middle
C</code> up or down respectively, relative to the staff&rsquo;s center line.
</p>

<p>For example, <code>\clef &quot;treble_8&quot;</code> is equivalent to setting the
<code>clefGlyph</code>, <code>clefPosition</code> (the vertical position of the
clef itself on the staff), <code>middleCPosition</code> and
<code>clefTransposition</code>. Note that when any of these properties
(except <code>middleCPosition</code>) are changed a new clef symbol is
printed.
</p>

<p>The following examples show the possibilities when setting these
properties manually. On the first line, the manual changes preserve the
standard relative positioning of clefs and notes, whereas on the second
line, they do not.
</p>

<pre class="verbatim">{
  % The default treble clef
  \key f \major
  c'1
  % The standard bass clef
  \set Staff.clefGlyph = #&quot;clefs.F&quot;
  \set Staff.clefPosition = #2
  \set Staff.middleCPosition = #6
  \set Staff.middleCClefPosition = #6
  \key g \major
  c'1
  % The baritone clef
  \set Staff.clefGlyph = #&quot;clefs.C&quot;
  \set Staff.clefPosition = #4
  \set Staff.middleCPosition = #4
  \set Staff.middleCClefPosition = #4
  \key f \major
  c'1
  % The standard choral tenor clef
  \set Staff.clefGlyph = #&quot;clefs.G&quot;
  \set Staff.clefPosition = #-2
  \set Staff.clefTransposition = #-7
  \set Staff.middleCPosition = #1
  \set Staff.middleCClefPosition = #1
  \key f \major
  c'1
  % A non-standard clef
  \set Staff.clefPosition = #0
  \set Staff.clefTransposition = #0
  \set Staff.middleCPosition = #-4
  \set Staff.middleCClefPosition = #-4
  \key g \major
  c'1 \break

  % The following clef changes do not preserve
  % the normal relationship between notes, key signatures
  % and clefs:

  \set Staff.clefGlyph = #&quot;clefs.F&quot;
  \set Staff.clefPosition = #2
  c'1
  \set Staff.clefGlyph = #&quot;clefs.G&quot;
  c'1
  \set Staff.clefGlyph = #&quot;clefs.C&quot;
  c'1
  \set Staff.clefTransposition = #7
  c'1
  \set Staff.clefTransposition = #0
  \set Staff.clefPosition = #0
  c'1

  % Return to the normal clef:

  \set Staff.middleCPosition = #0
  c'1
}
</pre><p>
 <a href="ef/lily-e1ff70ae.ly">
  <img align="middle"
       border="0"
       src="ef/lily-e1ff70ae.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-autochange-with-more-than-one-voice.ly"></a>

<hr size="6">
<a name="Pitches_003a-Using-autochange-with-more-than-one-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#rhythms" title="Next chapter">&nbsp;Rhythms &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-tweaking-clef-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Tweaking clef properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#pitches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Pitches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms &gt; </a>]</td></tr></table>
<a name="pitches-using-autochange-with-more-than-one-voice"></a>
<h2 class="unnumberedsec">Using autochange with more than one voice</h2>


<p>Using <code>autochange</code> with more than one voice.
</p>

<pre class="verbatim">\score
{
  \new PianoStaff
  &lt;&lt;
    \new Staff = &quot;up&quot; {
      &lt;&lt;
        \set Timing.beamExceptions = #'()
        \set Timing.beatStructure = #'(4)
        \new Voice {
          \voiceOne
          \autochange
          \relative c' {
            g8 a b c d e f g
            g,8 a b c d e f g
          }
        }

        \new Voice {
          \voiceTwo
          \autochange
          \relative c' {
            g8 a b c d e f g
            g,,8 a b c d e f g
          }
        }
      &gt;&gt;
    }

    \new Staff = &quot;down&quot; {
      \clef bass
    }
  &gt;&gt;
}
</pre><p>
 <a href="fc/lily-64bc4ffa.ly">
  <img align="middle"
       border="0"
       src="fc/lily-64bc4ffa.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Rhythms"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#pitches" title="Beginning of this chapter or previous chapter"> &lt;&lt; Pitches&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#pitches-using-autochange-with-more-than-one-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Pitches: Using autochange with more than one voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms &gt; </a>]</td></tr></table>
<a name="rhythms"></a>
<h1 class="unnumbered">Rhythms</h1>

<a name="index-Rhythms"></a>
<p><a href="notation-big-page.html#rhythms">Rhythms</a>
</p>

<a name="adding-beams,-slurs,-ties-etc.-when-using-tuplet-and-non-tuplet-rhythms.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-adding-drum-parts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Adding drum parts &gt; </a>]</td></tr></table>
<a name="rhythms-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms"></a>
<h2 class="unnumberedsec">Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms</h2>


<p>LilyPond syntax can involve many unusual placements for parentheses,
brackets etc., which might sometimes have to be interleaved. For
example, when entering a manual beam, the left square bracket has to be
placed after the starting note and its duration, not before. Similarly,
the right square bracket should directly follow the note which is to be
at the end of the requested beaming, even if this note happens to be
inside a tuplet section. This snippet demonstrates how to combine
manual beaming, manual slurs, ties and phrasing slurs with tuplet
sections (enclosed within curly braces).
</p>

<pre class="verbatim">{
  r16[ g16 \tuplet 3/2 { r16 e'8] }
  g16( a \tuplet 3/2 { b d e') }
  g8[( a \tuplet 3/2 { b d') e'] ~ }
  \time 2/4
  \tuplet 5/4 { e'32\( a b d' e' } a'4.\)
}
</pre><p>
 <a href="a3/lily-b7dd3413.ly">
  <img align="middle"
       border="0"
       src="a3/lily-b7dd3413.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-drum-parts.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Adding-drum-parts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-adjusting-grace-note-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Adjusting grace note spacing &gt; </a>]</td></tr></table>
<a name="rhythms-adding-drum-parts"></a>
<h2 class="unnumberedsec">Adding drum parts</h2>


<p>Using the powerful pre-configured tools such as the <code>\drummode</code>
function and the <code>DrumStaff</code> context, inputting drum parts is
quite easy: drums are placed at their own staff positions (with a
special clef symbol) and have note heads according to the drum.
Attaching an extra symbol to the drum or restricting the number of
lines is possible.
</p>

<pre class="verbatim">drl = \drummode {
        bd4 sn8 bd bd4 &lt;&lt; bd ss &gt;&gt;
        bd8 tommh tommh bd toml toml bd tomfh16 tomfh
      }
timb = \drummode {
         timh4 ssh timl8 ssh r timh r4
         ssh8 timl r4 cb8 cb
       }

\score {
  &lt;&lt;
    \new DrumStaff \with {
      instrumentName = #&quot;timbales&quot;
      drumStyleTable = #timbales-style
      \override StaffSymbol.line-count = #2
      \override BarLine.bar-extent = #'(-1 . 1)
    }
    &lt;&lt;
      \timb
    &gt;&gt;
    \new DrumStaff \with { instrumentName = #&quot;drums&quot; }
    &lt;&lt;
      \new DrumVoice { \stemUp \drh }
      \new DrumVoice { \stemDown \drl }
    &gt;&gt;
  &gt;&gt;
  \layout { }
  \midi { \tempo 4 = 120 }
}
</pre><p>
 <a href="ba/lily-1c5797ff.ly">
  <img align="middle"
       border="0"
       src="ba/lily-1c5797ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="adjusting-grace-note-spacing.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Adjusting-grace-note-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-adding-drum-parts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Adding drum parts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-aligning-bar-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Aligning bar numbers &gt; </a>]</td></tr></table>
<a name="rhythms-adjusting-grace-note-spacing"></a>
<h2 class="unnumberedsec">Adjusting grace note spacing</h2>


<p>The space given to grace notes can be adjusted using the
<code>spacing-increment</code> property of <code>Score.GraceSpacing</code>.
</p>

<pre class="verbatim">graceNotes = {
  \grace { c4 c8 c16 c32 }
  c8
}

\relative c'' {
  c8
  \graceNotes
  \override Score.GraceSpacing.spacing-increment = #2.0
  \graceNotes
  \revert Score.GraceSpacing.spacing-increment
  \graceNotes
}
</pre><p>
 <a href="e5/lily-7a764d96.ly">
  <img align="middle"
       border="0"
       src="e5/lily-7a764d96.png"
       alt="[image of music]">
 </a>
</p>




<a name="aligning-bar-numbers.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Aligning-bar-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-adjusting-grace-note-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Adjusting grace note spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-alternative-breve-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Alternative breve notes &gt; </a>]</td></tr></table>
<a name="rhythms-aligning-bar-numbers"></a>
<h2 class="unnumberedsec">Aligning bar numbers</h2>


<p>Bar numbers by default are right-aligned to their parent object. This
is usually the left edge of a line or, if numbers are printed within a
line, the left hand side of a bar line.  The numbers may also be
positioned directly over the bar line or left-aligned to the bar line.
</p>

<pre class="verbatim">\relative c' {
  \set Score.currentBarNumber = #111
  \override Score.BarNumber.break-visibility = #all-visible
  % Increase the size of the bar number by 2
  \override Score.BarNumber.font-size = #2
  % Print a bar number every second measure
  \set Score.barNumberVisibility = #(every-nth-bar-number-visible 2)
  c1 | c1
  % Center-align bar numbers
  \override Score.BarNumber.self-alignment-X = #CENTER
  c1 | c1
  % Left-align bar numbers
  \override Score.BarNumber.self-alignment-X = #LEFT
  c1 | c1
}
</pre><p>
 <a href="83/lily-561f78b0.ly">
  <img align="middle"
       border="0"
       src="83/lily-561f78b0.png"
       alt="[image of music]">
 </a>
</p>




<a name="alternative-breve-notes.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Alternative-breve-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-aligning-bar-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Aligning bar numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-automatic-beam-subdivisions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Automatic beam subdivisions &gt; </a>]</td></tr></table>
<a name="rhythms-alternative-breve-notes"></a>
<h2 class="unnumberedsec">Alternative breve notes</h2>


<p>Breve notes are also available with two vertical lines on each side of
the notehead instead of one line and in baroque style.
</p>

<pre class="verbatim">\relative c'' {
  \time 4/2
  c\breve |
  \override Staff.NoteHead.style = #'altdefault
  b\breve
  \override Staff.NoteHead.style = #'baroque
  b\breve
  \revert Staff.NoteHead.style
  a\breve
}
</pre><p>
 <a href="bf/lily-8f212743.ly">
  <img align="middle"
       border="0"
       src="bf/lily-8f212743.png"
       alt="[image of music]">
 </a>
</p>




<a name="automatic-beam-subdivisions.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Automatic-beam-subdivisions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-alternative-breve-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Alternative breve notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-automatically-change-durations" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Automatically change durations &gt; </a>]</td></tr></table>
<a name="rhythms-automatic-beam-subdivisions"></a>
<h2 class="unnumberedsec">Automatic beam subdivisions</h2>


<p>Beams can be subdivided automatically.  By setting the property
<code>subdivideBeams</code>, beams are subdivided at beat positions (as
specified in <code>baseMoment</code>).
</p>

<pre class="verbatim">\new Staff {
  \relative c'' {
    &lt;&lt;
      {
        \voiceOne
        \set subdivideBeams = ##t
        b32[ a g f c' b a g
        b32^&quot;subdivide beams&quot; a g f c' b a g]
      }
      \new Voice {
        \voiceTwo
        b32_&quot;default&quot;[ a g f c' b a g
        b32 a g f c' b a g]
      }
    &gt;&gt;
    \oneVoice
    \set baseMoment = #(ly:make-moment 1/8)
    \set beatStructure = 2,2,2,2
    b32^&quot;baseMoment 1 8&quot;[ a g f c' b a g]
    \set baseMoment = #(ly:make-moment 1/16)
    \set beatStructure = 4,4,4,4
    b32^&quot;baseMoment 1 16&quot;[ a g f c' b a g]
  }
}
</pre><p>
 <a href="8e/lily-5f2a81e6.ly">
  <img align="middle"
       border="0"
       src="8e/lily-5f2a81e6.png"
       alt="[image of music]">
 </a>
</p>




<a name="automatically-change-durations.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Automatically-change-durations"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-automatic-beam-subdivisions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Automatic beam subdivisions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-avoiding-collisions-with-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Avoiding collisions with chord fingerings &gt; </a>]</td></tr></table>
<a name="rhythms-automatically-change-durations"></a>
<h2 class="unnumberedsec">Automatically change durations</h2>


<p><code>shiftDurations</code> can be used to change the note lengths of a piece
of music. It takes two arguments - the scaling factor as a power of
two, and the number of dots to be added as a positive integer.
</p>

<pre class="verbatim">\paper { indent = 0 }

music = \relative c'' { a1 b2 c4 d8 r }

\score {
  \new Voice {
    \time 4/2
    \music
    \time 4/4
    \shiftDurations #1 #0 { \music }
    \time 2/4
    \shiftDurations #2 #0 { \music }
    \time 4/1
    \shiftDurations #-1 #0 { \music }
    \time 8/1
    \shiftDurations #-2 #0 { \music }
    \time 6/2
    \shiftDurations #0 #1 { \music }
    \time 7/2
    \shiftDurations #0 #2 { \music }
  }
}
</pre><p>
 <a href="a4/lily-f53695cd.ly">
  <img align="middle"
       border="0"
       src="a4/lily-f53695cd.png"
       alt="[image of music]">
 </a>
</p>




<a name="avoiding-collisions-with-chord-fingerings.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Avoiding-collisions-with-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-automatically-change-durations" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Automatically change durations&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-beam-endings-in-score-context" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Beam endings in Score context &gt; </a>]</td></tr></table>
<a name="rhythms-avoiding-collisions-with-chord-fingerings"></a>
<h2 class="unnumberedsec">Avoiding collisions with chord fingerings</h2>


<p>Fingerings and string numbers applied to individual notes will
automatically avoid beams and stems, but this is not true by default
for fingerings and string numbers applied to the individual notes of
chords.  The following example shows how this default behavior can be
overridden.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(up)
  \set stringNumberOrientations = #'(up)
  \set strokeFingerOrientations = #'(up)

  % Default behavior
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
  &lt;f c'-\rightHandFinger #2 &gt;8

  % No tweak needed
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
   % Corrected to avoid collisions
  \override StrokeFinger.add-stem-support = ##t
  &lt;f c'-\rightHandFinger #2 &gt;8
}
</pre><p>
 <a href="6d/lily-465697fc.ly">
  <img align="middle"
       border="0"
       src="6d/lily-465697fc.png"
       alt="[image of music]">
 </a>
</p>




<a name="beam-endings-in-score-context.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Beam-endings-in-Score-context"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-avoiding-collisions-with-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Avoiding collisions with chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-beams-across-line-breaks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Beams across line breaks &gt; </a>]</td></tr></table>
<a name="rhythms-beam-endings-in-score-context"></a>
<h2 class="unnumberedsec">Beam endings in Score context</h2>


<p>Beam-ending rules specified in the <code>Score</code> context apply to all
staves, but can be modified at both <code>Staff</code> and <code>Voice</code>
levels:
</p>

<pre class="verbatim">\relative c'' {
  \time 5/4
  % Set default beaming for all staves
  \set Score.baseMoment = #(ly:make-moment 1/8)
  \set Score.beatStructure = 3,4,3
  &lt;&lt;
    \new Staff {
      c8 c c c c c c c c c
    }
    \new Staff {
      % Modify beaming for just this staff
      \set Staff.beatStructure = 6,4
      c8 c c c c c c c c c
    }
    \new Staff {
      % Inherit beaming from Score context
      &lt;&lt;
        {
          \voiceOne
          c8 c c c c c c c c c
        }
        % Modify beaming for this voice only
        \new Voice {
          \voiceTwo
          \set Voice.beatStructure = 6,4
          a8 a a a a a a a a a
        }
      &gt;&gt;
    }
  &gt;&gt;
}
</pre><p>
 <a href="72/lily-15bb7ee1.ly">
  <img align="middle"
       border="0"
       src="72/lily-15bb7ee1.png"
       alt="[image of music]">
 </a>
</p>




<a name="beams-across-line-breaks.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Beams-across-line-breaks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-beam-endings-in-score-context" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Beam endings in Score context&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-changing-beam-knee-gap" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Changing beam knee gap &gt; </a>]</td></tr></table>
<a name="rhythms-beams-across-line-breaks"></a>
<h2 class="unnumberedsec">Beams across line breaks</h2>


<p>Line breaks are normally forbidden when beams cross bar lines. This
behavior can be changed as shown:
</p>

<pre class="verbatim">\relative c'' {
  \override Beam.breakable = ##t
  c8 c[ c] c[ c] c[ c] c[ \break
  c8] c[ c] c[ c] c[ c] c
}
</pre><p>
 <a href="80/lily-3a3752c3.ly">
  <img align="middle"
       border="0"
       src="80/lily-3a3752c3.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-beam-knee-gap.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Changing-beam-knee-gap"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-beams-across-line-breaks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Beams across line breaks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-changing-form-of-multi_002dmeasure-rests" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Changing form of multi-measure rests &gt; </a>]</td></tr></table>
<a name="rhythms-changing-beam-knee-gap"></a>
<h2 class="unnumberedsec">Changing beam knee gap</h2>


<p>Kneed beams are inserted automatically when a large gap is detected
between the note heads.  This behavior can be tuned through the
<code>auto-knee-gap</code> property.  A kneed beam is drawn if the gap is
larger than the value of <code>auto-knee-gap</code> plus the width of the
beam object  (which depends on the duration of the notes and the slope
of the beam). By default <code>auto-knee-gap</code> is set to 5.5 staff
spaces.
</p>

<pre class="verbatim">{
  f8 f''8 f8 f''8
  \override Beam.auto-knee-gap = #6
  f8 f''8 f8 f''8
}
</pre><p>
 <a href="7d/lily-65d08cfd.ly">
  <img align="middle"
       border="0"
       src="7d/lily-65d08cfd.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-form-of-multi-measure-rests.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Changing-form-of-multi_002dmeasure-rests"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-changing-beam-knee-gap" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Changing beam knee gap&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-changing-the-number-of-augmentation-dots-per-note" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Changing the number of augmentation dots per note &gt; </a>]</td></tr></table>
<a name="rhythms-changing-form-of-multi_002dmeasure-rests"></a>
<h2 class="unnumberedsec">Changing form of multi-measure rests</h2>


<p>If there are ten or fewer measures of rests, a series of longa and
breve rests (called in German &ldquo;Kirchenpausen&rdquo; - church rests) is
printed within the staff; otherwise a simple line is shown. This
default number of ten may be changed by overriding the
<code>expand-limit</code> property.
</p>

<pre class="verbatim">\relative c'' {
  \compressMMRests {
    R1*2 | R1*5 | R1*9
    \override MultiMeasureRest.expand-limit = #3
    R1*2 | R1*5 | R1*9
  }
}
</pre><p>
 <a href="b0/lily-db2953f8.ly">
  <img align="middle"
       border="0"
       src="b0/lily-db2953f8.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-number-of-augmentation-dots-per-note.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Changing-the-number-of-augmentation-dots-per-note"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-changing-form-of-multi_002dmeasure-rests" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Changing form of multi-measure rests&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-changing-the-tempo-without-a-metronome-mark" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Changing the tempo without a metronome mark &gt; </a>]</td></tr></table>
<a name="rhythms-changing-the-number-of-augmentation-dots-per-note"></a>
<h2 class="unnumberedsec">Changing the number of augmentation dots per note</h2>


<p>The number of augmentation dots on a single note can be changed
indepently of the dots placed after the note.
</p>

<pre class="verbatim">\relative c' {
  c4.. a16 r2 |
  \override Dots.dot-count = #4
  c4.. a16 r2 |
  \override Dots.dot-count = #0
  c4.. a16 r2 |
  \revert Dots.dot-count
  c4.. a16 r2 |
}
</pre><p>
 <a href="30/lily-31d4da67.ly">
  <img align="middle"
       border="0"
       src="30/lily-31d4da67.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-tempo-without-a-metronome-mark.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Changing-the-tempo-without-a-metronome-mark"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-changing-the-number-of-augmentation-dots-per-note" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Changing the number of augmentation dots per note&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-changing-the-tuplet-number" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Changing the tuplet number &gt; </a>]</td></tr></table>
<a name="rhythms-changing-the-tempo-without-a-metronome-mark"></a>
<h2 class="unnumberedsec">Changing the tempo without a metronome mark</h2>


<p>To change the tempo in MIDI output without printing anything, make the
metronome mark invisible.
</p>

<pre class="verbatim">\score {
  \new Staff \relative c' {
    \tempo 4 = 160
    c4 e g b
    c4 b d c
    \set Score.tempoHideNote = ##t
    \tempo 4 = 96
    d,4 fis a cis
    d4 cis e d
  }
  \layout { }
  \midi { }
}
</pre><p>
 <a href="87/lily-510c90fa.ly">
  <img align="middle"
       border="0"
       src="87/lily-510c90fa.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-tuplet-number.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Changing-the-tuplet-number"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-changing-the-tempo-without-a-metronome-mark" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Changing the tempo without a metronome mark&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Changing time signatures inside a polymetric section using \scaleDurations &gt; </a>]</td></tr></table>
<a name="rhythms-changing-the-tuplet-number"></a>
<h2 class="unnumberedsec">Changing the tuplet number</h2>


<p>By default, only the numerator of the tuplet number is printed over the
tuplet bracket, i.e., the numerator of the argument to the
<code>\tuplet</code> command.
</p>
<p>Alternatively, num:den of the tuplet number may be printed, or the
tuplet number may be suppressed altogether.
</p>

<pre class="verbatim">\relative c'' {
  \tuplet 3/2 { c8 c c }
  \tuplet 3/2 { c8 c c }
  \override TupletNumber.text = #tuplet-number::calc-fraction-text
  \tuplet 3/2 { c8 c c }
  \omit TupletNumber
  \tuplet 3/2 { c8 c c }
}
</pre><p>
 <a href="6e/lily-76b5a8b9.ly">
  <img align="middle"
       border="0"
       src="6e/lily-76b5a8b9.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-time-signatures-inside-a-polymetric-section-using--scaledurations.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Changing-time-signatures-inside-a-polymetric-section-using-_005cscaleDurations"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-changing-the-tuplet-number" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Changing the tuplet number&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-chant-or-psalms-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Chant or psalms notation &gt; </a>]</td></tr></table>
<a name="rhythms-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations"></a>
<h2 class="unnumberedsec">Changing time signatures inside a polymetric section using \scaleDurations</h2>


<p>The <code>measureLength</code> property, together with
<code>measurePosition</code>, determines when a bar line is needed.  However,
when using <code>\scaleDurations</code>, the scaling of durations makes it
difficult to change time signatures.  In this case,
<code>measureLength</code> should be set manually, using the
<code>ly:make-moment</code> callback.  The second argument must be the same
as the second argument of <code>\scaleDurations</code>.
</p>

<pre class="verbatim">\layout {
  \context {
    \Score
    \remove &quot;Timing_translator&quot;
    \remove &quot;Default_bar_line_engraver&quot;
  }
  \context {
    \Staff
    \consists &quot;Timing_translator&quot;
    \consists &quot;Default_bar_line_engraver&quot;
  }
}

&lt;&lt;
  \new Staff {
    \scaleDurations 8/5 {
      \time 6/8
      \set Timing.measureLength = #(ly:make-moment 6/5)
      b8 b b b b b
      \time 2/4
      \set Timing.measureLength = #(ly:make-moment 4/5)
      b4 b
    }
  }
  \new Staff {
    \clef bass
    \time 2/4
    c2 d e f
  }
&gt;&gt;
</pre><p>
 <a href="96/lily-f94ae815.ly">
  <img align="middle"
       border="0"
       src="96/lily-f94ae815.png"
       alt="[image of music]">
 </a>
</p>




<a name="chant-or-psalms-notation.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Chant-or-psalms-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Changing time signatures inside a polymetric section using \scaleDurations&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-compound-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Compound time signatures &gt; </a>]</td></tr></table>
<a name="rhythms-chant-or-psalms-notation"></a>
<h2 class="unnumberedsec">Chant or psalms notation</h2>


<p>This form of notation is used for Psalm chant, where verses aren&rsquo;t
always the same length.
</p>

<pre class="verbatim">stemOff = \hide Staff.Stem
stemOn  = \undo \stemOff

\score {
  \new Staff \with { \remove &quot;Time_signature_engraver&quot; }
  {
    \key g \minor
    \cadenzaOn
    \stemOff a'\breve bes'4 g'4
    \stemOn a'2 \bar &quot;||&quot;
    \stemOff a'\breve g'4 a'4
    \stemOn f'2 \bar &quot;||&quot;
    \stemOff a'\breve^\markup { \italic flexe }
    \stemOn g'2 \bar &quot;||&quot;
  }
}
</pre><p>
 <a href="6c/lily-0d850cf4.ly">
  <img align="middle"
       border="0"
       src="6c/lily-0d850cf4.png"
       alt="[image of music]">
 </a>
</p>




<a name="compound-time-signatures.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Compound-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-chant-or-psalms-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Chant or psalms notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-conducting-signs-measure-grouping-signs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Conducting signs measure grouping signs &gt; </a>]</td></tr></table>
<a name="rhythms-compound-time-signatures"></a>
<h2 class="unnumberedsec">Compound time signatures</h2>


<p>Odd 20th century time signatures (such as &quot;5/8&quot;) can often be played
as compound time signatures (e.g. &quot;3/8 + 2/8&quot;), which combine two or
more inequal metrics.
</p>
<p>LilyPond can make such music quite easy to read and play, by explicitly
printing the compound time signatures and adapting the automatic
beaming behavior.
</p>

<pre class="verbatim">\relative c' {
  \compoundMeter #'((2 8) (3 8))
  c8 d e fis gis
  c8 fis, gis e d
  c8 d e4 gis8
}
</pre><p>
 <a href="25/lily-37d64ba3.ly">
  <img align="middle"
       border="0"
       src="25/lily-37d64ba3.png"
       alt="[image of music]">
 </a>
</p>




<a name="conducting-signs,-measure-grouping-signs.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Conducting-signs-measure-grouping-signs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-compound-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Compound time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-consistently-left-aligned-bar-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Consistently left aligned bar numbers &gt; </a>]</td></tr></table>
<a name="rhythms-conducting-signs-measure-grouping-signs"></a>
<h2 class="unnumberedsec">Conducting signs measure grouping signs</h2>


<p>Beat grouping within a measure is controlled by the context property
<code>beatStructure</code>.  Values of <code>beatStructure</code> are established
for many time signatures in <code>scm/time-signature-settings.scm</code>.
Values of <code>beatStructure</code> can be changed or set with <code>\set</code>.
Alternatively, <code>\time</code> can be used to both set the time signature
and establish the beat structure. For this, you specify the internal
grouping of beats in a measure as a list of numbers (in Scheme syntax)
before the time signature.
</p>
<p><code>\time</code> applies to the <code>Timing</code> context, so it will not
reset values of <code>beatStructure</code> or <code>baseMoment</code> that are set
in other lower-level contexts, such as <code>Voice</code>.
</p>
<p>If the <code>Measure_grouping_engraver</code> is included in one of the
display contexts, measure grouping signs will be created.  Such signs
ease reading rhythmically complex modern music. In the example, the 9/8
measure is grouped in two different patterns using the two different
methods, while the 5/8 measure is grouped according to the default
setting in <code>scm/time-signature-settings.scm</code>:
</p>

<pre class="verbatim">\score {
  \new Voice \relative c'' {
    \time 9/8
    g8 g d d g g a( bes g) |
    \set Timing.beatStructure = 2,2,2,3
    g8 g d d g g a( bes g) |
    \time 4,5 9/8
    g8 g d d g g a( bes g) |
    \time 5/8
    a4. g4 |
  }
  \layout {
    \context {
      \Staff
      \consists &quot;Measure_grouping_engraver&quot;
    }
  }
}
</pre><p>
 <a href="8a/lily-fa2929c5.ly">
  <img align="middle"
       border="0"
       src="8a/lily-fa2929c5.png"
       alt="[image of music]">
 </a>
</p>




<a name="consistently-left-aligned-bar-numbers.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Consistently-left-aligned-bar-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-conducting-signs-measure-grouping-signs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Conducting signs measure grouping signs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-controlling-tuplet-bracket-visibility" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Controlling tuplet bracket visibility &gt; </a>]</td></tr></table>
<a name="rhythms-consistently-left-aligned-bar-numbers"></a>
<h2 class="unnumberedsec">Consistently left aligned bar numbers</h2>


<p>When left aligning bar numbers, overlapping problems may occur with
Staves brackets.  The snippet solves this by keeping right aligned the
first bar number following line breaks.
</p>

<pre class="verbatim">consistentlyLeftAlignedBarNumbers = {
  \override Score.BarNumber.break-visibility = #end-of-line-invisible
  \override Score.BarNumber.self-alignment-X =
    #(lambda (grob)
       (let ((break-dir (ly:item-break-dir grob)))
         (if (= break-dir RIGHT) RIGHT LEFT)))
}

\new ChoirStaff &lt;&lt;
  \new Staff {
    \relative c' {
      \set Score.barNumberVisibility = #(every-nth-bar-number-visible 3)
      \bar &quot;&quot;
      \consistentlyLeftAlignedBarNumbers

      \set Score.currentBarNumber = #112
      \repeat unfold 8 { R1 }
      \break
      \repeat unfold 9 { R1 }
      \break
      \repeat unfold 7 { R1 }
    }
  }
  \new Staff {
    \relative c' {
      \repeat unfold 24 { R1 }
    }
  }
&gt;&gt;

\layout {
  indent = #0
  ragged-right = ##t
  ragged-last = ##t
}
</pre><p>
 <a href="4b/lily-556ea25c.ly">
  <img align="middle"
       border="0"
       src="4b/lily-556ea25c.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-tuplet-bracket-visibility.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Controlling-tuplet-bracket-visibility"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-consistently-left-aligned-bar-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Consistently left aligned bar numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-creating-metronome-marks-in-markup-mode" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Creating metronome marks in markup mode &gt; </a>]</td></tr></table>
<a name="rhythms-controlling-tuplet-bracket-visibility"></a>
<h2 class="unnumberedsec">Controlling tuplet bracket visibility</h2>


<p>The default behavior of tuplet-bracket visibility is to print a bracket
unless there is a beam of the same length as the tuplet. To control the
visibility of tuplet brackets, set the property
<code>'bracket-visibility</code> to either <code>#t</code> (always print a
bracket), <code>#f</code> (never print a bracket) or <code>#'if-no-beam</code>
(only print a bracket if there is no beam).
</p>

<pre class="verbatim">music = \relative c'' {
  \tuplet 3/2 { c16[ d e } f8]
  \tuplet 3/2 { c8 d e }
  \tuplet 3/2 { c4 d e }
}

\new Voice {
  \relative c' {
    &lt;&lt; \music s4^&quot;default&quot; &gt;&gt;
    \override TupletBracket.bracket-visibility = #'if-no-beam
    &lt;&lt; \music s4^&quot;'if-no-beam&quot; &gt;&gt;
    \override TupletBracket.bracket-visibility = ##t
    &lt;&lt; \music s4^&quot;#t&quot; &gt;&gt;
    \override TupletBracket.bracket-visibility = ##f
    &lt;&lt; \music s4^&quot;#f&quot; &gt;&gt;
    %% v2.18 :
    \omit TupletBracket
    &lt;&lt; \music s4^&quot;omit&quot; &gt;&gt;
  }
}
</pre><p>
 <a href="5c/lily-0cebca2f.ly">
  <img align="middle"
       border="0"
       src="5c/lily-0cebca2f.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-metronome-marks-in-markup-mode.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Creating-metronome-marks-in-markup-mode"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-controlling-tuplet-bracket-visibility" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Controlling tuplet bracket visibility&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-engraving-ties-manually" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Engraving ties manually &gt; </a>]</td></tr></table>
<a name="rhythms-creating-metronome-marks-in-markup-mode"></a>
<h2 class="unnumberedsec">Creating metronome marks in markup mode</h2>


<p>New metronome marks can be created in markup mode, but they will not
change the tempo in MIDI output.
</p>

<pre class="verbatim">\relative c' {
  \tempo \markup {
    \concat {
      (
      \smaller \general-align #Y #DOWN \note #&quot;16.&quot; #1
      &quot; = &quot;
      \smaller \general-align #Y #DOWN \note #&quot;8&quot; #1
      )
    }
  }
  c1
  c4 c' c,2
}
</pre><p>
 <a href="c7/lily-01c546cf.ly">
  <img align="middle"
       border="0"
       src="c7/lily-01c546cf.png"
       alt="[image of music]">
 </a>
</p>




<a name="engraving-ties-manually.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Engraving-ties-manually"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-creating-metronome-marks-in-markup-mode" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Creating metronome marks in markup mode&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-engraving-tremolos-with-floating-beams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Engraving tremolos with floating beams &gt; </a>]</td></tr></table>
<a name="rhythms-engraving-ties-manually"></a>
<h2 class="unnumberedsec">Engraving ties manually</h2>


<p>Ties may be engraved manually by changing the <code>tie-configuration</code>
property of the <code>TieColumn</code> object. The first number indicates the
distance from the center of the staff in half staff-spaces, and the
second number indicates the direction (1 = up, -1 = down).
</p>

<pre class="verbatim">\relative c' {
  &lt;c e g&gt;2~ &lt;c e g&gt;
  \override TieColumn.tie-configuration =
    #'((0.0 . 1) (-2.0 . 1) (-4.0 . 1))
  &lt;c e g&gt;2~ &lt;c e g&gt;
}
</pre><p>
 <a href="57/lily-789f1b60.ly">
  <img align="middle"
       border="0"
       src="57/lily-789f1b60.png"
       alt="[image of music]">
 </a>
</p>




<a name="engraving-tremolos-with-floating-beams.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Engraving-tremolos-with-floating-beams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-engraving-ties-manually" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Engraving ties manually&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-entering-several-tuplets-using-only-one-_005ctuplet-command" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Entering several tuplets using only one \tuplet command &gt; </a>]</td></tr></table>
<a name="rhythms-engraving-tremolos-with-floating-beams"></a>
<h2 class="unnumberedsec">Engraving tremolos with floating beams</h2>


<p>If a tremolo&rsquo;s total duration is less than a quarter-note, or exactly a
half-note, or between a half-note and a whole-note, it is normally
typeset with all beams touching the stems.  Certain engraving styles
typeset some of these beams as centered floating beams that do not
touch the stems.  The number of floating beams in this type of tremolo
is controlled with the <code>'gap-count </code> property of the <code>Beam</code>
object, and the size of the gaps between beams and stems is set with
the <code>'gap</code> property.
</p>



<pre class="verbatim">\relative c'' {
  \repeat tremolo 8 { a32 f }
  \override Beam.gap-count = #1
  \repeat tremolo 8 { a32 f }
  \override Beam.gap-count = #2
  \repeat tremolo 8 { a32 f }
  \override Beam.gap-count = #3
  \repeat tremolo 8 { a32 f }

  \override Beam.gap-count = #3
  \override Beam.gap = #1.33
  \repeat tremolo 8 { a32 f }
  \override Beam.gap = #1
  \repeat tremolo 8 { a32 f }
  \override Beam.gap = #0.67
  \repeat tremolo 8 { a32 f }
  \override Beam.gap = #0.33
  \repeat tremolo 8 { a32 f }
}
</pre><p>
 <a href="1e/lily-ba6a8ebe.ly">
  <img align="middle"
       border="0"
       src="1e/lily-ba6a8ebe.png"
       alt="[image of music]">
 </a>
</p>




<a name="entering-several-tuplets-using-only-one--tuplet-command.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Entering-several-tuplets-using-only-one-_005ctuplet-command"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-engraving-tremolos-with-floating-beams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Engraving tremolos with floating beams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-flat-flags-and-beam-nibs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Flat flags and beam nibs &gt; </a>]</td></tr></table>
<a name="rhythms-entering-several-tuplets-using-only-one-_005ctuplet-command"></a>
<h2 class="unnumberedsec">Entering several tuplets using only one \tuplet command</h2>


<p>The property <code>tupletSpannerDuration</code> sets how long each of the
tuplets contained within the brackets after <code>\tuplet</code> should
last. Many consecutive tuplets can then be placed within a single
<code>\tuplet</code> expression, thus saving typing.
</p>
<p>There are several ways to set <code>tupletSpannerDuration</code>.  The
command <code>\tupletSpan</code> sets it to a given duration, and clears it
when instead of a duration <code>\default</code> is specified.  Another way
is to use an optional argument with <code>\tuplet</code>.
</p>

<pre class="verbatim">\relative c' {
  \time 2/4
  \tupletSpan 4
  \tuplet 3/2 { c8^&quot;\\tupletSpan 4&quot; c c c c c }
  \tupletSpan \default
  \tuplet 3/2 { c8^&quot;\\tupletSpan \\default&quot; c c c c c }
  \tuplet 3/2 4 { c8^&quot;\\tuplet 3/2 4 {...}&quot; c c c c c }
}
</pre><p>
 <a href="d4/lily-f57c0d01.ly">
  <img align="middle"
       border="0"
       src="d4/lily-f57c0d01.png"
       alt="[image of music]">
 </a>
</p>




<a name="flat-flags-and-beam-nibs.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Flat-flags-and-beam-nibs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-entering-several-tuplets-using-only-one-_005ctuplet-command" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Entering several tuplets using only one \tuplet command&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-forcing-rehearsal-marks-to-start-from-a-given-letter-or-number" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Forcing rehearsal marks to start from a given letter or number &gt; </a>]</td></tr></table>
<a name="rhythms-flat-flags-and-beam-nibs"></a>
<h2 class="unnumberedsec">Flat flags and beam nibs</h2>


<p> Flat flags on lone notes and beam nibs at the ends of beamed figures
are both possible with a combination of <code>stemLeftBeamCount</code>,
<code>stemRightBeamCount</code> and paired <code>[]</code> beam indicators.
</p>



<p>For right-pointing flat flags on lone notes, use paired <code>[]</code> beam
indicators and set <code>stemLeftBeamCount</code> to zero (see Example 1).
</p>



<p>For left-pointing flat flags, set <code>stemRightBeamCount</code> instead
(Example 2).
</p>



<p>For right-pointing nibs at the end of a run of beamed notes, set
<code>stemRightBeamCount</code> to a positive value. And for left-pointing
nibs at the start of a run of beamed notes, set
<code>stemLeftBeamCount</code> instead (Example 3).
</p>



<p>Sometimes it may make sense for a lone note surrounded by rests to
carry both a left- and right-pointing flat flag. Do this with paired
<code>[]</code> beam indicators alone (Example 4).
</p>



<p>(Note that <code>\set stemLeftBeamCount</code> is always equivalent to
<code>\once \set</code>.  In other words, the beam count settings are not
&ldquo;sticky&rdquo;, so the pair of flat flags attached to the lone
<code>16[]</code> in the last example have nothing to do with the
<code>\set</code> two notes prior.)
</p>




<pre class="verbatim">\score {
  &lt;&lt;
    % Example 1
    \new RhythmicStaff {
      \set stemLeftBeamCount = #0
      c16[]
      r8.
    }
    % Example 2
    \new RhythmicStaff {
      r8.
      \set stemRightBeamCount = #0
      16[]
    }
    % Example 3
    \new RhythmicStaff {
      16 16
      \set stemRightBeamCount = #2
      16 r r
      \set stemLeftBeamCount = #2
      16 16 16
    }
    % Example 4
    \new RhythmicStaff {
      16 16
      \set stemRightBeamCount = #2
      16 r16
      16[]
      r16
      \set stemLeftBeamCount = #2
      16 16
    }
  &gt;&gt;
}
</pre><p>
 <a href="3e/lily-cf452dc1.ly">
  <img align="middle"
       border="0"
       src="3e/lily-cf452dc1.png"
       alt="[image of music]">
 </a>
</p>




<a name="forcing-rehearsal-marks-to-start-from-a-given-letter-or-number.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Forcing-rehearsal-marks-to-start-from-a-given-letter-or-number"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-flat-flags-and-beam-nibs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Flat flags and beam nibs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-generating-custom-flags" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Generating custom flags &gt; </a>]</td></tr></table>
<a name="rhythms-forcing-rehearsal-marks-to-start-from-a-given-letter-or-number"></a>
<h2 class="unnumberedsec">Forcing rehearsal marks to start from a given letter or number</h2>


<p>This snippet demonstrates how to obtain automatic ordered rehearsal
marks, but from the letter or number desired.
</p>

<pre class="verbatim">\relative c'' {
  c1 \mark \default
  c1 \mark \default
  c1 \mark \default
  c1 \mark #14
  c1 \mark \default
  c1 \mark \default
  c1 \mark \default
  c1
  \break
  \set Score.markFormatter = #format-mark-numbers
  c1 \mark #1
  c1 \mark \default
  c1 \mark \default
  c1 \mark \default
  c1 \mark #14
  c1 \mark \default
  c1 \mark \default
  c1 \mark \default
  c1
}
</pre><p>
 <a href="63/lily-8ca56e86.ly">
  <img align="middle"
       border="0"
       src="63/lily-8ca56e86.png"
       alt="[image of music]">
 </a>
</p>




<a name="generating-custom-flags.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Generating-custom-flags"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-forcing-rehearsal-marks-to-start-from-a-given-letter-or-number" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Forcing rehearsal marks to start from a given letter or number&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-guitar-strum-rhythms" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Guitar strum rhythms &gt; </a>]</td></tr></table>
<a name="rhythms-generating-custom-flags"></a>
<h2 class="unnumberedsec">Generating custom flags</h2>


<p>The <code>stencil</code> property of the <code>Flag</code> grob can be set to a
custom scheme function to generate the glyph for the flag.
</p>

<pre class="verbatim">#(define-public (weight-flag grob)
   (let* ((stem-grob (ly:grob-parent grob X))
          (log (- (ly:grob-property stem-grob 'duration-log) 2))
          (is-up? (eqv? (ly:grob-property stem-grob 'direction) UP))
          (yext (if is-up? (cons (* log -0.8) 0) (cons 0 (* log 0.8))))
          (flag-stencil (make-filled-box-stencil '(-0.4 . 0.4) yext))
          (stroke-style (ly:grob-property grob 'stroke-style))
          (stroke-stencil (if (equal? stroke-style &quot;grace&quot;)
                              (make-line-stencil 0.2 -0.9 -0.4 0.9 -0.4)
                              empty-stencil)))
     (ly:stencil-add flag-stencil stroke-stencil)))


% Create a flag stencil by looking up the glyph from the font
#(define (inverted-flag grob)
   (let* ((stem-grob (ly:grob-parent grob X))
          (dir (if (eqv? (ly:grob-property stem-grob 'direction) UP) &quot;d&quot; &quot;u&quot;))
          (flag (retrieve-glyph-flag &quot;&quot; dir &quot;&quot; grob))
          (line-thickness (ly:staff-symbol-line-thickness grob))
          (stem-thickness (ly:grob-property stem-grob 'thickness))
          (stem-width (* line-thickness stem-thickness))
          (stroke-style (ly:grob-property grob 'stroke-style))
          (stencil (if (null? stroke-style)
                       flag
                       (add-stroke-glyph flag stem-grob dir stroke-style &quot;&quot;)))
          (rotated-flag (ly:stencil-rotate-absolute stencil 180 0 0)))
     (ly:stencil-translate rotated-flag (cons (- (/ stem-width 2)) 0))))

snippetexamplenotes =
{
  \autoBeamOff c'8 d'16 c'32 d'64 \acciaccatura {c'8} d'64
}

{
  \override Score.RehearsalMark.self-alignment-X = #LEFT
  \time 1/4
  \mark &quot;Normal flags&quot;
  \snippetexamplenotes

  \mark &quot;Custom flag: inverted&quot;
  \override Flag.stencil = #inverted-flag
  \snippetexamplenotes

  \mark &quot;Custom flag: weight&quot;
  \override Flag.stencil = #weight-flag
  \snippetexamplenotes

  \mark &quot;Revert to normal&quot;
  \revert Flag.stencil
  \snippetexamplenotes
}
</pre><p>
 <a href="7f/lily-609598b1.ly">
  <img align="middle"
       border="0"
       src="7f/lily-609598b1.png"
       alt="[image of music]">
 </a>
</p>




<a name="guitar-strum-rhythms.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Guitar-strum-rhythms"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-generating-custom-flags" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Generating custom flags&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-heavily-customized-polymetric-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Heavily customized polymetric time signatures &gt; </a>]</td></tr></table>
<a name="rhythms-guitar-strum-rhythms"></a>
<h2 class="unnumberedsec">Guitar strum rhythms</h2>


<p>For guitar music, it is possible to show strum rhythms, along with
melody notes, chord names and fret diagrams.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;
&lt;&lt;
  \new ChordNames {
    \chordmode {
      c1 | f | g | c
    }
  }
  \new FretBoards {
    \chordmode {
      c1 | f | g | c
    }
  }
  \new Voice \with {
    \consists &quot;Pitch_squash_engraver&quot;
  } {
    \relative c'' {
      \improvisationOn
      c4 c8 c c4 c8 c
      f4 f8 f f4 f8 f
      g4 g8 g g4 g8 g
      c4 c8 c c4 c8 c
    }
  }
  \new Voice = &quot;melody&quot; {
    \relative c'' {
      c2 e4 e4
      f2. r4
      g2. a4
      e4 c2.
    }
  }
  \new Lyrics {
    \lyricsto &quot;melody&quot; {
      This is my song.
      I like to sing.
    }
  }
&gt;&gt;
</pre><p>
 <a href="94/lily-7a7e0333.ly">
  <img align="middle"
       border="0"
       src="94/lily-7a7e0333.png"
       alt="[image of music]">
 </a>
</p>




<a name="heavily-customized-polymetric-time-signatures.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Heavily-customized-polymetric-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-guitar-strum-rhythms" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Guitar strum rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-making-an-object-invisible-with-the-_0027transparent-property" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Making an object invisible with the 'transparent property &gt; </a>]</td></tr></table>
<a name="rhythms-heavily-customized-polymetric-time-signatures"></a>
<h2 class="unnumberedsec">Heavily customized polymetric time signatures</h2>


<p>Though the polymetric time signature shown was not the most essential
item here, it has been included to show the beat of this piece (which
is the template of a real Balkan song!).
</p>

<pre class="verbatim">drum = \new DrumStaff \drummode {
  \bar &quot;.|:&quot; bd4.^\markup { Drums } sn4 bd \bar &quot;;&quot; sn4.
  bd4 sn \bar &quot;;&quot; bd sn bd4. sn4 bd \bar &quot;:|.&quot;
}

  \new Staff \with {
    instrumentName = \markup { \concat { &quot;B&quot; \flat &quot; Sop.&quot; } }
  }

{
  \melody
  \drum
}
</pre><p>
 <a href="97/lily-5f9d780a.ly">
  <img align="middle"
       border="0"
       src="97/lily-5f9d780a.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-an-object-invisible-with-the-transparent-property.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Making-an-object-invisible-with-the-_0027transparent-property"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-heavily-customized-polymetric-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Heavily customized polymetric time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-making-slurs-with-complex-dash-structure" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Making slurs with complex dash structure &gt; </a>]</td></tr></table>
<a name="rhythms-making-an-object-invisible-with-the-_0027transparent-property"></a>
<h2 class="unnumberedsec">Making an object invisible with the &rsquo;transparent property</h2>


<p>Setting the <code>transparent</code> property will cause an object to be
printed in &ldquo;invisible ink&rdquo;: the object is not printed, but all its
other behavior is retained.  The object still takes up space, it takes
part in collisions, and slurs, ties and beams can be attached to it.
</p>

<p>This snippet demonstrates how to connect different voices using ties.
Normally, ties only connect two notes in the same voice.  By
introducing a tie in a different voice, and blanking the first up-stem
in that voice, the tie appears to cross voices.
</p>

<pre class="verbatim">\relative {
  \time 2/4
  &lt;&lt;
    {
      \once \hide Stem
      \once \override Stem.length = #8
      b'8 ~ 8\noBeam
      \once \hide Stem
      \once \override Stem.length = #8
      g8 ~ 8\noBeam
    }
    \\
    {
      b8 g g e
    }
  &gt;&gt;
}
</pre><p>
 <a href="dc/lily-8e5a911e.ly">
  <img align="middle"
       border="0"
       src="dc/lily-8e5a911e.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-slurs-with-complex-dash-structure.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Making-slurs-with-complex-dash-structure"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-making-an-object-invisible-with-the-_0027transparent-property" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Making an object invisible with the 'transparent property&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-manually-controlling-beam-positions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Manually controlling beam positions &gt; </a>]</td></tr></table>
<a name="rhythms-making-slurs-with-complex-dash-structure"></a>
<h2 class="unnumberedsec">Making slurs with complex dash structure</h2>


<p>Slurs can be made with complex dash patterns by defining the
<code>dash-definition</code> property.  <code>dash-definition</code> is a list of
<code>dash-elements</code>.  A <code>dash-element</code> is a list of parameters
defining the dash behavior for a segment of the slur.
</p>
<p>The slur is defined in terms of the bezier parameter t which ranges
from 0 at the left end of the slur to 1 at the right end of the slur.
<code>dash-element</code> is a list <code>(start-t stop-t dash-fraction
dash-period)</code>.  The region of the slur from <code>start-t</code> to
<code>stop-t</code> will have a fraction <code>dash-fraction</code> of each
<code>dash-period</code> black.  <code>dash-period</code> is defined in terms of
staff spaces.  <code>dash-fraction</code> is set to 1 for a solid slur.
</p>

<pre class="verbatim">\relative c' {
  \once \override
    Slur.dash-definition = #'((0 0.3 0.1 0.75)
                                (0.3 0.6 1 1)
                                (0.65 1.0 0.4 0.75))
  c4( d e f)
  \once \override
    Slur.dash-definition = #'((0 0.25 1 1)
                                (0.3 0.7 0.4 0.75)
                                (0.75 1.0 1 1))
  c4( d e f)
}
</pre><p>
 <a href="ce/lily-a1eaf1f1.ly">
  <img align="middle"
       border="0"
       src="ce/lily-a1eaf1f1.png"
       alt="[image of music]">
 </a>
</p>




<a name="manually-controlling-beam-positions.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Manually-controlling-beam-positions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-making-slurs-with-complex-dash-structure" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Making slurs with complex dash structure&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-merging-multi_002dmeasure-rests-in-a-polyphonic-part" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Merging multi-measure rests in a polyphonic part &gt; </a>]</td></tr></table>
<a name="rhythms-manually-controlling-beam-positions"></a>
<h2 class="unnumberedsec">Manually controlling beam positions</h2>


<p>Beam positions may be controlled manually, by overriding the
<code>positions</code> setting of the <code>Beam</code> grob.
</p>




<pre class="verbatim">\relative c' {
  \time 2/4
  % from upper staff-line (position 2) to center (position 0)
  \override Beam.positions = #'(2 . 0)
  c8 c
  % from center to one above center (position 1)
  \override Beam.positions = #'(0 . 1)
  c8 c
}
</pre><p>
 <a href="bb/lily-91289216.ly">
  <img align="middle"
       border="0"
       src="bb/lily-91289216.png"
       alt="[image of music]">
 </a>
</p>




<a name="merging-multi-measure-rests-in-a-polyphonic-part.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Merging-multi_002dmeasure-rests-in-a-polyphonic-part"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-manually-controlling-beam-positions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Manually controlling beam positions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-modifying-tuplet-bracket-length" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Modifying tuplet bracket length &gt; </a>]</td></tr></table>
<a name="rhythms-merging-multi_002dmeasure-rests-in-a-polyphonic-part"></a>
<h2 class="unnumberedsec">Merging multi-measure rests in a polyphonic part</h2>


<p>When using multi-measure rests in a polyphonic staff, the rests will be
placed differently depending on the voice they belong to. However they
can be printed on the same staff line, using the following setting.
</p>

<pre class="verbatim">normalPos = \revert MultiMeasureRest.direction

{
  &lt;&lt;
    {
      c''1
      R1
      c''1
      \normalPos
      R1
    }
    \\
    {
      c'1
      R1
      c'1
      \normalPos
      R1
    }
  &gt;&gt;
}
</pre><p>
 <a href="5a/lily-5883c977.ly">
  <img align="middle"
       border="0"
       src="5a/lily-5883c977.png"
       alt="[image of music]">
 </a>
</p>




<a name="modifying-tuplet-bracket-length.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Modifying-tuplet-bracket-length"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-merging-multi_002dmeasure-rests-in-a-polyphonic-part" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Merging multi-measure rests in a polyphonic part&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-moving-dotted-notes-in-polyphony" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Moving dotted notes in polyphony &gt; </a>]</td></tr></table>
<a name="rhythms-modifying-tuplet-bracket-length"></a>
<h2 class="unnumberedsec">Modifying tuplet bracket length</h2>


<p>Tuplet brackets can be made to run to prefatory matter or the next
note. Default tuplet brackets end at the right edge of the final note
of the tuplet; full-length tuplet brackets extend farther to the right,
either to cover all the non-rhythmic notation up to the following note,
or to cover only the whitespace before the next item of notation, be
that a clef, time signature, key signature, or another note.  The
example shows how to switch tuplets to full length mode and how to
modify what material they cover.
</p>

<pre class="verbatim">\new RhythmicStaff {
  % Set tuplets to be extendable...
  \set tupletFullLength = ##t
  % ...to cover all items up to the next note
  \set tupletFullLengthNote = ##t
  \time 2/4
  \tuplet 3/2 { c4 4 4 }
  % ...or to cover just whitespace
  \set tupletFullLengthNote = ##f
  \time 4/4
  \tuplet 5/4 { 4 1 }
  \time 3/4
  2.
}
</pre><p>
 <a href="0d/lily-9d0181bb.ly">
  <img align="middle"
       border="0"
       src="0d/lily-9d0181bb.png"
       alt="[image of music]">
 </a>
</p>




<a name="moving-dotted-notes-in-polyphony.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Moving-dotted-notes-in-polyphony"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-modifying-tuplet-bracket-length" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Modifying tuplet bracket length&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-multi_002dmeasure-rest-markup" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Multi-measure rest markup &gt; </a>]</td></tr></table>
<a name="rhythms-moving-dotted-notes-in-polyphony"></a>
<h2 class="unnumberedsec">Moving dotted notes in polyphony</h2>


<p>When a dotted note in the upper voice is moved to avoid a collision
with a note in another voice, the default is to move the upper note to
the right.  This behaviour can be over-ridden by using the
<code>prefer-dotted-right</code> property of <code>NoteCollision</code>.
</p>

<pre class="verbatim">\new Staff \relative c' &lt;&lt;
  {
    f2. f4
    \override Staff.NoteCollision.prefer-dotted-right = ##f
    f2. f4
    \override Staff.NoteCollision.prefer-dotted-right = ##t
    f2. f4
  }
  \\
  { e4 e e e e e e e e e e e }
&gt;&gt;
</pre><p>
 <a href="3b/lily-e1850258.ly">
  <img align="middle"
       border="0"
       src="3b/lily-e1850258.png"
       alt="[image of music]">
 </a>
</p>




<a name="multi-measure-rest-markup.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Multi_002dmeasure-rest-markup"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-moving-dotted-notes-in-polyphony" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Moving dotted notes in polyphony&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-non_002ddefault-tuplet-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Non-default tuplet numbers &gt; </a>]</td></tr></table>
<a name="rhythms-multi_002dmeasure-rest-markup"></a>
<h2 class="unnumberedsec">Multi-measure rest markup</h2>


<p>Markups attached to a multi-measure rest will be centered above or
below it.  Long markups attached to multi-measure rests do not cause
the measure to expand.  To expand a multi-measure rest to fit the
markup, use an empty chord with an attached markup before the
multi-measure rest.
</p>
<p>Text attached to a spacer rest in this way is left-aligned to the
position where the note would be placed in the measure, but if the
measure length is determined by the length of the text, the text will
appear to be centered.
</p>

<pre class="verbatim">\relative c' {
  \compressMMRests {
    \textLengthOn
    &lt;&gt;^\markup { [MAJOR GENERAL] }
    R1*19
    &lt;&gt;_\markup { \italic { Cue: ... it is yours } }
    &lt;&gt;^\markup { A }
    R1*30^\markup { [MABEL] }
    \textLengthOff
    c4^\markup { CHORUS } d f c
  }
}
</pre><p>
 <a href="57/lily-ff12d7ff.ly">
  <img align="middle"
       border="0"
       src="57/lily-ff12d7ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="non-default-tuplet-numbers.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Non_002ddefault-tuplet-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-multi_002dmeasure-rest-markup" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Multi-measure rest markup&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-partcombine-and-autobeamoff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Partcombine and autoBeamOff &gt; </a>]</td></tr></table>
<a name="rhythms-non_002ddefault-tuplet-numbers"></a>
<h2 class="unnumberedsec">Non-default tuplet numbers</h2>


<p>LilyPond also provides formatting functions to print tuplet numbers
different than the actual fraction, as well as to append a note value
to the tuplet number or tuplet fraction.
</p>

<pre class="verbatim">\relative c'' {
  \once \override TupletNumber.text =
    #(tuplet-number::non-default-tuplet-denominator-text 7)
  \tuplet 3/2  { c4. c4. c4. c4. }
  \once \override TupletNumber.text =
    #(tuplet-number::non-default-tuplet-fraction-text 12 7)
  \tuplet 3/2  { c4. c4. c4. c4. }
  \once \override TupletNumber.text =
    #(tuplet-number::append-note-wrapper
      (tuplet-number::non-default-tuplet-fraction-text 12 7) &quot;8&quot;)
  \tuplet 3/2  { c4. c4. c4. c4. }
  \once \override TupletNumber.text =
    #(tuplet-number::append-note-wrapper
      tuplet-number::calc-denominator-text &quot;4&quot;)
  \tuplet 3/2  { c8 c8 c8 c8 c8 c8 }
  \once \override TupletNumber.text =
    #(tuplet-number::append-note-wrapper
      tuplet-number::calc-fraction-text &quot;4&quot;)
  \tuplet 3/2  { c8 c8 c8 c8 c8 c8 }
  \once \override TupletNumber.text =
    #(tuplet-number::fraction-with-notes &quot;4.&quot; &quot;8&quot;)
  \tuplet 3/2  { c4. c4. c4. c4. }
  \once \override TupletNumber.text =
    #(tuplet-number::non-default-fraction-with-notes 12 &quot;8&quot; 4 &quot;4&quot;)
  \tuplet 3/2  { c4. c4. c4. c4. }
}
</pre><p>
 <a href="6e/lily-967b0a12.ly">
  <img align="middle"
       border="0"
       src="6e/lily-967b0a12.png"
       alt="[image of music]">
 </a>
</p>




<a name="partcombine-and-autobeamoff.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Partcombine-and-autoBeamOff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-non_002ddefault-tuplet-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Non-default tuplet numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-permitting-line-breaks-within-beamed-tuplets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Permitting line breaks within beamed tuplets &gt; </a>]</td></tr></table>
<a name="rhythms-partcombine-and-autobeamoff"></a>
<h2 class="unnumberedsec">Partcombine and autoBeamOff</h2>


<p>The function of <code>\autoBeamOff</code> when used with
<code>\partcombine</code> can be difficult to understand.
</p>
<p>It may be preferable to use
</p>

<p><code>\set Staff.autoBeaming = ##f</code>
</p>

<p>instead, to ensure that autobeaming will be turned off for the entire
staff.
</p>

<p><code>\partcombine</code> apparently works with 3 voices &ndash; stem up single,
stem down single, stem up combined.
</p>

<p>An <code>\autoBeamOff</code> call in the first argument to partcombine will
apply to the voice that is active at the time the call is processed,
either stem up single or stem up combined. An <code>\autoBeamOff</code> call
in the second argument will apply to the voice that is stem down single.
</p>

<p>In order to use <code>\autoBeamOff</code> to stop all autobeaming when used
with <code>\partcombine</code>, it will be necessary to use three calls to
<code>\autoBeamOff</code>.
</p>




<pre class="verbatim">{
  %\set Staff.autoBeaming = ##f % turns off all autobeaming
  \partcombine
  {
    \autoBeamOff % applies to split up stems
    \repeat unfold 4 a'16
    %\autoBeamOff % applies to combined up stems
    \repeat unfold 4 a'8
    \repeat unfold 4 a'16
  }
  {
    \autoBeamOff % applies to down stems
    \repeat unfold 4 f'8
    \repeat unfold 8 f'16 |
  }
}
</pre><p>
 <a href="4e/lily-df953967.ly">
  <img align="middle"
       border="0"
       src="4e/lily-df953967.png"
       alt="[image of music]">
 </a>
</p>




<a name="permitting-line-breaks-within-beamed-tuplets.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Permitting-line-breaks-within-beamed-tuplets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-partcombine-and-autobeamoff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Partcombine and autoBeamOff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-positioning-grace-note-beams-at-the-height-of-normal-note-beams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Positioning grace note beams at the height of normal note beams &gt; </a>]</td></tr></table>
<a name="rhythms-permitting-line-breaks-within-beamed-tuplets"></a>
<h2 class="unnumberedsec">Permitting line breaks within beamed tuplets</h2>


<p>This artificial example shows how both manual and automatic line breaks
may be permitted to within a beamed tuplet. Note that such off-beat
tuplets have to be beamed manually.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    % Permit line breaks within tuplets
    \remove &quot;Forbid_line_break_engraver&quot;
    % Allow beams to be broken at line breaks
    \override Beam.breakable = ##t
  }
}
\relative c'' {
  a8
  \repeat unfold 5 { \tuplet 3/2 { c[ b a] } }
  % Insert a manual line break within a tuplet
  \tuplet 3/2 { c[ b \bar &quot;&quot; \break a] }
  \repeat unfold 5 { \tuplet 3/2 { c[ b a] } }
  c8
}
</pre><p>
 <a href="08/lily-917a10bc.ly">
  <img align="middle"
       border="0"
       src="08/lily-917a10bc.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-grace-note-beams-at-the-height-of-normal-note-beams.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Positioning-grace-note-beams-at-the-height-of-normal-note-beams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-permitting-line-breaks-within-beamed-tuplets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Permitting line breaks within beamed tuplets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-positioning-grace-notes-with-floating-space" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Positioning grace notes with floating space &gt; </a>]</td></tr></table>
<a name="rhythms-positioning-grace-note-beams-at-the-height-of-normal-note-beams"></a>
<h2 class="unnumberedsec">Positioning grace note beams at the height of normal note beams</h2>


<p>When notes are placed on ledger lines, their beams are usually centred
on the stave.  Grace notes beams are shorter and grace notes on ledger
lines may well have beams outside the stave.  You can override this
beaming for grace notes.
</p>

<pre class="verbatim">\relative c {
  f8[ e]
  \grace {
    f8[ e]
    \override Stem.no-stem-extend = ##f
    f8[ e]
    \revert Stem.no-stem-extend
  }
  f8[ e]
}
</pre><p>
 <a href="95/lily-c51dd10a.ly">
  <img align="middle"
       border="0"
       src="95/lily-c51dd10a.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-grace-notes-with-floating-space.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Positioning-grace-notes-with-floating-space"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-positioning-grace-note-beams-at-the-height-of-normal-note-beams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Positioning grace note beams at the height of normal note beams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-positioning-multi_002dmeasure-rests" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Positioning multi-measure rests &gt; </a>]</td></tr></table>
<a name="rhythms-positioning-grace-notes-with-floating-space"></a>
<h2 class="unnumberedsec">Positioning grace notes with floating space</h2>


<p>Setting the property <code>'strict-grace-spacing</code> makes the musical
columns for grace notes &rsquo;floating&rsquo;, i.e., decoupled from the non-grace
notes: first the normal notes are spaced, then the (musical columns of
the) graces are put left of the musical columns for the main notes.
</p>

<pre class="verbatim">\relative c'' {
  &lt;&lt;
    \override Score.SpacingSpanner.strict-grace-spacing = ##t
    \new Staff \new Voice {
      \afterGrace c4 { c16[ c8 c16] }
      c8[ \grace { b16 d } c8]
      c4 r
    }
    \new Staff {
      c16 c c c c c c c c4 r
    }
  &gt;&gt;
}
</pre><p>
 <a href="0d/lily-843549e1.ly">
  <img align="middle"
       border="0"
       src="0d/lily-843549e1.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-multi-measure-rests.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Positioning-multi_002dmeasure-rests"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-positioning-grace-notes-with-floating-space" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Positioning grace notes with floating space&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-preventing-final-mark-from-removing-final-tuplet" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Preventing final mark from removing final tuplet &gt; </a>]</td></tr></table>
<a name="rhythms-positioning-multi_002dmeasure-rests"></a>
<h2 class="unnumberedsec">Positioning multi-measure rests</h2>


<p>Unlike ordinary rests, there is no predefined command to change the
staff position of a multi-measure rest symbol of either form by
attaching it to a note.  However, in polyphonic music multi-measure
rests in odd-numbered and even-numbered voices are vertically
separated. The positioning of multi-measure rests can be controlled as
follows:
</p>

<pre class="verbatim">\relative c'' {
  % Multi-measure rests by default are set under the fourth line
  R1
  % They can be moved using an override
  \override MultiMeasureRest.staff-position = #-2
  R1
  \override MultiMeasureRest.staff-position = #0
  R1
  \override MultiMeasureRest.staff-position = #2
  R1
  \override MultiMeasureRest.staff-position = #3
  R1
  \override MultiMeasureRest.staff-position = #6
  R1
  \revert MultiMeasureRest.staff-position
  \break

  % In two Voices, odd-numbered voices are under the top line
  &lt;&lt; { R1 } \\ { a1 } &gt;&gt;
  % Even-numbered voices are under the bottom line
  &lt;&lt; { a1 } \\ { R1 } &gt;&gt;
  % Multi-measure rests in both voices remain separate
  &lt;&lt; { R1 } \\ { R1 } &gt;&gt;

  % Separating multi-measure rests in more than two voices
  % requires an override
  &lt;&lt; { R1 } \\ { R1 } \\
     \once \override MultiMeasureRest.staff-position = #0
     { R1 }
  &gt;&gt;

  % Using compressed bars in multiple voices requires another override
  % in all voices to avoid multiple instances being printed
  \compressMMRests
  &lt;&lt;
   \revert MultiMeasureRest.direction
    { R1*3 }
    \\
   \revert MultiMeasureRest.direction
    { R1*3 }
  &gt;&gt;
}
</pre><p>
 <a href="fe/lily-15ff52a7.ly">
  <img align="middle"
       border="0"
       src="fe/lily-15ff52a7.png"
       alt="[image of music]">
 </a>
</p>




<a name="preventing-final-mark-from-removing-final-tuplet.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Preventing-final-mark-from-removing-final-tuplet"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-positioning-multi_002dmeasure-rests" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Positioning multi-measure rests&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-printing-bar-numbers-at-regular-intervals" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Printing bar numbers at regular intervals &gt; </a>]</td></tr></table>
<a name="rhythms-preventing-final-mark-from-removing-final-tuplet"></a>
<h2 class="unnumberedsec">Preventing final mark from removing final tuplet</h2>


<p>The addition of a final <code>mark</code> can result in the loss of a final
tuplet marking.  This can be overcome by setting <code>TupletBracket
#'full-length-to-extent</code> to <code>false</code>.
</p>

<pre class="verbatim">\new Staff {
   \set tupletFullLength = ##t
   \time 1/8
   \tuplet 3/2 { c'16 c'16 c'16 }
   \tuplet 3/2 { c'16 c'16 c'16 }
   \tuplet 3/2 { c'16 c'16 c'16 }
   \override Score.RehearsalMark.break-visibility = ##(#t #t #t)
   \override Score.RehearsalMark.direction = #DOWN
   \override Score.RehearsalMark.self-alignment-X = #RIGHT
% due to issue 2362 the following line is commented
%   \mark &quot;Composed Feb 2007 - Feb 2008&quot;
% and a shorter mark is used.
   \mark &quot;1234&quot;
}

\new Staff {
  \set tupletFullLength = ##t

  \override TupletBracket.full-length-to-extent = ##f

  \time 1/8
  \tuplet 3/2 { c'16 c'16 c'16 }
  \tuplet 3/2 { c'16 c'16 c'16 }
  \tuplet 3/2 { c'16 c'16 c'16 }
  \override Score.RehearsalMark.break-visibility = ##(#t #t #t)
  \override Score.RehearsalMark.direction = #DOWN
  \override Score.RehearsalMark.self-alignment-X = #RIGHT
% due to issue 2362 the following line is commented
%   \mark &quot;Composed Feb 2007 - Feb 2008&quot;
% and a shorter mark is used.
   \mark &quot;1234&quot;
}
</pre><p>
 <a href="b1/lily-6956baca.ly">
  <img align="middle"
       border="0"
       src="b1/lily-6956baca.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-bar-numbers-at-regular-intervals.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Printing-bar-numbers-at-regular-intervals"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-preventing-final-mark-from-removing-final-tuplet" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Preventing final mark from removing final tuplet&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-printing-bar-numbers-inside-boxes-or-circles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Printing bar numbers inside boxes or circles &gt; </a>]</td></tr></table>
<a name="rhythms-printing-bar-numbers-at-regular-intervals"></a>
<h2 class="unnumberedsec">Printing bar numbers at regular intervals</h2>


<p>Bar numbers can be printed at regular intervals by setting the property
<code>barNumberVisibility</code>. Here the bar numbers are printed every two
measures except at the end of the line.
</p>

<pre class="verbatim">\relative c' {
  \override Score.BarNumber.break-visibility = #end-of-line-invisible
  \set Score.currentBarNumber = #11
  % Permit first bar number to be printed
  \bar &quot;&quot;
  % Print a bar number every second measure
  \set Score.barNumberVisibility = #(every-nth-bar-number-visible 2)
  c1 | c | c | c | c
  \break
  c1 | c | c | c | c
}
</pre><p>
 <a href="ef/lily-1b5384f1.ly">
  <img align="middle"
       border="0"
       src="ef/lily-1b5384f1.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-bar-numbers-inside-boxes-or-circles.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Printing-bar-numbers-inside-boxes-or-circles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-printing-bar-numbers-at-regular-intervals" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Printing bar numbers at regular intervals&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-printing-bar-numbers-with-changing-regular-intervals" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Printing bar numbers with changing regular intervals &gt; </a>]</td></tr></table>
<a name="rhythms-printing-bar-numbers-inside-boxes-or-circles"></a>
<h2 class="unnumberedsec">Printing bar numbers inside boxes or circles</h2>


<p>Bar numbers can also be printed inside boxes or circles.
</p>

<pre class="verbatim">\relative c' {
  % Prevent bar numbers at the end of a line and permit them elsewhere
  \override Score.BarNumber.break-visibility = #end-of-line-invisible
  \set Score.barNumberVisibility = #(every-nth-bar-number-visible 4)

  % Increase the size of the bar number by 2
  \override Score.BarNumber.font-size = #2

  % Draw a box round the following bar number(s)
  \override Score.BarNumber.stencil
    = #(make-stencil-boxer 0.1 0.25 ly:text-interface::print)
  \repeat unfold 5 { c1 }

  % Draw a circle round the following bar number(s)
  \override Score.BarNumber.stencil
    = #(make-stencil-circler 0.1 0.25 ly:text-interface::print)
  \repeat unfold 4 { c1 } \bar &quot;|.&quot;
}
</pre><p>
 <a href="8d/lily-f40f0c36.ly">
  <img align="middle"
       border="0"
       src="8d/lily-f40f0c36.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-bar-numbers-with-changing-regular-intervals.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Printing-bar-numbers-with-changing-regular-intervals"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-printing-bar-numbers-inside-boxes-or-circles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Printing bar numbers inside boxes or circles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-printing-metronome-and-rehearsal-marks-below-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Printing metronome and rehearsal marks below the staff &gt; </a>]</td></tr></table>
<a name="rhythms-printing-bar-numbers-with-changing-regular-intervals"></a>
<h2 class="unnumberedsec">Printing bar numbers with changing regular intervals</h2>


<p>The bar number interval can be changed by changing the context function
<code>{set-bar-number-visibility}</code>.
</p>

<pre class="verbatim">\relative c' {
  \override Score.BarNumber.break-visibility = #end-of-line-invisible
  \context Score \applyContext #(set-bar-number-visibility 4)
  \repeat unfold 10 c'1
  \context Score \applyContext #(set-bar-number-visibility 2)
  \repeat unfold 10 c
}
</pre><p>
 <a href="5f/lily-2e47b8c9.ly">
  <img align="middle"
       border="0"
       src="5f/lily-2e47b8c9.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-metronome-and-rehearsal-marks-below-the-staff.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Printing-metronome-and-rehearsal-marks-below-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-printing-bar-numbers-with-changing-regular-intervals" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Printing bar numbers with changing regular intervals&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-printing-music-with-different-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Printing music with different time signatures &gt; </a>]</td></tr></table>
<a name="rhythms-printing-metronome-and-rehearsal-marks-below-the-staff"></a>
<h2 class="unnumberedsec">Printing metronome and rehearsal marks below the staff</h2>


<p>By default, metronome and rehearsal marks are printed above the staff.
To place them below the staff simply set the <code>direction</code> property
of <code>MetronomeMark</code> or <code>RehearsalMark</code> appropriately.
</p>

<pre class="verbatim">\layout {
  indent = 0
  ragged-right = ##f
}

{
  % Metronome marks below the staff
  \override Score.MetronomeMark.direction = #DOWN
  \tempo 8. = 120
  c''1

  % Rehearsal marks below the staff
  \override Score.RehearsalMark.direction = #DOWN
  \mark \default
  c''1
}
</pre><p>
 <a href="03/lily-5f9ea4d2.ly">
  <img align="middle"
       border="0"
       src="03/lily-5f9ea4d2.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-music-with-different-time-signatures.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Printing-music-with-different-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-printing-metronome-and-rehearsal-marks-below-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Printing metronome and rehearsal marks below the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-printing-the-bar-number-for-the-first-measure" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Printing the bar number for the first measure &gt; </a>]</td></tr></table>
<a name="rhythms-printing-music-with-different-time-signatures"></a>
<h2 class="unnumberedsec">Printing music with different time signatures</h2>


<p>In the following snippet, two parts have a completely different time
signature, yet remain synchronized. The bar lines can no longer be
printed at the <code>Score</code> level; to allow independent bar lines in
each part, the <code>Default_barline_engraver</code> and
<code>Timing_translator</code> are moved from the <code>Score</code> context to the
<code>Staff</code> context.
</p>
<p>If bar numbers are required, the <code>Bar_number_engraver</code> should also
be moved, since it relies on properties set by the
<code>Timing_translator</code>; a <code>\with</code> block can be used to add bar
numbers to the relevant staff.
</p>



<pre class="verbatim">\paper {
  indent = #0
  ragged-right = ##t
}

global = { \time 3/4 { s2.*3 } \bar &quot;&quot; \break { s2.*3 } }

\layout {
  \context {
    \Score
    \remove &quot;Timing_translator&quot;
    \remove &quot;Default_bar_line_engraver&quot;
    \remove &quot;Bar_number_engraver&quot;
    \override SpacingSpanner.uniform-stretching = ##t
    \override SpacingSpanner.strict-note-spacing = ##t
    proportionalNotationDuration = #(ly:make-moment 1/64)
  }
  \context {
    \Staff
    \consists &quot;Timing_translator&quot;
    \consists &quot;Default_bar_line_engraver&quot;
  }
  \context {
    \Voice
    \remove &quot;Forbid_line_break_engraver&quot;
    tupletFullLength = ##t
  }
}

Bassklarinette = \new Staff \with {
  \consists &quot;Bar_number_engraver&quot;
  barNumberVisibility = #(every-nth-bar-number-visible 2)
  \override BarNumber.break-visibility = #end-of-line-invisible
} &lt;&lt;
  \global {
    \bar &quot;|&quot;
    \clef treble
    \time 3/8
    d''4.

    \bar &quot;|&quot;
    \time 3/4
    r8 des''2( c''8)

    \bar &quot;|&quot;
    \time 7/8
    r4. ees''2 ~

    \bar &quot;|&quot;
    \time 2/4
    \tupletUp
    \tuplet 3/2 { ees''4 r4 d''4 ~ }

    \bar &quot;|&quot;
    \time 3/8
    \tupletUp
    \tuplet 4/3 { d''4 r4 }

    \bar &quot;|&quot;
    \time 2/4
    e''2

    \bar &quot;|&quot;
    \time 3/8
    es''4.

    \bar &quot;|&quot;
    \time 3/4
    r8 d''2 r8
    \bar &quot;|&quot;
  }
&gt;&gt;

Perkussion = \new StaffGroup &lt;&lt;
  \new Staff &lt;&lt;
    \global {
      \bar &quot;|&quot;
      \clef percussion
      \time 3/4
      r4 c'2 ~

      \bar &quot;|&quot;
      c'2.

      \bar &quot;|&quot;
      R2.

      \bar &quot;|&quot;
      r2 g'4 ~

      \bar &quot;|&quot;
      g'2. ~

      \bar &quot;|&quot;
      g'2.
    }
  &gt;&gt;
  \new Staff &lt;&lt;
    \global {
      \bar &quot;|&quot;
      \clef percussion
      \time 3/4
      R2.

      \bar &quot;|&quot;
      g'2. ~

      \bar &quot;|&quot;
      g'2.

      \bar &quot;|&quot;
      r4 g'2 ~

      \bar &quot;|&quot;
      g'2 r4

      \bar &quot;|&quot;
      g'2.
    }
  &gt;&gt;
&gt;&gt;

\score {
  &lt;&lt;
    \Bassklarinette
    \Perkussion
  &gt;&gt;
}
</pre><p>
 <a href="19/lily-9b7cfb87.ly">
  <img align="middle"
       border="0"
       src="19/lily-9b7cfb87.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-the-bar-number-for-the-first-measure.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Printing-the-bar-number-for-the-first-measure"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-printing-music-with-different-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Printing music with different time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-redefining-grace-note-global-defaults" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Redefining grace note global defaults &gt; </a>]</td></tr></table>
<a name="rhythms-printing-the-bar-number-for-the-first-measure"></a>
<h2 class="unnumberedsec">Printing the bar number for the first measure</h2>


<p>By default, the first bar number in a score is suppressed if it is less
than or equal to &lsquo;1&rsquo;.  By setting <code>barNumberVisibility</code> to
<code>all-bar-numbers-visible</code>, any bar number can be printed for the
first measure and all subsequent measures.  Note that an empty bar line
must be inserted before the first note for this to work.
</p>

<pre class="verbatim">\layout {
  indent = 0
  ragged-right = ##t
}

\relative c' {
  \set Score.barNumberVisibility = #all-bar-numbers-visible
  \bar &quot;&quot;
  c1 | d | e | f \break
  g1 | e | d | c
}
</pre><p>
 <a href="4f/lily-ac255534.ly">
  <img align="middle"
       border="0"
       src="4f/lily-ac255534.png"
       alt="[image of music]">
 </a>
</p>




<a name="redefining-grace-note-global-defaults.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Redefining-grace-note-global-defaults"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-printing-the-bar-number-for-the-first-measure" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Printing the bar number for the first measure&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-removing-bar-numbers-from-a-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Removing bar numbers from a score &gt; </a>]</td></tr></table>
<a name="rhythms-redefining-grace-note-global-defaults"></a>
<h2 class="unnumberedsec">Redefining grace note global defaults</h2>


<p>The global defaults for grace notes are stored in the identifiers
<code>startGraceMusic</code>, <code>stopGraceMusic</code>,
<code>startAcciaccaturaMusic</code>, <code>stopAcciaccaturaMusic</code>,
<code>startAppoggiaturaMusic</code> and <code>stopAppoggiaturaMusic</code>, which
are defined in the file <code>ly/grace-init.ly</code>.  By redefining them
other effects may be obtained.
</p>

<pre class="verbatim">startAcciaccaturaMusic = {
  &lt;&gt;(
  \override Flag.stroke-style = #&quot;grace&quot;
  \slurDashed
}

stopAcciaccaturaMusic = {
  \revert Flag.stroke-style
  \slurSolid
  &lt;&gt;)
}

\relative c'' {
  \acciaccatura d8 c1
}
</pre><p>
 <a href="f2/lily-08bbf3f8.ly">
  <img align="middle"
       border="0"
       src="f2/lily-08bbf3f8.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-bar-numbers-from-a-score.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Removing-bar-numbers-from-a-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-redefining-grace-note-global-defaults" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Redefining grace note global defaults&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff &gt; </a>]</td></tr></table>
<a name="rhythms-removing-bar-numbers-from-a-score"></a>
<h2 class="unnumberedsec">Removing bar numbers from a score</h2>


<p>Bar numbers can be removed entirely by removing the
<code>Bar_number_engraver</code> from the <code>Score</code> context.
</p>

<pre class="verbatim">\layout {
  \context {
    \Score
    \omit BarNumber
    % or:
    %\remove &quot;Bar_number_engraver&quot;
  }
}

\relative c'' {
  c4 c c c \break
  c4 c c c
}
</pre><p>
 <a href="17/lily-62ad2844.ly">
  <img align="middle"
       border="0"
       src="17/lily-62ad2844.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-connecting-bar-lines-on-staffgroup,-pianostaff,-or-grandstaff.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Removing-connecting-bar-lines-on-StaffGroup-PianoStaff-or-GrandStaff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-removing-bar-numbers-from-a-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Removing bar numbers from a score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-rest-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Rest styles &gt; </a>]</td></tr></table>
<a name="rhythms-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff"></a>
<h2 class="unnumberedsec">Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff</h2>


<p>By default, bar lines in StaffGroup, PianoStaff, or GrandStaff groups
are connected between the staves.  This behaviour can be overridden on
a staff-by-staff basis.
</p>

<pre class="verbatim">\relative c' {
  \new StaffGroup &lt;&lt;
    \new Staff {
      e1 | e
      \once \override Staff.BarLine.allow-span-bar = ##f
      e1 | e | e
    }
    \new Staff {
      c1 | c | c
      \once \override Staff.BarLine.allow-span-bar = ##f
      c1 | c
    }
    \new Staff {
      a1 | a | a | a | a
    }
  &gt;&gt;
}
</pre><p>
 <a href="b0/lily-2da83b9c.ly">
  <img align="middle"
       border="0"
       src="b0/lily-2da83b9c.png"
       alt="[image of music]">
 </a>
</p>




<a name="rest-styles.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Rest-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-reverting-default-beam-endings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Reverting default beam endings &gt; </a>]</td></tr></table>
<a name="rhythms-rest-styles"></a>
<h2 class="unnumberedsec">Rest styles</h2>


<p>Rests may be used in various styles.
</p>
<pre class="verbatim">\new Staff \relative c {
  \omit Score.TimeSignature
  \cadenzaOn

  \override Staff.Rest.style = #'mensural
  r\maxima^\markup \typewriter { mensural }
  r\longa r\breve r1 r2 r4 r8 r16 s32 s64 s128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'neomensural
  r\maxima^\markup \typewriter { neomensural }
  r\longa r\breve r1 r2 r4 r8 r16 s32 s64 s128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'classical
  r\maxima^\markup \typewriter { classical }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'z
  r\maxima^\markup \typewriter { z-style }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'default
  r\maxima^\markup \typewriter { default }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
}
</pre><p>
 <a href="1c/lily-18b7709f.ly">
  <img align="middle"
       border="0"
       src="1c/lily-18b7709f.png"
       alt="[image of music]">
 </a>
</p>




<a name="reverting-default-beam-endings.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Reverting-default-beam-endings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-rest-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Rest styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-rhythmic-slashes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Rhythmic slashes &gt; </a>]</td></tr></table>
<a name="rhythms-reverting-default-beam-endings"></a>
<h2 class="unnumberedsec">Reverting default beam endings</h2>


<p>To typeset beams grouped <code>3-4-3-2</code> in 12/8 it is necessary first
to override the default beam endings  in 12/8, and then to set up the
new beaming endings:
</p>

<pre class="verbatim">\relative c'' {
  \time 12/8

  % Default beaming
  a8 a a a a a a a a a a a

  % Set new values for beam endings
  \set Score.beatStructure = 3,4,3,2
  a8 a a a a a a a a a a a
}
</pre><p>
 <a href="d2/lily-b764f094.ly">
  <img align="middle"
       border="0"
       src="d2/lily-b764f094.png"
       alt="[image of music]">
 </a>
</p>




<a name="rhythmic-slashes.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Rhythmic-slashes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-reverting-default-beam-endings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Reverting default beam endings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-skips-in-lyric-mode-_00282_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Skips in lyric mode (2) &gt; </a>]</td></tr></table>
<a name="rhythms-rhythmic-slashes"></a>
<h2 class="unnumberedsec">Rhythmic slashes</h2>


<p>In &ldquo;simple&rdquo; lead-sheets, sometimes no actual notes are written,
instead only &ldquo;rhythmic patterns&rdquo; and chords above the measures are
notated giving the structure of a song. Such a feature is for example
useful while creating/transcribing the structure of a song and also
when sharing lead sheets with guitarists or jazz musicians. The
standard support for this using <code>\repeat percent</code> is unsuitable
here since the first beat has to be an ordinary note or rest. This
example shows two solutions to this problem, by redefining ordinary
rests to be printed as slashes. (If the duration of each beat is not a
quarter note, replace the <code>r4</code> in the definitions with a rest of
the appropriate duration).
</p>

<pre class="verbatim">% Macro to print single slash
rs = {
  \once \override Rest.stencil = #ly:percent-repeat-item-interface::beat-slash
  \once \override Rest.thickness = #0.48
  \once \override Rest.slope = #1.7
  r4
}

% Function to print a specified number of slashes
comp = #(define-music-function (count) (integer?)
  #{
    \override Rest.stencil = #ly:percent-repeat-item-interface::beat-slash
    \override Rest.thickness = #0.48
    \override Rest.slope = #1.7
    \repeat unfold $count { r4 }
    \revert Rest.stencil
  #}
)

\score {
  \relative c' {
    c4 d e f |
    \rs \rs \rs \rs |
    \comp #4 |
  }
}
</pre><p>
 <a href="84/lily-2e268c6a.ly">
  <img align="middle"
       border="0"
       src="84/lily-2e268c6a.png"
       alt="[image of music]">
 </a>
</p>




<a name="skips-in-lyric-mode-2.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Skips-in-lyric-mode-_00282_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-rhythmic-slashes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Rhythmic slashes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-skips-in-lyric-mode" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Skips in lyric mode &gt; </a>]</td></tr></table>
<a name="rhythms-skips-in-lyric-mode-_00282_0029"></a>
<h2 class="unnumberedsec">Skips in lyric mode (2)</h2>


<p>Although <code>s</code> skips cannot be used in <code>\lyricmode</code> (it is
taken to be a literal &ldquo;s&rdquo;, not a space), double quotes (<code>&quot;&quot;</code>)
or underscores (<code>_</code>) are available.So for example:
</p>

<pre class="verbatim">&lt;&lt;
  \relative c'' { a4 b c d }
  \new Lyrics \lyricmode { a4 &quot;&quot; _ gap }
&gt;&gt;
</pre><p>
 <a href="f1/lily-fe6e5923.ly">
  <img align="middle"
       border="0"
       src="f1/lily-fe6e5923.png"
       alt="[image of music]">
 </a>
</p>




<a name="skips-in-lyric-mode.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Skips-in-lyric-mode"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-skips-in-lyric-mode-_00282_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Skips in lyric mode (2)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-stemlets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Stemlets &gt; </a>]</td></tr></table>
<a name="rhythms-skips-in-lyric-mode"></a>
<h2 class="unnumberedsec">Skips in lyric mode</h2>


<p>The <code>s</code> syntax for skips is only available in note mode and chord
mode. In other situations, for example, when entering lyrics, using the
<code>\skip</code> command is recommended.
</p>

<pre class="verbatim">&lt;&lt;
  \relative c'' { a1 | a }
  \new Lyrics \lyricmode { \skip 1 bla1 }
&gt;&gt;
</pre><p>
 <a href="98/lily-b467671c.ly">
  <img align="middle"
       border="0"
       src="98/lily-b467671c.png"
       alt="[image of music]">
 </a>
</p>




<a name="stemlets.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Stemlets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-skips-in-lyric-mode" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Skips in lyric mode&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-strict-beat-beaming" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Strict beat beaming &gt; </a>]</td></tr></table>
<a name="rhythms-stemlets"></a>
<h2 class="unnumberedsec">Stemlets</h2>


<p>In some notational conventions beams are allowed to extend over rests.
Depending on preference, these beams may drop &rsquo;stemlets&rsquo; to help the
eye appreciate the rhythm better, and in some modern music the rest
itself is omitted and only the stemlet remains.
</p>

<p>This snippet shows a progression from traditional notation, to beams
over the rest, to stemlets over the rest, to stemlets alone.  Stemlets
are generated by overriding the <code>'stemlet-length</code> property of
<code>Stem</code>, while rests are hidden by setting <code>'transparent =
##t</code>.
</p>

<p>Some <code>\markup</code> elements are included in the source to highlight
the different notations.
</p>

<pre class="verbatim">\paper { ragged-right = ##f }

{
  c'16^\markup { traditional } d' r f'
  g'16[^\markup { beams over rests } f' r d']

  % N.B. use Score.Stem to set for the whole score.
  \override Staff.Stem.stemlet-length = #0.75

  c'16[^\markup { stemlets over rests } d' r f']
  g'16[^\markup { stemlets and no rests } f'
  \once \hide Rest
  r16 d']
}
</pre><p>
 <a href="40/lily-4d23fa8a.ly">
  <img align="middle"
       border="0"
       src="40/lily-4d23fa8a.png"
       alt="[image of music]">
 </a>
</p>




<a name="strict-beat-beaming.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Strict-beat-beaming"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-stemlets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Stemlets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-subdividing-beams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Subdividing beams &gt; </a>]</td></tr></table>
<a name="rhythms-strict-beat-beaming"></a>
<h2 class="unnumberedsec">Strict beat beaming</h2>


<p>Beamlets can be set to point in the direction of the beat to which they
belong.  The first beam avoids sticking out flags (the default); the
second beam strictly follows the beat.
</p>

<pre class="verbatim">\relative c'' {
  \time 6/8
  a8. a16 a a
  \set strictBeatBeaming = ##t
  a8. a16 a a
}
</pre><p>
 <a href="99/lily-919804c4.ly">
  <img align="middle"
       border="0"
       src="99/lily-919804c4.png"
       alt="[image of music]">
 </a>
</p>




<a name="subdividing-beams.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Subdividing-beams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-strict-beat-beaming" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Strict beat beaming&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-three_002dsided-box" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Three-sided box &gt; </a>]</td></tr></table>
<a name="rhythms-subdividing-beams"></a>
<h2 class="unnumberedsec">Subdividing beams</h2>


<p>The beams of consecutive 16th (or shorter) notes are, by default, not
subdivided.  That is, the three (or more) beams stretch unbroken over
entire groups of notes.  This behavior can be modified to subdivide the
beams into sub-groups by setting the property <code>subdivideBeams</code>.
When set, multiple beams will be subdivided at intervals defined by the
current value of <code>baseMoment</code> by reducing the multiple beams to
the number of beams that indicates the metric value of the subdivision.
If the group following the division is shorter than the current metric
value (usually because the beam is incomplete) the number of beams
reflects the longest possible subdivision group.  However, if there is
only one note left after the division this restriction isn&rsquo;t applied.
Note that <code>baseMoment</code> defaults to one over the denominator of the
current time signature if not set explicitly. It must be set to a
fraction giving the duration of the beam sub-group using the
<code>ly:make-moment</code> function, as shown in this snippet. Also, when
<code>baseMoment</code> is changed, <code>beatStructure</code> should also be
changed to match the new <code>baseMoment</code>:
</p>

<pre class="verbatim">\relative c'' {
  c32[ c c c c c c c]
  \set subdivideBeams = ##t
  c32[ c c c c c c c]

  % Set beam sub-group length to an eighth note
  \set baseMoment = #(ly:make-moment 1/8)
  \set beatStructure = 2,2,2,2
  c32[ c c c c c c c]

  % Set beam sub-group length to a sixteenth note
  \set baseMoment = #(ly:make-moment 1/16)
  \set beatStructure = 4,4,4,4
  c32[ c c c c c c c]

  % Shorten beam by 1/32
  \set baseMoment = #(ly:make-moment 1/8)
  \set beatStructure = 2,2,2,2
  c32[ c c c c c c] r32

  % Shorten beam by 3/32
  \set baseMoment = #(ly:make-moment 1/8)
  \set beatStructure = 2,2,2,2
  c32[ c c c c] r16.
  r2
}
</pre><p>
 <a href="b4/lily-718f8ff2.ly">
  <img align="middle"
       border="0"
       src="b4/lily-718f8ff2.png"
       alt="[image of music]">
 </a>
</p>




<a name="three-sided-box.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Three_002dsided-box"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-subdividing-beams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Subdividing beams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-time-signature-in-parentheses-_002d-method-3" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Time signature in parentheses - method 3 &gt; </a>]</td></tr></table>
<a name="rhythms-three_002dsided-box"></a>
<h2 class="unnumberedsec">Three-sided box</h2>


<p>This example shows how to add a markup command to get a three sided box
around some text (or other markup).
</p>

<pre class="verbatim">% New command to add a three sided box, with sides north, west and south
% Based on the box-stencil command defined in scm/stencil.scm
% Note that &quot;;;&quot; is used to comment a line in Scheme
#(define-public (NWS-box-stencil stencil thickness padding)
   &quot;Add a box around STENCIL, producing a new stencil.&quot;
   (let* ((x-ext (interval-widen (ly:stencil-extent stencil X) padding))
          (y-ext (interval-widen (ly:stencil-extent stencil Y) padding))
          (y-rule (make-filled-box-stencil (cons 0 thickness) y-ext))
          (x-rule (make-filled-box-stencil
                   (interval-widen x-ext thickness) (cons 0 thickness))))
     ;; (set! stencil (ly:stencil-combine-at-edge stencil X 1 y-rule padding))
     (set! stencil (ly:stencil-combine-at-edge stencil X LEFT y-rule padding))
     (set! stencil (ly:stencil-combine-at-edge stencil Y UP x-rule 0.0))
     (set! stencil (ly:stencil-combine-at-edge stencil Y DOWN x-rule 0.0))
     stencil))

% The corresponding markup command, based on the \box command defined
% in scm/define-markup-commands.scm
#(define-markup-command (NWS-box layout props arg) (markup?)
   #:properties ((thickness 0.1) (font-size 0) (box-padding 0.2))
   &quot;Draw a box round @var{arg}.  Looks at @code{thickness},
@code{box-padding} and @code{font-size} properties to determine line
thickness and padding around the markup.&quot;
   (let ((pad (* (magstep font-size) box-padding))
         (m (interpret-markup layout props arg)))
     (NWS-box-stencil m thickness pad)))

% Test it:

\relative c' {
  c1^\markup { \NWS-box ABCD }
  c1^\markup { \NWS-box \note #&quot;4&quot; #1.0 }
}
</pre><p>
 <a href="bc/lily-d950329d.ly">
  <img align="middle"
       border="0"
       src="bc/lily-d950329d.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-in-parentheses---method-3.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Time-signature-in-parentheses-_002d-method-3"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-three_002dsided-box" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Three-sided box&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-time-signature-in-parentheses" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Time signature in parentheses &gt; </a>]</td></tr></table>
<a name="rhythms-time-signature-in-parentheses-_002d-method-3"></a>
<h2 class="unnumberedsec">Time signature in parentheses - method 3</h2>


<p>Another way to put the time signature in parenthesis
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.TimeSignature.stencil = #(lambda (grob)
    (parenthesize-stencil (ly:time-signature::print grob) 0.1 0.4 0.4 0.1 ))
  \time 2/4
  a4 b8 c
}
</pre><p>
 <a href="fb/lily-6736381b.ly">
  <img align="middle"
       border="0"
       src="fb/lily-6736381b.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-in-parentheses.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Time-signature-in-parentheses"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-time-signature-in-parentheses-_002d-method-3" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Time signature in parentheses - method 3&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Time signature printing only the numerator as a number (instead of the fraction) &gt; </a>]</td></tr></table>
<a name="rhythms-time-signature-in-parentheses"></a>
<h2 class="unnumberedsec">Time signature in parentheses</h2>


<p>The time signature can be enclosed within parentheses.
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.TimeSignature.stencil = #(lambda (grob)
    (bracketify-stencil (ly:time-signature::print grob) Y 0.1 0.2 0.1))
  \time 2/4
  a4 b8 c
}
</pre><p>
 <a href="61/lily-a9d006ff.ly">
  <img align="middle"
       border="0"
       src="61/lily-a9d006ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-printing-only-the-numerator-as-a-number-instead-of-the-fraction.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-time-signature-in-parentheses" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Time signature in parentheses&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-tweaking-grace-layout-within-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Tweaking grace layout within music &gt; </a>]</td></tr></table>
<a name="rhythms-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029"></a>
<h2 class="unnumberedsec">Time signature printing only the numerator as a number (instead of the fraction)</h2>


<p>Sometimes, a time signature should not print the whole fraction (e.g.
7/4), but only the numerator (7 in this case). This can be easily done
by using <code>\override Staff.TimeSignature.style = #'single-digit</code>
to change the style permanently. By using <code>\revert
Staff.TimeSignature.style</code>, this setting can be reversed. To apply the
single-digit style to only one time signature, use the
<code>\override</code> command and prefix it with a <code>\once</code>.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  c4 c c
  % Change the style permanently
  \override Staff.TimeSignature.style = #'single-digit
  \time 2/4
  c4 c
  \time 3/4
  c4 c c
  % Revert to default style:
  \revert Staff.TimeSignature.style
  \time 2/4
  c4 c
  % single-digit style only for the next time signature
  \once \override Staff.TimeSignature.style = #'single-digit
  \time 5/4
  c4 c c c c
  \time 2/4
  c4 c
}
</pre><p>
 <a href="d8/lily-7db0cfe7.ly">
  <img align="middle"
       border="0"
       src="d8/lily-7db0cfe7.png"
       alt="[image of music]">
 </a>
</p>




<a name="tweaking-grace-layout-within-music.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Tweaking-grace-layout-within-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Time signature printing only the numerator as a number (instead of the fraction)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-user-defined-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: User defined time signatures &gt; </a>]</td></tr></table>
<a name="rhythms-tweaking-grace-layout-within-music"></a>
<h2 class="unnumberedsec">Tweaking grace layout within music</h2>


<p>The layout of grace expressions can be changed throughout the music
using the functions <code>add-grace-property</code> and
<code>remove-grace-property</code>. The following example undefines the
<code>Stem</code> direction for this grace, so that stems do not always point
up, and changes the default note heads to crosses.
</p>

<pre class="verbatim">\relative c'' {
  \new Staff {
    $(remove-grace-property 'Voice 'Stem 'direction)
    $(add-grace-property 'Voice 'NoteHead 'style 'cross)
    \new Voice {
       \acciaccatura { f16 } g4
       \grace { d16 e } f4
       \appoggiatura { f,32 g a } e2
    }
  }
}
</pre><p>
 <a href="a0/lily-6a9a4ac4.ly">
  <img align="middle"
       border="0"
       src="a0/lily-6a9a4ac4.png"
       alt="[image of music]">
 </a>
</p>




<a name="user-defined-time-signatures.ly"></a>

<hr size="6">
<a name="Rhythms_003a-User-defined-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-tweaking-grace-layout-within-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Tweaking grace layout within music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-using-alternative-flag-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Using alternative flag styles &gt; </a>]</td></tr></table>
<a name="rhythms-user-defined-time-signatures"></a>
<h2 class="unnumberedsec">User defined time signatures</h2>


<p>New time signature styles can be defined.  The time signature in
the second measure should be upside down in both staves.
</p>
<pre class="verbatim">#(add-simple-time-signature-style 'topsy-turvy
   (lambda (fraction)
     (make-rotate-markup 180 (make-compound-meter-markup fraction))))

&lt;&lt;
  \new Staff {
    \time 3/4 f'2.
    \override Score.TimeSignature.style = #'topsy-turvy
    \time 3/4 R2. \bar &quot;|.&quot;
  }
  \new Staff {
    R2. e''
  }
&gt;&gt;
</pre><p>
 <a href="72/lily-d2ba2325.ly">
  <img align="middle"
       border="0"
       src="72/lily-d2ba2325.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-alternative-flag-styles.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Using-alternative-flag-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-user-defined-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: User defined time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-using-grace-note-slashes-with-normal-heads" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Using grace note slashes with normal heads &gt; </a>]</td></tr></table>
<a name="rhythms-using-alternative-flag-styles"></a>
<h2 class="unnumberedsec">Using alternative flag styles</h2>


<p>Alternative styles of flag on eighth and shorter notes can be displayed
by overriding the <code>stencil</code> property of <code>Flag</code>.  Valid values
are <code>modern-straight-flag</code>, <code>old-straight-flag</code> and
<code>flat-flag</code>.
</p>

<pre class="verbatim">testnotes = {
  \autoBeamOff
  c8 d16 c32 d64 \acciaccatura { c8 } d64 r4
}

\score {
  \relative c' {
    \time 2/4
    \testnotes

    \override Flag.stencil = #modern-straight-flag
    \testnotes

    \override Flag.stencil = #old-straight-flag
    \testnotes

    \override Flag.stencil = #flat-flag
    \testnotes

    \revert Flag.stencil
    \testnotes
  }
  \layout {
    indent = 0
    \context {
      \Score
      \override NonMusicalPaperColumn.line-break-permission = ##f
    }
  }
}
</pre><p>
 <a href="d7/lily-cd18e176.ly">
  <img align="middle"
       border="0"
       src="d7/lily-cd18e176.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-grace-note-slashes-with-normal-heads.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Using-grace-note-slashes-with-normal-heads"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-using-alternative-flag-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Using alternative flag styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#rhythms-using-ties-with-arpeggios" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Rhythms: Using ties with arpeggios &gt; </a>]</td></tr></table>
<a name="rhythms-using-grace-note-slashes-with-normal-heads"></a>
<h2 class="unnumberedsec">Using grace note slashes with normal heads</h2>


<p>The slash through the stem found in acciaccaturas can be applied in
other situations.
</p>

<pre class="verbatim">\relative c'' {
  \override Flag.stroke-style = #&quot;grace&quot;
  c8( d2) e8( f4)
}
</pre><p>
 <a href="52/lily-c8d94424.ly">
  <img align="middle"
       border="0"
       src="52/lily-c8d94424.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-ties-with-arpeggios.ly"></a>

<hr size="6">
<a name="Rhythms_003a-Using-ties-with-arpeggios"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#expressive-marks" title="Next chapter">&nbsp;Expressive marks &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-using-grace-note-slashes-with-normal-heads" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Using grace note slashes with normal heads&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#rhythms" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Rhythms&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks &gt; </a>]</td></tr></table>
<a name="rhythms-using-ties-with-arpeggios"></a>
<h2 class="unnumberedsec">Using ties with arpeggios</h2>


<p>Ties are sometimes used to write out arpeggios.  In this case, two tied
notes need not be consecutive.  This can be achieved by setting the
<code>tieWaitForNote</code> property to <code>#t</code>.  The same feature is also
useful, for example, to tie a tremolo to a chord, but in principle, it
can also be used for ordinary consecutive notes.
</p>

<pre class="verbatim">\relative c' {
  \set tieWaitForNote = ##t
  \grace { c16[ ~ e ~ g] ~ } &lt;c, e g&gt;2
  \repeat tremolo 8 { c32 ~ c' ~ } &lt;c c,&gt;1
  e8 ~ c ~ a ~ f ~ &lt;e' c a f&gt;2
  \tieUp
  c8 ~ a
  \tieDown
  \tieDotted
  g8 ~ c g2
}
</pre><p>
 <a href="58/lily-1ea231fb.ly">
  <img align="middle"
       border="0"
       src="58/lily-1ea231fb.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Expressive-marks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#rhythms" title="Beginning of this chapter or previous chapter"> &lt;&lt; Rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#rhythms-using-ties-with-arpeggios" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Rhythms: Using ties with arpeggios&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms &gt; </a>]</td></tr></table>
<a name="expressive-marks"></a>
<h1 class="unnumbered">Expressive marks</h1>

<a name="index-Expressive-marks"></a>
<p><a href="notation-big-page.html#expressive-marks">Expressive marks</a>
</p>

<a name="adding-beams,-slurs,-ties-etc.-when-using-tuplet-and-non-tuplet-rhythms.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-adding-parentheses-around-an-expressive-mark-or-chordal-note" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Adding parentheses around an expressive mark or chordal note &gt; </a>]</td></tr></table>
<a name="expressive-marks-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms"></a>
<h2 class="unnumberedsec">Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms</h2>


<p>LilyPond syntax can involve many unusual placements for parentheses,
brackets etc., which might sometimes have to be interleaved. For
example, when entering a manual beam, the left square bracket has to be
placed after the starting note and its duration, not before. Similarly,
the right square bracket should directly follow the note which is to be
at the end of the requested beaming, even if this note happens to be
inside a tuplet section. This snippet demonstrates how to combine
manual beaming, manual slurs, ties and phrasing slurs with tuplet
sections (enclosed within curly braces).
</p>

<pre class="verbatim">{
  r16[ g16 \tuplet 3/2 { r16 e'8] }
  g16( a \tuplet 3/2 { b d e') }
  g8[( a \tuplet 3/2 { b d') e'] ~ }
  \time 2/4
  \tuplet 5/4 { e'32\( a b d' e' } a'4.\)
}
</pre><p>
 <a href="a3/lily-b7dd3413.ly">
  <img align="middle"
       border="0"
       src="a3/lily-b7dd3413.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-parentheses-around-an-expressive-mark-or-chordal-note.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Adding-parentheses-around-an-expressive-mark-or-chordal-note"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-adding-timing-marks-to-long-glissandi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Adding timing marks to long glissandi &gt; </a>]</td></tr></table>
<a name="expressive-marks-adding-parentheses-around-an-expressive-mark-or-chordal-note"></a>
<h2 class="unnumberedsec">Adding parentheses around an expressive mark or chordal note</h2>


<p>The <code>\parenthesize</code> function is a special tweak that encloses
objects in parentheses.  The associated grob is <code>ParenthesesItem</code>.
</p>


<pre class="verbatim">\relative c' {
  c2-\parenthesize -&gt;
  \override ParenthesesItem.padding = #0.1
  \override ParenthesesItem.font-size = #-4
  &lt;d \parenthesize f a&gt;2
}
</pre><p>
 <a href="c1/lily-a633a617.ly">
  <img align="middle"
       border="0"
       src="c1/lily-a633a617.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-timing-marks-to-long-glissandi.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Adding-timing-marks-to-long-glissandi"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-adding-parentheses-around-an-expressive-mark-or-chordal-note" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Adding parentheses around an expressive mark or chordal note&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-adjusting-the-shape-of-falls-and-doits" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Adjusting the shape of falls and doits &gt; </a>]</td></tr></table>
<a name="expressive-marks-adding-timing-marks-to-long-glissandi"></a>
<h2 class="unnumberedsec">Adding timing marks to long glissandi</h2>


<p>Skipped beats in very long glissandi are sometimes indicated by timing
marks, often consisting of stems without noteheads.  Such stems can
also be used to carry intermediate expression markings.
</p>
<p>If the stems do not align well with the glissando, they may need to be
repositioned slightly.
</p>

<pre class="verbatim">glissandoSkipOn = {
  \override NoteColumn.glissando-skip = ##t
  \hide NoteHead
  \override NoteHead.no-ledgers = ##t
}

glissandoSkipOff = {
  \revert NoteColumn.glissando-skip
  \undo \hide NoteHead
  \revert NoteHead.no-ledgers
}

\relative c'' {
  r8 f8\glissando
  \glissandoSkipOn
  f4 g a a8\noBeam
  \glissandoSkipOff
  a8

  r8 f8\glissando
  \glissandoSkipOn
  g4 a8
  \glissandoSkipOff
  a8 |

  r4 f\glissando \&lt;
  \glissandoSkipOn
  a4\f \&gt;
  \glissandoSkipOff
  b8\! r |
}
</pre><p>
 <a href="15/lily-58d81ccc.ly">
  <img align="middle"
       border="0"
       src="15/lily-58d81ccc.png"
       alt="[image of music]">
 </a>
</p>




<a name="adjusting-the-shape-of-falls-and-doits.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Adjusting-the-shape-of-falls-and-doits"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-adding-timing-marks-to-long-glissandi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Adding timing marks to long glissandi&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-alternative-breve-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Alternative breve notes &gt; </a>]</td></tr></table>
<a name="expressive-marks-adjusting-the-shape-of-falls-and-doits"></a>
<h2 class="unnumberedsec">Adjusting the shape of falls and doits</h2>


<p>The <code>shortest-duration-space</code> property may be tweaked to adjust
the shape of falls and doits.
</p>

<pre class="verbatim">\relative c'' {
  \override Score.SpacingSpanner.shortest-duration-space = #4.0
  c2-\bendAfter #5
  c2-\bendAfter #-4.75
  c2-\bendAfter #8.5
  c2-\bendAfter #-6
}
</pre><p>
 <a href="76/lily-718ef860.ly">
  <img align="middle"
       border="0"
       src="76/lily-718ef860.png"
       alt="[image of music]">
 </a>
</p>




<a name="alternative-breve-notes.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Alternative-breve-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-adjusting-the-shape-of-falls-and-doits" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Adjusting the shape of falls and doits&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-asymmetric-slurs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Asymmetric slurs &gt; </a>]</td></tr></table>
<a name="expressive-marks-alternative-breve-notes"></a>
<h2 class="unnumberedsec">Alternative breve notes</h2>


<p>Breve notes are also available with two vertical lines on each side of
the notehead instead of one line and in baroque style.
</p>

<pre class="verbatim">\relative c'' {
  \time 4/2
  c\breve |
  \override Staff.NoteHead.style = #'altdefault
  b\breve
  \override Staff.NoteHead.style = #'baroque
  b\breve
  \revert Staff.NoteHead.style
  a\breve
}
</pre><p>
 <a href="bf/lily-8f212743.ly">
  <img align="middle"
       border="0"
       src="bf/lily-8f212743.png"
       alt="[image of music]">
 </a>
</p>




<a name="asymmetric-slurs.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Asymmetric-slurs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-alternative-breve-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Alternative breve notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-breathing-signs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Breathing signs &gt; </a>]</td></tr></table>
<a name="expressive-marks-asymmetric-slurs"></a>
<h2 class="unnumberedsec">Asymmetric slurs</h2>


<p>Slurs can be made asymmetric to match an asymmetric pattern of notes
better.
</p>

<pre class="verbatim">slurNotes = { d,8( a' d f a f' d, a) }

\relative c' {
  \stemDown
  \slurUp
  \slurNotes
  \once \override Slur.eccentricity = #3.0
  \slurNotes
}
</pre><p>
 <a href="13/lily-0b483868.ly">
  <img align="middle"
       border="0"
       src="13/lily-0b483868.png"
       alt="[image of music]">
 </a>
</p>




<a name="breathing-signs.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Breathing-signs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-asymmetric-slurs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Asymmetric slurs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-broken-crescendo-hairpin" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Broken Crescendo Hairpin &gt; </a>]</td></tr></table>
<a name="expressive-marks-breathing-signs"></a>
<h2 class="unnumberedsec">Breathing signs</h2>


<p>Breathing signs are available in different tastes: commas (default),
ticks, vees and &ldquo;railroad tracks&rdquo; (caesura).
</p>

<pre class="verbatim">\new Staff \relative c'' {
  \key es \major
  \time 3/4
  % this bar contains no \breathe
  &lt;&lt; { g4 as g } \\ { es4 bes es } &gt;&gt; |
  % Modern notation:
  % by default, \breathe uses the rcomma, just as if saying:
  % \override BreathingSign.text = #(make-musicglyph-markup &quot;scripts.rcomma&quot;)
  &lt;&lt; { g4 as g } \\ { es4 \breathe bes es } &gt;&gt; |

  % rvarcomma and lvarcomma are variations of the default rcomma and lcomma
  % N.B.: must use Staff context here, since we start a Voice below
  \override Staff.BreathingSign.text =
    \markup { \musicglyph #&quot;scripts.rvarcomma&quot; }
  &lt;&lt; { g4 as g } \\ { es4 \breathe bes es } &gt;&gt; |

  % vee
  \override BreathingSign.text = \markup { \musicglyph #&quot;scripts.upbow&quot; }
  es8[ d es f g] \breathe f |

  % caesura
  \override BreathingSign.text =
    \markup { \musicglyph #&quot;scripts.caesura.curved&quot; }
  es8[ d] \breathe es[ f g f] |
  es2 r4 \bar &quot;||&quot;
}
</pre><p>
 <a href="98/lily-414b9a5e.ly">
  <img align="middle"
       border="0"
       src="98/lily-414b9a5e.png"
       alt="[image of music]">
 </a>
</p>




<a name="broken-crescendo-hairpin.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Broken-Crescendo-Hairpin"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-breathing-signs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Breathing signs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-caesura-_0028_0022railtracks_0022_0029-with-fermata" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Caesura (&quot;railtracks&quot;) with fermata &gt; </a>]</td></tr></table>
<a name="expressive-marks-broken-crescendo-hairpin"></a>
<h2 class="unnumberedsec">Broken Crescendo Hairpin</h2>


<p>In order to make parts of a crescendo hairpin invisible, the following
method is used: A white rectangle is drawn on top of the respective
part of the crescendo hairpin, making it invisible.  The rectangle is
defined as postscript code within a text markup.
</p>
<p>The markup command <code>with-dimensions</code> tells LilyPond to consider
only the bottom edge of the rectangle when spacing it against the
hairpin. The property <code>staff-padding</code> prevents the rectangle from
fitting between the hairpin and staff.
</p>
<p>Make sure the hairpin is in a lower layer than the text markup to draw
the rectangle over the hairpin.
</p>

<pre class="verbatim">\relative c' {
  &lt;&lt;
    {
      \dynamicUp
      r2 r16 c'8.\pp r4
    }
    \\
    {
      \override DynamicLineSpanner.layer = #0
      des,2\mf\&lt; ~
      \override TextScript.layer = #2
      \once\override TextScript.staff-padding = #6
      \once\override TextScript.vertical-skylines = #'()
      des16_\markup \with-dimensions #'(2 . 7) #'(0 . 0)
                    \with-color #white
                    \filled-box #'(2 . 7) #'(0 . 2) #0
      r8. des4 ~ des16-&gt;\sff r8.
    }
  &gt;&gt;
}
</pre><p>
 <a href="af/lily-7ead2d62.ly">
  <img align="middle"
       border="0"
       src="af/lily-7ead2d62.png"
       alt="[image of music]">
 </a>
</p>




<a name="caesura-railtracks-with-fermata.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Caesura-_0028_0022railtracks_0022_0029-with-fermata"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-broken-crescendo-hairpin" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Broken Crescendo Hairpin&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-center-text-below-hairpin-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Center text below hairpin dynamics &gt; </a>]</td></tr></table>
<a name="expressive-marks-caesura-_0028_0022railtracks_0022_0029-with-fermata"></a>
<h2 class="unnumberedsec">Caesura (&quot;railtracks&quot;) with fermata</h2>


<p>A caesura is sometimes denoted by a double &ldquo;railtracks&rdquo; breath mark
with a fermata sign positioned above. This snippet shows an optically
pleasing combination of railtracks and fermata.
</p>

<pre class="verbatim">\relative c'' {
  c2.
  % construct the symbol
  \override BreathingSign.text = \markup {
    \override #'(direction . 1)
    \override #'(baseline-skip . 1.8)
    \dir-column {
      \translate #'(0.155 . 0)
        \center-align \musicglyph #&quot;scripts.caesura.curved&quot;
      \center-align \musicglyph #&quot;scripts.ufermata&quot;
    }
  }
  \breathe c4
  % set the breathe mark back to normal
  \revert BreathingSign.text
  c2. \breathe c4
  \bar &quot;|.&quot;
}
</pre><p>
 <a href="e5/lily-4ee7d1c1.ly">
  <img align="middle"
       border="0"
       src="e5/lily-4ee7d1c1.png"
       alt="[image of music]">
 </a>
</p>




<a name="center-text-below-hairpin-dynamics.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Center-text-below-hairpin-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-caesura-_0028_0022railtracks_0022_0029-with-fermata" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Caesura (&quot;railtracks&quot;) with fermata&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-changing-_005cflageolet-mark-size" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Changing \flageolet mark size &gt; </a>]</td></tr></table>
<a name="expressive-marks-center-text-below-hairpin-dynamics"></a>
<h2 class="unnumberedsec">Center text below hairpin dynamics</h2>


<p>This example provides a function to typeset a hairpin (de)crescendo
with some additional text below it, such as &ldquo;molto&rdquo; or &ldquo;poco&rdquo;.
The added text will change the direction according to the direction of
the hairpin. The Hairpin is aligned to DynamicText.
</p>
<p>The example also illustrates how to modify the way an object is
normally printed, using some Scheme code.
</p>

<pre class="verbatim">hairpinWithCenteredText =
#(define-music-function (text) (markup?)
  #{
    \once \override Voice.Hairpin.after-line-breaking =
      #(lambda (grob)
        (let* ((stencil (ly:hairpin::print grob))
               (par-y (ly:grob-parent grob Y))
               (dir (ly:grob-property par-y 'direction))
               (new-stencil (ly:stencil-aligned-to
                 (ly:stencil-combine-at-edge
                   (ly:stencil-aligned-to stencil X CENTER)
                   Y dir
                   (ly:stencil-aligned-to
                     (grob-interpret-markup grob text) X CENTER))
                 X LEFT))
               (staff-space (ly:output-def-lookup
                 (ly:grob-layout grob) 'staff-space))
               (staff-line-thickness
                 (ly:output-def-lookup (ly:grob-layout grob) 'line-thickness))
               (par-x (ly:grob-parent grob X))
               (dyn-text (grob::has-interface par-x 'dynamic-text-interface))
               (dyn-text-stencil-x-length
                 (if dyn-text
                   (interval-length
                     (ly:stencil-extent (ly:grob-property par-x 'stencil) X))
                   0))
               (x-shift
                 (if dyn-text
                   (-
                     (+ staff-space dyn-text-stencil-x-length)
                     (* 0.5 staff-line-thickness)) 0)))

        (ly:grob-set-property! grob 'Y-offset 0)
        (ly:grob-set-property! grob 'stencil
           (ly:stencil-translate-axis
            new-stencil
            x-shift X))))
  #})

hairpinMolto =
\hairpinWithCenteredText \markup { \italic molto }

hairpinMore =
\hairpinWithCenteredText \markup { \larger moltissimo }

\layout { ragged-right = ##f }

\relative c' {
  \hairpinMolto
  c2\&lt; c\f
  \hairpinMore
  c2\ppppp\&lt; c\f
  \break
  \hairpinMolto
  c2^\&lt; c\f
  \hairpinMore
  c2\ppppp\&lt; c\f
}
</pre><p>
 <a href="d7/lily-614b3166.ly">
  <img align="middle"
       border="0"
       src="d7/lily-614b3166.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing--flageolet-mark-size.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Changing-_005cflageolet-mark-size"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-center-text-below-hairpin-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Center text below hairpin dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-changing-text-and-spanner-styles-for-text-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Changing text and spanner styles for text dynamics &gt; </a>]</td></tr></table>
<a name="expressive-marks-changing-_005cflageolet-mark-size"></a>
<h2 class="unnumberedsec">Changing \flageolet mark size</h2>


<p>To make the <code>\flageolet</code> circle smaller use the following Scheme
function.
</p>

<pre class="verbatim">smallFlageolet =
#(let ((m (make-articulation &quot;flageolet&quot;)))
   (set! (ly:music-property m 'tweaks)
         (acons 'font-size -3
                (ly:music-property m 'tweaks)))
   m)

\layout { ragged-right = ##f }

\relative c'' {
  d4^\flageolet_\markup { default size } d_\flageolet
  c4^\smallFlageolet_\markup { smaller } c_\smallFlageolet
}
</pre><p>
 <a href="4b/lily-f8b9f823.ly">
  <img align="middle"
       border="0"
       src="4b/lily-f8b9f823.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-text-and-spanner-styles-for-text-dynamics.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Changing-text-and-spanner-styles-for-text-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-changing-_005cflageolet-mark-size" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Changing \flageolet mark size&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Changing the appearance of a slur from solid to dotted or dashed &gt; </a>]</td></tr></table>
<a name="expressive-marks-changing-text-and-spanner-styles-for-text-dynamics"></a>
<h2 class="unnumberedsec">Changing text and spanner styles for text dynamics</h2>


<p>The text used for crescendos and decrescendos can be changed by
modifying the context properties <code>crescendoText</code> and
<code>decrescendoText</code>.
</p>
<p>The style of the spanner line can be changed by modifying the
<code>'style</code> property of <code>DynamicTextSpanner</code>.  The default value
is <code>'dashed-line</code>, and other possible values include <code>'line</code>,
<code>'dotted-line</code> and <code>'none</code>.
</p>

<pre class="verbatim">\relative c'' {
  \set crescendoText = \markup { \italic { cresc. poco } }
  \set crescendoSpanner = #'text
  \override DynamicTextSpanner.style = #'dotted-line
  a2\&lt; a
  a2 a
  a2 a
  a2 a\mf
}
</pre><p>
 <a href="ba/lily-cc7a7fde.ly">
  <img align="middle"
       border="0"
       src="ba/lily-cc7a7fde.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-changing-text-and-spanner-styles-for-text-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Changing text and spanner styles for text dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-changing-the-breath-mark-symbol" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Changing the breath mark symbol &gt; </a>]</td></tr></table>
<a name="expressive-marks-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed"></a>
<h2 class="unnumberedsec">Changing the appearance of a slur from solid to dotted or dashed</h2>


<p>The appearance of slurs may be changed from solid to dotted or dashed.
</p>

<pre class="verbatim">\relative c' {
  c4( d e c)
  \slurDotted
  c4( d e c)
  \slurSolid
  c4( d e c)
  \slurDashed
  c4( d e c)
  \slurSolid
  c4( d e c)
}
</pre><p>
 <a href="25/lily-fbc81908.ly">
  <img align="middle"
       border="0"
       src="25/lily-fbc81908.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-breath-mark-symbol.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Changing-the-breath-mark-symbol"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Changing the appearance of a slur from solid to dotted or dashed&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-changing-the-number-of-augmentation-dots-per-note" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Changing the number of augmentation dots per note &gt; </a>]</td></tr></table>
<a name="expressive-marks-changing-the-breath-mark-symbol"></a>
<h2 class="unnumberedsec">Changing the breath mark symbol</h2>


<p>The glyph of the breath mark can be tuned by overriding the <code>text</code>
property of the <code>BreathingSign</code> layout object with any markup
text.
</p>

<pre class="verbatim">\relative c'' {
  c2
  \override BreathingSign.text =
    \markup { \musicglyph #&quot;scripts.rvarcomma&quot; }
  \breathe
  d2
}
</pre><p>
 <a href="4b/lily-33de44ed.ly">
  <img align="middle"
       border="0"
       src="4b/lily-33de44ed.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-number-of-augmentation-dots-per-note.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Changing-the-number-of-augmentation-dots-per-note"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-changing-the-breath-mark-symbol" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Changing the breath mark symbol&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-combining-dynamics-with-markup-texts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Combining dynamics with markup texts &gt; </a>]</td></tr></table>
<a name="expressive-marks-changing-the-number-of-augmentation-dots-per-note"></a>
<h2 class="unnumberedsec">Changing the number of augmentation dots per note</h2>


<p>The number of augmentation dots on a single note can be changed
indepently of the dots placed after the note.
</p>

<pre class="verbatim">\relative c' {
  c4.. a16 r2 |
  \override Dots.dot-count = #4
  c4.. a16 r2 |
  \override Dots.dot-count = #0
  c4.. a16 r2 |
  \revert Dots.dot-count
  c4.. a16 r2 |
}
</pre><p>
 <a href="30/lily-31d4da67.ly">
  <img align="middle"
       border="0"
       src="30/lily-31d4da67.png"
       alt="[image of music]">
 </a>
</p>




<a name="combining-dynamics-with-markup-texts.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Combining-dynamics-with-markup-texts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-changing-the-number-of-augmentation-dots-per-note" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Changing the number of augmentation dots per note&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-contemporary-glissando" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Contemporary glissando &gt; </a>]</td></tr></table>
<a name="expressive-marks-combining-dynamics-with-markup-texts"></a>
<h2 class="unnumberedsec">Combining dynamics with markup texts</h2>


<p>Some dynamics may involve text indications (such as &ldquo;più forte&rdquo; or
&ldquo;piano subito&rdquo;). These can be produced using a <code>\markup</code>
block.
</p>

<pre class="verbatim">piuF = \markup { \italic più \dynamic f }

\layout { ragged-right = ##f }

\relative c'' {
  c2\f c-\piuF
}
</pre><p>
 <a href="a8/lily-e66129d1.ly">
  <img align="middle"
       border="0"
       src="a8/lily-e66129d1.png"
       alt="[image of music]">
 </a>
</p>




<a name="contemporary-glissando.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Contemporary-glissando"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-combining-dynamics-with-markup-texts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Combining dynamics with markup texts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-controlling-spanner-visibility-after-a-line-break" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Controlling spanner visibility after a line break &gt; </a>]</td></tr></table>
<a name="expressive-marks-contemporary-glissando"></a>
<h2 class="unnumberedsec">Contemporary glissando</h2>


<p>A contemporary glissando without a final note can be typeset using a
hidden note and cadenza timing.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  \override Glissando.style = #'zigzag
  c4 c
  \cadenzaOn
  c4\glissando
  \hideNotes
  c,,4
  \unHideNotes
  \cadenzaOff
  \bar &quot;|&quot;
}
</pre><p>
 <a href="79/lily-7f848d6f.ly">
  <img align="middle"
       border="0"
       src="79/lily-7f848d6f.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-spanner-visibility-after-a-line-break.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Controlling-spanner-visibility-after-a-line-break"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-contemporary-glissando" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Contemporary glissando&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-controlling-the-vertical-ordering-of-scripts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Controlling the vertical ordering of scripts &gt; </a>]</td></tr></table>
<a name="expressive-marks-controlling-spanner-visibility-after-a-line-break"></a>
<h2 class="unnumberedsec">Controlling spanner visibility after a line break</h2>


<p>The visibility of spanners which end on the first note following a line
break is controlled by the <code>after-line-breaking</code> callback
<code>ly:spanner::kill-zero-spanned-time</code>.
</p>
<p>For objects such as glissandos and hairpins, the default behaviour is
to hide the spanner after a break; disabling the callback will allow
the left-broken span to be shown.
</p>
<p>Conversely, spanners which are usually visible, such as text spans, can
be hidden by enabling the callback.
</p>

<pre class="verbatim">\paper { ragged-right = ##t }

\relative c'' {
  \override Hairpin.to-barline = ##f
  \override Glissando.breakable = ##t
  % show hairpin
  \override Hairpin.after-line-breaking = ##t
  % hide text span
  \override TextSpanner.after-line-breaking =
    #ly:spanner::kill-zero-spanned-time
  e2\&lt;\startTextSpan
  % show glissando
  \override Glissando.after-line-breaking = ##t
  f2\glissando
  \break
  f,1\!\stopTextSpan
}
</pre><p>
 <a href="eb/lily-37d11b27.ly">
  <img align="middle"
       border="0"
       src="eb/lily-37d11b27.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-the-vertical-ordering-of-scripts.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Controlling-the-vertical-ordering-of-scripts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-controlling-spanner-visibility-after-a-line-break" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Controlling spanner visibility after a line break&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-a-delayed-turn" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating a delayed turn &gt; </a>]</td></tr></table>
<a name="expressive-marks-controlling-the-vertical-ordering-of-scripts"></a>
<h2 class="unnumberedsec">Controlling the vertical ordering of scripts</h2>


<p>The vertical ordering of scripts is controlled with the
<code>'script-priority</code> property. The lower this number, the closer it
will be put to the note. In this example, the <code>TextScript</code> (the
sharp symbol) first has the lowest priority, so it is put lowest in the
first example. In the second, the prall trill (the <code>Script</code>) has
the lowest, so it is on the inside. When two objects have the same
priority, the order in which they are entered determines which one
comes first.
</p>

<pre class="verbatim">\relative c''' {
  \once \override TextScript.script-priority = #-100
  a2^\prall^\markup { \sharp }

  \once \override Script.script-priority = #-100
  a2^\prall^\markup { \sharp }
}
</pre><p>
 <a href="e8/lily-7e01441c.ly">
  <img align="middle"
       border="0"
       src="e8/lily-7e01441c.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-a-delayed-turn.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-a-delayed-turn"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-controlling-the-vertical-ordering-of-scripts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Controlling the vertical ordering of scripts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-arpeggios-across-notes-in-different-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating arpeggios across notes in different voices &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-a-delayed-turn"></a>
<h2 class="unnumberedsec">Creating a delayed turn</h2>


<p>Creating a delayed turn, where the lower note of the turn uses the
accidental, requires several overrides.  The
<code>outside-staff-priority</code> property must be set to <code>#f</code>, as
otherwise this would take precedence over the <code>avoid-slur
property</code>.  Changing the fractions <code>2/3</code> and <code>1/3</code> adjusts
the horizontal position.
</p>

<pre class="verbatim">\relative c'' {
  c2*2/3 ( s2*1/3\turn d4) r
  &lt;&lt;
    { c4.( d8) }
    { s4 s\turn }
  &gt;&gt;
  \transpose c d \relative c'' &lt;&lt;
    { c4.( d8) }
    {
      s4
      \once \set suggestAccidentals = ##t
      \once \override AccidentalSuggestion.outside-staff-priority = ##f
      \once \override AccidentalSuggestion.avoid-slur = #'inside
      \once \override AccidentalSuggestion.font-size = -3
      \once \override AccidentalSuggestion.script-priority = -1
      \single \hideNotes
      b8-\turn \noBeam
      s8
    }
  &gt;&gt;
}
</pre><p>
 <a href="9e/lily-e623a356.ly">
  <img align="middle"
       border="0"
       src="9e/lily-e623a356.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-arpeggios-across-notes-in-different-voices.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-arpeggios-across-notes-in-different-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-a-delayed-turn" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating a delayed turn&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-cross_002dstaff-arpeggios-in-a-piano-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating cross-staff arpeggios in a piano staff &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-arpeggios-across-notes-in-different-voices"></a>
<h2 class="unnumberedsec">Creating arpeggios across notes in different voices</h2>


<p>An arpeggio can be drawn across notes in different voices on the same
staff if the <code>Span_arpeggio_engraver</code> is added to the <code>Staff</code>
context:
</p>

<pre class="verbatim">\new Staff \with {
  \consists &quot;Span_arpeggio_engraver&quot;
}
\relative c' {
  \set Staff.connectArpeggios = ##t
  &lt;&lt;
    { &lt;e' g&gt;4\arpeggio &lt;d f&gt; &lt;d f&gt;2 }
    \\
    { &lt;d, f&gt;2\arpeggio &lt;g b&gt;2 }
  &gt;&gt;
}
</pre><p>
 <a href="a7/lily-e4cddad8.ly">
  <img align="middle"
       border="0"
       src="a7/lily-e4cddad8.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-cross-staff-arpeggios-in-a-piano-staff.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-cross_002dstaff-arpeggios-in-a-piano-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-arpeggios-across-notes-in-different-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating arpeggios across notes in different voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-cross_002dstaff-arpeggios-in-other-contexts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating cross-staff arpeggios in other contexts &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-cross_002dstaff-arpeggios-in-a-piano-staff"></a>
<h2 class="unnumberedsec">Creating cross-staff arpeggios in a piano staff</h2>


<p>In a <code>PianoStaff</code>, it is possible to let an arpeggio cross between
the staves by setting the property <code>PianoStaff.connectArpeggios</code>.
</p>


<pre class="verbatim">\new PianoStaff \relative c'' &lt;&lt;
  \set PianoStaff.connectArpeggios = ##t
  \new Staff {
    &lt;c e g c&gt;4\arpeggio
    &lt;g c e g&gt;4\arpeggio
    &lt;e g c e&gt;4\arpeggio
    &lt;c e g c&gt;4\arpeggio
  }
  \new Staff {
    \clef bass
    \repeat unfold 4 {
      &lt;c,, e g c&gt;4\arpeggio
    }
  }
&gt;&gt;
</pre><p>
 <a href="a6/lily-8b301063.ly">
  <img align="middle"
       border="0"
       src="a6/lily-8b301063.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-cross-staff-arpeggios-in-other-contexts.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-cross_002dstaff-arpeggios-in-other-contexts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-cross_002dstaff-arpeggios-in-a-piano-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating cross-staff arpeggios in a piano staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-double_002ddigit-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating double-digit fingerings &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-cross_002dstaff-arpeggios-in-other-contexts"></a>
<h2 class="unnumberedsec">Creating cross-staff arpeggios in other contexts</h2>


<p>Cross-staff arpeggios can be created in contexts other than
<code>GrandStaff</code>, <code>PianoStaff</code> and <code>StaffGroup</code> if the
<code>Span_arpeggio_engraver</code> is included in the <code>Score</code> context.
</p>

<pre class="verbatim">\score {
  \new ChoirStaff {
    \set Score.connectArpeggios = ##t
    &lt;&lt;
      \new Voice \relative c' {
        &lt;c e&gt;2\arpeggio
        &lt;d f&gt;2\arpeggio
        &lt;c e&gt;1\arpeggio
      }
      \new Voice \relative c {
        \clef bass
        &lt;c g'&gt;2\arpeggio
        &lt;b g'&gt;2\arpeggio
        &lt;c g'&gt;1\arpeggio
      }
    &gt;&gt;
  }
  \layout {
    \context {
      \Score
      \consists &quot;Span_arpeggio_engraver&quot;
    }
  }
}
</pre><p>
 <a href="cb/lily-52a65900.ly">
  <img align="middle"
       border="0"
       src="cb/lily-52a65900.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-double-digit-fingerings.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-double_002ddigit-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-cross_002dstaff-arpeggios-in-other-contexts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating cross-staff arpeggios in other contexts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-_0022real_0022-parenthesized-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating &quot;real&quot; parenthesized dynamics &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-double_002ddigit-fingerings"></a>
<h2 class="unnumberedsec">Creating double-digit fingerings</h2>


<p>Creating fingerings larger than 5 is possible.
</p>

<pre class="verbatim">\relative c' {
  c1-10
  c1-50
  c1-36
  c1-29
}
</pre><p>
 <a href="53/lily-413a6723.ly">
  <img align="middle"
       border="0"
       src="53/lily-413a6723.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-real-parenthesized-dynamics.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-_0022real_0022-parenthesized-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-double_002ddigit-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating double-digit fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-simultaneous-rehearsal-marks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating simultaneous rehearsal marks &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-_0022real_0022-parenthesized-dynamics"></a>
<h2 class="unnumberedsec">Creating &quot;real&quot; parenthesized dynamics</h2>


<p>Although the easiest way to add parentheses to a dynamic mark is to use
a <code>\markup</code> block, this method has a downside: the created
objects will behave like text markups, and not like dynamics.
</p>
<p>However, it is possible to create a similar object using the equivalent
Scheme code (as described in the Notation Reference), combined with the
<code>make-dynamic-script</code> function. This way, the markup will be
regarded as a dynamic, and therefore will remain compatible with
commands such as <code>\dynamicUp</code> or <code>\dynamicDown</code>.
</p>



<pre class="verbatim">paren =
#(define-event-function (dyn) (ly:event?)
   (make-dynamic-script
    #{ \markup \concat {
         \normal-text \italic \fontsize #2 (
	 \pad-x #0.2 #(ly:music-property dyn 'text)
	 \normal-text \italic \fontsize #2 )
       }
    #}))

\relative c'' {
  c4\paren\f c c \dynamicUp c\paren\p
}
</pre><p>
 <a href="8b/lily-4b6a07d1.ly">
  <img align="middle"
       border="0"
       src="8b/lily-4b6a07d1.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-simultaneous-rehearsal-marks.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-simultaneous-rehearsal-marks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-_0022real_0022-parenthesized-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating &quot;real&quot; parenthesized dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-slurs-across-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating slurs across voices &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-simultaneous-rehearsal-marks"></a>
<h2 class="unnumberedsec">Creating simultaneous rehearsal marks</h2>


<p>Unlike text scripts, rehearsal marks cannot be stacked at a particular
point in a score: only one <code>RehearsalMark</code> object is created.
Using an invisible measure and bar line, an extra rehearsal mark can be
added, giving the appearance of two marks in the same column. This
method may also prove useful for placing rehearsal marks at both the
end of one system and the start of the following system.
</p>

<pre class="verbatim">{
  \key a \major
  \set Score.markFormatter = #format-mark-box-letters
  \once \override Score.RehearsalMark.outside-staff-priority = #5000
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \once \override Score.RehearsalMark.break-align-symbols = #'(key-signature)
  \mark \markup { \bold { Senza denti } }

  % the hidden measure and bar line
  % \cadenzaOn turns off automatic calculation of bar numbers
  \cadenzaOn
  \once \override Score.TimeSignature.stencil = ##f
  \time 1/16
  s16 \bar &quot;&quot;
  \cadenzaOff

  \time 4/4
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \mark \markup { \box \bold Intro }
  d'1
  \mark \default
  d'1
}
</pre><p>
 <a href="e4/lily-94c094d5.ly">
  <img align="middle"
       border="0"
       src="e4/lily-94c094d5.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-slurs-across-voices.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-slurs-across-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-simultaneous-rehearsal-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating simultaneous rehearsal marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-creating-text-spanners" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Creating text spanners &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-slurs-across-voices"></a>
<h2 class="unnumberedsec">Creating slurs across voices</h2>


<p>In some situations, it may be necessary to create slurs between notes
from different voices.
</p>
<p>The solution is to add invisible notes to one of the voices, using
<code>\hideNotes</code>.
</p>
<p>This example is measure 235 of the Ciaconna from Bach&rsquo;s 2nd Partita for
solo violin, BWV 1004.
</p>

<pre class="verbatim">\relative c' {
  &lt;&lt;
    {
      d16( a') s a s a[ s a] s a[ s a]
    }
    \\
    {
      \slurUp
      bes,16[ s e](
      \hideNotes a)
      \unHideNotes f[(
      \hideNotes a)
      \unHideNotes fis](
      \hideNotes a)
      \unHideNotes g[(
      \hideNotes a)
      \unHideNotes gis](
      \hideNotes a)
    }
  &gt;&gt;
}
</pre><p>
 <a href="35/lily-8ea95a2b.ly">
  <img align="middle"
       border="0"
       src="35/lily-8ea95a2b.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-text-spanners.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Creating-text-spanners"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-slurs-across-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating slurs across voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-double-glissando" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Double glissando &gt; </a>]</td></tr></table>
<a name="expressive-marks-creating-text-spanners"></a>
<h2 class="unnumberedsec">Creating text spanners</h2>


<p>The <code>\startTextSpan</code> and <code>\stopTextSpan</code> commands allow the
creation of text spanners as easily as pedal indications or
octavations. Override some properties of the <code>TextSpanner</code> object
to modify its output.
</p>

<pre class="verbatim">\paper { ragged-right = ##f }

\relative c'' {
  \override TextSpanner.bound-details.left.text = #&quot;bla&quot;
  \override TextSpanner.bound-details.right.text = #&quot;blu&quot;
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \override TextSpanner.style = #'line
  \once \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \override TextSpanner.style = #'dashed-line
  \override TextSpanner.bound-details.left.text =
    \markup { \draw-line #'(0 . 1) }
  \override TextSpanner.bound-details.right.text =
    \markup { \draw-line #'(0 . -2) }
  \once \override TextSpanner.bound-details.right.padding = #-2

  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \set Staff.middleCPosition = #-13
  \override TextSpanner.dash-period = #10
  \override TextSpanner.dash-fraction = #0.5
  \override TextSpanner.thickness = #10
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan
}
</pre><p>
 <a href="96/lily-3ca49b8e.ly">
  <img align="middle"
       border="0"
       src="96/lily-3ca49b8e.png"
       alt="[image of music]">
 </a>
</p>




<a name="double-glissando.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Double-glissando"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-creating-text-spanners" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Creating text spanners&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-dynamics-custom-text-spanner-postfix" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Dynamics custom text spanner postfix &gt; </a>]</td></tr></table>
<a name="expressive-marks-double-glissando"></a>
<h2 class="unnumberedsec">Double glissando</h2>


<p>To connect chords with glissando lines, attach a second glissando to a
hidden voice.
</p>

<pre class="verbatim">\relative c {
  \clef bass
  &lt;&lt;
    {
      % new voice ( = \voiceOne), hidden
      \hideNotes
      % attach glissando to note heads
      e2\glissando g
    }
    \\
    {
      % original voice with chords rearranged so that
      % glissando is attached to a &amp; c
      &lt;e a,&gt;2\glissando &lt;g c,&gt;
    }
  &gt;&gt;
}
</pre><p>
 <a href="9e/lily-ea5d0b4e.ly">
  <img align="middle"
       border="0"
       src="9e/lily-ea5d0b4e.png"
       alt="[image of music]">
 </a>
</p>




<a name="dynamics-custom-text-spanner-postfix.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Dynamics-custom-text-spanner-postfix"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-double-glissando" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Double glissando&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-dynamics-text-spanner-postfix" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Dynamics text spanner postfix &gt; </a>]</td></tr></table>
<a name="expressive-marks-dynamics-custom-text-spanner-postfix"></a>
<h2 class="unnumberedsec">Dynamics custom text spanner postfix</h2>


<p>Postfix functions for custom crescendo text spanners.  The spanners
should start on the first note of the measure.  One has to use
-\mycresc, otherwise the spanner start will rather be assigned to the
next note.
</p>

<pre class="verbatim">% Two functions for (de)crescendo spanners where you can explicitly give the
% spanner text.
mycresc =
#(define-music-function (mymarkup) (markup?)
   (make-music 'CrescendoEvent
               'span-direction START
               'span-type 'text
               'span-text mymarkup))
mydecresc =
#(define-music-function (mymarkup) (markup?)
   (make-music 'DecrescendoEvent
               'span-direction START
               'span-type 'text
               'span-text mymarkup))

\relative c' {
  c4-\mycresc &quot;custom cresc&quot; c4 c4 c4 |
  c4 c4 c4 c4 |
  c4-\mydecresc &quot;custom decresc&quot; c4 c4 c4 |
  c4 c4\! c4 c4
}
</pre><p>
 <a href="b4/lily-cd5cd662.ly">
  <img align="middle"
       border="0"
       src="b4/lily-cd5cd662.png"
       alt="[image of music]">
 </a>
</p>




<a name="dynamics-text-spanner-postfix.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Dynamics-text-spanner-postfix"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-dynamics-custom-text-spanner-postfix" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Dynamics custom text spanner postfix&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-glissandi-can-skip-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Glissandi can skip grobs &gt; </a>]</td></tr></table>
<a name="expressive-marks-dynamics-text-spanner-postfix"></a>
<h2 class="unnumberedsec">Dynamics text spanner postfix</h2>


<p>Custom text spanners can be defined and used with hairpin and text
crescendos.  <code>\&lt;</code> and <code>\&gt;</code> produce hairpins by default,
<code>\cresc</code> etc. produce text spanners by default.
</p>

<pre class="verbatim">% Some sample text dynamic spanners, to be used as postfix operators
crpoco =
#(make-music 'CrescendoEvent
             'span-direction START
             'span-type 'text
             'span-text &quot;cresc. poco a poco&quot;)

\relative c' {
  c4\cresc d4 e4 f4 |
  g4 a4\! b4\crpoco c4 |
  c4 d4 e4 f4 |
  g4 a4\! b4\&lt; c4 |
  g4\dim a4 b4\decresc c4\!
}
</pre><p>
 <a href="bf/lily-8c70fd64.ly">
  <img align="middle"
       border="0"
       src="bf/lily-8c70fd64.png"
       alt="[image of music]">
 </a>
</p>




<a name="glissandi-can-skip-grobs.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Glissandi-can-skip-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-dynamics-text-spanner-postfix" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Dynamics text spanner postfix&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-hairpins-with-different-line-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Hairpins with different line styles &gt; </a>]</td></tr></table>
<a name="expressive-marks-glissandi-can-skip-grobs"></a>
<h2 class="unnumberedsec">Glissandi can skip grobs</h2>


<p><code>NoteColumn</code> grobs can be skipped over by glissandi.
</p>

<pre class="verbatim">\relative c' {
  a2 \glissando
  \once \override NoteColumn.glissando-skip = ##t
  f''4 d,
}
</pre><p>
 <a href="e4/lily-30f2f92d.ly">
  <img align="middle"
       border="0"
       src="e4/lily-30f2f92d.png"
       alt="[image of music]">
 </a>
</p>




<a name="hairpins-with-different-line-styles.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Hairpins-with-different-line-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-glissandi-can-skip-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Glissandi can skip grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-hiding-the-extender-line-for-text-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Hiding the extender line for text dynamics &gt; </a>]</td></tr></table>
<a name="expressive-marks-hairpins-with-different-line-styles"></a>
<h2 class="unnumberedsec">Hairpins with different line styles</h2>


<p>Hairpins can take any style from <code>line-interface</code> - dashed-line,
dotted-line, line, trill or zigzag.
</p>

<pre class="verbatim">\relative c' {
  c2\&lt; c\!
  \override Hairpin.style = #'dashed-line
  c2\&lt; c\!
  \override Hairpin.style = #'dotted-line
  c2\&lt; c\!
  \override Hairpin.style = #'line
  c2\&lt; c\!
  \override Hairpin.style = #'trill
  c2\&lt; c\!
  \override Hairpin.style = #'zigzag
  c2\&lt; c\!
  \revert Hairpin.style
  c2\&lt; c\!
}
</pre><p>
 <a href="cd/lily-14fc0a1f.ly">
  <img align="middle"
       border="0"
       src="cd/lily-14fc0a1f.png"
       alt="[image of music]">
 </a>
</p>




<a name="hiding-the-extender-line-for-text-dynamics.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Hiding-the-extender-line-for-text-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-hairpins-with-different-line-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Hairpins with different line styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;) &gt; </a>]</td></tr></table>
<a name="expressive-marks-hiding-the-extender-line-for-text-dynamics"></a>
<h2 class="unnumberedsec">Hiding the extender line for text dynamics</h2>


<p>Text style dynamic changes (such as cresc. and dim.) are printed with a
dashed line showing their extent.  This line can be suppressed in the
following way:
</p>

<pre class="verbatim">\relative c'' {
  \override DynamicTextSpanner.style = #'none
  \crescTextCresc
  c1\&lt; | d | b | c\!
}
</pre><p>
 <a href="62/lily-0f01254b.ly">
  <img align="middle"
       border="0"
       src="62/lily-0f01254b.png"
       alt="[image of music]">
 </a>
</p>




<a name="horizontally-aligning-custom-dynamics-e.g.-sempre-pp,-piu-f,-subito-p.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-hiding-the-extender-line-for-text-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Hiding the extender line for text dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: How to print two rehearsal marks above and below the same barline (method 1) &gt; </a>]</td></tr></table>
<a name="expressive-marks-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029"></a>
<h2 class="unnumberedsec">Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)</h2>


<p>Some dynamic expressions involve additional text, like &ldquo;sempre pp&rdquo;.
Since dynamics are usually centered under the note, the \pp would be
displayed way after the note it applies to.
</p>
<p>To correctly align the &ldquo;sempre pp&rdquo; horizontally, so that it is
aligned as if it were only the \pp, there are several approaches:
</p>
<p>* Simply use <code>\once\override DynamicText.X-offset = #-9.2</code>
before the note with the dynamics to manually shift it to the correct
position. Drawback: This has to be done manually each time you use that
dynamic markup...
</p>
<p>* Add some padding (<code>#:hspace 7.1</code>) into the definition of your
custom dynamic mark, so that after lilypond center-aligns it, it is
already correctly aligned. Drawback: The padding really takes up that
space and does not allow any other markup or dynamics to be shown in
that position.
</p>
<p>* Shift the dynamic script <code>\once\override ... .X-offset = ..</code>.
Drawback: <code>\once\override</code> is needed for every invocation!
</p>
<p>* Set the dimensions of the additional text to 0 (using
<code>#:with-dimensions '(0 . 0) '(0 . 0)</code>). Drawback: To LilyPond
&ldquo;sempre&rdquo; has no extent, so it might put other stuff there and create
collisions (which are not detected by the collision detection!). Also,
there seems to be some spacing, so it&rsquo;s not exactly the same alignment
as without the additional text
</p>
<p>* Add an explicit shifting directly inside the scheme function for the
dynamic-script.
</p>
<p>* Set an explicit alignment inside the dynamic-script. By default, this
won&rsquo;t have any effect, only if one sets X-offset! Drawback: One needs
to set <code>DynamicText.X-offset</code>, which will apply to all dynamic
texts! Also, it is aligned at the right edge of the additional text,
not at the center of pp.
</p>




<pre class="verbatim">% Solution 1: Using a simple markup with a particular halign value
% Drawback: It's a markup, not a dynamic command, so \dynamicDown
%           etc. will have no effect
semppMarkup = \markup { \halign #1.4 \italic &quot;sempre&quot; \dynamic &quot;pp&quot; }

% Solution 2: Using a dynamic script &amp; shifting with
%             \once \override ...X-offset = ..
% Drawback: \once \override needed for every invocation
semppK =
#(make-dynamic-script
  (markup #:line
          (#:normal-text
           #:italic &quot;sempre&quot;
           #:dynamic &quot;pp&quot;)))

% Solution 3: Padding the dynamic script so the center-alignment
%             puts it at the correct position
% Drawback: the padding really reserves the space, nothing else can be there
semppT =
#(make-dynamic-script
  (markup #:line
          (#:normal-text
           #:italic &quot;sempre&quot;
           #:dynamic &quot;pp&quot;
           #:hspace 7.1)))

% Solution 4: Dynamic, setting the dimensions of the additional text to 0
% Drawback: To lilypond &quot;sempre&quot; has no extent, so it might put
%           other stuff there =&gt; collisions
% Drawback: Also, there seems to be some spacing, so it's not exactly the
%           same alignment as without the additional text
semppM =
#(make-dynamic-script
  (markup #:line
          (#:with-dimensions '(0 . 0) '(0 . 0)
                             #:right-align
                             #:normal-text
                             #:italic &quot;sempre&quot;
                             #:dynamic &quot;pp&quot;)))

% Solution 5: Dynamic with explicit shifting inside the scheme function
semppG =
#(make-dynamic-script
  (markup #:hspace 0
          #:translate '(-18.85 . 0)
          #:line (#:normal-text
                  #:italic &quot;sempre&quot;
                  #:dynamic &quot;pp&quot;)))

% Solution 6: Dynamic with explicit alignment. This has only effect
%             if one sets X-offset!
% Drawback: One needs to set DynamicText.X-offset!
% Drawback: Aligned at the right edge of the additional text,
%           not at the center of pp
semppMII =
#(make-dynamic-script
  (markup #:line (#:right-align
                  #:normal-text
                  #:italic &quot;sempre&quot;
                  #:dynamic &quot;pp&quot;)))

\new StaffGroup &lt;&lt;
  \new Staff = &quot;s&quot; \with { instrumentName = \markup \column { Normal } }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\pp c\p c c | c\ff c c\pp c
    }
  &gt;&gt;
  \new Staff = &quot;sMarkup&quot; \with {
    instrumentName = \markup \column { Normal markup }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4-\semppMarkup c\p c c | c\ff c c-\semppMarkup c
    }
  &gt;&gt;
  \new Staff = &quot;sK&quot; \with {
    instrumentName = \markup \column { Explicit shifting }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      \once \override DynamicText.X-offset = #-9.2
      c4\semppK c\p c c
      c4\ff c
      \once \override DynamicText.X-offset = #-9.2
      c4\semppK c
    }
  &gt;&gt;
  \new Staff = &quot;sT&quot; \with {
    instrumentName = \markup \column { Right padding }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\semppT c\p c c | c\ff c c\semppT c
    }
  &gt;&gt;
  \new Staff = &quot;sM&quot; \with {
    instrumentName = \markup \column { Set dimension &quot;to zero&quot; }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\semppM c\p c c | c\ff c c\semppM c
    }
  &gt;&gt;
  \new Staff = &quot;sG&quot; \with {
    instrumentName = \markup \column { Shift inside dynamics}
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\semppG c\p c c | c\ff c c\semppG c
    }
  &gt;&gt;
  \new Staff = &quot;sMII&quot; \with {
    instrumentName = \markup \column { Alignment inside dynamics }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      % Setting to ##f (false) gives the same result
      \override DynamicText.X-offset = #0
      c4\semppMII c\p c c | c\ff c c\semppMII c
    }
  &gt;&gt;
&gt;&gt;

\layout { \override Staff.InstrumentName.self-alignment-X = #LEFT }
</pre><p>
 <a href="5c/lily-1724bbd9.ly">
  <img align="middle"
       border="0"
       src="5c/lily-1724bbd9.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-1.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: How to print two rehearsal marks above and below the same barline (method 2) &gt; </a>]</td></tr></table>
<a name="expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 1)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo;, one on top of the other. It
shifts the lower rehearsal mark below the staff and then adds padding
above it in order to place the upper rehearsal mark above the staff.
</p>
<p>By adjusting the extra-offset and baseline-skip values you can increase
or decrease the overall space between the rehearsal mark and the staff.
</p>
<p>Because nearly every type of glyph or string can be made to behave like
a rehearsal mark it is possible to centre those above and below a bar
line.
</p>
<p>Adding the appropriate &rsquo;break visibility&rsquo; as shown in snippet 1 will
allow you to position two marks at the end of a line as well.
</p>
<p>Note: Method 1 is less complex than Method 2 but does not really allow
for fine tuning of placement of one of the rehearsal marks without
affecting the other.  It may also give some problems with vertical
spacing, since using <code>extra-offset</code> does not change the bounding
box of the mark from its original value.
</p>

<pre class="verbatim">\relative c'{
  c d e f |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \circle 1 \box A }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \flat { \bold \small \italic Fine. } }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \override Score.RehearsalMark.break-visibility = #begin-of-line-invisible
  \mark \markup \center-column { \fermata \box z }
}
</pre><p>
 <a href="07/lily-41bbeb51.ly">
  <img align="middle"
       border="0"
       src="07/lily-41bbeb51.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-2.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: How to print two rehearsal marks above and below the same barline (method 1)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-inserting-a-caesura" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Inserting a caesura &gt; </a>]</td></tr></table>
<a name="expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 2)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo; - one above the stave and one
below, by creating two voices, adding the Rehearsal Mark engraver to
each voice - without this no rehearsal mark is printed - and then
placing each rehearsal mark UP and DOWN in each voice respectively.
</p>
<p>This method (as opposed to method 1) is more complex, but allows for
more flexibility, should it be needed to tweak each rehearsal mark
independently of the other.
</p>

<pre class="verbatim">\score {
  \relative c'
  &lt;&lt;
    \new Staff {
      &lt;&lt;
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
        }
        { c4 d e f
          \mark \markup { \box A }
          c4 d e f
        }
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
          \override RehearsalMark.direction = #DOWN
        }
        { s4 s s s
          \mark \markup { \circle 1 }
          s4 s s s
        }
      &gt;&gt;
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Mark_engraver&quot;
      \remove &quot;Staff_collecting_engraver&quot;
    }
  }
}
</pre><p>
 <a href="99/lily-c497ffda.ly">
  <img align="middle"
       border="0"
       src="99/lily-c497ffda.png"
       alt="[image of music]">
 </a>
</p>




<a name="inserting-a-caesura.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Inserting-a-caesura"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: How to print two rehearsal marks above and below the same barline (method 2)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-laissez-vibrer-ties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Laissez vibrer ties &gt; </a>]</td></tr></table>
<a name="expressive-marks-inserting-a-caesura"></a>
<h2 class="unnumberedsec">Inserting a caesura</h2>


<p>Caesura marks can be created by overriding the <code>'text</code> property of
the <code>BreathingSign</code> object. A curved caesura mark is also
available.
</p>

<pre class="verbatim">\relative c'' {
  \override BreathingSign.text = \markup {
    \musicglyph #&quot;scripts.caesura.straight&quot;
  }
  c8 e4. \breathe g8. e16 c4

  \override BreathingSign.text = \markup {
    \musicglyph #&quot;scripts.caesura.curved&quot;
  }
  g8 e'4. \breathe g8. e16 c4
}
</pre><p>
 <a href="a7/lily-8c7a8f65.ly">
  <img align="middle"
       border="0"
       src="a7/lily-8c7a8f65.png"
       alt="[image of music]">
 </a>
</p>




<a name="laissez-vibrer-ties.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Laissez-vibrer-ties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-inserting-a-caesura" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Inserting a caesura&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-line-arrows" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Line arrows &gt; </a>]</td></tr></table>
<a name="expressive-marks-laissez-vibrer-ties"></a>
<h2 class="unnumberedsec">Laissez vibrer ties</h2>


<p>Laissez vibrer ties have a fixed size. Their formatting can be tuned
using <code>'tie-configuration</code>.
</p>

<pre class="verbatim">\relative c' {
  &lt;c e g&gt;4\laissezVibrer r &lt;c f g&gt;\laissezVibrer r
  &lt;c d f g&gt;4\laissezVibrer r &lt;c d f g&gt;4.\laissezVibrer r8

  &lt;c d e f&gt;4\laissezVibrer r
  \override LaissezVibrerTieColumn.tie-configuration
     = #`((-7 . ,DOWN)
          (-5 . ,DOWN)
          (-3 . ,UP)
          (-1 . ,UP))
  &lt;c d e f&gt;4\laissezVibrer r
}
</pre><p>
 <a href="a7/lily-958b3403.ly">
  <img align="middle"
       border="0"
       src="a7/lily-958b3403.png"
       alt="[image of music]">
 </a>
</p>




<a name="line-arrows.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Line-arrows"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-laissez-vibrer-ties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Laissez vibrer ties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-making-slurs-with-complex-dash-structure" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Making slurs with complex dash structure &gt; </a>]</td></tr></table>
<a name="expressive-marks-line-arrows"></a>
<h2 class="unnumberedsec">Line arrows</h2>


<p>Arrows can be applied to text-spanners and line-spanners (such as the
Glissando).
</p>

<pre class="verbatim">\relative c'' {
  \override TextSpanner.bound-padding = #1.0
  \override TextSpanner.style = #'line
  \override TextSpanner.bound-details.right.arrow = ##t
  \override TextSpanner.bound-details.left.text = #&quot;fof&quot;
  \override TextSpanner.bound-details.right.text = #&quot;gag&quot;
  \override TextSpanner.bound-details.right.padding = #0.6

  \override TextSpanner.bound-details.right.stencil-align-dir-y = #CENTER
  \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER

  \override Glissando.bound-details.right.arrow = ##t
  \override Glissando.arrow-length = #0.5
  \override Glissando.arrow-width = #0.25

  a8\startTextSpan gis a4 b\glissando b,
  g'4 c\stopTextSpan c2
}
</pre><p>
 <a href="05/lily-f557dad5.ly">
  <img align="middle"
       border="0"
       src="05/lily-f557dad5.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-slurs-with-complex-dash-structure.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Making-slurs-with-complex-dash-structure"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-line-arrows" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Line arrows&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-modifying-default-values-for-articulation-shorthand-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Modifying default values for articulation shorthand notation &gt; </a>]</td></tr></table>
<a name="expressive-marks-making-slurs-with-complex-dash-structure"></a>
<h2 class="unnumberedsec">Making slurs with complex dash structure</h2>


<p>Slurs can be made with complex dash patterns by defining the
<code>dash-definition</code> property.  <code>dash-definition</code> is a list of
<code>dash-elements</code>.  A <code>dash-element</code> is a list of parameters
defining the dash behavior for a segment of the slur.
</p>
<p>The slur is defined in terms of the bezier parameter t which ranges
from 0 at the left end of the slur to 1 at the right end of the slur.
<code>dash-element</code> is a list <code>(start-t stop-t dash-fraction
dash-period)</code>.  The region of the slur from <code>start-t</code> to
<code>stop-t</code> will have a fraction <code>dash-fraction</code> of each
<code>dash-period</code> black.  <code>dash-period</code> is defined in terms of
staff spaces.  <code>dash-fraction</code> is set to 1 for a solid slur.
</p>

<pre class="verbatim">\relative c' {
  \once \override
    Slur.dash-definition = #'((0 0.3 0.1 0.75)
                                (0.3 0.6 1 1)
                                (0.65 1.0 0.4 0.75))
  c4( d e f)
  \once \override
    Slur.dash-definition = #'((0 0.25 1 1)
                                (0.3 0.7 0.4 0.75)
                                (0.75 1.0 1 1))
  c4( d e f)
}
</pre><p>
 <a href="ce/lily-a1eaf1f1.ly">
  <img align="middle"
       border="0"
       src="ce/lily-a1eaf1f1.png"
       alt="[image of music]">
 </a>
</p>




<a name="modifying-default-values-for-articulation-shorthand-notation.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Modifying-default-values-for-articulation-shorthand-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-making-slurs-with-complex-dash-structure" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Making slurs with complex dash structure&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-moving-slur-positions-vertically" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Moving slur positions vertically &gt; </a>]</td></tr></table>
<a name="expressive-marks-modifying-default-values-for-articulation-shorthand-notation"></a>
<h2 class="unnumberedsec">Modifying default values for articulation shorthand notation</h2>


<p>The shorthands are defined in &lsquo;<samp>ly/script-init.ly</samp>&rsquo;, where the
variables <code>dashHat</code>, <code>dashPlus</code>, <code>dashDash</code>,
<code>dashBar</code>, <code>dashLarger</code>, <code>dashDot</code>, and
<code>dashUnderscore</code> are assigned default values.  The default values
for the shorthands can be modified. For example, to associate the
<code>-+</code> (<code>dashPlus</code>) shorthand with the trill symbol instead of
the default + symbol, assign the value <code>trill</code> to the variable
<code>dashPlus</code>:
</p>

<pre class="verbatim">\relative c'' { c1-+ }

dashPlus = &quot;trill&quot;

\relative c'' { c1-+ }
</pre><p>
 <a href="ea/lily-b2fbb308.ly">
  <img align="middle"
       border="0"
       src="ea/lily-b2fbb308.png"
       alt="[image of music]">
 </a>
</p>




<a name="moving-slur-positions-vertically.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Moving-slur-positions-vertically"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-modifying-default-values-for-articulation-shorthand-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Modifying default values for articulation shorthand notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-moving-the-ends-of-hairpins" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Moving the ends of hairpins &gt; </a>]</td></tr></table>
<a name="expressive-marks-moving-slur-positions-vertically"></a>
<h2 class="unnumberedsec">Moving slur positions vertically</h2>


<p>The vertical position of a slur can be adjusted using the
<code>positions</code> property of <code>Slur</code>.  The property has 2
parameters, the first referring to the left end of the slur and the
second to the right.  The values of the parameters are not used by
LilyPond to make an exact movement of the slur - instead it selects
what placement of the slur looks best, taking into account the
parameter values.  Positive values move the slur up, and are
appropriate for notes with stems down.  Negative values move downward
slurs further down.
</p>

<pre class="verbatim">\relative c' {
  \stemDown
  e4( a)
  \override Slur.positions = #'(1 . 1)
  e4( a)
  \override Slur.positions = #'(2 . 2)
  e4( a)
  \override Slur.positions = #'(3 . 3)
  e4( a)
  \override Slur.positions = #'(4 . 4)
  e4( a)
  \override Slur.positions = #'(5 . 5)
  e4( a)
  \override Slur.positions = #'(0 . 5)
  e4( a)
  \override Slur.positions = #'(5 . 0)
  e4( a)
  \stemUp
  \override Slur.positions = #'(-5 . -5)
  e4( a)
  \stemDown
  \revert Slur.positions
  e4( a)
}
</pre><p>
 <a href="14/lily-ab1097d7.ly">
  <img align="middle"
       border="0"
       src="14/lily-ab1097d7.png"
       alt="[image of music]">
 </a>
</p>




<a name="moving-the-ends-of-hairpins.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Moving-the-ends-of-hairpins"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-moving-slur-positions-vertically" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Moving slur positions vertically&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-positioning-arpeggios" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Positioning arpeggios &gt; </a>]</td></tr></table>
<a name="expressive-marks-moving-the-ends-of-hairpins"></a>
<h2 class="unnumberedsec">Moving the ends of hairpins</h2>


<p>The ends of hairpins may be offset by setting the <code>shorten-pair</code>
property of the <code>Hairpin</code> object.  Positive values move endpoints
to the right, negative to the left.  Unlike the <code>minimum-length</code>
property, this property only affects the appearance of the hairpin; it
does not adjust horizontal spacing (including the position of bounding
dynamics).  This method is thus suitable for fine-tuning a hairpin
within its allotted space.
</p>

<pre class="verbatim">{
  c'1~\&lt;
  c'2~ c'\!
  \once \override Hairpin.shorten-pair = #'(2 . 2)
  c'1~\&lt;
  c'2~ c'\!
  \once \override Hairpin.shorten-pair = #'(-2 . -2)
  c'1~\&lt;
  c'2~ c'\!
  c'1~\p-\tweak shorten-pair #'(2 . 0)\&lt;
  c'2~ c'\ffff
}
</pre><p>
 <a href="cd/lily-8c5f124f.ly">
  <img align="middle"
       border="0"
       src="cd/lily-8c5f124f.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-arpeggios.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Positioning-arpeggios"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-moving-the-ends-of-hairpins" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Moving the ends of hairpins&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-positioning-text-markups-inside-slurs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Positioning text markups inside slurs &gt; </a>]</td></tr></table>
<a name="expressive-marks-positioning-arpeggios"></a>
<h2 class="unnumberedsec">Positioning arpeggios</h2>


<p>If you need to extend or shorten an arpeggio, you can modify the upper
and lower start positions independently.
</p>

<pre class="verbatim">\relative c' {
  &lt;c e g b&gt;1\arpeggio
  \once \override Arpeggio.positions = #'(-5 . 0)
  &lt;c e g b&gt;1\arpeggio
  \once \override Arpeggio.positions = #'(0 . 5)
  &lt;c e g b&gt;1\arpeggio
  \once \override Arpeggio.positions = #'(-5 . 5)
  &lt;c e g b&gt;1\arpeggio
}
</pre><p>
 <a href="95/lily-a6ce2810.ly">
  <img align="middle"
       border="0"
       src="95/lily-a6ce2810.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-text-markups-inside-slurs.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Positioning-text-markups-inside-slurs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-positioning-arpeggios" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Positioning arpeggios&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-printing-hairpins-in-various-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Printing hairpins in various styles &gt; </a>]</td></tr></table>
<a name="expressive-marks-positioning-text-markups-inside-slurs"></a>
<h2 class="unnumberedsec">Positioning text markups inside slurs</h2>


<p>Text markups need to have the <code>outside-staff-priority</code> property
set to false in order to be printed inside slurs.
</p>

<pre class="verbatim">\relative c'' {
  \override TextScript.avoid-slur = #'inside
  \override TextScript.outside-staff-priority = ##f
  c2(^\markup { \halign #-10 \natural } d4.) c8
}
</pre><p>
 <a href="7e/lily-e382e3e0.ly">
  <img align="middle"
       border="0"
       src="7e/lily-e382e3e0.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-hairpins-in-various-styles.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Printing-hairpins-in-various-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-positioning-text-markups-inside-slurs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Positioning text markups inside slurs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-printing-hairpins-using-al-niente-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Printing hairpins using al niente notation &gt; </a>]</td></tr></table>
<a name="expressive-marks-printing-hairpins-in-various-styles"></a>
<h2 class="unnumberedsec">Printing hairpins in various styles</h2>


<p>Hairpin dynamics may be created in a variety of styles.
</p>

<pre class="verbatim">\relative c'' {
  \override Hairpin.stencil = #flared-hairpin
  a4\&lt; a a a\f
  a4\p\&lt; a a a\ff
  a4\sfz\&lt; a a a\!
  \override Hairpin.stencil = #constante-hairpin
  a4\&lt; a a a\f
  a4\p\&lt; a a a\ff
  a4\sfz\&lt; a a a\!
  \override Hairpin.stencil = #flared-hairpin
  a4\&gt; a a a\f
  a4\p\&gt; a a a\ff
  a4\sfz\&gt; a a a\!
  \override Hairpin.stencil = #constante-hairpin
  a4\&gt; a a a\f
  a4\p\&gt; a a a\ff
  a4\sfz\&gt; a a a\!
}
</pre><p>
 <a href="a5/lily-89a490f5.ly">
  <img align="middle"
       border="0"
       src="a5/lily-89a490f5.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-hairpins-using-al-niente-notation.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Printing-hairpins-using-al-niente-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-printing-hairpins-in-various-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Printing hairpins in various styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-printing-metronome-and-rehearsal-marks-below-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Printing metronome and rehearsal marks below the staff &gt; </a>]</td></tr></table>
<a name="expressive-marks-printing-hairpins-using-al-niente-notation"></a>
<h2 class="unnumberedsec">Printing hairpins using al niente notation</h2>


<p>Hairpin dynamics may be printed with a circled tip (&ldquo;al niente&rdquo;
notation) by setting the <code>circled-tip</code> property of the
<code>Hairpin</code> object to <code>#t</code>.
</p>

<pre class="verbatim">\relative c'' {
  \override Hairpin.circled-tip = ##t
  c2\&lt; c\!
  c4\&gt; c\&lt; c2\!
}
</pre><p>
 <a href="9a/lily-e853ddf1.ly">
  <img align="middle"
       border="0"
       src="9a/lily-e853ddf1.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-metronome-and-rehearsal-marks-below-the-staff.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Printing-metronome-and-rehearsal-marks-below-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-printing-hairpins-using-al-niente-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Printing hairpins using al niente notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-setting-hairpin-behavior-at-bar-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Setting hairpin behavior at bar lines &gt; </a>]</td></tr></table>
<a name="expressive-marks-printing-metronome-and-rehearsal-marks-below-the-staff"></a>
<h2 class="unnumberedsec">Printing metronome and rehearsal marks below the staff</h2>


<p>By default, metronome and rehearsal marks are printed above the staff.
To place them below the staff simply set the <code>direction</code> property
of <code>MetronomeMark</code> or <code>RehearsalMark</code> appropriately.
</p>

<pre class="verbatim">\layout {
  indent = 0
  ragged-right = ##f
}

{
  % Metronome marks below the staff
  \override Score.MetronomeMark.direction = #DOWN
  \tempo 8. = 120
  c''1

  % Rehearsal marks below the staff
  \override Score.RehearsalMark.direction = #DOWN
  \mark \default
  c''1
}
</pre><p>
 <a href="03/lily-5f9ea4d2.ly">
  <img align="middle"
       border="0"
       src="03/lily-5f9ea4d2.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-hairpin-behavior-at-bar-lines.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Setting-hairpin-behavior-at-bar-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-printing-metronome-and-rehearsal-marks-below-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Printing metronome and rehearsal marks below the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-setting-the-minimum-length-of-hairpins" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Setting the minimum length of hairpins &gt; </a>]</td></tr></table>
<a name="expressive-marks-setting-hairpin-behavior-at-bar-lines"></a>
<h2 class="unnumberedsec">Setting hairpin behavior at bar lines</h2>


<p>If the note which ends a hairpin falls on a downbeat, the hairpin stops
at the bar line immediately preceding.  This behavior can be controlled
by overriding the <code>'to-barline</code> property.
</p>

<pre class="verbatim">\relative c'' {
  e4\&lt; e2.
  e1\!
  \override Hairpin.to-barline = ##f
  e4\&lt; e2.
  e1\!
}
</pre><p>
 <a href="33/lily-54187d22.ly">
  <img align="middle"
       border="0"
       src="33/lily-54187d22.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-the-minimum-length-of-hairpins.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Setting-the-minimum-length-of-hairpins"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-setting-hairpin-behavior-at-bar-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Setting hairpin behavior at bar lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-showing-the-same-articulation-above-and-below-a-note-or-chord" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Showing the same articulation above and below a note or chord &gt; </a>]</td></tr></table>
<a name="expressive-marks-setting-the-minimum-length-of-hairpins"></a>
<h2 class="unnumberedsec">Setting the minimum length of hairpins</h2>


<p>If hairpins are too short, they can be lengthened by modifying the
<code>minimum-length</code> property of the <code>Hairpin</code> object.
</p>

<pre class="verbatim">\relative c'' {
  c4\&lt; c\! d\&gt; e\!
  &lt;&lt; f1 { s4 s\&lt; s\&gt; s\! } &gt;&gt;
  \override Hairpin.minimum-length = #5
  &lt;&lt; f1 { s4 s\&lt; s\&gt; s\! } &gt;&gt;
}
</pre><p>
 <a href="82/lily-f31f7b45.ly">
  <img align="middle"
       border="0"
       src="82/lily-f31f7b45.png"
       alt="[image of music]">
 </a>
</p>




<a name="showing-the-same-articulation-above-and-below-a-note-or-chord.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Showing-the-same-articulation-above-and-below-a-note-or-chord"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-setting-the-minimum-length-of-hairpins" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Setting the minimum length of hairpins&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-snap_002dpizzicato-or-bartok-pizzicato" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Snap-pizzicato or Bartok pizzicato &gt; </a>]</td></tr></table>
<a name="expressive-marks-showing-the-same-articulation-above-and-below-a-note-or-chord"></a>
<h2 class="unnumberedsec">Showing the same articulation above and below a note or chord</h2>


<p>By default, LilyPond does not allow the same articulation (e.g., an
accent, a fermata, a flageolet, etc.) to be displayed above and below a
note. For example, c4_\fermata^\fermata will only show a fermata
below. The fermata above will simply be ignored. However, one can stick
scripts (just like fingerings) inside a chord, which means it is
possible to have as many articulations as desired. This approach has
the advantage that it ignores the stem and positions the articulation
relative to the note head. This can be seen in the case of the
flageolets in the snippet. To mimic the behaviour of scripts outside a
chord, &rsquo;add-stem-support would be required. So, the solution is to
write the note as a chord and add the articulations inside the &lt;...&gt;.
The direction will always be above, but one can tweak this via a
\tweak: <code>&lt;c-\tweak direction #DOWN-\fermata^\fermata&gt;</code>
</p>

<pre class="verbatim">% The same as \flageolet, just a little smaller
smallFlageolet =
#(let ((m (make-articulation &quot;flageolet&quot;)))
   (set! (ly:music-property m 'tweaks)
         (acons 'font-size -2
                (ly:music-property m 'tweaks)))
   m)

\relative c' {
  s4^&quot;Wrong:&quot;
  c4_\fermata^\fermata % The second fermata is ignored!
  &lt;e d'&gt;4^\smallFlageolet_\smallFlageolet

  s4^&quot;Works if written inside a chord:&quot;
  &lt;e_\smallFlageolet d'^\smallFlageolet&gt;4
  &lt;e_\flageolet d'^\flageolet&gt;4
  &lt;e_\smallFlageolet^\smallFlageolet&gt;4
  &lt;e_\fermata^\fermata&gt;4
}
</pre><p>
 <a href="52/lily-d84c6909.ly">
  <img align="middle"
       border="0"
       src="52/lily-d84c6909.png"
       alt="[image of music]">
 </a>
</p>




<a name="snap-pizzicato-or-bartok-pizzicato.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Snap_002dpizzicato-or-Bartok-pizzicato"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-showing-the-same-articulation-above-and-below-a-note-or-chord" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Showing the same articulation above and below a note or chord&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-using-a-tick-as-the-breath-mark-symbol" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Using a tick as the breath mark symbol &gt; </a>]</td></tr></table>
<a name="expressive-marks-snap_002dpizzicato-or-bartok-pizzicato"></a>
<h2 class="unnumberedsec">Snap-pizzicato or Bartok pizzicato</h2>


<p>A snap-pizzicato (also known as &ldquo;Bartok pizzicato&rdquo;) is a &ldquo;strong
pizzicato where the string is plucked vertically by snapping and
rebounds off the fingerboard of the instrument&rdquo; (Wikipedia).  It is
denoted by a circle with a vertical line going from the center upwards
outside the circle.
</p>

<pre class="verbatim">\relative c' {
  c4\snappizzicato
  &lt;c' e g&gt;4\snappizzicato
  &lt;c' e g&gt;4^\snappizzicato
  &lt;c, e g&gt;4_\snappizzicato
}
</pre><p>
 <a href="63/lily-fac57a97.ly">
  <img align="middle"
       border="0"
       src="63/lily-fac57a97.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-a-tick-as-the-breath-mark-symbol.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Using-a-tick-as-the-breath-mark-symbol"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-snap_002dpizzicato-or-bartok-pizzicato" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Snap-pizzicato or Bartok pizzicato&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-using-arpeggiobracket-to-make-divisi-more-visible" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Using arpeggioBracket to make divisi more visible &gt; </a>]</td></tr></table>
<a name="expressive-marks-using-a-tick-as-the-breath-mark-symbol"></a>
<h2 class="unnumberedsec">Using a tick as the breath mark symbol</h2>


<p>Vocal and wind music frequently uses a tick mark as a breathing sign.
This indicates a breath that subtracts a little time from the previous
note rather than causing a short pause, which is indicated by the comma
breath mark.  The mark can be moved up a little to take it away from
the stave.
</p>

<pre class="verbatim">\relative c'' {
  c2
  \breathe
  d2
  \override BreathingSign.Y-offset = #2.6
  \override BreathingSign.text =
    \markup { \musicglyph #&quot;scripts.tickmark&quot; }
  c2
  \breathe
  d2
}
</pre><p>
 <a href="39/lily-61068082.ly">
  <img align="middle"
       border="0"
       src="39/lily-61068082.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-arpeggiobracket-to-make-divisi-more-visible.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Using-arpeggioBracket-to-make-divisi-more-visible"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-using-a-tick-as-the-breath-mark-symbol" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Using a tick as the breath mark symbol&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-using-double-slurs-for-legato-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Using double slurs for legato chords &gt; </a>]</td></tr></table>
<a name="expressive-marks-using-arpeggiobracket-to-make-divisi-more-visible"></a>
<h2 class="unnumberedsec">Using arpeggioBracket to make divisi more visible</h2>


<p>The <code>arpeggioBracket</code> can be used to indicate the division of
voices where there are no stems to provide the information. This is
often seen in choral music.
</p>

<pre class="verbatim">\include &quot;english.ly&quot;

\score {
  \relative c'' {
    \key a \major
    \time 2/2
    &lt;&lt;
      \new Voice = &quot;upper&quot;
      &lt;&lt;
        { \voiceOne \arpeggioBracket
          a2( b2
          &lt;b d&gt;1\arpeggio)
          &lt;cs e&gt;\arpeggio ~
          &lt;cs e&gt;4
        }
        \addlyrics { \lyricmode { A -- men. } }
      &gt;&gt;
      \new Voice = &quot;lower&quot;
      { \voiceTwo
        a1 ~
        a
        a ~
        a4 \bar &quot;|.&quot;
      }
    &gt;&gt;
  }
  \layout { ragged-right = ##t }
}
</pre><p>
 <a href="9c/lily-5d3b932d.ly">
  <img align="middle"
       border="0"
       src="9c/lily-5d3b932d.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-double-slurs-for-legato-chords.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Using-double-slurs-for-legato-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-using-arpeggiobracket-to-make-divisi-more-visible" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Using arpeggioBracket to make divisi more visible&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-using-the-whiteout-property" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Using the whiteout property &gt; </a>]</td></tr></table>
<a name="expressive-marks-using-double-slurs-for-legato-chords"></a>
<h2 class="unnumberedsec">Using double slurs for legato chords</h2>


<p>Some composers write two slurs when they want legato chords.  This can
be achieved by setting <code>doubleSlurs</code>.
</p>

<pre class="verbatim">\relative c' {
  \set doubleSlurs = ##t
  &lt;c e&gt;4( &lt;d f&gt; &lt;c e&gt; &lt;d f&gt;)
}
</pre><p>
 <a href="59/lily-7c1e9eac.ly">
  <img align="middle"
       border="0"
       src="59/lily-7c1e9eac.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-the-whiteout-property.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Using-the-whiteout-property"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-using-double-slurs-for-legato-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Using double slurs for legato chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-vertical-line-as-a-baroque-articulation-mark" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Vertical line as a baroque articulation mark &gt; </a>]</td></tr></table>
<a name="expressive-marks-using-the-whiteout-property"></a>
<h2 class="unnumberedsec">Using the whiteout property</h2>


<p>Any graphical object can be printed over a white background to mask
parts of objects that lie beneath.  This can be useful to improve the
appearance of collisions in complex situations when repositioning
objects is impractical.  It is necessary to explicitly set the
<code>layer</code> property to control which objects are masked by the white
background.
</p>
<p>In this example the collision of the tie with the time signature is
improved by masking out the part of the tie that crosses the time
signature by setting the <code>whiteout</code> property of
<code>TimeSignature</code>. To do this <code>TimeSignature</code> is moved to a
layer above <code>Tie</code>, which is left in the default layer of 1, and
<code>StaffSymbol</code> is moved to a layer above <code>TimeSignature</code> so it
is not masked.
</p>

<pre class="verbatim">{
  \override Score.StaffSymbol.layer = #4
  \override Staff.TimeSignature.layer = #3
  b'2 b'~
  \once \override Staff.TimeSignature.whiteout = ##t
  \time 3/4
  b' r4
}
</pre><p>
 <a href="51/lily-a56b0756.ly">
  <img align="middle"
       border="0"
       src="51/lily-a56b0756.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertical-line-as-a-baroque-articulation-mark.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Vertical-line-as-a-baroque-articulation-mark"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-using-the-whiteout-property" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Using the whiteout property&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#expressive-marks-vertically-aligning-dynamics-across-multiple-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Expressive marks: Vertically aligning dynamics across multiple notes &gt; </a>]</td></tr></table>
<a name="expressive-marks-vertical-line-as-a-baroque-articulation-mark"></a>
<h2 class="unnumberedsec">Vertical line as a baroque articulation mark</h2>


<p>This short vertical line placed above the note is commonly used in
baroque music.  Its meaning can vary, but generally indicates notes
that should be played with more &ldquo;weight&rdquo;.  The following example
demonstrates how to achieve such a notation.
</p>

<pre class="verbatim">upline =
#(let ((m (make-articulation &quot;stopped&quot;)))
   (set! (ly:music-property m 'tweaks)
         (acons 'font-size 3
                (acons 'stencil (lambda (grob)
                                  (grob-interpret-markup
                                   grob
                                   (make-draw-line-markup '(0 . 1))))
                       (ly:music-property m 'tweaks))))
   m)


\relative c' {
  a'4^\upline a( c d')_\upline
}
</pre><p>
 <a href="d7/lily-552d46f7.ly">
  <img align="middle"
       border="0"
       src="d7/lily-552d46f7.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-aligning-dynamics-across-multiple-notes.ly"></a>

<hr size="6">
<a name="Expressive-marks_003a-Vertically-aligning-dynamics-across-multiple-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#repeats" title="Next chapter">&nbsp;Repeats &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-vertical-line-as-a-baroque-articulation-mark" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Vertical line as a baroque articulation mark&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#expressive-marks" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Expressive marks&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats &gt; </a>]</td></tr></table>
<a name="expressive-marks-vertically-aligning-dynamics-across-multiple-notes"></a>
<h2 class="unnumberedsec">Vertically aligning dynamics across multiple notes</h2>


<p>Dynamics that occur at, begin on, or end on the same note will be
vertically aligned.  To ensure that dynamics are aligned when they do
not occur on the same note, increase the <code>staff-padding</code> property
of the <code>DynamicLineSpanner</code> object.
</p>

<pre class="verbatim">\relative c' {
  \override DynamicLineSpanner.staff-padding = #4
  c2\p f\mf
  g2\&lt; b4\&gt; c\!
}
</pre><p>
 <a href="05/lily-46dcba60.ly">
  <img align="middle"
       border="0"
       src="05/lily-46dcba60.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#expressive-marks" title="Beginning of this chapter or previous chapter"> &lt;&lt; Expressive marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#expressive-marks-vertically-aligning-dynamics-across-multiple-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Expressive marks: Vertically aligning dynamics across multiple notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-adding-volta-brackets-to-additional-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Adding volta brackets to additional staves &gt; </a>]</td></tr></table>
<a name="repeats"></a>
<h1 class="unnumbered">Repeats</h1>

<a name="index-Repeats"></a>
<p><a href="notation-big-page.html#repeats">Repeats</a>
</p>

<a name="adding-volta-brackets-to-additional-staves.ly"></a>

<hr size="6">
<a name="Repeats_003a-Adding-volta-brackets-to-additional-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-centered-measure-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Centered measure numbers &gt; </a>]</td></tr></table>
<a name="repeats-adding-volta-brackets-to-additional-staves"></a>
<h2 class="unnumberedsec">Adding volta brackets to additional staves</h2>


<p>The <code>Volta_engraver</code> by default resides in the <code>Score</code>
context, and brackets for the repeat are thus normally only printed
over the topmost staff. This can be adjusted by adding the
<code>Volta_engraver</code> to the <code>Staff</code> context where the brackets
should appear; see also the &ldquo;Volta multi staff&rdquo; snippet.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
  \new Staff \with { \consists &quot;Volta_engraver&quot; } { c'2 g' e' a' }
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
&gt;&gt;
</pre><p>
 <a href="b7/lily-9b1bcdf7.ly">
  <img align="middle"
       border="0"
       src="b7/lily-9b1bcdf7.png"
       alt="[image of music]">
 </a>
</p>




<a name="centered-measure-numbers.ly"></a>

<hr size="6">
<a name="Repeats_003a-Centered-measure-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-adding-volta-brackets-to-additional-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Adding volta brackets to additional staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-changing-the-default-bar-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Changing the default bar lines &gt; </a>]</td></tr></table>
<a name="repeats-centered-measure-numbers"></a>
<h2 class="unnumberedsec">Centered measure numbers</h2>


<p>Scores of large ensemble works often have bar numbers placed beneath
the system, centered horizontally on the measure&rsquo;s extent.  This
snippet shows how the <code>Measure_counter_engraver</code> may be used to
simulate this notational practice.  Here, the engraver has been added
to a <code>Dynamics</code> context.
</p>

<pre class="verbatim">\layout {
  \context {
    \Dynamics
    \consists #Measure_counter_engraver
    \override MeasureCounter.direction = #DOWN
    \override MeasureCounter.font-encoding = #'latin1
    \override MeasureCounter.font-shape = #'italic
    % to control the distance of the Dynamics context from the staff:
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing.padding = #2
  }
  \context {
    \Score
    \remove &quot;Bar_number_engraver&quot;
  }
}

pattern = \repeat unfold 7 { c'4 d' e' f' }

\new StaffGroup &lt;&lt;
  \new Staff {
    \pattern
  }
  \new Staff {
    \pattern
  }
  \new Dynamics {
    \startMeasureCount
    s1*7
    \stopMeasureCount
  }
&gt;&gt;
</pre><p>
 <a href="29/lily-42d43b25.ly">
  <img align="middle"
       border="0"
       src="29/lily-42d43b25.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-default-bar-lines.ly"></a>

<hr size="6">
<a name="Repeats_003a-Changing-the-default-bar-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-centered-measure-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Centered measure numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-cross_002dstaff-tremolos" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Cross-staff tremolos &gt; </a>]</td></tr></table>
<a name="repeats-changing-the-default-bar-lines"></a>
<h2 class="unnumberedsec">Changing the default bar lines</h2>


<p>Default bar lines can be changed when re-defined in a score context.
</p>

<pre class="verbatim">% http://lsr.di.unimi.it/LSR/Item?id=964
%%=&gt; http://lists.gnu.org/archive/html/lilypond-user/2014-03/msg00126.html
%%=&gt; http://lilypond.1069038.n5.nabble.com/Changing-the-default-end-repeat-bracket-tc169357.html

\layout {
  \context {
    \Score
    %% Changing the defaults from engraver-init.ly
    defaultBarType = #&quot;!&quot;
    startRepeatType = #&quot;[|:&quot;
    endRepeatType = #&quot;:|]&quot;
    doubleRepeatType = #&quot;:|][|:&quot;
  }
}

%% example:
{
  c'1
  \repeat volta 2 { \repeat unfold 2 c' }
  \repeat volta 2 { \repeat unfold 2 c' }
  \alternative {
    { c' }
    {
      %% v2.18 workaround
      \once\override Score.VoltaBracket.shorten-pair = #'(1 . -1)
      c'
    }
  }
  \bar &quot;|.&quot;
}
</pre><p>
 <a href="a3/lily-0d1a4534.ly">
  <img align="middle"
       border="0"
       src="a3/lily-0d1a4534.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-tremolos.ly"></a>

<hr size="6">
<a name="Repeats_003a-Cross_002dstaff-tremolos"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-changing-the-default-bar-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Changing the default bar lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-engraving-tremolos-with-floating-beams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Engraving tremolos with floating beams &gt; </a>]</td></tr></table>
<a name="repeats-cross_002dstaff-tremolos"></a>
<h2 class="unnumberedsec">Cross-staff tremolos</h2>


<p>Since <code>\repeat tremolo</code> expects exactly two musical arguments for
chord tremolos, the note or chord which changes staff within a
cross-staff tremolo should be placed inside curly braces together with
its <code>\change Staff</code> command.
</p>

<pre class="verbatim">\new PianoStaff &lt;&lt;
  \new Staff = &quot;up&quot; \relative c'' {
    \key a \major
    \time 3/8
    s4.
  }
  \new Staff = &quot;down&quot; \relative c'' {
    \key a \major
    \time 3/8
    \voiceOne
    \repeat tremolo 6 {
      &lt;a e'&gt;32
      {
        \change Staff = &quot;up&quot;
        \voiceTwo
        &lt;cis a' dis&gt;32
      }
    }
  }
&gt;&gt;
</pre><p>
 <a href="2b/lily-ea876e0b.ly">
  <img align="middle"
       border="0"
       src="2b/lily-ea876e0b.png"
       alt="[image of music]">
 </a>
</p>




<a name="engraving-tremolos-with-floating-beams.ly"></a>

<hr size="6">
<a name="Repeats_003a-Engraving-tremolos-with-floating-beams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-cross_002dstaff-tremolos" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Cross-staff tremolos&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-isolated-percent-repeats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Isolated percent repeats &gt; </a>]</td></tr></table>
<a name="repeats-engraving-tremolos-with-floating-beams"></a>
<h2 class="unnumberedsec">Engraving tremolos with floating beams</h2>


<p>If a tremolo&rsquo;s total duration is less than a quarter-note, or exactly a
half-note, or between a half-note and a whole-note, it is normally
typeset with all beams touching the stems.  Certain engraving styles
typeset some of these beams as centered floating beams that do not
touch the stems.  The number of floating beams in this type of tremolo
is controlled with the <code>'gap-count </code> property of the <code>Beam</code>
object, and the size of the gaps between beams and stems is set with
the <code>'gap</code> property.
</p>



<pre class="verbatim">\relative c'' {
  \repeat tremolo 8 { a32 f }
  \override Beam.gap-count = #1
  \repeat tremolo 8 { a32 f }
  \override Beam.gap-count = #2
  \repeat tremolo 8 { a32 f }
  \override Beam.gap-count = #3
  \repeat tremolo 8 { a32 f }

  \override Beam.gap-count = #3
  \override Beam.gap = #1.33
  \repeat tremolo 8 { a32 f }
  \override Beam.gap = #1
  \repeat tremolo 8 { a32 f }
  \override Beam.gap = #0.67
  \repeat tremolo 8 { a32 f }
  \override Beam.gap = #0.33
  \repeat tremolo 8 { a32 f }
}
</pre><p>
 <a href="1e/lily-ba6a8ebe.ly">
  <img align="middle"
       border="0"
       src="1e/lily-ba6a8ebe.png"
       alt="[image of music]">
 </a>
</p>




<a name="isolated-percent-repeats.ly"></a>

<hr size="6">
<a name="Repeats_003a-Isolated-percent-repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-engraving-tremolos-with-floating-beams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Engraving tremolos with floating beams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-measure-counter" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Measure counter &gt; </a>]</td></tr></table>
<a name="repeats-isolated-percent-repeats"></a>
<h2 class="unnumberedsec">Isolated percent repeats</h2>


<p>Isolated percents can also be printed.
</p>

<pre class="verbatim">makePercent =
#(define-music-function (note) (ly:music?)
   &quot;Make a percent repeat the same length as NOTE.&quot;
   (make-music 'PercentEvent
               'length (ly:music-length note)))

\relative c'' {
  \makePercent s1
}
</pre><p>
 <a href="eb/lily-e2b7a4e9.ly">
  <img align="middle"
       border="0"
       src="eb/lily-e2b7a4e9.png"
       alt="[image of music]">
 </a>
</p>




<a name="measure-counter.ly"></a>

<hr size="6">
<a name="Repeats_003a-Measure-counter"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-isolated-percent-repeats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Isolated percent repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-numbering-groups-of-measures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Numbering groups of measures &gt; </a>]</td></tr></table>
<a name="repeats-measure-counter"></a>
<h2 class="unnumberedsec">Measure counter</h2>


<p>This snippet provides a workaround for emitting measure counters using
transparent percent repeats.
</p>

<pre class="verbatim">&lt;&lt;
  \context Voice = &quot;foo&quot; {
    \clef bass
    c4 r g r
    c4 r g r
    c4 r g r
    c4 r g r
  }
  \context Voice = &quot;foo&quot; {
    \set countPercentRepeats = ##t
    \hide PercentRepeat
    \override PercentRepeatCounter.staff-padding = #1
    \repeat percent 4 { s1 }
  }
&gt;&gt;
</pre><p>
 <a href="1a/lily-7dc05678.ly">
  <img align="middle"
       border="0"
       src="1a/lily-7dc05678.png"
       alt="[image of music]">
 </a>
</p>




<a name="numbering-groups-of-measures.ly"></a>

<hr size="6">
<a name="Repeats_003a-Numbering-groups-of-measures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-measure-counter" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Measure counter&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-percent-repeat-count-visibility" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Percent repeat count visibility &gt; </a>]</td></tr></table>
<a name="repeats-numbering-groups-of-measures"></a>
<h2 class="unnumberedsec">Numbering groups of measures</h2>


<p>This snippet demonstrates the use of the
<code>Measure_counter_engraver</code> to number groups of successive
measures.  Any stretch of measures may be numbered, whether consisting
of repetitions or not.
</p>

<p>The engraver must be added to the appropriate context.  Here, a
<code>Staff</code> context is used; another possibility is a <code>Dynamics</code>
context.
</p>

<p>The counter is begun with <code>\startMeasureCount</code> and ended with
<code>\stopMeasureCount</code>.  Numbering will start by default with
<code>1</code>, but this behavior may be modified by overriding the
<code>count-from</code> property.
</p>

<p>When a measure extends across a line break, the number will appear
twice, the second time in parentheses.
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff
    \consists #Measure_counter_engraver
  }
}

\new Staff {
  \startMeasureCount
  \repeat unfold 7 {
    c'4 d' e' f'
  }
  \stopMeasureCount
  \bar &quot;||&quot;
  g'4 f' e' d'
  \override Staff.MeasureCounter.count-from = #2
  \startMeasureCount
  \repeat unfold 5 {
    g'4 f' e' d'
  }
  g'4 f'
  \bar &quot;&quot;
  \break
  e'4 d'
  \repeat unfold 7 {
    g'4 f' e' d'
  }
  \stopMeasureCount
}
</pre><p>
 <a href="a0/lily-b9cb1f5a.ly">
  <img align="middle"
       border="0"
       src="a0/lily-b9cb1f5a.png"
       alt="[image of music]">
 </a>
</p>




<a name="percent-repeat-count-visibility.ly"></a>

<hr size="6">
<a name="Repeats_003a-Percent-repeat-count-visibility"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-numbering-groups-of-measures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Numbering groups of measures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-percent-repeat-counter" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Percent repeat counter &gt; </a>]</td></tr></table>
<a name="repeats-percent-repeat-count-visibility"></a>
<h2 class="unnumberedsec">Percent repeat count visibility</h2>


<p>Percent repeat counters can be shown at regular intervals by setting
the context property <code>repeatCountVisibility</code>.
</p>

<pre class="verbatim">\relative c'' {
  \set countPercentRepeats = ##t
  \set repeatCountVisibility = #(every-nth-repeat-count-visible 5)
  \repeat percent 10 { c1 } \break
  \set repeatCountVisibility = #(every-nth-repeat-count-visible 2)
  \repeat percent 6 { c1 d1 }
}
</pre><p>
 <a href="fa/lily-46ea40c3.ly">
  <img align="middle"
       border="0"
       src="fa/lily-46ea40c3.png"
       alt="[image of music]">
 </a>
</p>




<a name="percent-repeat-counter.ly"></a>

<hr size="6">
<a name="Repeats_003a-Percent-repeat-counter"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-percent-repeat-count-visibility" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Percent repeat count visibility&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-positioning-segno-and-coda-_0028with-line-break_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Positioning segno and coda (with line break) &gt; </a>]</td></tr></table>
<a name="repeats-percent-repeat-counter"></a>
<h2 class="unnumberedsec">Percent repeat counter</h2>


<p>Measure repeats of more than two repeats can get a counter when the
convenient property is switched, as shown in this example:
</p>

<pre class="verbatim">\relative c'' {
  \set countPercentRepeats = ##t
  \repeat percent 4 { c1 }
}
</pre><p>
 <a href="bc/lily-44bab8f3.ly">
  <img align="middle"
       border="0"
       src="bc/lily-44bab8f3.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-segno-and-coda-with-line-break.ly"></a>

<hr size="6">
<a name="Repeats_003a-Positioning-segno-and-coda-_0028with-line-break_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-percent-repeat-counter" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Percent repeat counter&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-setting-the-double-repeat-default-for-volte" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Setting the double repeat default for volte &gt; </a>]</td></tr></table>
<a name="repeats-positioning-segno-and-coda-_0028with-line-break_0029"></a>
<h2 class="unnumberedsec">Positioning segno and coda (with line break)</h2>


<p>If you want to place an exiting segno sign and add text like &ldquo;D.S.
al Coda&rdquo; next to it where usually the staff lines are you can use this
snippet. The coda will resume in a new line. There is a variation
documented in this snippet, where the coda will remain on the same
line.
</p>

<pre class="verbatim">{
  \clef treble
  \key g \major
  \time 4/4
  \relative c'' {
    \repeat unfold 4 {
      c4 c c c
    }

    % Set segno sign as rehearsal mark and adjust size if needed
    % \once \override Score.RehearsalMark.font-size = #3
    \mark \markup { \musicglyph #&quot;scripts.segno&quot; }
    \repeat unfold 2 {
      c4 c c c
    }

    % Set coda sign as rehearsal mark and adjust size if needed
    \once \override Score.RehearsalMark.font-size = #4
    \mark \markup { \musicglyph #&quot;scripts.coda&quot; }
    \repeat unfold 2 {
      c4 c c c
    }

    % Should Coda be on anew line?
    % Coda NOT on new line: use \nobreak
    % Coda on new line: DON'T use \nobreak
    % \noBreak

    \bar &quot;||&quot;

    % Set segno sign as rehearsal mark and adjust size if needed
    \once \override Score.RehearsalMark.break-visibility =
      #begin-of-line-invisible
    % \once \override Score.RehearsalMark.font-size = #3
    \mark \markup { \musicglyph #&quot;scripts.segno&quot; }

    % Here begins the trickery!
    % \cadenzaOn will suppress the bar count
    % and \stopStaff removes the staff lines.
    \cadenzaOn
    \stopStaff
        % Some examples of possible text-displays

        % text line-aligned
        % ==================
        % Move text to the desired position
        % \once \override TextScript.extra-offset = #'( 2 . -3.5 )
        % | &lt;&gt;^\markup { D.S. al Coda } }

        % text center-aligned
        % ====================
        % Move text to the desired position
        % \once \override TextScript.extra-offset = #'( 6 . -5.0 )
        % | &lt;&gt;^\markup { \center-column { D.S. &quot;al Coda&quot; } }

        % text and symbols center-aligned
        % ===============================
        % Move text to the desired position
        % and tweak spacing for optimum text alignment
        \repeat unfold 1 {
          s1
          \bar &quot;&quot;
        }
        \once \override TextScript.extra-offset = #'( 0 . -3.0 )
        \once \override TextScript.word-space = #1.5
        &lt;&gt;^\markup { \center-column { &quot;D.S. al Coda&quot;
          \line {
            \musicglyph #&quot;scripts.coda&quot;
            \musicglyph #&quot;scripts.tenuto&quot;
            \musicglyph #&quot;scripts.coda&quot;} } }

        % Increasing the unfold counter will expand the staff-free space
        \repeat unfold 3 {
          s1
          \bar &quot;&quot;
        }
        % Resume bar count and show staff lines again
    \startStaff
    \cadenzaOff

    % Should Coda be on new line?
    % Coda NOT on new line: DON'T use \break
    % Coda on new line: use \break
    \break

    % Show up, you clef and key!
    \once \override Staff.KeySignature.break-visibility = #end-of-line-invisible
    \once \override Staff.Clef.break-visibility = #end-of-line-invisible

    % Set coda sign as rehearsal mark and adjust size and position

    % Put the coda sign on top of the (treble-)clef
    % depending on coda's line-position

    % Coda NOT on new line, use this:
    % \once \override Score.RehearsalMark.extra-offset = #'( -2 . 1.75 )

    % Coda on new line, use this:
    \once \override Score.RehearsalMark.extra-offset = #'( -5 . .5 )

    \once \override Score.RehearsalMark.font-size = #5
    \mark \markup { \musicglyph #&quot;scripts.coda&quot; }

    % The coda
    \repeat unfold 6 {
      c4 c c c
    }
    \bar&quot;|.&quot;
  }
}
</pre><p>
 <a href="4b/lily-ccfc1d3e.ly">
  <img align="middle"
       border="0"
       src="4b/lily-ccfc1d3e.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-the-double-repeat-default-for-volte.ly"></a>

<hr size="6">
<a name="Repeats_003a-Setting-the-double-repeat-default-for-volte"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-positioning-segno-and-coda-_0028with-line-break_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Positioning segno and coda (with line break)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-shortening-volta-brackets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Shortening volta brackets &gt; </a>]</td></tr></table>
<a name="repeats-setting-the-double-repeat-default-for-volte"></a>
<h2 class="unnumberedsec">Setting the double repeat default for volte</h2>


<p>There are three different styles of double repeats for volte, that can
be set using <code>doubleRepeatType</code>.
</p>

<pre class="verbatim">\relative c'' {
  \repeat volta 1 { c1 }
  \set Score.doubleRepeatType = #&quot;:..:&quot;
  \repeat volta 1 { c1 }
  \set Score.doubleRepeatType = #&quot;:|.|:&quot;
  \repeat volta 1 { c1 }
  \set Score.doubleRepeatType = #&quot;:|.:&quot;
  \repeat volta 1 { c1 }
}
</pre><p>
 <a href="7a/lily-95fb5fa3.ly">
  <img align="middle"
       border="0"
       src="7a/lily-95fb5fa3.png"
       alt="[image of music]">
 </a>
</p>




<a name="shortening-volta-brackets.ly"></a>

<hr size="6">
<a name="Repeats_003a-Shortening-volta-brackets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-setting-the-double-repeat-default-for-volte" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Setting the double repeat default for volte&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-volta-below-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Volta below chords &gt; </a>]</td></tr></table>
<a name="repeats-shortening-volta-brackets"></a>
<h2 class="unnumberedsec">Shortening volta brackets</h2>


<p>By default, the volta brackets will be drawn over all of the
alternative music, but it is possible to shorten them by setting
<code>voltaSpannerDuration</code>.  In the next example, the bracket only
lasts one measure, which is a duration of 3/4.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  c4 c c
  \set Score.voltaSpannerDuration = #(ly:make-moment 3/4)
  \repeat volta 5 { d4 d d }
  \alternative {
    {
      e4 e e
      f4 f f
    }
    { g4 g g }
  }
}
</pre><p>
 <a href="79/lily-70fe60bf.ly">
  <img align="middle"
       border="0"
       src="79/lily-70fe60bf.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-below-chords.ly"></a>

<hr size="6">
<a name="Repeats_003a-Volta-below-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-shortening-volta-brackets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Shortening volta brackets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-volta-multi-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Volta multi staff &gt; </a>]</td></tr></table>
<a name="repeats-volta-below-chords"></a>
<h2 class="unnumberedsec">Volta below chords</h2>


<p>By adding the <code>Volta_engraver</code> to the relevant staff, volte can be
put under chords.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \chords {
      c1
      c1
    }
    \new Staff \with {
      \consists &quot;Volta_engraver&quot;
    }
    {
      \repeat volta 2 { c'1 }
      \alternative { c' }
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Volta_engraver&quot;
    }
  }
}
</pre><p>
 <a href="62/lily-5c52ad22.ly">
  <img align="middle"
       border="0"
       src="62/lily-5c52ad22.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-multi-staff.ly"></a>

<hr size="6">
<a name="Repeats_003a-Volta-multi-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-volta-below-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Volta below chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#repeats-volta-text-markup-using-repeatcommands" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Repeats: Volta text markup using repeatCommands &gt; </a>]</td></tr></table>
<a name="repeats-volta-multi-staff"></a>
<h2 class="unnumberedsec">Volta multi staff</h2>


<p>By adding the <code>Volta_engraver</code> to the relevant staff, volte can be
put over staves other than the topmost one in a score.
</p>

<pre class="verbatim">voltaMusic = \relative c'' {
  \repeat volta 2 {
    c1
  }
  \alternative {
    d1
    e1
  }
}

&lt;&lt;
  \new StaffGroup &lt;&lt;
    \new Staff \voltaMusic
    \new Staff \voltaMusic
  &gt;&gt;
  \new StaffGroup &lt;&lt;
    \new Staff \with { \consists &quot;Volta_engraver&quot; }
      \voltaMusic
    \new Staff \voltaMusic
  &gt;&gt;
&gt;&gt;
</pre><p>
 <a href="37/lily-6cc24677.ly">
  <img align="middle"
       border="0"
       src="37/lily-6cc24677.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-text-markup-using-repeatcommands.ly"></a>

<hr size="6">
<a name="Repeats_003a-Volta-text-markup-using-repeatCommands"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#simultaneous-notes" title="Next chapter">&nbsp;Simultaneous notes &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-volta-multi-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Volta multi staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#repeats" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Repeats&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes &gt; </a>]</td></tr></table>
<a name="repeats-volta-text-markup-using-repeatcommands"></a>
<h2 class="unnumberedsec">Volta text markup using repeatCommands</h2>


<p>Though volte are best specified using <code>\repeat volta</code>, the
context property <code>repeatCommands</code> must be used in cases where the
volta text needs more advanced formatting with <code>\markup</code>.
</p>

<p>Since <code>repeatCommands</code> takes a list, the simplest method of
including markup is to use an identifier for the text and embed it in
the command list using the Scheme syntax <code>#(list (list 'volta
textIdentifier))</code>. Start- and end-repeat commands can be added as
separate list elements:
</p>

<pre class="verbatim">voltaAdLib = \markup { 1. 2. 3... \text \italic { ad lib. } }

\relative c'' {
  c1
  \set Score.repeatCommands = #(list (list 'volta voltaAdLib) 'start-repeat)
  c4 b d e
  \set Score.repeatCommands = #'((volta #f) (volta &quot;4.&quot;) end-repeat)
  f1
  \set Score.repeatCommands = #'((volta #f))
}
</pre><p>
 <a href="18/lily-3265464a.ly">
  <img align="middle"
       border="0"
       src="18/lily-3265464a.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Simultaneous-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#repeats" title="Beginning of this chapter or previous chapter"> &lt;&lt; Repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#repeats-volta-text-markup-using-repeatcommands" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Repeats: Volta text markup using repeatCommands&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-additional-voices-to-avoid-collisions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Additional voices to avoid collisions &gt; </a>]</td></tr></table>
<a name="simultaneous-notes"></a>
<h1 class="unnumbered">Simultaneous notes</h1>

<a name="index-Simultaneous-notes"></a>
<p><a href="notation-big-page.html#simultaneous-notes">Simultaneous notes</a>
</p>

<a name="additional-voices-to-avoid-collisions.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Additional-voices-to-avoid-collisions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-changing-a-single-note_0027s-size-in-a-chord" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Changing a single note's size in a chord &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-additional-voices-to-avoid-collisions"></a>
<h2 class="unnumberedsec">Additional voices to avoid collisions</h2>


<p>In some instances of complex polyphonic music, additional voices are
necessary to prevent collisions between notes.  If more than four
parallel voices are needed, additional voices can be added by defining
a variable using the Scheme function <code>context-spec-music</code>.
</p>

<pre class="verbatim">voiceFive = #(context-spec-music (make-voice-props-set 4) 'Voice)

\relative c'' {
  \time 3/4
  \key d \minor
  \partial 2
  &lt;&lt;
    \new Voice  {
      \voiceOne
      a4. a8
      e'4 e4. e8
      f4 d4. c8
    }
    \new Voice {
      \voiceTwo
      d,2
      d4 cis2
      d4 bes2
    }
    \new Voice {
      \voiceThree
      f'2
      bes4 a2
      a4 s2
    }
    \new Voice {
      \voiceFive
      s2
      g4 g2
      f4 f2
    }
  &gt;&gt;
}
</pre><p>
 <a href="91/lily-9c183491.ly">
  <img align="middle"
       border="0"
       src="91/lily-9c183491.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-a-single-notes-size-in-a-chord.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Changing-a-single-note_0027s-size-in-a-chord"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-additional-voices-to-avoid-collisions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Additional voices to avoid collisions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-changing-partcombine-texts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Changing partcombine texts &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-changing-a-single-note_0027s-size-in-a-chord"></a>
<h2 class="unnumberedsec">Changing a single note&rsquo;s size in a chord</h2>


<p>Individual note heads in a chord can be modified with the
<code>\tweak</code> command inside a chord, by altering the <code>font-size</code>
property.
</p>

<p>Inside the chord (within the brackets <code>&lt; &gt;</code>), before the note to
be altered, place the <code>\tweak</code> command, followed by
<code>#'font-size</code> and define the proper size like <code>#-2</code> (a tiny
note head).
</p>



<pre class="verbatim">\relative c' {
  &lt;\tweak font-size #+2 c e g c
   \tweak font-size #-2 e&gt;1
   ^\markup { A tiny e }_\markup { A big c }
}
</pre><p>
 <a href="ad/lily-137d8831.ly">
  <img align="middle"
       border="0"
       src="ad/lily-137d8831.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-partcombine-texts.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Changing-partcombine-texts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-changing-a-single-note_0027s-size-in-a-chord" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Changing a single note's size in a chord&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-clusters" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Clusters &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-changing-partcombine-texts"></a>
<h2 class="unnumberedsec">Changing partcombine texts</h2>


<p>When using the automatic part combining feature, the printed text for
the solo and unison sections may be changed:
</p>

<pre class="verbatim">\new Staff &lt;&lt;
  \set Staff.soloText = #&quot;girl&quot;
  \set Staff.soloIIText = #&quot;boy&quot;
  \set Staff.aDueText = #&quot;together&quot;
  \partcombine
    \relative c'' {
      g4 g r r
      a2 g
    }
    \relative c'' {
      r4 r a( b)
      a2 g
    }
&gt;&gt;
</pre><p>
 <a href="6e/lily-eaf82cc0.ly">
  <img align="middle"
       border="0"
       src="6e/lily-eaf82cc0.png"
       alt="[image of music]">
 </a>
</p>




<a name="clusters.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Clusters"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-changing-partcombine-texts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Changing partcombine texts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-combining-two-parts-on-the-same-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Combining two parts on the same staff &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-clusters"></a>
<h2 class="unnumberedsec">Clusters</h2>


<p>Clusters are a device to denote that a complete range of notes is to be
played.
</p>

<pre class="verbatim">fragment = \relative c' {
  c4 f &lt;e d'&gt;4
  &lt;g a&gt;8 &lt;e a&gt; a4 c2 &lt;d b&gt;4
  e2 c
}

&lt;&lt;
  \new Staff \fragment
  \new Staff \makeClusters \fragment
&gt;&gt;
</pre><p>
 <a href="5c/lily-6149fead.ly">
  <img align="middle"
       border="0"
       src="5c/lily-6149fead.png"
       alt="[image of music]">
 </a>
</p>




<a name="combining-two-parts-on-the-same-staff.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Combining-two-parts-on-the-same-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-clusters" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Clusters&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-displaying-complex-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Displaying complex chords &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-combining-two-parts-on-the-same-staff"></a>
<h2 class="unnumberedsec">Combining two parts on the same staff</h2>


<p>The part combiner tool ( <code>\partcombine</code> command ) allows the
combination of several different parts on the same staff.  Text
directions such as &ldquo;solo&rdquo; or &ldquo;a2&rdquo; are added by default; to remove
them, simply set the property <code>printPartCombineTexts</code> to <code>f</code>.
For vocal scores (hymns), there is no need to add &ldquo;solo/a2&rdquo; texts,
so they should be switched off.  However, it might be better not to use
it if there are any solos, as they won&rsquo;t be indicated.  In such cases,
standard polyphonic notation may be preferable.
</p>
<p>This snippet presents the three ways two parts can be printed on a same
staff: standard polyphony, <code>\partcombine</code> without texts, and
<code>\partcombine</code> with texts.
</p>




<pre class="verbatim">musicDown = \relative c'' {
  g4 e4.( d8) c4 |
  r2 g'4( f8 e) |
  d2 \stemDown a
}

\score {
    &lt;&lt;
    \new Staff \with { instrumentName = #&quot;Standard polyphony&quot; }

      &lt;&lt; \musicUp \\ \musicDown &gt;&gt;

    \new Staff \with {
      instrumentName = #&quot;PartCombine without text&quot;
      printPartCombineTexts = ##f
    }

    \partcombine \musicUp \musicDown

    \new Staff \with { instrumentName = #&quot;PartCombine with text&quot; }
      \partcombine \musicUp \musicDown
    &gt;&gt;
  \layout {
    indent = 6.0\cm
    \context {
      \Score
      \override SystemStartBar.collapse-height = #30
    }
  }
}
</pre><p>
 <a href="f3/lily-8c907d99.ly">
  <img align="middle"
       border="0"
       src="f3/lily-8c907d99.png"
       alt="[image of music]">
 </a>
</p>




<a name="displaying-complex-chords.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Displaying-complex-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-combining-two-parts-on-the-same-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Combining two parts on the same staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-double-glissando" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Double glissando &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-displaying-complex-chords"></a>
<h2 class="unnumberedsec">Displaying complex chords</h2>


<p>Here is a way to display a chord where the same note is played twice
with different accidentals.
</p>

<pre class="verbatim">fixA = {
  \once \override Stem.length = #11
}

fixB = {
  \once \override NoteHead.X-offset = #1.7
  \once \override Stem.length = #7
  \once \override Stem.rotation = #'(45 0 0)
  \once \override Stem.extra-offset = #'(-0.1 . -0.2)
  \once \override Flag.style = #'no-flag
  \once \override Accidental.extra-offset = #'(4 . -.1)
}


\relative c' {
  &lt;&lt; { \fixA &lt;b d!&gt;8 } \\ { \voiceThree \fixB dis } &gt;&gt; s
}
</pre><p>
 <a href="20/lily-c341836c.ly">
  <img align="middle"
       border="0"
       src="20/lily-c341836c.png"
       alt="[image of music]">
 </a>
</p>




<a name="double-glissando.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Double-glissando"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-displaying-complex-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Displaying complex chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-forcing-horizontal-shift-of-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Forcing horizontal shift of notes &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-double-glissando"></a>
<h2 class="unnumberedsec">Double glissando</h2>


<p>To connect chords with glissando lines, attach a second glissando to a
hidden voice.
</p>

<pre class="verbatim">\relative c {
  \clef bass
  &lt;&lt;
    {
      % new voice ( = \voiceOne), hidden
      \hideNotes
      % attach glissando to note heads
      e2\glissando g
    }
    \\
    {
      % original voice with chords rearranged so that
      % glissando is attached to a &amp; c
      &lt;e a,&gt;2\glissando &lt;g c,&gt;
    }
  &gt;&gt;
}
</pre><p>
 <a href="9e/lily-ea5d0b4e.ly">
  <img align="middle"
       border="0"
       src="9e/lily-ea5d0b4e.png"
       alt="[image of music]">
 </a>
</p>




<a name="forcing-horizontal-shift-of-notes.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Forcing-horizontal-shift-of-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-double-glissando" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Double glissando&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-making-an-object-invisible-with-the-_0027transparent-property" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Making an object invisible with the 'transparent property &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-forcing-horizontal-shift-of-notes"></a>
<h2 class="unnumberedsec">Forcing horizontal shift of notes</h2>


<p>When the typesetting engine cannot cope, the following syntax can be
used to override typesetting decisions. The units of measure used here
are staff spaces.
</p>

<pre class="verbatim">\relative c' &lt;&lt;
  {
    &lt;d g&gt;2 &lt;d g&gt;
  }
  \\
  {
    &lt;b f'&gt;2
    \once \override NoteColumn.force-hshift = #1.7
    &lt;b f'&gt;2
  }
&gt;&gt;
</pre><p>
 <a href="8b/lily-6f0e31be.ly">
  <img align="middle"
       border="0"
       src="8b/lily-6f0e31be.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-an-object-invisible-with-the-transparent-property.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Making-an-object-invisible-with-the-_0027transparent-property"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-forcing-horizontal-shift-of-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Forcing horizontal shift of notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-moving-dotted-notes-in-polyphony" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Moving dotted notes in polyphony &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-making-an-object-invisible-with-the-_0027transparent-property"></a>
<h2 class="unnumberedsec">Making an object invisible with the &rsquo;transparent property</h2>


<p>Setting the <code>transparent</code> property will cause an object to be
printed in &ldquo;invisible ink&rdquo;: the object is not printed, but all its
other behavior is retained.  The object still takes up space, it takes
part in collisions, and slurs, ties and beams can be attached to it.
</p>

<p>This snippet demonstrates how to connect different voices using ties.
Normally, ties only connect two notes in the same voice.  By
introducing a tie in a different voice, and blanking the first up-stem
in that voice, the tie appears to cross voices.
</p>

<pre class="verbatim">\relative {
  \time 2/4
  &lt;&lt;
    {
      \once \hide Stem
      \once \override Stem.length = #8
      b'8 ~ 8\noBeam
      \once \hide Stem
      \once \override Stem.length = #8
      g8 ~ 8\noBeam
    }
    \\
    {
      b8 g g e
    }
  &gt;&gt;
}
</pre><p>
 <a href="dc/lily-8e5a911e.ly">
  <img align="middle"
       border="0"
       src="dc/lily-8e5a911e.png"
       alt="[image of music]">
 </a>
</p>




<a name="moving-dotted-notes-in-polyphony.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Moving-dotted-notes-in-polyphony"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-making-an-object-invisible-with-the-_0027transparent-property" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Making an object invisible with the 'transparent property&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-suppressing-warnings-for-clashing-note-columns" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Suppressing warnings for clashing note columns &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-moving-dotted-notes-in-polyphony"></a>
<h2 class="unnumberedsec">Moving dotted notes in polyphony</h2>


<p>When a dotted note in the upper voice is moved to avoid a collision
with a note in another voice, the default is to move the upper note to
the right.  This behaviour can be over-ridden by using the
<code>prefer-dotted-right</code> property of <code>NoteCollision</code>.
</p>

<pre class="verbatim">\new Staff \relative c' &lt;&lt;
  {
    f2. f4
    \override Staff.NoteCollision.prefer-dotted-right = ##f
    f2. f4
    \override Staff.NoteCollision.prefer-dotted-right = ##t
    f2. f4
  }
  \\
  { e4 e e e e e e e e e e e }
&gt;&gt;
</pre><p>
 <a href="3b/lily-e1850258.ly">
  <img align="middle"
       border="0"
       src="3b/lily-e1850258.png"
       alt="[image of music]">
 </a>
</p>




<a name="suppressing-warnings-for-clashing-note-columns.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Suppressing-warnings-for-clashing-note-columns"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-moving-dotted-notes-in-polyphony" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Moving dotted notes in polyphony&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simultaneous-notes-two-_005cpartcombine-pairs-on-one-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simultaneous notes: Two \partcombine pairs on one staff &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-suppressing-warnings-for-clashing-note-columns"></a>
<h2 class="unnumberedsec">Suppressing warnings for clashing note columns</h2>


<p>If notes from two voices with stems in the same direction are placed at
the same position, and both voices have no shift or the same shift
specified, the error message &lsquo;<samp>warning: ignoring too many clashing
note columns</samp>&rsquo; will appear when compiling the LilyPond file.  This
message can be suppressed by setting the <code>'ignore-collision</code>
property of the <code>NoteColumn</code> object to <code>#t</code>. Please note that
this does not just suppress warnings  but stops LilyPond trying to
resolve collisions at all and so may have  unintended results unless
used with care.
</p>

<pre class="verbatim">ignore = \override NoteColumn.ignore-collision = ##t

\relative c' {
  \new Staff &lt;&lt;
    \new Voice{ \ignore \stemDown f2 g }
    \new Voice{ c2 \stemDown c, }
  &gt;&gt;
}
</pre><p>
 <a href="ba/lily-e957203d.ly">
  <img align="middle"
       border="0"
       src="ba/lily-e957203d.png"
       alt="[image of music]">
 </a>
</p>




<a name="two--partcombine-pairs-on-one-staff.ly"></a>

<hr size="6">
<a name="Simultaneous-notes_003a-Two-_005cpartcombine-pairs-on-one-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#staff-notation" title="Next chapter">&nbsp;Staff notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-suppressing-warnings-for-clashing-note-columns" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Suppressing warnings for clashing note columns&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#simultaneous-notes" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation &gt; </a>]</td></tr></table>
<a name="simultaneous-notes-two-_005cpartcombine-pairs-on-one-staff"></a>
<h2 class="unnumberedsec">Two \partcombine pairs on one staff</h2>


<p>The <code>\partcombine</code> function takes two music expressions each
containing a part, and distributes them among four <code>Voice</code>s named
&ldquo;two&rdquo; &ldquo;one&rdquo; &ldquo;solo&rdquo; and &ldquo;chords&rdquo; depending on when and how
the parts merged into a common voice.   The voices output from
<code>\partcombine</code> can have their layout properties adjusted in the
usual way.  Here we define extensions of <code>\partcombine</code> to make
it easier to put four voices on a staff.
</p>
<p>soprano = { d&rsquo;4 | cis&rsquo;  b  e&rsquo;  d&rsquo;8 cis&rsquo; | cis&rsquo;2 b } alto = { fis4 |
e8 fis gis ais b4 b | b ais fis2 } tenor = { a8 b | cis&rsquo; dis&rsquo; e&rsquo;4 b8
cis&rsquo; d&rsquo;4 | gis cis&rsquo; dis&rsquo;2 } bass = { fis8 gis | a4 gis g fis | eis
fis b,2 }
</p>
<p>\new Staff &lt;&lt;
  \key b\minor
  \clef alto
  \partial 4
  \transpose b b&rsquo;
  \partcombineUp \soprano \alto
  \partcombineDown \tenor \bass &gt;&gt;
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff
    \accepts &quot;VoiceBox&quot;
  }
  \context {
    \name &quot;VoiceBox&quot;
    \type &quot;Engraver_group&quot;
    \defaultchild &quot;Voice&quot;
    \accepts &quot;Voice&quot;
  }
}

partcombineUp =
#(define-music-function (partOne partTwo)
  (ly:music? ly:music?)
&quot;Take the music in @var{partOne} and @var{partTwo} and return
a @code{VoiceBox} named @q{Up} containing @code{Voice}s
that contain @var{partOne} and @var{partTwo} merged into one
voice where feasible.  This variant sets the default voicing
in the output to use upward stems.&quot;
#{
  \new VoiceBox = &quot;Up&quot; &lt;&lt;
    \context Voice = &quot;one&quot; { \voiceOne }
    \context Voice = &quot;two&quot; { \voiceThree }
    \context Voice = &quot;shared&quot; { \voiceOne }
    \context Voice = &quot;solo&quot; { \voiceOne }
    \partcombine #partOne #partTwo
  &gt;&gt;
#})

partcombineDown = #
(define-music-function (partOne partTwo)
  (ly:music? ly:music?)
&quot;Take the music in @var{partOne} and @var{partTwo} and return
a @code{VoiceBox} named @q{Down} containing @code{Voice}s
that contain @var{partOne} and @var{partTwo} merged into one
voice where feasible.  This variant sets the default voicing
in the output to use downward stems.&quot;
#{
  \new VoiceBox = &quot;Down&quot; &lt;&lt;
    \set VoiceBox.soloText = #&quot;Solo III&quot;
    \set VoiceBox.soloIIText = #&quot;Solo IV&quot;
    \context Voice =&quot;one&quot; { \voiceFour }
    \context Voice =&quot;two&quot; { \voiceTwo }
    \context Voice =&quot;shared&quot; { \voiceFour }
    \context Voice =&quot;solo&quot; { \voiceFour }
    \partcombine #partOne #partTwo
  &gt;&gt;
#})

soprano = { d'4 | cis'  b  e'  d'8 cis' | cis'2 b }
alto = { fis4 | e8 fis gis ais b4 b | b ais fis2 }
tenor = { a8 b | cis' dis' e'4 b8 cis' d'4 | gis cis' dis'2 }
bass = { fis8 gis | a4 gis g fis | eis fis b,2 }

\new Staff &lt;&lt;
  \key b\minor
  \clef alto
  \partial 4
  \transpose b b'
  \partcombineUp \soprano \alto
  \partcombineDown \tenor \bass
&gt;&gt;
</pre><p>
 <a href="a4/lily-9fca2d4d.ly">
  <img align="middle"
       border="0"
       src="a4/lily-9fca2d4d.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Staff-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#simultaneous-notes" title="Beginning of this chapter or previous chapter"> &lt;&lt; Simultaneous notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simultaneous-notes-two-_005cpartcombine-pairs-on-one-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simultaneous notes: Two \partcombine pairs on one staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-adding-ambitus-per-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Adding ambitus per voice &gt; </a>]</td></tr></table>
<a name="staff-notation"></a>
<h1 class="unnumbered">Staff notation</h1>

<a name="index-Staff-notation"></a>
<p><a href="notation-big-page.html#staff-notation">Staff notation</a>
</p>

<a name="adding-ambitus-per-voice.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Adding-ambitus-per-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-adding-an-extra-staff-at-a-line-break" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Adding an extra staff at a line break &gt; </a>]</td></tr></table>
<a name="staff-notation-adding-ambitus-per-voice"></a>
<h2 class="unnumberedsec">Adding ambitus per voice</h2>


<p>Ambitus can be added per voice. In this case, the ambitus must be moved
manually to prevent collisions.
</p>

<pre class="verbatim">\new Staff &lt;&lt;
  \new Voice \with {
    \consists &quot;Ambitus_engraver&quot;
  } \relative c'' {
    \override Ambitus.X-offset = #2.0
    \voiceOne
    c4 a d e
    f1
  }
  \new Voice \with {
    \consists &quot;Ambitus_engraver&quot;
  } \relative c' {
    \voiceTwo
    es4 f g as
    b1
  }
&gt;&gt;
</pre><p>
 <a href="53/lily-04b16abb.ly">
  <img align="middle"
       border="0"
       src="53/lily-04b16abb.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-an-extra-staff-at-a-line-break.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Adding-an-extra-staff-at-a-line-break"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-adding-ambitus-per-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Adding ambitus per voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-adding-an-extra-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Adding an extra staff &gt; </a>]</td></tr></table>
<a name="staff-notation-adding-an-extra-staff-at-a-line-break"></a>
<h2 class="unnumberedsec">Adding an extra staff at a line break</h2>


<p>When adding a new staff at a line break, some extra space is
unfortunately added at the end of the line before the break (to fit in
a key signature change, which  will never be printed anyway).  The
workaround is to add a setting of
<code>Staff.explicitKeySignatureVisibility</code> as is shown in the example.
</p>


<pre class="verbatim">\score {
  \new StaffGroup \relative c'' {
    \new Staff
    \key f \major
    c1 c^&quot;Unwanted extra space&quot; \break
    &lt;&lt; { c1 | c }
       \new Staff {
         \key f \major
         \once \omit Staff.TimeSignature
         c1 | c
       }
    &gt;&gt;
    c1 | c^&quot;Fixed here&quot; \break
    &lt;&lt; { c1 | c }
       \new Staff {
         \once \set Staff.explicitKeySignatureVisibility = #end-of-line-invisible
         \key f \major
         \once \omit Staff.TimeSignature
         c1 | c
       }
    &gt;&gt;
  }
}
</pre><p>
 <a href="13/lily-d74eece6.ly">
  <img align="middle"
       border="0"
       src="13/lily-d74eece6.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-an-extra-staff.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Adding-an-extra-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-adding-an-extra-staff-at-a-line-break" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Adding an extra staff at a line break&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-adding-indicators-to-staves-which-get-split-after-a-break" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Adding indicators to staves which get split after a break &gt; </a>]</td></tr></table>
<a name="staff-notation-adding-an-extra-staff"></a>
<h2 class="unnumberedsec">Adding an extra staff</h2>


<p>An extra staff can be added (possibly temporarily) after the start of a
piece.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \new Staff \relative c'' {
      c1 | c | c | c | c
    }
    \new StaffGroup \relative c'' {
      \new Staff {
        c1 | c
        &lt;&lt;
          {
            c1 | d
          }
          \new Staff {
            \once \omit Staff.TimeSignature
            c1 | b
          }
        &gt;&gt;
        c1
      }
    }
  &gt;&gt;
}
</pre><p>
 <a href="ef/lily-a9c7c944.ly">
  <img align="middle"
       border="0"
       src="ef/lily-a9c7c944.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-indicators-to-staves-which-get-split-after-a-break.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Adding-indicators-to-staves-which-get-split-after-a-break"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-adding-an-extra-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Adding an extra staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-adding-orchestral-cues-to-a-vocal-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Adding orchestral cues to a vocal score &gt; </a>]</td></tr></table>
<a name="staff-notation-adding-indicators-to-staves-which-get-split-after-a-break"></a>
<h2 class="unnumberedsec">Adding indicators to staves which get split after a break</h2>


<p>This snippet defines the <code>\splitStaffBarLine</code>,
<code>convUpStaffBarLine</code> and <code>convDownStaffBarLine</code> commands.
These add arrows at a bar line, to denote that several voices sharing a
staff will each continue on a staff of their own in the next system, or
that voices split in this way recombine.
</p>

<pre class="verbatim">#(define-markup-command (arrow-at-angle layout props angle-deg length fill)
   (number? number? boolean?)
   (let* (
           (PI-OVER-180 (/ (atan 1 1) 34))
           (degrees-&gt;radians (lambda (degrees) (* degrees PI-OVER-180)))
           (angle-rad (degrees-&gt;radians angle-deg))
           (target-x (* length (cos angle-rad)))
           (target-y (* length (sin angle-rad))))
     (interpret-markup layout props
       (markup
        #:translate (cons (/ target-x 2) (/ target-y 2))
        #:rotate angle-deg
        #:translate (cons (/ length -2) 0)
        #:concat (#:draw-line (cons length 0)
                   #:arrow-head X RIGHT fill)))))


splitStaffBarLineMarkup = \markup \with-dimensions #'(0 . 0) #'(0 . 0) {
  \combine
  \arrow-at-angle #45 #(sqrt 8) ##t
  \arrow-at-angle #-45 #(sqrt 8) ##t
}

splitStaffBarLine = {
  \once \override Staff.BarLine.stencil =
  #(lambda (grob)
     (ly:stencil-combine-at-edge
      (ly:bar-line::print grob)
      X RIGHT
      (grob-interpret-markup grob splitStaffBarLineMarkup)
      0))
  \break
}

convDownStaffBarLine = {
  \once \override Staff.BarLine.stencil =
  #(lambda (grob)
     (ly:stencil-combine-at-edge
      (ly:bar-line::print grob)
      X RIGHT
      (grob-interpret-markup grob #{
        \markup\with-dimensions #'(0 . 0) #'(0 . 0) {
          \translate #'(0 . -.13)\arrow-at-angle #-45 #(sqrt 8) ##t
        }#})
      0))
  \break
}

convUpStaffBarLine = {
  \once \override Staff.BarLine.stencil =
  #(lambda (grob)
     (ly:stencil-combine-at-edge
      (ly:bar-line::print grob)
      X RIGHT
      (grob-interpret-markup grob #{
        \markup\with-dimensions #'(0 . 0) #'(0 . 0) {
          \translate #'(0 . .14)\arrow-at-angle #45 #(sqrt 8) ##t
        }#})
      0))
  \break
}


\paper {
  ragged-right = ##t
  short-indent = 10\mm
}

separateSopranos = {
  \set Staff.instrumentName = &quot;AI AII&quot;
  \set Staff.shortInstrumentName = &quot;AI AII&quot;
  \splitStaffBarLine
  \change Staff = &quot;up&quot;
}
convSopranos = {
  \convDownStaffBarLine
  \change Staff = &quot;shared&quot;
  \set Staff.instrumentName = &quot;S A&quot;
  \set Staff.shortInstrumentName = &quot;S A&quot;
}

sI = {
  \voiceOne
  \repeat unfold 4 f''2
  \separateSopranos
  \repeat unfold 4 g''2
  \convSopranos
  \repeat unfold 4 c''2
}
sII = {
  s1*2
  \voiceTwo
  \change Staff = &quot;up&quot;
  \repeat unfold 4 d''2
}
aI = {
  \voiceTwo
  \repeat unfold 4 a'2
  \voiceOne
  \repeat unfold 4 b'2
  \convUpStaffBarLine
  \voiceTwo
  \repeat unfold 4 g'2
}
aII = {
  s1*2
  \voiceTwo
  \repeat unfold 4 g'2
}
ten = {
  \voiceOne
  \repeat unfold 4 c'2
  \repeat unfold 4 d'2
  \repeat unfold 4 c'2
}
bas = {
  \voiceTwo
  \repeat unfold 4 f2
  \repeat unfold 4 g2
  \repeat unfold 4 c2
}

\score {
  &lt;&lt;
    \new ChoirStaff &lt;&lt;
      \new Staff = up \with {
        instrumentName = &quot;SI SII&quot;
        shortInstrumentName = &quot;SI SII&quot;
      } {
        s1*4
      }

      \new Staff = shared \with {
        instrumentName = &quot;S A&quot;
        shortInstrumentName = &quot;S A&quot;
      } &lt;&lt;
        \new Voice = sopI \sI
        \new Voice = sopII \sII
        \new Voice = altI \aI
        \new Voice = altII \aII
      &gt;&gt;
      \new Lyrics \with {
        alignBelowContext = up
      }
      \lyricsto sopII { e f g h }
      \new Lyrics \lyricsto altI { a b c d e f g h i j k l }

      \new Staff = men \with {
        instrumentName = &quot;T B&quot;
        shortInstrumentName = &quot;T B&quot;
      } &lt;&lt;
        \clef F
        \new Voice = ten \ten
        \new Voice = bas \bas
      &gt;&gt;
      \new Lyrics \lyricsto bas { a b c d e f g h i j k l }
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context {
      \Staff \RemoveEmptyStaves
      \override VerticalAxisGroup.remove-first = ##t
    }
  }
}
</pre><p>
 <a href="77/lily-56c42df3.ly">
  <img align="middle"
       border="0"
       src="77/lily-56c42df3.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-orchestral-cues-to-a-vocal-score.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Adding-orchestral-cues-to-a-vocal-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-adding-indicators-to-staves-which-get-split-after-a-break" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Adding indicators to staves which get split after a break&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-adding-timing-marks-to-long-glissandi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Adding timing marks to long glissandi &gt; </a>]</td></tr></table>
<a name="staff-notation-adding-orchestral-cues-to-a-vocal-score"></a>
<h2 class="unnumberedsec">Adding orchestral cues to a vocal score</h2>


<p>This shows one approach to simplify adding many orchestral cues to the
piano reduction in a vocal score.  The music function <code>\cueWhile</code>
takes four arguments: the music from which the cue is to be taken, as
defined by <code>\addQuote</code>, the name to be inserted before the cue
notes, then either <code>#UP</code> or <code>#DOWN</code> to specify either
<code>\voiceOne</code> with the name above the staff or <code>\voiceTwo</code>
with the name below the staff, and finally the piano music in parallel
with which the cue notes are to appear.  The name of the cued
instrument is positioned to the left of the cued notes. Many passages
can be cued, but they cannot overlap each other in time.
</p>

<pre class="verbatim">cueWhile =
#(define-music-function
   (instrument name dir music)
   (string? string? ly:dir? ly:music?)
   #{
     \cueDuring $instrument #dir {
       \once \override TextScript.self-alignment-X = #RIGHT
       \once \override TextScript.direction = $dir
       &lt;&gt;-\markup { \tiny #name }
       $music
     }
   #})

flute = \relative c'' {
  \transposition c'
  s4 s4 e g
}
\addQuote &quot;flute&quot; { \flute }

clarinet = \relative c' {
  \transposition bes
  fis4 d d c
}
\addQuote &quot;clarinet&quot; { \clarinet }

singer = \relative c'' { c4. g8 g4 bes4 }
words = \lyricmode { here's the lyr -- ics }

pianoRH = \relative c'' {
  \transposition c'
  \cueWhile &quot;clarinet&quot; &quot;Clar.&quot; #DOWN { c4. g8 }
  \cueWhile &quot;flute&quot; &quot;Flute&quot; #UP { g4 bes4 }
}
pianoLH = \relative c { c4 &lt;c' e&gt; e, &lt;g c&gt; }

\score {
  &lt;&lt;
    \new Staff {
      \new Voice = &quot;singer&quot; {
        \singer
      }
    }
    \new Lyrics {
      \lyricsto &quot;singer&quot;
      \words
    }
    \new PianoStaff &lt;&lt;
      \new Staff {
        \new Voice {
          \pianoRH
        }
      }
      \new Staff {
        \clef &quot;bass&quot;
        \pianoLH
      }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="94/lily-b8fcef02.ly">
  <img align="middle"
       border="0"
       src="94/lily-b8fcef02.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-timing-marks-to-long-glissandi.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Adding-timing-marks-to-long-glissandi"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-adding-orchestral-cues-to-a-vocal-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Adding orchestral cues to a vocal score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-alternative-bar-numbering" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Alternative bar numbering &gt; </a>]</td></tr></table>
<a name="staff-notation-adding-timing-marks-to-long-glissandi"></a>
<h2 class="unnumberedsec">Adding timing marks to long glissandi</h2>


<p>Skipped beats in very long glissandi are sometimes indicated by timing
marks, often consisting of stems without noteheads.  Such stems can
also be used to carry intermediate expression markings.
</p>
<p>If the stems do not align well with the glissando, they may need to be
repositioned slightly.
</p>

<pre class="verbatim">glissandoSkipOn = {
  \override NoteColumn.glissando-skip = ##t
  \hide NoteHead
  \override NoteHead.no-ledgers = ##t
}

glissandoSkipOff = {
  \revert NoteColumn.glissando-skip
  \undo \hide NoteHead
  \revert NoteHead.no-ledgers
}

\relative c'' {
  r8 f8\glissando
  \glissandoSkipOn
  f4 g a a8\noBeam
  \glissandoSkipOff
  a8

  r8 f8\glissando
  \glissandoSkipOn
  g4 a8
  \glissandoSkipOff
  a8 |

  r4 f\glissando \&lt;
  \glissandoSkipOn
  a4\f \&gt;
  \glissandoSkipOff
  b8\! r |
}
</pre><p>
 <a href="15/lily-58d81ccc.ly">
  <img align="middle"
       border="0"
       src="15/lily-58d81ccc.png"
       alt="[image of music]">
 </a>
</p>




<a name="alternative-bar-numbering.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Alternative-bar-numbering"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-adding-timing-marks-to-long-glissandi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Adding timing marks to long glissandi&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-centered-measure-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Centered measure numbers &gt; </a>]</td></tr></table>
<a name="staff-notation-alternative-bar-numbering"></a>
<h2 class="unnumberedsec">Alternative bar numbering</h2>


<p>Two alternative methods for bar numbering can be set, especially for
when using repeated music.
</p>

<pre class="verbatim">\relative c'{
  \set Score.alternativeNumberingStyle = #'numbers
  \repeat volta 3 { c4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1 \break
  \set Score.alternativeNumberingStyle = #'numbers-with-letters
  \repeat volta 3 { c,4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1
}
</pre><p>
 <a href="6c/lily-d3871fdb.ly">
  <img align="middle"
       border="0"
       src="6c/lily-d3871fdb.png"
       alt="[image of music]">
 </a>
</p>




<a name="centered-measure-numbers.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Centered-measure-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-alternative-bar-numbering" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Alternative bar numbering&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-changing-the-default-bar-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Changing the default bar lines &gt; </a>]</td></tr></table>
<a name="staff-notation-centered-measure-numbers"></a>
<h2 class="unnumberedsec">Centered measure numbers</h2>


<p>Scores of large ensemble works often have bar numbers placed beneath
the system, centered horizontally on the measure&rsquo;s extent.  This
snippet shows how the <code>Measure_counter_engraver</code> may be used to
simulate this notational practice.  Here, the engraver has been added
to a <code>Dynamics</code> context.
</p>

<pre class="verbatim">\layout {
  \context {
    \Dynamics
    \consists #Measure_counter_engraver
    \override MeasureCounter.direction = #DOWN
    \override MeasureCounter.font-encoding = #'latin1
    \override MeasureCounter.font-shape = #'italic
    % to control the distance of the Dynamics context from the staff:
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing.padding = #2
  }
  \context {
    \Score
    \remove &quot;Bar_number_engraver&quot;
  }
}

pattern = \repeat unfold 7 { c'4 d' e' f' }

\new StaffGroup &lt;&lt;
  \new Staff {
    \pattern
  }
  \new Staff {
    \pattern
  }
  \new Dynamics {
    \startMeasureCount
    s1*7
    \stopMeasureCount
  }
&gt;&gt;
</pre><p>
 <a href="29/lily-42d43b25.ly">
  <img align="middle"
       border="0"
       src="29/lily-42d43b25.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-default-bar-lines.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Changing-the-default-bar-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-centered-measure-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Centered measure numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-changing-the-number-of-lines-in-a-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Changing the number of lines in a staff &gt; </a>]</td></tr></table>
<a name="staff-notation-changing-the-default-bar-lines"></a>
<h2 class="unnumberedsec">Changing the default bar lines</h2>


<p>Default bar lines can be changed when re-defined in a score context.
</p>

<pre class="verbatim">% http://lsr.di.unimi.it/LSR/Item?id=964
%%=&gt; http://lists.gnu.org/archive/html/lilypond-user/2014-03/msg00126.html
%%=&gt; http://lilypond.1069038.n5.nabble.com/Changing-the-default-end-repeat-bracket-tc169357.html

\layout {
  \context {
    \Score
    %% Changing the defaults from engraver-init.ly
    defaultBarType = #&quot;!&quot;
    startRepeatType = #&quot;[|:&quot;
    endRepeatType = #&quot;:|]&quot;
    doubleRepeatType = #&quot;:|][|:&quot;
  }
}

%% example:
{
  c'1
  \repeat volta 2 { \repeat unfold 2 c' }
  \repeat volta 2 { \repeat unfold 2 c' }
  \alternative {
    { c' }
    {
      %% v2.18 workaround
      \once\override Score.VoltaBracket.shorten-pair = #'(1 . -1)
      c'
    }
  }
  \bar &quot;|.&quot;
}
</pre><p>
 <a href="a3/lily-0d1a4534.ly">
  <img align="middle"
       border="0"
       src="a3/lily-0d1a4534.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-number-of-lines-in-a-staff.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Changing-the-number-of-lines-in-a-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-changing-the-default-bar-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Changing the default bar lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-changing-the-staff-size" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Changing the staff size &gt; </a>]</td></tr></table>
<a name="staff-notation-changing-the-number-of-lines-in-a-staff"></a>
<h2 class="unnumberedsec">Changing the number of lines in a staff</h2>


<p>The number of lines in a staff may changed by overriding the
<code>StaffSymbol</code> property <code>line-count</code>.
</p>




<pre class="verbatim">upper = \relative c'' {
  c4 d e f
}

lower = \relative c {
  \clef bass
  c4 b a g
}

\score {
  \context PianoStaff &lt;&lt;
    \new Staff {
      \upper
    }
    \new Staff {
      \override Staff.StaffSymbol.line-count = #4
      \lower
    }
  &gt;&gt;
}
</pre><p>
 <a href="0c/lily-580003bc.ly">
  <img align="middle"
       border="0"
       src="0c/lily-580003bc.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-staff-size.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Changing-the-staff-size"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-changing-the-number-of-lines-in-a-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Changing the number of lines in a staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-creating-blank-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Creating blank staves &gt; </a>]</td></tr></table>
<a name="staff-notation-changing-the-staff-size"></a>
<h2 class="unnumberedsec">Changing the staff size</h2>


<p>Though the simplest way to resize staves is to use
<code>#(set-global-staff-size xx)</code>, an individual staff&rsquo;s size can be
changed by scaling the properties <code>'staff-space</code> and
<code>fontSize</code>.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff {
    \relative c'' {
      \dynamicDown
      c8\ff c c c c c c c
    }
  }
  \new Staff \with {
    fontSize = #-3
    \override StaffSymbol.staff-space = #(magstep -3)
  } {
    \clef bass
    c8 c c c c\f c c c
  }
&gt;&gt;
</pre><p>
 <a href="28/lily-bdd5f2f9.ly">
  <img align="middle"
       border="0"
       src="28/lily-bdd5f2f9.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-blank-staves.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Creating-blank-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-changing-the-staff-size" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Changing the staff size&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-creating-custom-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Creating custom key signatures &gt; </a>]</td></tr></table>
<a name="staff-notation-creating-blank-staves"></a>
<h2 class="unnumberedsec">Creating blank staves</h2>


<p>To create blank staves, generate empty measures then remove the
<code>Bar_number_engraver</code> from the <code>Score</code> context, and the
<code>Time_signature_engraver</code>, <code>Clef_engraver</code> and
<code>Bar_engraver</code> from the <code>Staff</code> context.
</p>

<pre class="verbatim">#(set-global-staff-size 20)

\score {
  {
    \repeat unfold 12 { s1 \break }
  }
  \layout {
    indent = 0\in
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Clef_engraver&quot;
      \remove &quot;Bar_engraver&quot;
    }
    \context {
      \Score
      \remove &quot;Bar_number_engraver&quot;
    }
  }
}

% uncomment these lines for &quot;letter&quot; size
%{
\paper {
  #(set-paper-size &quot;letter&quot;)
  ragged-last-bottom = ##f
  line-width = 7.5\in
  left-margin = 0.5\in
  bottom-margin = 0.25\in
  top-margin = 0.25\in
}
%}

% uncomment these lines for &quot;A4&quot; size
%{
\paper {
  #(set-paper-size &quot;a4&quot;)
  ragged-last-bottom = ##f
  line-width = 180
  left-margin = 15
  bottom-margin = 10
  top-margin = 10
}
%}
</pre><p>
 <a href="85/lily-d5d70a45.ly">
  <img align="middle"
       border="0"
       src="85/lily-d5d70a45.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-custom-key-signatures.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Creating-custom-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-creating-blank-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Creating blank staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-creating-double_002ddigit-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Creating double-digit fingerings &gt; </a>]</td></tr></table>
<a name="staff-notation-creating-custom-key-signatures"></a>
<h2 class="unnumberedsec">Creating custom key signatures</h2>


<p>LilyPond supports custom key signatures.  In this example, print for D
minor with an extended range of printed flats.
</p>

<pre class="verbatim">\new Staff \with {
  \override StaffSymbol.line-count = #8
  \override KeySignature.flat-positions = #'((-7 . 6))
  \override KeyCancellation.flat-positions = #'((-7 . 6))
  % presumably sharps are also printed in both octaves
  \override KeySignature.sharp-positions = #'((-6 . 7))
  \override KeyCancellation.sharp-positions = #'((-6 . 7))

  \override Clef.stencil = #
  (lambda (grob)(grob-interpret-markup grob
  #{ \markup\combine
    \musicglyph #&quot;clefs.C&quot;
    \translate #'(-3 . -2)
    \musicglyph #&quot;clefs.F&quot;
   #}))
    clefPosition = #3
    middleCPosition = #3
    middleCClefPosition = #3
}

{
  \key d\minor
  f bes, f bes,
}
</pre><p>
 <a href="e7/lily-35b90923.ly">
  <img align="middle"
       border="0"
       src="e7/lily-35b90923.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-double-digit-fingerings.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Creating-double_002ddigit-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-creating-custom-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Creating custom key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-cross-staff-stems" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Cross staff stems &gt; </a>]</td></tr></table>
<a name="staff-notation-creating-double_002ddigit-fingerings"></a>
<h2 class="unnumberedsec">Creating double-digit fingerings</h2>


<p>Creating fingerings larger than 5 is possible.
</p>

<pre class="verbatim">\relative c' {
  c1-10
  c1-50
  c1-36
  c1-29
}
</pre><p>
 <a href="53/lily-413a6723.ly">
  <img align="middle"
       border="0"
       src="53/lily-413a6723.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-stems.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Cross-staff-stems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-creating-double_002ddigit-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Creating double-digit fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-display-bracket-with-only-one-staff-in-a-system" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Display bracket with only one staff in a system &gt; </a>]</td></tr></table>
<a name="staff-notation-cross-staff-stems"></a>
<h2 class="unnumberedsec">Cross staff stems</h2>


<p>This snippet shows the use of the <code>Span_stem_engraver</code> and
<code>\crossStaff</code> to connect stems across staves automatically.
</p>
<p>The stem length need not be specified, as the variable distance between
noteheads and staves is calculated automatically.
</p>

<pre class="verbatim">\layout {
  \context {
    \PianoStaff
    \consists #Span_stem_engraver
  }
}

{
  \new PianoStaff &lt;&lt;
    \new Staff {
      &lt;b d'&gt;4 r d'16\&gt; e'8. g8 r\!
      e'8 f' g'4 e'2
    }
    \new Staff {
      \clef bass
      \voiceOne
      \autoBeamOff
      \crossStaff { &lt;e g&gt;4 e, g16 a8. c8} d
      \autoBeamOn
      g8 f g4 c2
    }
  &gt;&gt;
}
</pre><p>
 <a href="f6/lily-cc31242f.ly">
  <img align="middle"
       border="0"
       src="f6/lily-cc31242f.png"
       alt="[image of music]">
 </a>
</p>




<a name="display-bracket-with-only-one-staff-in-a-system.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Display-bracket-with-only-one-staff-in-a-system"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-cross-staff-stems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Cross staff stems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-extending-a-trillspanner" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Extending a TrillSpanner &gt; </a>]</td></tr></table>
<a name="staff-notation-display-bracket-with-only-one-staff-in-a-system"></a>
<h2 class="unnumberedsec">Display bracket with only one staff in a system</h2>


<p>If there is only one staff in one of the staff types <code>ChoirStaff</code>
or <code>StaffGroup</code>, by default the bracket and the starting bar line
will not be displayed.  This can be changed by overriding
<code>collapse-height</code> to set its value to be less than the number of
staff lines in the staff.
</p>
<p>Note that in contexts such as <code>PianoStaff</code> and <code>GrandStaff</code>
where the systems begin with a brace instead of a bracket, another
property has to be set, as shown on the second system in the example.
</p>

<pre class="verbatim">\score {
  \new StaffGroup &lt;&lt;
    % Must be lower than the actual number of staff lines
    \override StaffGroup.SystemStartBracket.collapse-height = #4
    \override Score.SystemStartBar.collapse-height = #4
    \new Staff {
      c'1
    }
  &gt;&gt;
}
\score {
  \new PianoStaff &lt;&lt;
    \override PianoStaff.SystemStartBrace.collapse-height = #4
    \override Score.SystemStartBar.collapse-height = #4
    \new Staff {
      c'1
    }
  &gt;&gt;
}
</pre><p>
 <a href="74/lily-711aa227.ly">
  <img align="middle"
       border="0"
       src="74/lily-711aa227.png"
       alt="[image of music]">
 </a>
</p>




<a name="extending-a-trillspanner.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Extending-a-TrillSpanner"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-display-bracket-with-only-one-staff-in-a-system" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Display bracket with only one staff in a system&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-extending-glissandi-across-repeats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Extending glissandi across repeats &gt; </a>]</td></tr></table>
<a name="staff-notation-extending-a-trillspanner"></a>
<h2 class="unnumberedsec">Extending a TrillSpanner</h2>


<p>For <code>TrillSpanner</code>, the <code>minimum-length</code> property becomes
effective only if the <code>set-spacing-rods</code> procedure is called
explicitly.  To do this, the <code>springs-and-rods</code> property should be
set to <code>ly:spanner::set-spacing-rods</code>.
</p>

<pre class="verbatim">\relative c' {
\key c\minor
  \time 2/4
  c16( as') c,-. des-.
  \once\override TrillSpanner.minimum-length = #15
  \once\override TrillSpanner.springs-and-rods = #ly:spanner::set-spacing-rods
  \afterGrace es4
  \startTrillSpan { d16[( \stopTrillSpan es)] }
  c( c' g es c g' es d
  \hideNotes
  c8)
}
</pre><p>
 <a href="c1/lily-51f8417a.ly">
  <img align="middle"
       border="0"
       src="c1/lily-51f8417a.png"
       alt="[image of music]">
 </a>
</p>




<a name="extending-glissandi-across-repeats.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Extending-glissandi-across-repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-extending-a-trillspanner" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Extending a TrillSpanner&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-flat-ties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Flat Ties &gt; </a>]</td></tr></table>
<a name="staff-notation-extending-glissandi-across-repeats"></a>
<h2 class="unnumberedsec">Extending glissandi across repeats</h2>


<p>A glissando which extends into several <code>\alternative</code> blocks can
be simulated by adding a hidden grace note with a glissando at the
start of each <code>\alternative</code> block.  The grace note should be at
the same pitch as the note which starts the initial glissando.  This is
implemented here with a music function which takes the pitch of the
grace note as its argument.
</p>
<p>Note that in polyphonic music the grace note must be matched with
corresponding grace notes in all other voices.
</p>

<pre class="verbatim">repeatGliss = #(define-music-function (grace)
  (ly:pitch?)
  #{
    % the next two lines ensure the glissando is long enough
    % to be visible
    \once \override Glissando.springs-and-rods
      = #ly:spanner::set-spacing-rods
    \once \override Glissando.minimum-length = #3.5
    \once \hideNotes
    \grace $grace \glissando
  #})

\score {
  \relative c'' {
    \repeat volta 3 { c4 d e f\glissando }
    \alternative {
      { g2 d }
      { \repeatGliss f g2 e }
      { \repeatGliss f e2 d }
    }
  }
}

music =  \relative c' {
  \voiceOne
  \repeat volta 2 {
    g a b c\glissando
  }
  \alternative {
    { d1 }
    { \repeatGliss c \once \omit StringNumber e1\2 }
  }
}

\score {
  \new StaffGroup &lt;&lt;
    \new Staff &lt;&lt;
      \context Voice { \clef &quot;G_8&quot; \music }
    &gt;&gt;
    \new TabStaff  &lt;&lt;
      \context TabVoice { \clef &quot;moderntab&quot; \music }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="be/lily-4cbc0ad0.ly">
  <img align="middle"
       border="0"
       src="be/lily-4cbc0ad0.png"
       alt="[image of music]">
 </a>
</p>




<a name="flat-ties.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Flat-Ties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-extending-glissandi-across-repeats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Extending glissandi across repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-forcing-measure-width-to-adapt-to-metronomemark_0027s-width" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Forcing measure width to adapt to MetronomeMark's width &gt; </a>]</td></tr></table>
<a name="staff-notation-flat-ties"></a>
<h2 class="unnumberedsec">Flat Ties</h2>


<p>The function takes the default <code>Tie.stencil</code> as an argument,
calculating the result relying on the extents of this default. Further
tweaking is possible by overriding <code>Tie.details.height-limit</code> or
with <code>\shape</code>. It&rsquo;s also possible to change the custom-definition
on the fly.
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=1031

#(define ((flared-tie coords) grob)

  (define (pair-to-list pair)
     (list (car pair) (cdr pair)))

  (define (normalize-coords goods x y dir)
    (map
      (lambda (coord)
        ;(coord-scale coord (cons x (* y dir)))
        (cons (* x (car coord)) (* y dir (cdr coord))))
      goods))

  (define (my-c-p-s points thick)
    (make-connected-path-stencil
      points
      thick
      1.0
      1.0
      #f
      #f))

  ;; outer let to trigger suicide
  (let ((sten (ly:tie::print grob)))
    (if (grob::is-live? grob)
        (let* ((layout (ly:grob-layout grob))
               (line-thickness (ly:output-def-lookup layout 'line-thickness))
               (thickness (ly:grob-property grob 'thickness 0.1))
               (used-thick (* line-thickness thickness))
               (dir (ly:grob-property grob 'direction))
               (xex (ly:stencil-extent sten X))
               (yex (ly:stencil-extent sten Y))
               (lenx (interval-length xex))
               (leny (interval-length yex))
               (xtrans (car xex))
               (ytrans (if (&gt; dir 0)(car yex) (cdr yex)))
               (uplist
                 (map pair-to-list
                      (normalize-coords coords lenx (* leny 2) dir))))

   (ly:stencil-translate
       (my-c-p-s uplist used-thick)
     (cons xtrans ytrans)))
   '())))

#(define flare-tie
  (flared-tie '((0 . 0)(0.1 . 0.2) (0.9 . 0.2) (1.0 . 0.0))))

\layout {
  \context {
    \Voice
    \override Tie.stencil = #flare-tie
  }
}

\paper { ragged-right = ##f }

\relative c' {
  a4~a
  \override Tie.height-limit = 4
  a'4~a
  a'4~a
  &lt;a,, c e a c e a c e&gt;~ q

  \break

  a'4~a
  \once \override Tie.details.height-limit = 14
  a4~a

  \break

  a4~a
  \once \override Tie.details.height-limit = 0.5
  a4~a

  \break

  a4~a
  \shape #'((0 . 0) (0 . 0.4) (0 . 0.4) (0 . 0)) Tie
  a4~a

  \break

  a4~a
  \once \override Tie.stencil =
    #(flared-tie '((0 . 0)(0.1 . 0.4) (0.9 . 0.4) (1.0 . 0.0)))
  a4~a

  a4~a
  \once \override Tie.stencil =
    #(flared-tie '((0 . 0)(0.06 . 0.1) (0.94 . 0.1) (1.0 . 0.0)))
  a4~a
}
</pre><p>
 <a href="d0/lily-0e8ba0eb.ly">
  <img align="middle"
       border="0"
       src="d0/lily-0e8ba0eb.png"
       alt="[image of music]">
 </a>
</p>




<a name="forcing-measure-width-to-adapt-to-metronomemarks-width.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Forcing-measure-width-to-adapt-to-MetronomeMark_0027s-width"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-flat-ties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Flat Ties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-glissandi-can-skip-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Glissandi can skip grobs &gt; </a>]</td></tr></table>
<a name="staff-notation-forcing-measure-width-to-adapt-to-metronomemark_0027s-width"></a>
<h2 class="unnumberedsec">Forcing measure width to adapt to MetronomeMark&rsquo;s width</h2>


<p>By default, metronome marks do not influence horizontal spacing.   This
can be solved through a simple override, as shown in the second half of
the example.
</p>

<pre class="verbatim">example = {
  \tempo &quot;Allegro&quot;
  R1*6
  \tempo &quot;Rall.&quot;
  R1*2
  \tempo &quot;A tempo&quot;
  R1*8
}

{
  \compressMMRests {
    \example
    R1
    R1
    \override Score.MetronomeMark.extra-spacing-width = #'(-3 . 0)
    \example
  }
}
</pre><p>
 <a href="18/lily-e5ec3420.ly">
  <img align="middle"
       border="0"
       src="18/lily-e5ec3420.png"
       alt="[image of music]">
 </a>
</p>




<a name="glissandi-can-skip-grobs.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Glissandi-can-skip-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-forcing-measure-width-to-adapt-to-metronomemark_0027s-width" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Forcing measure width to adapt to MetronomeMark's width&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: How to print two rehearsal marks above and below the same barline (method 1) &gt; </a>]</td></tr></table>
<a name="staff-notation-glissandi-can-skip-grobs"></a>
<h2 class="unnumberedsec">Glissandi can skip grobs</h2>


<p><code>NoteColumn</code> grobs can be skipped over by glissandi.
</p>

<pre class="verbatim">\relative c' {
  a2 \glissando
  \once \override NoteColumn.glissando-skip = ##t
  f''4 d,
}
</pre><p>
 <a href="e4/lily-30f2f92d.ly">
  <img align="middle"
       border="0"
       src="e4/lily-30f2f92d.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-1.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-glissandi-can-skip-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Glissandi can skip grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: How to print two rehearsal marks above and below the same barline (method 2) &gt; </a>]</td></tr></table>
<a name="staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 1)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo;, one on top of the other. It
shifts the lower rehearsal mark below the staff and then adds padding
above it in order to place the upper rehearsal mark above the staff.
</p>
<p>By adjusting the extra-offset and baseline-skip values you can increase
or decrease the overall space between the rehearsal mark and the staff.
</p>
<p>Because nearly every type of glyph or string can be made to behave like
a rehearsal mark it is possible to centre those above and below a bar
line.
</p>
<p>Adding the appropriate &rsquo;break visibility&rsquo; as shown in snippet 1 will
allow you to position two marks at the end of a line as well.
</p>
<p>Note: Method 1 is less complex than Method 2 but does not really allow
for fine tuning of placement of one of the rehearsal marks without
affecting the other.  It may also give some problems with vertical
spacing, since using <code>extra-offset</code> does not change the bounding
box of the mark from its original value.
</p>

<pre class="verbatim">\relative c'{
  c d e f |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \circle 1 \box A }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \flat { \bold \small \italic Fine. } }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \override Score.RehearsalMark.break-visibility = #begin-of-line-invisible
  \mark \markup \center-column { \fermata \box z }
}
</pre><p>
 <a href="07/lily-41bbeb51.ly">
  <img align="middle"
       border="0"
       src="07/lily-41bbeb51.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-2.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: How to print two rehearsal marks above and below the same barline (method 1)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-incipit" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Incipit &gt; </a>]</td></tr></table>
<a name="staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 2)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo; - one above the stave and one
below, by creating two voices, adding the Rehearsal Mark engraver to
each voice - without this no rehearsal mark is printed - and then
placing each rehearsal mark UP and DOWN in each voice respectively.
</p>
<p>This method (as opposed to method 1) is more complex, but allows for
more flexibility, should it be needed to tweak each rehearsal mark
independently of the other.
</p>

<pre class="verbatim">\score {
  \relative c'
  &lt;&lt;
    \new Staff {
      &lt;&lt;
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
        }
        { c4 d e f
          \mark \markup { \box A }
          c4 d e f
        }
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
          \override RehearsalMark.direction = #DOWN
        }
        { s4 s s s
          \mark \markup { \circle 1 }
          s4 s s s
        }
      &gt;&gt;
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Mark_engraver&quot;
      \remove &quot;Staff_collecting_engraver&quot;
    }
  }
}
</pre><p>
 <a href="99/lily-c497ffda.ly">
  <img align="middle"
       border="0"
       src="99/lily-c497ffda.png"
       alt="[image of music]">
 </a>
</p>




<a name="incipit.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Incipit"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: How to print two rehearsal marks above and below the same barline (method 2)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-inserting-score-fragments-above-a-staff-as-markups" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Inserting score fragments above a staff as markups &gt; </a>]</td></tr></table>
<a name="staff-notation-incipit"></a>
<h2 class="unnumberedsec">Incipit</h2>


<p>When transcribing mensural music, an incipit at the beginning of the piece is
useful to indicate the original key and tempo.  Musicians today are used
to bar lines, but these were not known during the period of mensural music.  As
a compromise, bar lines are often printed between the staves, a layout style
called mensurstriche layout.
</p>
<pre class="verbatim">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% A short excerpt from the Jubilate Deo by Orlande de Lassus
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

global = {
  \set Score.skipBars = ##t
  \key g \major
  \time 4/4

  % the actual music
  \skip 1*8

  % let finis bar go through all staves
  \override Staff.BarLine.transparent = ##f

  % finis bar
  \bar &quot;|.&quot;
}

discantusIncipit = {
  \clef &quot;neomensural-c1&quot;
  \key f \major
  \time 2/2
  c''1.
}

discantusNotes = {
  \transpose c' c'' {
    \clef &quot;treble&quot;
    d'2. d'4 |
    b e' d'2 |
    c'4 e'4.( d'8 c' b |
    a4) b a2 |
    b4.( c'8 d'4) c'4 |
    \once \hide NoteHead
    c'1 |
    b\breve |
  }
}

discantusLyrics = \lyricmode {
  Ju -- bi -- la -- te De -- o,
  om -- nis ter -- ra, __ om-
  &quot;...&quot;
  -us.
}

altusIncipit = {
  \clef &quot;neomensural-c3&quot;
  \key f \major
  \time 2/2
  r1 f'1.
}

altusNotes = {
  \transpose c' c'' {
    \clef &quot;treble&quot;
    r2 g2. e4 fis g |
    a2 g4 e |
    fis g4.( fis16 e fis4) |
    g1 |
    \once \hide NoteHead
    g1 |
    g\breve |
  }
}

altusLyrics = \lyricmode {
  Ju -- bi -- la -- te
  De -- o, om -- nis ter -- ra,
  &quot;...&quot;
  -us.
}

tenorIncipit = {
  \clef &quot;neomensural-c4&quot;
  \key f \major
  \time 2/2
  r\longa
  r\breve
  r1 c'1.
}

tenorNotes = {
  \transpose c' c' {
    \clef &quot;treble_8&quot;
    R1 |
    R1 |
    R1 |
    % two measures
    r2 d'2. d'4 b e' |
    \once \hide NoteHead
    e'1 |
    d'\breve |
  }
}

tenorLyrics = \lyricmode {
  Ju -- bi -- la -- te
  &quot;...&quot;
  -us.
}

bassusIncipit = {
  \clef &quot;mensural-f&quot;
  \key f \major
  \time 2/2
  r\maxima
  f1.
}

bassusNotes = {
  \transpose c' c' {
    \clef &quot;bass&quot;
    R1 |
    R1 |
    R1 |
    R1 |
    g2. e4 |
    \once \hide NoteHead
    e1 |
    g\breve |
  }
}

bassusLyrics = \lyricmode {
  Ju -- bi-
  &quot;...&quot;
  -us.
}

\score {
  &lt;&lt;
    \new StaffGroup = choirStaff &lt;&lt;
      \new Voice = &quot;discantusNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Discantus&quot;
        \incipit \discantusIncipit
        \global
        \discantusNotes
      &gt;&gt;
      \new Lyrics \lyricsto discantusNotes { \discantusLyrics }
      \new Voice = &quot;altusNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Altus&quot;
        \global
        \incipit \altusIncipit
        \altusNotes
      &gt;&gt;
      \new Lyrics \lyricsto altusNotes { \altusLyrics }
      \new Voice = &quot;tenorNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Tenor&quot;
        \global
        \incipit \tenorIncipit
        \tenorNotes
      &gt;&gt;
      \new Lyrics \lyricsto tenorNotes { \tenorLyrics }
      \new Voice = &quot;bassusNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Bassus&quot;
        \global
        \incipit \bassusIncipit
        \bassusNotes
      &gt;&gt;
      \new Lyrics \lyricsto bassusNotes { \bassusLyrics }
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context {
      \Score
      %% no bar lines in staves or lyrics
      \hide BarLine
    }
    %% the next two instructions keep the lyrics between the bar lines
    \context {
      \Lyrics
      \consists &quot;Bar_engraver&quot;
      \consists &quot;Separating_line_group_engraver&quot;
    }
    \context {
      \Voice
      %% no slurs
      \hide Slur
      %% Comment in the below &quot;\remove&quot; command to allow line
      %% breaking also at those bar lines where a note overlaps
      %% into the next measure.  The command is commented out in this
      %% short example score, but especially for large scores, you
      %% will typically yield better line breaking and thus improve
      %% overall spacing if you comment in the following command.
      %%\remove &quot;Forbid_line_break_engraver&quot;
    }
    indent = 6\cm
    incipit-width = 4\cm
  }
}
</pre><p>
 <a href="a8/lily-b5926ef2.ly">
  <img align="middle"
       border="0"
       src="a8/lily-b5926ef2.png"
       alt="[image of music]">
 </a>
</p>




<a name="inserting-score-fragments-above-a-staff,-as-markups.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Inserting-score-fragments-above-a-staff-as-markups"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-incipit" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Incipit&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-let-tabstaff-print-the-topmost-string-at-bottom" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Let TabStaff print the topmost string at bottom &gt; </a>]</td></tr></table>
<a name="staff-notation-inserting-score-fragments-above-a-staff-as-markups"></a>
<h2 class="unnumberedsec">Inserting score fragments above a staff as markups</h2>


<p>The <code>\markup</code> command is quite versatile.  In this snippet, it
contains a <code>\score</code> block instead of texts or marks.
</p>

<pre class="verbatim">tuning = \markup {
  \score {
    \new Staff \with { \remove &quot;Time_signature_engraver&quot; }
    {
      \clef bass
      &lt;c, g, d g&gt;1
    }
    \layout { ragged-right = ##t  indent = 0\cm }
  }
}

\header {
  title = &quot;Solo Cello Suites&quot;
  subtitle = &quot;Suite IV&quot;
  subsubtitle = \markup { Originalstimmung: \raise #0.5 \tuning }
}

\layout { ragged-right = ##f }

\relative c'' {
  \time 4/8
  \tuplet 3/2 { c8 d e } \tuplet 3/2 { c d e }
  \tuplet 3/2 { c8 d e } \tuplet 3/2 { c d e }
  g8 a g a
  g8 a g a
}
</pre><p>
 <a href="8e/lily-9b7e83eb.ly">
  <img align="middle"
       border="0"
       src="8e/lily-9b7e83eb.png"
       alt="[image of music]">
 </a>
</p>




<a name="let-tabstaff-print-the-topmost-string-at-bottom.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Let-TabStaff-print-the-topmost-string-at-bottom"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-inserting-score-fragments-above-a-staff-as-markups" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Inserting score fragments above a staff as markups&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-letter-tablature-formatting" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Letter tablature formatting &gt; </a>]</td></tr></table>
<a name="staff-notation-let-tabstaff-print-the-topmost-string-at-bottom"></a>
<h2 class="unnumberedsec">Let TabStaff print the topmost string at bottom</h2>


<p>In tablatures usually the first string is printed topmost. If you want
to have it at the bottom change the
<code>stringOneTopmost</code>-context-property. For a context-wide setting
this could be done in <code>layout</code> as well.
</p>

<pre class="verbatim">%
%\layout {
%  \context {
%    \Score
%    stringOneTopmost = ##f
%  }
%  \context {
%    \TabStaff
%    tablatureFormat = #fret-letter-tablature-format
%  }
%}

m = {
  \cadenzaOn
  e, b, e gis! b e'
  \bar &quot;||&quot;
}

&lt;&lt;
  \new Staff { \clef &quot;G_8&quot; &lt;&gt;_&quot;default&quot; \m &lt;&gt;_&quot;italian (historic)&quot;\m }
  \new TabStaff
  {
    \m
    \set Score.stringOneTopmost = ##f
    \set TabStaff.tablatureFormat = #fret-letter-tablature-format
    \m
  }
&gt;&gt;
</pre><p>
 <a href="dc/lily-c1a53a3d.ly">
  <img align="middle"
       border="0"
       src="dc/lily-c1a53a3d.png"
       alt="[image of music]">
 </a>
</p>




<a name="letter-tablature-formatting.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Letter-tablature-formatting"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-let-tabstaff-print-the-topmost-string-at-bottom" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Let TabStaff print the topmost string at bottom&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-making-glissandi-breakable" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Making glissandi breakable &gt; </a>]</td></tr></table>
<a name="staff-notation-letter-tablature-formatting"></a>
<h2 class="unnumberedsec">Letter tablature formatting</h2>


<p>Tablature can be formatted using letters instead of numbers.
</p>

<pre class="verbatim">music = \relative c {
  c4 d e f
  g4 a b c
  d4 e f g
}

&lt;&lt;
  \new Staff {
    \clef &quot;G_8&quot;
    \music
  }
  \new TabStaff \with {
    tablatureFormat = #fret-letter-tablature-format
  }
  {
    \music
  }
&gt;&gt;
</pre><p>
 <a href="fa/lily-40fdaf5e.ly">
  <img align="middle"
       border="0"
       src="fa/lily-40fdaf5e.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-glissandi-breakable.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Making-glissandi-breakable"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-letter-tablature-formatting" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Letter tablature formatting&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-making-some-staff-lines-thicker-than-the-others" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Making some staff lines thicker than the others &gt; </a>]</td></tr></table>
<a name="staff-notation-making-glissandi-breakable"></a>
<h2 class="unnumberedsec">Making glissandi breakable</h2>


<p>Setting the <code>breakable</code> property to <code>#t</code> in combination with
<code>after-line-breaking</code> allows a glissando to break if it occurs at
a line break:
</p>

<pre class="verbatim">glissandoSkipOn = {
  \override NoteColumn.glissando-skip = ##t
  \hide NoteHead
  \override NoteHead.no-ledgers = ##t
}

\relative c'' {
  \override Glissando.breakable = ##t
  \override Glissando.after-line-breaking = ##t
  f1\glissando |
  \break
  a4 r2. |
  f1\glissando
  \once \glissandoSkipOn
  \break
  a2 a4 r4 |
}
</pre><p>
 <a href="d0/lily-0ef56938.ly">
  <img align="middle"
       border="0"
       src="d0/lily-0ef56938.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-some-staff-lines-thicker-than-the-others.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Making-some-staff-lines-thicker-than-the-others"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-making-glissandi-breakable" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Making glissandi breakable&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-measure-counter" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Measure counter &gt; </a>]</td></tr></table>
<a name="staff-notation-making-some-staff-lines-thicker-than-the-others"></a>
<h2 class="unnumberedsec">Making some staff lines thicker than the others</h2>


<p>For educational purposes, a staff line can be thickened (e.g., the
middle line, or to emphasize the line of the G clef).  This can be
achieved by adding extra lines very close to the line that should be
emphasized, using the <code>line-positions</code> property of the
<code>StaffSymbol</code> object.
</p>

<pre class="verbatim">{
  \override Staff.StaffSymbol.line-positions =
    #'(-4 -2 -0.2 0 0.2 2 4)
  d'4 e' f' g'
}
</pre><p>
 <a href="c4/lily-adb86609.ly">
  <img align="middle"
       border="0"
       src="c4/lily-adb86609.png"
       alt="[image of music]">
 </a>
</p>




<a name="measure-counter.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Measure-counter"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-making-some-staff-lines-thicker-than-the-others" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Making some staff lines thicker than the others&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Mensurstriche layout (bar lines between the staves) &gt; </a>]</td></tr></table>
<a name="staff-notation-measure-counter"></a>
<h2 class="unnumberedsec">Measure counter</h2>


<p>This snippet provides a workaround for emitting measure counters using
transparent percent repeats.
</p>

<pre class="verbatim">&lt;&lt;
  \context Voice = &quot;foo&quot; {
    \clef bass
    c4 r g r
    c4 r g r
    c4 r g r
    c4 r g r
  }
  \context Voice = &quot;foo&quot; {
    \set countPercentRepeats = ##t
    \hide PercentRepeat
    \override PercentRepeatCounter.staff-padding = #1
    \repeat percent 4 { s1 }
  }
&gt;&gt;
</pre><p>
 <a href="1a/lily-7dc05678.ly">
  <img align="middle"
       border="0"
       src="1a/lily-7dc05678.png"
       alt="[image of music]">
 </a>
</p>




<a name="mensurstriche-layout-bar-lines-between-the-staves.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-measure-counter" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Measure counter&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-modifying-the-ottava-spanner-slope" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Modifying the Ottava spanner slope &gt; </a>]</td></tr></table>
<a name="staff-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<h2 class="unnumberedsec">Mensurstriche layout (bar lines between the staves)</h2>


<p>The mensurstriche-layout where the bar lines do not show on the staves
but between staves can be achieved with a <code>StaffGroup</code> instead of
a <code>ChoirStaff</code>.  The bar line on staves is blanked out using
<code>\hide</code>.
</p>

<pre class="verbatim">global = {
  \hide Staff.BarLine
  s1 s
  % the final bar line is not interrupted
  \undo \hide Staff.BarLine
  \bar &quot;|.&quot;
}

\new StaffGroup \relative c'' {
  &lt;&lt;
    \new Staff { &lt;&lt; \global { c1 c } &gt;&gt; }
    \new Staff { &lt;&lt; \global { c c } &gt;&gt; }
  &gt;&gt;
}
</pre><p>
 <a href="a8/lily-6697829e.ly">
  <img align="middle"
       border="0"
       src="a8/lily-6697829e.png"
       alt="[image of music]">
 </a>
</p>




<a name="modifying-the-ottava-spanner-slope.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Modifying-the-Ottava-spanner-slope"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Mensurstriche layout (bar lines between the staves)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-nesting-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Nesting staves &gt; </a>]</td></tr></table>
<a name="staff-notation-modifying-the-ottava-spanner-slope"></a>
<h2 class="unnumberedsec">Modifying the Ottava spanner slope</h2>


<p>It is possible to change the slope of the Ottava spanner.
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.OttavaBracket.stencil = #ly:line-spanner::print
  \override Staff.OttavaBracket.bound-details =
    #`((left . ((Y . 0) ; Change the integer here
                (attach-dir . ,LEFT)
                (padding . 0)
                (stencil-align-dir-y . ,CENTER)))
       (right . ((Y . 5) ; Change the integer here
                 (padding . 0)
                 (attach-dir . ,RIGHT)
                 (text . ,(make-draw-dashed-line-markup (cons 0 -1.2))))))
  \override Staff.OttavaBracket.left-bound-info =
     #ly:line-spanner::calc-left-bound-info-and-text
  \override Staff.OttavaBracket.right-bound-info =
     #ly:line-spanner::calc-right-bound-info
  \ottava #1
  c1
  c'''1
}
</pre><p>
 <a href="7f/lily-1df7a0af.ly">
  <img align="middle"
       border="0"
       src="7f/lily-1df7a0af.png"
       alt="[image of music]">
 </a>
</p>




<a name="nesting-staves.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Nesting-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-modifying-the-ottava-spanner-slope" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Modifying the Ottava spanner slope&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-non_002dtraditional-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Non-traditional key signatures &gt; </a>]</td></tr></table>
<a name="staff-notation-nesting-staves"></a>
<h2 class="unnumberedsec">Nesting staves</h2>


<p>The property <code>systemStartDelimiterHierarchy</code> can be used to make
more complex nested staff groups. The command <code>\set
StaffGroup.systemStartDelimiterHierarchy</code> takes an alphabetical list of
the number of staves produced. Before each staff a system start
delimiter can be given. It has to be enclosed in brackets and takes as
much staves as the brackets enclose. Elements in the list can be
omitted, but the first bracket takes always the complete number of
staves. The possibilities are <code>SystemStartBar</code>,
<code>SystemStartBracket</code>, <code>SystemStartBrace</code>, and
<code>SystemStartSquare</code>.
</p>

<pre class="verbatim">\new StaffGroup
\relative c'' &lt;&lt;
  \set StaffGroup.systemStartDelimiterHierarchy
    = #'(SystemStartSquare (SystemStartBrace (SystemStartBracket a
                             (SystemStartSquare b)  ) c ) d)
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
&gt;&gt;
</pre><p>
 <a href="35/lily-565e641a.ly">
  <img align="middle"
       border="0"
       src="35/lily-565e641a.png"
       alt="[image of music]">
 </a>
</p>




<a name="non-traditional-key-signatures.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Non_002dtraditional-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-nesting-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Nesting staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-numbering-groups-of-measures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Numbering groups of measures &gt; </a>]</td></tr></table>
<a name="staff-notation-non_002dtraditional-key-signatures"></a>
<h2 class="unnumberedsec">Non-traditional key signatures</h2>


<p>The commonly used <code>\key</code> command sets the <code>keyAlterations</code>
property, in the <code>Staff</code> context.
</p>
<p>To create non-standard key signatures, set this property directly. The
format of this command is a list:
</p>
<p><code> \set Staff.keyAlterations = #`(((octave . step) . alter) ((octave
. step) . alter) ...) </code> where, for each element in the list,
<code>octave</code> specifies the octave (0 being the octave from middle C to
the B above), <code>step</code> specifies the note within the octave (0 means
C and 6 means B), and <code>alter</code> is <code>,SHARP ,FLAT ,DOUBLE-SHARP</code>
etc. (Note the leading comma.)
</p>

<p>Alternatively, for each item in the list, using the more concise format
<code>(step . alter)</code> specifies that the same alteration should hold in
all octaves.
</p>

<p>For microtonal scales where a &ldquo;sharp&rdquo; is not 100 cents, <code>alter</code>
refers to the alteration as a proportion of a 200-cent whole tone.
</p>

<p>Here is an example of a possible key signature for generating a
whole-tone scale:
</p>

<pre class="verbatim">\relative {
  \set Staff.keyAlterations = #`((6 . ,FLAT)
                                 (5 . ,FLAT)
                                 (3 . ,SHARP))
  c'4 d e fis
  aes4 bes c2
}
</pre><p>
 <a href="8b/lily-3d2ec144.ly">
  <img align="middle"
       border="0"
       src="8b/lily-3d2ec144.png"
       alt="[image of music]">
 </a>
</p>




<a name="numbering-groups-of-measures.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Numbering-groups-of-measures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-non_002dtraditional-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Non-traditional key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-orchestra-choir-and-piano-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Orchestra choir and piano template &gt; </a>]</td></tr></table>
<a name="staff-notation-numbering-groups-of-measures"></a>
<h2 class="unnumberedsec">Numbering groups of measures</h2>


<p>This snippet demonstrates the use of the
<code>Measure_counter_engraver</code> to number groups of successive
measures.  Any stretch of measures may be numbered, whether consisting
of repetitions or not.
</p>

<p>The engraver must be added to the appropriate context.  Here, a
<code>Staff</code> context is used; another possibility is a <code>Dynamics</code>
context.
</p>

<p>The counter is begun with <code>\startMeasureCount</code> and ended with
<code>\stopMeasureCount</code>.  Numbering will start by default with
<code>1</code>, but this behavior may be modified by overriding the
<code>count-from</code> property.
</p>

<p>When a measure extends across a line break, the number will appear
twice, the second time in parentheses.
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff
    \consists #Measure_counter_engraver
  }
}

\new Staff {
  \startMeasureCount
  \repeat unfold 7 {
    c'4 d' e' f'
  }
  \stopMeasureCount
  \bar &quot;||&quot;
  g'4 f' e' d'
  \override Staff.MeasureCounter.count-from = #2
  \startMeasureCount
  \repeat unfold 5 {
    g'4 f' e' d'
  }
  g'4 f'
  \bar &quot;&quot;
  \break
  e'4 d'
  \repeat unfold 7 {
    g'4 f' e' d'
  }
  \stopMeasureCount
}
</pre><p>
 <a href="a0/lily-b9cb1f5a.ly">
  <img align="middle"
       border="0"
       src="a0/lily-b9cb1f5a.png"
       alt="[image of music]">
 </a>
</p>




<a name="orchestra,-choir-and-piano-template.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Orchestra-choir-and-piano-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-numbering-groups-of-measures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Numbering groups of measures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-putting-lyrics-inside-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Putting lyrics inside the staff &gt; </a>]</td></tr></table>
<a name="staff-notation-orchestra-choir-and-piano-template"></a>
<h2 class="unnumberedsec">Orchestra choir and piano template</h2>


<p>This template demonstrates the use of nested <code>StaffGroup</code> and
<code>GrandStaff</code> contexts to sub-group instruments of the same type
together, and a way to use <code>\transpose</code> so that variables hold
music for transposing instruments at concert pitch.
</p>

<pre class="verbatim">fluteMusic = \relative c' { \key g \major g'1 b }

% Pitches as written on a manuscript for Clarinet in A
% are transposed to concert pitch.

clarinetMusic = \transpose c' a
  \relative c'' { \key bes \major bes1 d }

trumpetMusic = \relative c { \key g \major g''1 b }

% Key signature is often omitted for horns

hornMusic = \transpose c' f
  \relative c { d'1 fis }

percussionMusic = \relative c { \key g \major g1 b }

sopranoMusic = \relative c'' { \key g \major g'1 b }

sopranoLyrics = \lyricmode { Lyr -- ics }

altoIMusic = \relative c' { \key g \major g'1 b }

altoIIMusic = \relative c' { \key g \major g'1 b }

altoILyrics =  \sopranoLyrics

altoIILyrics = \lyricmode { Ah -- ah }

tenorMusic = \relative c' { \clef &quot;treble_8&quot; \key g \major g1 b }

tenorLyrics = \sopranoLyrics

pianoRHMusic = \relative c { \key g \major g''1 b }

pianoLHMusic = \relative c { \clef bass \key g \major g1 b }

violinIMusic = \relative c' { \key g \major g'1 b }

violinIIMusic = \relative c' { \key g \major g'1 b }

violaMusic = \relative c { \clef alto \key g \major g'1 b }

celloMusic = \relative c { \clef bass \key g \major g1 b }

bassMusic = \relative c { \clef &quot;bass_8&quot; \key g \major g,1 b }

\score {
  &lt;&lt;
    \new StaffGroup = &quot;StaffGroup_woodwinds&quot; &lt;&lt;
      \new Staff = &quot;Staff_flute&quot; \with { instrumentName = #&quot;Flute&quot; }
      \fluteMusic

      \new Staff = &quot;Staff_clarinet&quot; \with {
        instrumentName = \markup { \concat { &quot;Clarinet in B&quot; \flat } }
      }

      % Declare that written Middle C in the music
      % to follow sounds a concert B flat, for
      % output using sounded pitches such as MIDI.
      %\transposition bes

      % Print music for a B-flat clarinet
      \transpose bes c' \clarinetMusic
    &gt;&gt;

    \new StaffGroup = &quot;StaffGroup_brass&quot; &lt;&lt;
      \new Staff = &quot;Staff_hornI&quot; \with { instrumentName = #&quot;Horn in F&quot; }
       % \transposition f
        \transpose f c' \hornMusic

      \new Staff = &quot;Staff_trumpet&quot; \with { instrumentName = #&quot;Trumpet in  C&quot; }
      \trumpetMusic

    &gt;&gt;
    \new RhythmicStaff = &quot;RhythmicStaff_percussion&quot;
    \with { instrumentName = #&quot;Percussion&quot; }
    &lt;&lt;
      \percussionMusic
    &gt;&gt;
    \new PianoStaff \with { instrumentName = #&quot;Piano&quot; }
    &lt;&lt;
      \new Staff { \pianoRHMusic }
      \new Staff { \pianoLHMusic }
    &gt;&gt;
    \new ChoirStaff = &quot;ChoirStaff_choir&quot; &lt;&lt;
      \new Staff = &quot;Staff_soprano&quot; \with { instrumentName = #&quot;Soprano&quot; }
      \new Voice = &quot;soprano&quot;
      \sopranoMusic

      \new Lyrics \lyricsto &quot;soprano&quot; { \sopranoLyrics }
      \new GrandStaff = &quot;GrandStaff_altos&quot;
      \with { \accepts Lyrics } &lt;&lt;
        \new Staff = &quot;Staff_altoI&quot;  \with { instrumentName = #&quot;Alto I&quot; }
        \new Voice = &quot;altoI&quot;
        \altoIMusic

        \new Lyrics \lyricsto &quot;altoI&quot; { \altoILyrics }
        \new Staff = &quot;Staff_altoII&quot; \with { instrumentName = #&quot;Alto II&quot; }
        \new Voice = &quot;altoII&quot;
        \altoIIMusic

        \new Lyrics \lyricsto &quot;altoII&quot; { \altoIILyrics }
      &gt;&gt;

      \new Staff = &quot;Staff_tenor&quot; \with { instrumentName = #&quot;Tenor&quot; }
        \new Voice = &quot;tenor&quot;
        \tenorMusic

      \new Lyrics \lyricsto &quot;tenor&quot; { \tenorLyrics }
    &gt;&gt;
    \new StaffGroup = &quot;StaffGroup_strings&quot; &lt;&lt;
      \new GrandStaff = &quot;GrandStaff_violins&quot; &lt;&lt;
        \new Staff = &quot;Staff_violinI&quot; \with { instrumentName = #&quot;Violin I&quot; }
        \violinIMusic

        \new Staff = &quot;Staff_violinII&quot; \with { instrumentName = #&quot;Violin II&quot; }
        \violinIIMusic
      &gt;&gt;

      \new Staff = &quot;Staff_viola&quot; \with { instrumentName = #&quot;Viola&quot; }
      \violaMusic

      \new Staff = &quot;Staff_cello&quot; \with { instrumentName = #&quot;Cello&quot; }
      \celloMusic

      \new Staff = &quot;Staff_bass&quot; \with { instrumentName = #&quot;Double Bass&quot; }
      \bassMusic
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre><p>
 <a href="63/lily-1cd18f77.ly">
  <img align="middle"
       border="0"
       src="63/lily-1cd18f77.png"
       alt="[image of music]">
 </a>
</p>




<a name="putting-lyrics-inside-the-staff.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Putting-lyrics-inside-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-orchestra-choir-and-piano-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Orchestra choir and piano template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-quoting-another-voice-with-transposition" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Quoting another voice with transposition &gt; </a>]</td></tr></table>
<a name="staff-notation-putting-lyrics-inside-the-staff"></a>
<h2 class="unnumberedsec">Putting lyrics inside the staff</h2>


<p>Lyrics can be moved vertically to place them inside the staff.  The
lyrics are moved with <code>\override LyricText.extra-offset = #'(0 .
dy)</code> and there are similar commands to move the extenders and hyphens.
The offset needed is established with trial and error.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff &lt;&lt;
    \new Voice = &quot;voc&quot; \relative c' { \stemDown a bes c8 b c4 }
  &gt;&gt;
  \new Lyrics \with {
    \override LyricText.extra-offset = #'(0 . 8.6)
    \override LyricExtender.extra-offset = #'(0 . 8.6)
    \override LyricHyphen.extra-offset = #'(0 . 8.6)
  } \lyricsto &quot;voc&quot; { La la -- la __ _ la }
&gt;&gt;
</pre><p>
 <a href="ae/lily-31a15ff2.ly">
  <img align="middle"
       border="0"
       src="ae/lily-31a15ff2.png"
       alt="[image of music]">
 </a>
</p>




<a name="quoting-another-voice-with-transposition.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Quoting-another-voice-with-transposition"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-putting-lyrics-inside-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Putting lyrics inside the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-quoting-another-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Quoting another voice &gt; </a>]</td></tr></table>
<a name="staff-notation-quoting-another-voice-with-transposition"></a>
<h2 class="unnumberedsec">Quoting another voice with transposition</h2>


<p>Quotations take into account the transposition of both source and
target.  In this example, all instruments play sounding middle C; the
target is an instrument in F.  The target part may be transposed using
<code>\transpose</code>.  In this case, all the pitches (including the
quoted ones) are transposed.
</p>

<pre class="verbatim">}

\addQuote sax {
  \transposition es'
  \repeat unfold 16 { a8 }
}

quoteTest = {
  % french horn
  \transposition f
  g'4
  &lt;&lt; \quoteDuring #&quot;clarinet&quot; { \skip 4 } s4^&quot;clar.&quot; &gt;&gt;
  &lt;&lt; \quoteDuring #&quot;sax&quot; { \skip 4 } s4^&quot;sax.&quot; &gt;&gt;
  g'4
}

{
  \new Staff \with {
    instrumentName = \markup { \column { Horn &quot;in F&quot; } }
  }
  \quoteTest
  \transpose c' d' &lt;&lt; \quoteTest s4_&quot;up a tone&quot; &gt;&gt;
}
</pre><p>
 <a href="36/lily-cf60a827.ly">
  <img align="middle"
       border="0"
       src="36/lily-cf60a827.png"
       alt="[image of music]">
 </a>
</p>




<a name="quoting-another-voice.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Quoting-another-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-quoting-another-voice-with-transposition" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Quoting another voice with transposition&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-removing-brace-on-first-line-of-piano-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Removing brace on first line of piano score &gt; </a>]</td></tr></table>
<a name="staff-notation-quoting-another-voice"></a>
<h2 class="unnumberedsec">Quoting another voice</h2>


<p>The <code>quotedEventTypes</code> property determines the music event types
which should be quoted.  The default value is <code>(note-event
rest-event tie-event beam-event tuplet-span-event)</code>, which means that
only the notes, rests, ties, beams and tuplets of the quoted voice will
appear in the <code>\quoteDuring</code> expression. In the following
example, a 16th rest is not quoted since <code>rest-event</code> is not in
<code>quotedEventTypes</code>.
</p>
<p>For a list of event types, consult the &ldquo;Music classes&rdquo; section of
the Internals Reference.
</p>

<pre class="verbatim">\addQuote quoteMe \quoteMe

original = \relative c'' {
  c8 d s2
  \once \override NoteColumn.ignore-collision = ##t
  es8 gis8
}

&lt;&lt;
  \new Staff \with { instrumentName = &quot;quoteMe&quot; }
  \quoteMe

  \new Staff \with { instrumentName = &quot;orig&quot; }
  \original

  \new Staff \with {
    instrumentName = &quot;orig+quote&quot;
    quotedEventTypes = #'(note-event articulation-event)
  }
  \relative c''
  &lt;&lt;
    \original
    \new Voice {
      s4
      \set fontSize = #-4
      \override Stem.length-fraction = #(magstep -4)
      \quoteDuring #&quot;quoteMe&quot; { \skip 2. }
    }
  &gt;&gt;
&gt;&gt;
</pre><p>
 <a href="8e/lily-f4ab9d55.ly">
  <img align="middle"
       border="0"
       src="8e/lily-f4ab9d55.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-brace-on-first-line-of-piano-score.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Removing-brace-on-first-line-of-piano-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-quoting-another-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Quoting another voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-removing-the-first-empty-line" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Removing the first empty line &gt; </a>]</td></tr></table>
<a name="staff-notation-removing-brace-on-first-line-of-piano-score"></a>
<h2 class="unnumberedsec">Removing brace on first line of piano score</h2>


<p>This snippet removes the first brace from a <code>PianoStaff</code> or a
<code>GrandStaff</code>. It may be useful when cutting and pasting the
engraved image into existing music.
</p>
<p>It uses <code>\alterBroken</code>.
</p>

<pre class="verbatim">someMusic =  {
  \once \override Staff.Clef.stencil = ##f
  \once \override Staff.TimeSignature.stencil = ##f
  \repeat unfold 3 c1 \break
  \repeat unfold 5 c1 \break
  \repeat unfold 5 c1
}

\score {
  \new PianoStaff
  &lt;&lt;
    \new Staff = &quot;right&quot; \relative c'' \someMusic
    \new Staff = &quot;left&quot; \relative c' { \clef F \someMusic }
  &gt;&gt;
  \layout {
    indent=75
    \context {
      \PianoStaff
      \alterBroken transparent #'(#t) SystemStartBrace
    }
  }
}
</pre><p>
 <a href="54/lily-65276f1a.ly">
  <img align="middle"
       border="0"
       src="54/lily-65276f1a.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-the-first-empty-line.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Removing-the-first-empty-line"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-removing-brace-on-first-line-of-piano-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Removing brace on first line of piano score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-setting-system-separators" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Setting system separators &gt; </a>]</td></tr></table>
<a name="staff-notation-removing-the-first-empty-line"></a>
<h2 class="unnumberedsec">Removing the first empty line</h2>


<p>The first empty staff can also be removed from the score by setting the
<code>VerticalAxisGroup</code> property <code>remove-first</code>. This can be done
globally inside the <code>\layout</code> block, or locally inside the
specific staff that should be removed.  In the latter case, you have to
specify the context (<code>Staff</code> applies only to the current staff) in
front of the property.
</p>
<p>The lower staff of the second staff group is not removed, because the
setting applies only to the specific staff inside of which it is
written.
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff \RemoveEmptyStaves
    % To use the setting globally, uncomment the following line:
    % \override VerticalAxisGroup.remove-first = ##t
  }
}
\new StaffGroup &lt;&lt;
  \new Staff \relative c' {
    e4 f g a \break
    c1
  }
  \new Staff {
    % To use the setting globally, comment this line,
    % uncomment the line in the \layout block above
    \override Staff.VerticalAxisGroup.remove-first = ##t
    R1 \break
    R
  }
&gt;&gt;
\new StaffGroup &lt;&lt;
  \new Staff \relative c' {
    e4 f g a \break
    c1
  }
  \new Staff {
    R1 \break
    R
  }
&gt;&gt;
</pre><p>
 <a href="74/lily-41b71de7.ly">
  <img align="middle"
       border="0"
       src="74/lily-41b71de7.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-system-separators.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Setting-system-separators"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-removing-the-first-empty-line" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Removing the first empty line&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-tick-bar-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Tick bar lines &gt; </a>]</td></tr></table>
<a name="staff-notation-setting-system-separators"></a>
<h2 class="unnumberedsec">Setting system separators</h2>


<p>System separators can be inserted between systems.  Any markup can be
used, but <code>\slashSeparator</code> has been provided as a sensible
default.
</p>

<pre class="verbatim">\paper {
  system-separator-markup = \slashSeparator
  line-width = 120
}

notes = \relative c' {
  c1 | c \break
  c1 | c \break
  c1 | c
}

\book {
  \score {
    \new GrandStaff &lt;&lt;
      \new Staff \notes
      \new Staff \notes
    &gt;&gt;
  }
}
</pre><p>
 <a href="d5/lily-9e0995da.ly">
  <img align="middle"
       border="0"
       src="d5/lily-9e0995da.png"
       alt="[image of music]">
 </a>
</p>




<a name="tick-bar-lines.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Tick-bar-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-setting-system-separators" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Setting system separators&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-time-signature-in-parentheses-_002d-method-3" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Time signature in parentheses - method 3 &gt; </a>]</td></tr></table>
<a name="staff-notation-tick-bar-lines"></a>
<h2 class="unnumberedsec">Tick bar lines</h2>


<p>&rsquo;Tick&rsquo; bar lines are often used in music where the bar line is used
only for coordination and is not meant to imply any rhythmic stress.
</p>

<pre class="verbatim">\relative c' {
  \set Score.defaultBarType = #&quot;'&quot;
  c4 d e f
  g4 f e d
  c4 d e f
  g4 f e d
  \bar &quot;|.&quot;
}
</pre><p>
 <a href="02/lily-d97b7f1c.ly">
  <img align="middle"
       border="0"
       src="02/lily-d97b7f1c.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-in-parentheses---method-3.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Time-signature-in-parentheses-_002d-method-3"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-tick-bar-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Tick bar lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-time-signature-in-parentheses" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Time signature in parentheses &gt; </a>]</td></tr></table>
<a name="staff-notation-time-signature-in-parentheses-_002d-method-3"></a>
<h2 class="unnumberedsec">Time signature in parentheses - method 3</h2>


<p>Another way to put the time signature in parenthesis
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.TimeSignature.stencil = #(lambda (grob)
    (parenthesize-stencil (ly:time-signature::print grob) 0.1 0.4 0.4 0.1 ))
  \time 2/4
  a4 b8 c
}
</pre><p>
 <a href="fb/lily-6736381b.ly">
  <img align="middle"
       border="0"
       src="fb/lily-6736381b.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-in-parentheses.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Time-signature-in-parentheses"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-time-signature-in-parentheses-_002d-method-3" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Time signature in parentheses - method 3&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-tweaking-clef-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Tweaking clef properties &gt; </a>]</td></tr></table>
<a name="staff-notation-time-signature-in-parentheses"></a>
<h2 class="unnumberedsec">Time signature in parentheses</h2>


<p>The time signature can be enclosed within parentheses.
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.TimeSignature.stencil = #(lambda (grob)
    (bracketify-stencil (ly:time-signature::print grob) Y 0.1 0.2 0.1))
  \time 2/4
  a4 b8 c
}
</pre><p>
 <a href="61/lily-a9d006ff.ly">
  <img align="middle"
       border="0"
       src="61/lily-a9d006ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="tweaking-clef-properties.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Tweaking-clef-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-time-signature-in-parentheses" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Time signature in parentheses&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-two-_005cpartcombine-pairs-on-one-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Two \partcombine pairs on one staff &gt; </a>]</td></tr></table>
<a name="staff-notation-tweaking-clef-properties"></a>
<h2 class="unnumberedsec">Tweaking clef properties</h2>


<p>Changing the Clef glyph, its position, or the ottavation does not
change the position of subsequent notes on the staff.  To get key
signatures on their correct staff lines <code>middleCClefPosition</code> must
also be specified, with positive or negative values moving <code>middle
C</code> up or down respectively, relative to the staff&rsquo;s center line.
</p>

<p>For example, <code>\clef &quot;treble_8&quot;</code> is equivalent to setting the
<code>clefGlyph</code>, <code>clefPosition</code> (the vertical position of the
clef itself on the staff), <code>middleCPosition</code> and
<code>clefTransposition</code>. Note that when any of these properties
(except <code>middleCPosition</code>) are changed a new clef symbol is
printed.
</p>

<p>The following examples show the possibilities when setting these
properties manually. On the first line, the manual changes preserve the
standard relative positioning of clefs and notes, whereas on the second
line, they do not.
</p>

<pre class="verbatim">{
  % The default treble clef
  \key f \major
  c'1
  % The standard bass clef
  \set Staff.clefGlyph = #&quot;clefs.F&quot;
  \set Staff.clefPosition = #2
  \set Staff.middleCPosition = #6
  \set Staff.middleCClefPosition = #6
  \key g \major
  c'1
  % The baritone clef
  \set Staff.clefGlyph = #&quot;clefs.C&quot;
  \set Staff.clefPosition = #4
  \set Staff.middleCPosition = #4
  \set Staff.middleCClefPosition = #4
  \key f \major
  c'1
  % The standard choral tenor clef
  \set Staff.clefGlyph = #&quot;clefs.G&quot;
  \set Staff.clefPosition = #-2
  \set Staff.clefTransposition = #-7
  \set Staff.middleCPosition = #1
  \set Staff.middleCClefPosition = #1
  \key f \major
  c'1
  % A non-standard clef
  \set Staff.clefPosition = #0
  \set Staff.clefTransposition = #0
  \set Staff.middleCPosition = #-4
  \set Staff.middleCClefPosition = #-4
  \key g \major
  c'1 \break

  % The following clef changes do not preserve
  % the normal relationship between notes, key signatures
  % and clefs:

  \set Staff.clefGlyph = #&quot;clefs.F&quot;
  \set Staff.clefPosition = #2
  c'1
  \set Staff.clefGlyph = #&quot;clefs.G&quot;
  c'1
  \set Staff.clefGlyph = #&quot;clefs.C&quot;
  c'1
  \set Staff.clefTransposition = #7
  c'1
  \set Staff.clefTransposition = #0
  \set Staff.clefPosition = #0
  c'1

  % Return to the normal clef:

  \set Staff.middleCPosition = #0
  c'1
}
</pre><p>
 <a href="ef/lily-e1ff70ae.ly">
  <img align="middle"
       border="0"
       src="ef/lily-e1ff70ae.png"
       alt="[image of music]">
 </a>
</p>




<a name="two--partcombine-pairs-on-one-staff.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Two-_005cpartcombine-pairs-on-one-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-tweaking-clef-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Tweaking clef properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-use-square-bracket-at-the-start-of-a-staff-group" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Use square bracket at the start of a staff group &gt; </a>]</td></tr></table>
<a name="staff-notation-two-_005cpartcombine-pairs-on-one-staff"></a>
<h2 class="unnumberedsec">Two \partcombine pairs on one staff</h2>


<p>The <code>\partcombine</code> function takes two music expressions each
containing a part, and distributes them among four <code>Voice</code>s named
&ldquo;two&rdquo; &ldquo;one&rdquo; &ldquo;solo&rdquo; and &ldquo;chords&rdquo; depending on when and how
the parts merged into a common voice.   The voices output from
<code>\partcombine</code> can have their layout properties adjusted in the
usual way.  Here we define extensions of <code>\partcombine</code> to make
it easier to put four voices on a staff.
</p>
<p>soprano = { d&rsquo;4 | cis&rsquo;  b  e&rsquo;  d&rsquo;8 cis&rsquo; | cis&rsquo;2 b } alto = { fis4 |
e8 fis gis ais b4 b | b ais fis2 } tenor = { a8 b | cis&rsquo; dis&rsquo; e&rsquo;4 b8
cis&rsquo; d&rsquo;4 | gis cis&rsquo; dis&rsquo;2 } bass = { fis8 gis | a4 gis g fis | eis
fis b,2 }
</p>
<p>\new Staff &lt;&lt;
  \key b\minor
  \clef alto
  \partial 4
  \transpose b b&rsquo;
  \partcombineUp \soprano \alto
  \partcombineDown \tenor \bass &gt;&gt;
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff
    \accepts &quot;VoiceBox&quot;
  }
  \context {
    \name &quot;VoiceBox&quot;
    \type &quot;Engraver_group&quot;
    \defaultchild &quot;Voice&quot;
    \accepts &quot;Voice&quot;
  }
}

partcombineUp =
#(define-music-function (partOne partTwo)
  (ly:music? ly:music?)
&quot;Take the music in @var{partOne} and @var{partTwo} and return
a @code{VoiceBox} named @q{Up} containing @code{Voice}s
that contain @var{partOne} and @var{partTwo} merged into one
voice where feasible.  This variant sets the default voicing
in the output to use upward stems.&quot;
#{
  \new VoiceBox = &quot;Up&quot; &lt;&lt;
    \context Voice = &quot;one&quot; { \voiceOne }
    \context Voice = &quot;two&quot; { \voiceThree }
    \context Voice = &quot;shared&quot; { \voiceOne }
    \context Voice = &quot;solo&quot; { \voiceOne }
    \partcombine #partOne #partTwo
  &gt;&gt;
#})

partcombineDown = #
(define-music-function (partOne partTwo)
  (ly:music? ly:music?)
&quot;Take the music in @var{partOne} and @var{partTwo} and return
a @code{VoiceBox} named @q{Down} containing @code{Voice}s
that contain @var{partOne} and @var{partTwo} merged into one
voice where feasible.  This variant sets the default voicing
in the output to use downward stems.&quot;
#{
  \new VoiceBox = &quot;Down&quot; &lt;&lt;
    \set VoiceBox.soloText = #&quot;Solo III&quot;
    \set VoiceBox.soloIIText = #&quot;Solo IV&quot;
    \context Voice =&quot;one&quot; { \voiceFour }
    \context Voice =&quot;two&quot; { \voiceTwo }
    \context Voice =&quot;shared&quot; { \voiceFour }
    \context Voice =&quot;solo&quot; { \voiceFour }
    \partcombine #partOne #partTwo
  &gt;&gt;
#})

soprano = { d'4 | cis'  b  e'  d'8 cis' | cis'2 b }
alto = { fis4 | e8 fis gis ais b4 b | b ais fis2 }
tenor = { a8 b | cis' dis' e'4 b8 cis' d'4 | gis cis' dis'2 }
bass = { fis8 gis | a4 gis g fis | eis fis b,2 }

\new Staff &lt;&lt;
  \key b\minor
  \clef alto
  \partial 4
  \transpose b b'
  \partcombineUp \soprano \alto
  \partcombineDown \tenor \bass
&gt;&gt;
</pre><p>
 <a href="a4/lily-9fca2d4d.ly">
  <img align="middle"
       border="0"
       src="a4/lily-9fca2d4d.png"
       alt="[image of music]">
 </a>
</p>




<a name="use-square-bracket-at-the-start-of-a-staff-group.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Use-square-bracket-at-the-start-of-a-staff-group"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-two-_005cpartcombine-pairs-on-one-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Two \partcombine pairs on one staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-using-autochange-with-more-than-one-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Using autochange with more than one voice &gt; </a>]</td></tr></table>
<a name="staff-notation-use-square-bracket-at-the-start-of-a-staff-group"></a>
<h2 class="unnumberedsec">Use square bracket at the start of a staff group</h2>


<p>The system start delimiter <code>SystemStartSquare</code> can be used by
setting it explicitly in a <code>StaffGroup</code> or <code>ChoirStaff</code>
context.
</p>

<pre class="verbatim">\score {
  \new StaffGroup { &lt;&lt;
  \set StaffGroup.systemStartDelimiter = #'SystemStartSquare
    \new Staff { c'4 d' e' f' }
    \new Staff { c'4 d' e' f' }
  &gt;&gt; }
}
</pre><p>
 <a href="7d/lily-5a3fd2a9.ly">
  <img align="middle"
       border="0"
       src="7d/lily-5a3fd2a9.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-autochange-with-more-than-one-voice.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Using-autochange-with-more-than-one-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-use-square-bracket-at-the-start-of-a-staff-group" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Use square bracket at the start of a staff group&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-using-marklines-in-a-frenched-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Using marklines in a Frenched score &gt; </a>]</td></tr></table>
<a name="staff-notation-using-autochange-with-more-than-one-voice"></a>
<h2 class="unnumberedsec">Using autochange with more than one voice</h2>


<p>Using <code>autochange</code> with more than one voice.
</p>

<pre class="verbatim">\score
{
  \new PianoStaff
  &lt;&lt;
    \new Staff = &quot;up&quot; {
      &lt;&lt;
        \set Timing.beamExceptions = #'()
        \set Timing.beatStructure = #'(4)
        \new Voice {
          \voiceOne
          \autochange
          \relative c' {
            g8 a b c d e f g
            g,8 a b c d e f g
          }
        }

        \new Voice {
          \voiceTwo
          \autochange
          \relative c' {
            g8 a b c d e f g
            g,,8 a b c d e f g
          }
        }
      &gt;&gt;
    }

    \new Staff = &quot;down&quot; {
      \clef bass
    }
  &gt;&gt;
}
</pre><p>
 <a href="fc/lily-64bc4ffa.ly">
  <img align="middle"
       border="0"
       src="fc/lily-64bc4ffa.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-marklines-in-a-frenched-score.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Using-marklines-in-a-Frenched-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-using-autochange-with-more-than-one-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Using autochange with more than one voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-vertical-aligned-staffgroups-without-connecting-systemstartbar" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Vertical aligned StaffGroups without connecting SystemStartBar &gt; </a>]</td></tr></table>
<a name="staff-notation-using-marklines-in-a-frenched-score"></a>
<h2 class="unnumberedsec">Using marklines in a Frenched score</h2>


<p>Using <code>MarkLine</code> contexts (such as in
<a href="http://lsr.di.unimi.it/LSR/Item?id=1010">LSR1010</a>) in a
Frenched score can be problematic if all the staves between two
<code>MarkLine</code>s are removed in one system. The
<code>Keep_alive_together_engraver</code> can be used within each
<code>StaffGroup</code> to keep the <code>MarkLine</code> alive only as long
as the other staves in the group stay alive.
</p>
<pre class="verbatim">bars = {
  \tempo &quot;Allegro&quot; 4=120
  s1*2
  \repeat unfold 5 { \mark \default s1*2 }
  \bar &quot;||&quot;
  \tempo &quot;Adagio&quot; 4=40
  s1*2
  \repeat unfold 8 { \mark \default s1*2 }
  \bar &quot;|.&quot;
}
winds = \repeat unfold 120 { c''4 }
trumpet = { \repeat unfold 8 g'2 R1*16 \repeat unfold 4 g'2 R1*8 }
trombone = { \repeat unfold 4 c'1 R1*8 d'1 R1*17 }
strings = \repeat unfold 240 { c''8 }

#(set-global-staff-size 16)
\paper {
  systems-per-page = 5
  ragged-last-bottom = ##f
}

\layout {
  indent = 15\mm
  short-indent = 5\mm
  \context {
    \name MarkLine
    \type Engraver_group
    \consists Output_property_engraver
    \consists Axis_group_engraver
    \consists Mark_engraver
    \consists Metronome_mark_engraver
    \override VerticalAxisGroup.remove-empty = ##t
    \override VerticalAxisGroup.remove-layer = #'any
    \override VerticalAxisGroup.staff-affinity = #DOWN
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing.basic-distance = 1
    keepAliveInterfaces = #'()
  }
  \context {
    \Staff
    \override VerticalAxisGroup.remove-empty = ##t
    \override VerticalAxisGroup.remove-layer = ##f
  }
  \context {
    \StaffGroup
    \accepts MarkLine
    \consists Keep_alive_together_engraver
  }
  \context {
    \Score
    \remove Mark_engraver
    \remove Metronome_mark_engraver
  }
}

\score {
  &lt;&lt;
    \new StaffGroup = &quot;winds&quot; \with {
      instrumentName = &quot;Winds&quot;
      shortInstrumentName = &quot;Winds&quot;
    } &lt;&lt;
      \new MarkLine \bars
      \new Staff \winds
    &gt;&gt;
    \new StaffGroup = &quot;brass&quot; &lt;&lt;
      \new MarkLine \bars
      \new Staff = &quot;trumpet&quot; \with {
        instrumentName = &quot;Trumpet&quot;
        shortInstrumentName = &quot;Tpt&quot;
      } \trumpet
      \new Staff = &quot;trombone&quot; \with {
        instrumentName = &quot;Trombone&quot;
        shortInstrumentName = &quot;Tbn&quot;
      } \trombone
    &gt;&gt;
    \new StaffGroup = &quot;strings&quot; \with {
      instrumentName = &quot;Strings&quot;
      shortInstrumentName = &quot;Strings&quot;
    } &lt;&lt;
      \new MarkLine \bars
      \new Staff = &quot;strings&quot; { \strings }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="0c/lily-9a658998.ly">
  <img align="middle"
       border="0"
       src="0c/lily-9a658998.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertical-aligned-staffgroups-without-connecting-systemstartbar.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Vertical-aligned-StaffGroups-without-connecting-SystemStartBar"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-using-marklines-in-a-frenched-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Using marklines in a Frenched score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-volta-below-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Volta below chords &gt; </a>]</td></tr></table>
<a name="staff-notation-vertical-aligned-staffgroups-without-connecting-systemstartbar"></a>
<h2 class="unnumberedsec">Vertical aligned StaffGroups without connecting SystemStartBar</h2>


<p>This snippet shows how to achieve vertically aligned StaffGroups with a
SystemStartBar for each StaffGroup, but without connecting them.
</p>

<pre class="verbatim">% by Thomas Morley

#(set-global-staff-size 18)

\paper {
  indent = 0
  ragged-right = ##f
  print-all-headers = ##t
}

\layout {
  \context {
    \Staff
    \consists &quot;Mark_engraver&quot;
    \override RehearsalMark.self-alignment-X = #LEFT
  }
  \context {
    \StaffGroup
    systemStartDelimiterHierarchy =
      #'(SystemStartBrace (SystemStartBracket a b))
  }
  \context {
    \Score
    \override SystemStartBrace.style = #'bar-line
    \omit SystemStartBar
    \override SystemStartBrace.padding = #-0.1
    \override SystemStartBrace.thickness = #1.6
    \remove &quot;Mark_engraver&quot;
    \override StaffGrouper.staffgroup-staff-spacing.basic-distance = #15
  }
}

%%%% EXAMPLE

txt =
\lyricmode {
  Wer4 nur den lie -- ben Gott läßt wal2 -- ten4
  und4 hof -- fet auf ihn al -- le Zeit2.
}

% First StaffGroup &quot;exercise&quot;

eI =
\relative c' {
        \mark \markup {
                \bold Teacher:
                This is a simple setting of the choral. Please improve it.
                }
        \key a \minor
        \time 4/4
        \voiceOne

        \partial 4
        e4
        a b c b
        a b gis2
        e4\fermata g! g f
        e a a gis
        a2.\fermata
        \bar &quot;:|.&quot;
}

eII =
\relative c' {
        \key a \minor
        \time 4/4
        \voiceTwo
        \partial 4
        c4
        e e e gis
        a f e2
        b4 b d d
        c c d d
        c2.
        \bar &quot;:|.&quot;
}

eIII =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceOne

        \partial 4
        a4
        c b a b
        c d b2
        gis4 g g b
        c a f e
        e2.
}

eIV =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceTwo

        \partial 4
        a,4
        a' gis a e
        a, d e2
        e,4\fermata e' b g
        c f d e
        a,2.\fermata
        \bar &quot;:|.&quot;
}

exercise =
\new StaffGroup = &quot;exercise&quot;
&lt;&lt;

  \new Staff
    &lt;&lt;
      \new Voice \eI
      \new Voice \eII
    &gt;&gt;

  \new Lyrics \txt

  \new Staff
    &lt;&lt;
      \new Voice \eIII
      \new Voice \eIV
    &gt;&gt;
&gt;&gt;

% Second StaffGRoup &quot;simple Bach&quot;

sbI =
\relative c' {
        \mark \markup { \bold&quot; Pupil:&quot; Here's my version! }
        \key a \minor
        \time 4/4
        \voiceOne

        \partial 4
        e4
        a b c b
        a b gis2
        e4\fermata g! g f
        e a a gis
        a2.\fermata
        \bar &quot;:|.&quot;
}

sbII =
\relative c' {
        \key a \minor
        \time 4/4
        \voiceTwo
        \partial 4
        c8 d
        e4 e e8 f g4
        f f e2
        b4 b8 c d4 d
        e8 d c4 b8 c d4
        c2.
        \bar &quot;:|.&quot;
}

sbIII =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceOne

        \partial 4
        a8 b
        c4 b a b8 c
        d4 d8 c b2
        gis4 g g8 a b4
        b a8 g f4 e
        e2.
}

sbIV =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceTwo

        \partial 4
        a,4
        a' gis a e
        f8 e d4 e2
        e,4\fermata e' b a8 g
        c4 f8 e d4 e
        a,2.\fermata
        \bar &quot;:|.&quot;
}

simpleBach =
\new StaffGroup = &quot;simple Bach&quot;
&lt;&lt;

  \new Staff
    &lt;&lt;
      \new Voice \sbI
      \new Voice \sbII
    &gt;&gt;

  \new Lyrics \txt

  \new Staff
    &lt;&lt;
      \new Voice \sbIII
      \new Voice \sbIV
    &gt;&gt;
&gt;&gt;

% Third StaffGroup &quot;chromatic Bach&quot;

cbI =
\relative c' {
        \mark \markup {
          \bold &quot;Teacher:&quot;
          \column {
            &quot;Well, you simply copied and transposed a version of J.S.Bach.&quot;
            &quot;Do you know this one?&quot;
          }
        }
        \key a \minor
        \time 4/4
        \voiceOne

        \partial 4
        e4
        a b c b
        a b gis4. fis8
        e4\fermata g! g f
        e a a8 b gis4
        a2.\fermata
        \bar &quot;:|.&quot;
}

cbII =
\relative c' {
        \key a \minor
        \time 4/4
        \voiceTwo
        \partial 4
        c8 d
        e4 e e8 fis gis4
        a8 g! f!4 e2
        b4 e e d
        d8[ cis] d dis e fis e4
        e2.
        \bar &quot;:|.&quot;
}

cbIII =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceOne

        \partial 4
        a8 b
        c[ b] a gis8 a4 d,
        e8[ e'] d c b4. a8
        gis4 b c d8 c
        b[ a] a b c b b c16 d
        c2.
}

cbIV =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceTwo

        \partial 4
        a4
        c, e a, b
        c d e2
        e4\fermata e a b8 c
        gis[ g] fis f e dis e4
        a,2.\fermata
        \bar &quot;:|.&quot;
}

chromaticBach =
\new StaffGroup = &quot;chromatic Bach&quot;
&lt;&lt;

  \new Staff
    &lt;&lt;
      \new Voice \cbI
      \new Voice \cbII
    &gt;&gt;

  \new Lyrics \txt

  \new Staff
    &lt;&lt;
      \new Voice \cbIII
      \new Voice \cbIV
    &gt;&gt;
&gt;&gt;


% Score

\score {
        &lt;&lt;
        \exercise
        \simpleBach
        \chromaticBach
        &gt;&gt;
        \header {
                title = \markup
                           \column {
                             \combine \null \vspace #1
                             &quot;Exercise: Improve the given choral&quot;
                             &quot; &quot;
                            }
        }
        \layout {
                \context {
                        \Lyrics
                        \override LyricText.X-offset = #-1
                }
        }
}
</pre><p>
 <a href="81/lily-bdc2a9b0.ly">
  <img align="middle"
       border="0"
       src="81/lily-bdc2a9b0.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-below-chords.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Volta-below-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-vertical-aligned-staffgroups-without-connecting-systemstartbar" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Vertical aligned StaffGroups without connecting SystemStartBar&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#staff-notation-volta-multi-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff notation: Volta multi staff &gt; </a>]</td></tr></table>
<a name="staff-notation-volta-below-chords"></a>
<h2 class="unnumberedsec">Volta below chords</h2>


<p>By adding the <code>Volta_engraver</code> to the relevant staff, volte can be
put under chords.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \chords {
      c1
      c1
    }
    \new Staff \with {
      \consists &quot;Volta_engraver&quot;
    }
    {
      \repeat volta 2 { c'1 }
      \alternative { c' }
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Volta_engraver&quot;
    }
  }
}
</pre><p>
 <a href="62/lily-5c52ad22.ly">
  <img align="middle"
       border="0"
       src="62/lily-5c52ad22.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-multi-staff.ly"></a>

<hr size="6">
<a name="Staff-notation_003a-Volta-multi-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#editorial-annotations" title="Next chapter">&nbsp;Editorial annotations &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-volta-below-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Volta below chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations &gt; </a>]</td></tr></table>
<a name="staff-notation-volta-multi-staff"></a>
<h2 class="unnumberedsec">Volta multi staff</h2>


<p>By adding the <code>Volta_engraver</code> to the relevant staff, volte can be
put over staves other than the topmost one in a score.
</p>

<pre class="verbatim">voltaMusic = \relative c'' {
  \repeat volta 2 {
    c1
  }
  \alternative {
    d1
    e1
  }
}

&lt;&lt;
  \new StaffGroup &lt;&lt;
    \new Staff \voltaMusic
    \new Staff \voltaMusic
  &gt;&gt;
  \new StaffGroup &lt;&lt;
    \new Staff \with { \consists &quot;Volta_engraver&quot; }
      \voltaMusic
    \new Staff \voltaMusic
  &gt;&gt;
&gt;&gt;
</pre><p>
 <a href="37/lily-6cc24677.ly">
  <img align="middle"
       border="0"
       src="37/lily-6cc24677.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Editorial-annotations"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#staff-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#staff-notation-volta-multi-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff notation: Volta multi staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-adding-fingerings-to-a-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Adding fingerings to a score &gt; </a>]</td></tr></table>
<a name="editorial-annotations"></a>
<h1 class="unnumbered">Editorial annotations</h1>

<a name="index-Editorial-annotations"></a>
<p><a href="notation-big-page.html#editorial-annotations">Editorial annotations</a>
</p>

<a name="adding-fingerings-to-a-score.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Adding-fingerings-to-a-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-adding-links-to-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Adding links to objects &gt; </a>]</td></tr></table>
<a name="editorial-annotations-adding-fingerings-to-a-score"></a>
<h2 class="unnumberedsec">Adding fingerings to a score</h2>


<p>Fingering instructions can be entered using a simple syntax.
</p>

<pre class="verbatim">\relative c'' {
  c4-1 d-2 f-4 e-3
}
</pre><p>
 <a href="d5/lily-524b17d8.ly">
  <img align="middle"
       border="0"
       src="d5/lily-524b17d8.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-links-to-objects.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Adding-links-to-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-adding-fingerings-to-a-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Adding fingerings to a score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-adding-markups-in-a-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Adding markups in a tablature &gt; </a>]</td></tr></table>
<a name="editorial-annotations-adding-links-to-objects"></a>
<h2 class="unnumberedsec">Adding links to objects</h2>


<p>To add a link to a grob-stencil you could use <code>add-link</code> as
defined here. Works with <code>\override</code> and <code>\tweak</code>.
Drawback: <code>point-and-click</code> will be disturbed for the linked grobs.
</p>
<p>Limitation: Works for PDF only.
</p>
<p>The linked objects are colored with a separate command.
</p>

<pre class="verbatim">#(define (add-link url-strg)
  (lambda (grob)
    (let* ((stil (ly:grob-property grob 'stencil)))
      (if (ly:stencil? stil)
        (begin
          (let* (
             (x-ext (ly:stencil-extent stil X))
             (y-ext (ly:stencil-extent stil Y))
             (url-expr (list 'url-link url-strg `(quote ,x-ext) `(quote ,y-ext)))
             (new-stil (ly:stencil-add
                 (ly:make-stencil url-expr x-ext y-ext) stil)))
          (ly:grob-set-property! grob 'stencil new-stil)))
        #f))))

%%%% test

urlI =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/writing-pitches&quot;

urlII =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/rhythms&quot;

urlIII =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/note-heads&quot;

urlIV =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/beams&quot;

urlV =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/note-head-styles&quot;

\relative c' {
  \key cis \minor

  \once \override Staff.Clef.color = #green
  \once \override Staff.Clef.after-line-breaking =
    #(add-link urlI)

  \once \override Staff.TimeSignature.color = #green
  \once \override Staff.TimeSignature.after-line-breaking =
    #(add-link urlII)

  \once \override NoteHead.color = #green
  \once \override NoteHead.after-line-breaking =
    #(add-link urlIII)

  cis'1
  \once \override Beam.color = #green
  \once \override Beam.after-line-breaking =
    #(add-link urlIV)
  cis8 dis e fis gis2
  &lt;gis,
   % With 2.17.9 you could use the command below to address the Accidental.
   % \tweak Accidental.before-line-breaking #(add-link url)
   \tweak color #green
   \tweak after-line-breaking #(add-link urlV)
   \tweak style #'harmonic
   bis
   dis
   fis
  &gt;1
  &lt;cis, cis' e&gt;
}
</pre><p>
 <a href="9b/lily-294ea220.ly">
  <img align="middle"
       border="0"
       src="9b/lily-294ea220.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-markups-in-a-tablature.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Adding-markups-in-a-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-adding-links-to-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Adding links to objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-allowing-fingerings-to-be-printed-inside-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Allowing fingerings to be printed inside the staff &gt; </a>]</td></tr></table>
<a name="editorial-annotations-adding-markups-in-a-tablature"></a>
<h2 class="unnumberedsec">Adding markups in a tablature</h2>


<p>By default markups does not show in a tablature. To make them appear,
simply use the command <code>\revert TabStaff.TextScript.stencil</code>
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=919
% by P.P.Schneider on June 2014

high  = { r4 r8 &lt;g c'&gt; q r8 r4 }

low = { c4 r4 c8 r8 g,8 b, }

pulse = { s8^&quot;1&quot; s^&quot;&amp;&quot; s^&quot;2&quot; s^&quot;&amp;&quot; s^&quot;3&quot; s^&quot;&amp;&quot; s^&quot;4&quot; s^&quot;&amp;&quot; }

\score {
 \new TabStaff {
   \repeat unfold 2 &lt;&lt; \high \\ \low \\ \pulse &gt;&gt;
  }
  \layout {
    \context {
      \TabStaff
      \clef moderntab
      \revert TextScript.stencil
      \override TextScript.font-series = #'bold
      \override TextScript.font-size = #-2
      \override TextScript.color = #red

    }
    \context {
      \Score
      proportionalNotationDuration = #(ly:make-moment 1/8)
    }
  }
}
</pre><p>
 <a href="28/lily-a4ac69a4.ly">
  <img align="middle"
       border="0"
       src="28/lily-a4ac69a4.png"
       alt="[image of music]">
 </a>
</p>




<a name="allowing-fingerings-to-be-printed-inside-the-staff.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Allowing-fingerings-to-be-printed-inside-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-adding-markups-in-a-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Adding markups in a tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-alternative-bar-numbering" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Alternative bar numbering &gt; </a>]</td></tr></table>
<a name="editorial-annotations-allowing-fingerings-to-be-printed-inside-the-staff"></a>
<h2 class="unnumberedsec">Allowing fingerings to be printed inside the staff</h2>


<p>By default, vertically oriented fingerings are positioned outside the
staff.  However, this behavior can be canceled. Note: you must use a
chord construct &lt;&gt;, even if it is only a single note.
</p>

<pre class="verbatim">\relative c' {
  &lt;c-1 e-2 g-3 b-5&gt;2
  \override Fingering.staff-padding = #'()
  &lt;c-1 e-2 g-3 b-5&gt;4 &lt;g'-0&gt;
}
</pre><p>
 <a href="15/lily-012deba9.ly">
  <img align="middle"
       border="0"
       src="15/lily-012deba9.png"
       alt="[image of music]">
 </a>
</p>




<a name="alternative-bar-numbering.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Alternative-bar-numbering"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-allowing-fingerings-to-be-printed-inside-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Allowing fingerings to be printed inside the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-analysis-brackets-above-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Analysis brackets above the staff &gt; </a>]</td></tr></table>
<a name="editorial-annotations-alternative-bar-numbering"></a>
<h2 class="unnumberedsec">Alternative bar numbering</h2>


<p>Two alternative methods for bar numbering can be set, especially for
when using repeated music.
</p>

<pre class="verbatim">\relative c'{
  \set Score.alternativeNumberingStyle = #'numbers
  \repeat volta 3 { c4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1 \break
  \set Score.alternativeNumberingStyle = #'numbers-with-letters
  \repeat volta 3 { c,4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1
}
</pre><p>
 <a href="6c/lily-d3871fdb.ly">
  <img align="middle"
       border="0"
       src="6c/lily-d3871fdb.png"
       alt="[image of music]">
 </a>
</p>




<a name="analysis-brackets-above-the-staff.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Analysis-brackets-above-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-alternative-bar-numbering" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Alternative bar numbering&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-analysis-brackets-with-labels" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Analysis brackets with labels &gt; </a>]</td></tr></table>
<a name="editorial-annotations-analysis-brackets-above-the-staff"></a>
<h2 class="unnumberedsec">Analysis brackets above the staff</h2>


<p>Simple horizontal analysis brackets are added below the staff by
default. The following example shows a way to place them above the
staff instead.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Horizontal_bracket_engraver&quot;
  }
}

\relative c'' {
  \once \override HorizontalBracket.direction = #UP
  c2\startGroup
  d2\stopGroup
}
</pre><p>
 <a href="e2/lily-cd751e55.ly">
  <img align="middle"
       border="0"
       src="e2/lily-cd751e55.png"
       alt="[image of music]">
 </a>
</p>




<a name="analysis-brackets-with-labels.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Analysis-brackets-with-labels"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-analysis-brackets-above-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Analysis brackets above the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-applying-note-head-styles-depending-on-the-step-of-the-scale" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Applying note head styles depending on the step of the scale &gt; </a>]</td></tr></table>
<a name="editorial-annotations-analysis-brackets-with-labels"></a>
<h2 class="unnumberedsec">Analysis brackets with labels</h2>


<p>Text may be added to analysis brackets through the <code>text</code> property
of the <code>HorizontalBracketText</code> grob.  Adding different texts to
brackets beginning at the same time requires the <code>\tweak</code> command.
Bracket text will be parenthesized after a line break.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Horizontal_bracket_engraver&quot;
    \override HorizontalBracket.direction = #UP
  }
}

{
  \once\override HorizontalBracketText.text = &quot;a&quot;
  c''\startGroup d''\stopGroup
  \once\override HorizontalBracketText.text = &quot;a'&quot;
  e''\startGroup d''\stopGroup
  c''
  -\tweak HorizontalBracketText.text \markup \bold \huge &quot;b&quot; \startGroup
  -\tweak HorizontalBracketText.text &quot;a&quot; \startGroup
  d''\stopGroup
  e''-\tweak HorizontalBracketText.text &quot;a'&quot; \startGroup
  d''\stopGroup\stopGroup
  c''-\tweak HorizontalBracketText.text foo \startGroup d'' e'' f''
  \break
  g'' a'' b'' c'''\stopGroup
}
</pre><p>
 <a href="d4/lily-9aa2cd07.ly">
  <img align="middle"
       border="0"
       src="d4/lily-9aa2cd07.png"
       alt="[image of music]">
 </a>
</p>




<a name="applying-note-head-styles-depending-on-the-step-of-the-scale.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Applying-note-head-styles-depending-on-the-step-of-the-scale"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-analysis-brackets-with-labels" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Analysis brackets with labels&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-avoiding-collisions-with-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Avoiding collisions with chord fingerings &gt; </a>]</td></tr></table>
<a name="editorial-annotations-applying-note-head-styles-depending-on-the-step-of-the-scale"></a>
<h2 class="unnumberedsec">Applying note head styles depending on the step of the scale</h2>


<p>The <code>shapeNoteStyles</code> property can be used to define various note
head styles for each step of the scale (as set by the key signature or
the <code>tonic</code> property). This property requires a set of symbols,
which can be purely arbitrary (geometrical expressions such as
<code>triangle</code>, <code>cross</code>, and <code>xcircle</code> are allowed) or based
on old American engraving tradition (some latin note names are also
allowed).
</p>
<p>That said, to imitate old American song books, there are several
predefined note head styles available through shortcut commands such as
<code>\aikenHeads</code> or <code>\sacredHarpHeads</code>.
</p>
<p>This example shows different ways to obtain shape note heads, and
demonstrates the ability to transpose a melody without losing the
correspondence between harmonic functions and note head styles.
</p>

<pre class="verbatim">fragment = {
  \key c \major
  c2 d
  e2 f
  g2 a
  b2 c
}

\new Staff {
  \transpose c d
  \relative c' {
    \set shapeNoteStyles = ##(do re mi fa
                               #f la ti)
    \fragment
  }

  \break

  \relative c' {
    \set shapeNoteStyles = ##(cross triangle fa #f
                               mensural xcircle diamond)
    \fragment
  }
}
</pre><p>
 <a href="2b/lily-b5daf06f.ly">
  <img align="middle"
       border="0"
       src="2b/lily-b5daf06f.png"
       alt="[image of music]">
 </a>
</p>




<a name="avoiding-collisions-with-chord-fingerings.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Avoiding-collisions-with-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-applying-note-head-styles-depending-on-the-step-of-the-scale" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Applying note head styles depending on the step of the scale&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-blanking-staff-lines-using-the-_005cwhiteout-command" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Blanking staff lines using the \whiteout command &gt; </a>]</td></tr></table>
<a name="editorial-annotations-avoiding-collisions-with-chord-fingerings"></a>
<h2 class="unnumberedsec">Avoiding collisions with chord fingerings</h2>


<p>Fingerings and string numbers applied to individual notes will
automatically avoid beams and stems, but this is not true by default
for fingerings and string numbers applied to the individual notes of
chords.  The following example shows how this default behavior can be
overridden.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(up)
  \set stringNumberOrientations = #'(up)
  \set strokeFingerOrientations = #'(up)

  % Default behavior
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
  &lt;f c'-\rightHandFinger #2 &gt;8

  % No tweak needed
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
   % Corrected to avoid collisions
  \override StrokeFinger.add-stem-support = ##t
  &lt;f c'-\rightHandFinger #2 &gt;8
}
</pre><p>
 <a href="6d/lily-465697fc.ly">
  <img align="middle"
       border="0"
       src="6d/lily-465697fc.png"
       alt="[image of music]">
 </a>
</p>




<a name="blanking-staff-lines-using-the--whiteout-command.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Blanking-staff-lines-using-the-_005cwhiteout-command"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-avoiding-collisions-with-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Avoiding collisions with chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-changing-a-single-note_0027s-size-in-a-chord" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Changing a single note's size in a chord &gt; </a>]</td></tr></table>
<a name="editorial-annotations-blanking-staff-lines-using-the-_005cwhiteout-command"></a>
<h2 class="unnumberedsec">Blanking staff lines using the \whiteout command</h2>


<p>The <code>\whiteout</code> command underlays a markup with a white box.
Since staff lines are in a lower layer than most other grobs, this
white box will not overlap any other grob.
</p>

<pre class="verbatim">\layout {
  ragged-right = ##f
}

\relative c' {
  \override TextScript.extra-offset = #'(2 . 4)
  c2-\markup { \whiteout \pad-markup #0.5 &quot;middle C&quot; } c
}
</pre><p>
 <a href="6a/lily-8543563a.ly">
  <img align="middle"
       border="0"
       src="6a/lily-8543563a.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-a-single-notes-size-in-a-chord.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Changing-a-single-note_0027s-size-in-a-chord"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-blanking-staff-lines-using-the-_005cwhiteout-command" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Blanking staff lines using the \whiteout command&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Changing the appearance of a slur from solid to dotted or dashed &gt; </a>]</td></tr></table>
<a name="editorial-annotations-changing-a-single-note_0027s-size-in-a-chord"></a>
<h2 class="unnumberedsec">Changing a single note&rsquo;s size in a chord</h2>


<p>Individual note heads in a chord can be modified with the
<code>\tweak</code> command inside a chord, by altering the <code>font-size</code>
property.
</p>

<p>Inside the chord (within the brackets <code>&lt; &gt;</code>), before the note to
be altered, place the <code>\tweak</code> command, followed by
<code>#'font-size</code> and define the proper size like <code>#-2</code> (a tiny
note head).
</p>



<pre class="verbatim">\relative c' {
  &lt;\tweak font-size #+2 c e g c
   \tweak font-size #-2 e&gt;1
   ^\markup { A tiny e }_\markup { A big c }
}
</pre><p>
 <a href="ad/lily-137d8831.ly">
  <img align="middle"
       border="0"
       src="ad/lily-137d8831.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-changing-a-single-note_0027s-size-in-a-chord" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Changing a single note's size in a chord&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-coloring-notes-depending-on-their-pitch" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Coloring notes depending on their pitch &gt; </a>]</td></tr></table>
<a name="editorial-annotations-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed"></a>
<h2 class="unnumberedsec">Changing the appearance of a slur from solid to dotted or dashed</h2>


<p>The appearance of slurs may be changed from solid to dotted or dashed.
</p>

<pre class="verbatim">\relative c' {
  c4( d e c)
  \slurDotted
  c4( d e c)
  \slurSolid
  c4( d e c)
  \slurDashed
  c4( d e c)
  \slurSolid
  c4( d e c)
}
</pre><p>
 <a href="25/lily-fbc81908.ly">
  <img align="middle"
       border="0"
       src="25/lily-fbc81908.png"
       alt="[image of music]">
 </a>
</p>




<a name="coloring-notes-depending-on-their-pitch.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Coloring-notes-depending-on-their-pitch"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Changing the appearance of a slur from solid to dotted or dashed&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-controlling-the-placement-of-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Controlling the placement of chord fingerings &gt; </a>]</td></tr></table>
<a name="editorial-annotations-coloring-notes-depending-on-their-pitch"></a>
<h2 class="unnumberedsec">Coloring notes depending on their pitch</h2>


<p>It is possible to color note heads depending on their pitch and/or
their names: the function used in this example even makes it possible
to distinguish enharmonics.
</p>

<pre class="verbatim">%Association list of pitches to colors.
#(define color-mapping
   (list
    (cons (ly:make-pitch 0 0 NATURAL) (x11-color 'red))
    (cons (ly:make-pitch 0 0 SHARP) (x11-color 'green))
    (cons (ly:make-pitch 0 1 FLAT) (x11-color 'green))
    (cons (ly:make-pitch 0 2 NATURAL) (x11-color 'red))
    (cons (ly:make-pitch 0 2 SHARP) (x11-color 'green))
    (cons (ly:make-pitch 0 3 FLAT) (x11-color 'red))
    (cons (ly:make-pitch 0 3 NATURAL) (x11-color 'green))
    (cons (ly:make-pitch 0 4 SHARP) (x11-color 'red))
    (cons (ly:make-pitch 0 5 NATURAL) (x11-color 'green))
    (cons (ly:make-pitch 0 5 FLAT) (x11-color 'red))
    (cons (ly:make-pitch 0 6 SHARP) (x11-color 'red))
    (cons (ly:make-pitch 0 1 NATURAL) (x11-color 'blue))
    (cons (ly:make-pitch 0 3 SHARP) (x11-color 'blue))
    (cons (ly:make-pitch 0 4 FLAT) (x11-color 'blue))
    (cons (ly:make-pitch 0 5 SHARP) (x11-color 'blue))
    (cons (ly:make-pitch 0 6 FLAT) (x11-color 'blue))))

%Compare pitch and alteration (not octave).
#(define (pitch-equals? p1 p2)
   (and
    (= (ly:pitch-alteration p1) (ly:pitch-alteration p2))
    (= (ly:pitch-notename p1) (ly:pitch-notename p2))))

#(define (pitch-to-color pitch)
   (let ((color (assoc pitch color-mapping pitch-equals?)))
     (if color
         (cdr color))))

#(define (color-notehead grob)
   (pitch-to-color
    (ly:event-property (event-cause grob) 'pitch)))

\score {
  \new Staff \relative c' {
    \override NoteHead.color = #color-notehead
    c8 b d dis ees f g aes
  }
}
</pre><p>
 <a href="91/lily-db1eeb1b.ly">
  <img align="middle"
       border="0"
       src="91/lily-db1eeb1b.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-the-placement-of-chord-fingerings.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Controlling-the-placement-of-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-coloring-notes-depending-on-their-pitch" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Coloring notes depending on their pitch&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-creating-a-delayed-turn" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Creating a delayed turn &gt; </a>]</td></tr></table>
<a name="editorial-annotations-controlling-the-placement-of-chord-fingerings"></a>
<h2 class="unnumberedsec">Controlling the placement of chord fingerings</h2>


<p>The placement of fingering numbers can be controlled precisely. For
fingering orientation to apply, you must use a chord construct &lt;&gt; even
if it is a single note.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(left)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down right up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(left)
  &lt;c-1&gt;2
  \set fingeringOrientations = #'(down)
  &lt;e-3&gt;2
}
</pre><p>
 <a href="7a/lily-cfc0f100.ly">
  <img align="middle"
       border="0"
       src="7a/lily-cfc0f100.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-a-delayed-turn.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Creating-a-delayed-turn"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-controlling-the-placement-of-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Controlling the placement of chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-creating-blank-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Creating blank staves &gt; </a>]</td></tr></table>
<a name="editorial-annotations-creating-a-delayed-turn"></a>
<h2 class="unnumberedsec">Creating a delayed turn</h2>


<p>Creating a delayed turn, where the lower note of the turn uses the
accidental, requires several overrides.  The
<code>outside-staff-priority</code> property must be set to <code>#f</code>, as
otherwise this would take precedence over the <code>avoid-slur
property</code>.  Changing the fractions <code>2/3</code> and <code>1/3</code> adjusts
the horizontal position.
</p>

<pre class="verbatim">\relative c'' {
  c2*2/3 ( s2*1/3\turn d4) r
  &lt;&lt;
    { c4.( d8) }
    { s4 s\turn }
  &gt;&gt;
  \transpose c d \relative c'' &lt;&lt;
    { c4.( d8) }
    {
      s4
      \once \set suggestAccidentals = ##t
      \once \override AccidentalSuggestion.outside-staff-priority = ##f
      \once \override AccidentalSuggestion.avoid-slur = #'inside
      \once \override AccidentalSuggestion.font-size = -3
      \once \override AccidentalSuggestion.script-priority = -1
      \single \hideNotes
      b8-\turn \noBeam
      s8
    }
  &gt;&gt;
}
</pre><p>
 <a href="9e/lily-e623a356.ly">
  <img align="middle"
       border="0"
       src="9e/lily-e623a356.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-blank-staves.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Creating-blank-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-creating-a-delayed-turn" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Creating a delayed turn&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-creating-double_002ddigit-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Creating double-digit fingerings &gt; </a>]</td></tr></table>
<a name="editorial-annotations-creating-blank-staves"></a>
<h2 class="unnumberedsec">Creating blank staves</h2>


<p>To create blank staves, generate empty measures then remove the
<code>Bar_number_engraver</code> from the <code>Score</code> context, and the
<code>Time_signature_engraver</code>, <code>Clef_engraver</code> and
<code>Bar_engraver</code> from the <code>Staff</code> context.
</p>

<pre class="verbatim">#(set-global-staff-size 20)

\score {
  {
    \repeat unfold 12 { s1 \break }
  }
  \layout {
    indent = 0\in
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Clef_engraver&quot;
      \remove &quot;Bar_engraver&quot;
    }
    \context {
      \Score
      \remove &quot;Bar_number_engraver&quot;
    }
  }
}

% uncomment these lines for &quot;letter&quot; size
%{
\paper {
  #(set-paper-size &quot;letter&quot;)
  ragged-last-bottom = ##f
  line-width = 7.5\in
  left-margin = 0.5\in
  bottom-margin = 0.25\in
  top-margin = 0.25\in
}
%}

% uncomment these lines for &quot;A4&quot; size
%{
\paper {
  #(set-paper-size &quot;a4&quot;)
  ragged-last-bottom = ##f
  line-width = 180
  left-margin = 15
  bottom-margin = 10
  top-margin = 10
}
%}
</pre><p>
 <a href="85/lily-d5d70a45.ly">
  <img align="middle"
       border="0"
       src="85/lily-d5d70a45.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-double-digit-fingerings.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Creating-double_002ddigit-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-creating-blank-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Creating blank staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-default-direction-of-stems-on-the-center-line-of-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Default direction of stems on the center line of the staff &gt; </a>]</td></tr></table>
<a name="editorial-annotations-creating-double_002ddigit-fingerings"></a>
<h2 class="unnumberedsec">Creating double-digit fingerings</h2>


<p>Creating fingerings larger than 5 is possible.
</p>

<pre class="verbatim">\relative c' {
  c1-10
  c1-50
  c1-36
  c1-29
}
</pre><p>
 <a href="53/lily-413a6723.ly">
  <img align="middle"
       border="0"
       src="53/lily-413a6723.png"
       alt="[image of music]">
 </a>
</p>




<a name="default-direction-of-stems-on-the-center-line-of-the-staff.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Default-direction-of-stems-on-the-center-line-of-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-creating-double_002ddigit-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Creating double-digit fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-drawing-boxes-around-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Drawing boxes around grobs &gt; </a>]</td></tr></table>
<a name="editorial-annotations-default-direction-of-stems-on-the-center-line-of-the-staff"></a>
<h2 class="unnumberedsec">Default direction of stems on the center line of the staff</h2>


<p>The default direction of stems on the center line of the staff is set
by the <code>Stem</code> property <code>neutral-direction</code>.
</p>

<pre class="verbatim">\relative c'' {
  a4 b c b
  \override Stem.neutral-direction = #up
  a4 b c b
  \override Stem.neutral-direction = #down
  a4 b c b
}
</pre><p>
 <a href="1f/lily-88e228ba.ly">
  <img align="middle"
       border="0"
       src="1f/lily-88e228ba.png"
       alt="[image of music]">
 </a>
</p>




<a name="drawing-boxes-around-grobs.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Drawing-boxes-around-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-default-direction-of-stems-on-the-center-line-of-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Default direction of stems on the center line of the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-drawing-circles-around-note-heads" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Drawing circles around note heads &gt; </a>]</td></tr></table>
<a name="editorial-annotations-drawing-boxes-around-grobs"></a>
<h2 class="unnumberedsec">Drawing boxes around grobs</h2>


<p>The <code>print-function</code> can be overridden to draw a box around an
arbitrary grob.
</p>

<pre class="verbatim">\relative c'' {
  \override TextScript.stencil =
    #(make-stencil-boxer 0.1 0.3 ly:text-interface::print)
  c'4^&quot;foo&quot;

  \override Stem.stencil =
    #(make-stencil-boxer 0.05 0.25 ly:stem::print)
  \override Score.RehearsalMark.stencil =
    #(make-stencil-boxer 0.15 0.3 ly:text-interface::print)
  b8

  \revert Stem.stencil
  \revert Flag.stencil
  c4. c4
  \mark &quot;F&quot;
  c1
}
</pre><p>
 <a href="f5/lily-b4e35338.ly">
  <img align="middle"
       border="0"
       src="f5/lily-b4e35338.png"
       alt="[image of music]">
 </a>
</p>




<a name="drawing-circles-around-note-heads.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Drawing-circles-around-note-heads"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-drawing-boxes-around-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Drawing boxes around grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-drawing-circles-around-various-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Drawing circles around various objects &gt; </a>]</td></tr></table>
<a name="editorial-annotations-drawing-circles-around-note-heads"></a>
<h2 class="unnumberedsec">Drawing circles around note heads</h2>


<p>Here is how to circle a note.
</p>

<pre class="verbatim">circle =
\once \override NoteHead.stencil = #(lambda (grob)
    (let* ((note (ly:note-head::print grob))
           (combo-stencil (ly:stencil-add
               note
               (circle-stencil note 0.1 0.8))))
          (ly:make-stencil (ly:stencil-expr combo-stencil)
            (ly:stencil-extent note X)
            (ly:stencil-extent note Y))))

{ \circle c'' }
</pre><p>
 <a href="14/lily-648371ad.ly">
  <img align="middle"
       border="0"
       src="14/lily-648371ad.png"
       alt="[image of music]">
 </a>
</p>




<a name="drawing-circles-around-various-objects.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Drawing-circles-around-various-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-drawing-circles-around-note-heads" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Drawing circles around note heads&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-embedding-native-postscript-in-a-_005cmarkup-block" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Embedding native PostScript in a \markup block &gt; </a>]</td></tr></table>
<a name="editorial-annotations-drawing-circles-around-various-objects"></a>
<h2 class="unnumberedsec">Drawing circles around various objects</h2>


<p>The <code>\circle</code> markup command draws circles around various
objects, for example fingering indications.  For other objects,
specific tweaks may be required: this example demonstrates two
strategies for rehearsal marks and measure numbers.
</p>

<pre class="verbatim">\relative c' {
  c1
  \set Score.markFormatter =
    #(lambda (mark context)
             (make-circle-markup (format-mark-numbers mark context)))
  \mark \default

  c2 d^\markup {
    \override #'(thickness . 3) {
      \circle \finger 2
    }
  }
  \override Score.BarNumber.break-visibility = #all-visible
  \override Score.BarNumber.stencil =
    #(make-stencil-circler 0.1 0.25 ly:text-interface::print)
}
</pre><p>
 <a href="05/lily-07f9abf0.ly">
  <img align="middle"
       border="0"
       src="05/lily-07f9abf0.png"
       alt="[image of music]">
 </a>
</p>




<a name="embedding-native-postscript-in-a--markup-block.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Embedding-native-PostScript-in-a-_005cmarkup-block"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-drawing-circles-around-various-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Drawing circles around various objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-grid-lines_003a-changing-their-appearance" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Grid lines: changing their appearance &gt; </a>]</td></tr></table>
<a name="editorial-annotations-embedding-native-postscript-in-a-_005cmarkup-block"></a>
<h2 class="unnumberedsec">Embedding native PostScript in a \markup block</h2>


<p>PostScript code can be directly inserted inside a <code>\markup</code>
block.
</p>

<pre class="verbatim">% PostScript is a registered trademark of Adobe Systems Inc.

\relative c'' {
  a4-\markup { \postscript #&quot;3 4 moveto 5 3 rlineto stroke&quot; }
  -\markup { \postscript #&quot;[ 0 1 ] 0 setdash 3 5 moveto 5 -3 rlineto stroke &quot; }

  b4-\markup { \postscript #&quot;3 4 moveto 0 0 1 2 8 4 20 3.5 rcurveto stroke&quot; }
  s2
  a'1
}
</pre><p>
 <a href="ca/lily-930b8726.ly">
  <img align="middle"
       border="0"
       src="ca/lily-930b8726.png"
       alt="[image of music]">
 </a>
</p>




<a name="grid-lines--changing-their-appearance.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Grid-lines_003a-changing-their-appearance"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-embedding-native-postscript-in-a-_005cmarkup-block" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Embedding native PostScript in a \markup block&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-grid-lines_003a-emphasizing-rhythms-and-notes-synchronization" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Grid lines: emphasizing rhythms and notes synchronization &gt; </a>]</td></tr></table>
<a name="editorial-annotations-grid-lines_003a-changing-their-appearance"></a>
<h2 class="unnumberedsec">Grid lines: changing their appearance</h2>


<p>The appearance of grid lines can be changed by overriding some of their
properties.
</p>

<pre class="verbatim">\score {
  \new ChoirStaff &lt;&lt;
    \new Staff {
      \relative c'' {
        \stemUp
        c'4. d8 e8 f g4
      }
    }
    \new Staff {
      \relative c {
        % this moves them up one staff space from the default position
        \override Score.GridLine.extra-offset = #'(0.0 . 1.0)
        \stemDown
        \clef bass
        \once \override Score.GridLine.thickness = #5.0
        c4
        \once \override Score.GridLine.thickness = #1.0
        g'4
        \once \override Score.GridLine.thickness = #3.0
        f4
        \once \override Score.GridLine.thickness = #5.0
        e4
      }
    }
  &gt;&gt;
  \layout {
    \context {
      \Staff
      % set up grids
      \consists &quot;Grid_point_engraver&quot;
      % set the grid interval to one quarter note
      gridInterval = #(ly:make-moment 1/4)
    }
    \context {
      \Score
      \consists &quot;Grid_line_span_engraver&quot;
      % this moves them to the right half a staff space
      \override NoteColumn.X-offset = #-0.5
    }
  }
}
</pre><p>
 <a href="4c/lily-d0bd2344.ly">
  <img align="middle"
       border="0"
       src="4c/lily-d0bd2344.png"
       alt="[image of music]">
 </a>
</p>




<a name="grid-lines--emphasizing-rhythms-and-notes-synchronization.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Grid-lines_003a-emphasizing-rhythms-and-notes-synchronization"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-grid-lines_003a-changing-their-appearance" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Grid lines: changing their appearance&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-hammer-on-and-pull-off-using-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Hammer on and pull off using chords &gt; </a>]</td></tr></table>
<a name="editorial-annotations-grid-lines_003a-emphasizing-rhythms-and-notes-synchronization"></a>
<h2 class="unnumberedsec">Grid lines: emphasizing rhythms and notes synchronization</h2>


<p>Regular vertical lines can be drawn between staves to show note
synchronization; however, in case of monophonic music, you may want to
make the second stave invisible, and make the lines shorter like in
this snippet.
</p>

<pre class="verbatim">\score {
  \new ChoirStaff {
    \relative c'' &lt;&lt;
      \new Staff {
        \time 12/8
        \stemUp
        c4. d8 e8 f g4 f8 e8. d16 c8
      }
      \new Staff {
        % hides staff and notes so that only the grid lines are visible
        \hideNotes
        \hide Staff.BarLine
        \override Staff.StaffSymbol.line-count = #0
        \hide Staff.TimeSignature
        \hide Staff.Clef

        % dummy notes to force regular note spacing
        \once  \override Score.GridLine.thickness = #4.0
        c8 c c
        \once  \override Score.GridLine.thickness = #3.0
        c8 c c
        \once  \override Score.GridLine.thickness = #4.0
        c8 c c
        \once  \override Score.GridLine.thickness = #3.0
        c8 c c
      }
    &gt;&gt;
  }
  \layout {
    \context {
      \Score
      \consists &quot;Grid_line_span_engraver&quot;
      % center grid lines horizontally below note heads
      \override NoteColumn.X-offset = #-0.5
    }
    \context {
      \Staff
      \consists &quot;Grid_point_engraver&quot;
      gridInterval = #(ly:make-moment 1/8)
      % set line length and positioning:
      % two staff spaces above center line on hidden staff
      % to four spaces below center line on visible staff
      \override GridPoint.Y-extent = #'(2 . -4)
    }
    ragged-right = ##t
  }
}
</pre><p>
 <a href="4b/lily-45d3e160.ly">
  <img align="middle"
       border="0"
       src="4b/lily-45d3e160.png"
       alt="[image of music]">
 </a>
</p>




<a name="hammer-on-and-pull-off-using-chords.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Hammer-on-and-pull-off-using-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-grid-lines_003a-emphasizing-rhythms-and-notes-synchronization" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Grid lines: emphasizing rhythms and notes synchronization&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-hammer-on-and-pull-off-using-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Hammer on and pull off using voices &gt; </a>]</td></tr></table>
<a name="editorial-annotations-hammer-on-and-pull-off-using-chords"></a>
<h2 class="unnumberedsec">Hammer on and pull off using chords</h2>


<p>When using hammer-on or pull-off with chorded notes, only a single arc
is drawn. However &ldquo;double arcs&rdquo; are possible by setting the
<code>doubleSlurs</code> property to <code>#t</code>.
</p>

<pre class="verbatim">\new TabStaff {
  \relative c' {
    % chord hammer-on and pull-off
    \set doubleSlurs = ##t
    &lt;g' b&gt;8( &lt;a c&gt; &lt;g b&gt;)
  }
}
</pre><p>
 <a href="dc/lily-7f5af7b2.ly">
  <img align="middle"
       border="0"
       src="dc/lily-7f5af7b2.png"
       alt="[image of music]">
 </a>
</p>




<a name="hammer-on-and-pull-off-using-voices.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Hammer-on-and-pull-off-using-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-hammer-on-and-pull-off-using-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Hammer on and pull off using chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-hammer-on-and-pull-off" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Hammer on and pull off &gt; </a>]</td></tr></table>
<a name="editorial-annotations-hammer-on-and-pull-off-using-voices"></a>
<h2 class="unnumberedsec">Hammer on and pull off using voices</h2>


<p>The arc of hammer-on and pull-off is upwards in voices one and three
and downwards in voices two and four:
</p>

<pre class="verbatim">\new TabStaff {
  \relative c' {
    &lt;&lt; { \voiceOne g2( a) }
    \\ { \voiceTwo a,( b) }
    &gt;&gt; \oneVoice
  }
}
</pre><p>
 <a href="e3/lily-7bb4d9c9.ly">
  <img align="middle"
       border="0"
       src="e3/lily-7bb4d9c9.png"
       alt="[image of music]">
 </a>
</p>




<a name="hammer-on-and-pull-off.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Hammer-on-and-pull-off"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-hammer-on-and-pull-off-using-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Hammer on and pull off using voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: How to print two rehearsal marks above and below the same barline (method 1) &gt; </a>]</td></tr></table>
<a name="editorial-annotations-hammer-on-and-pull-off"></a>
<h2 class="unnumberedsec">Hammer on and pull off</h2>


<p>Hammer-on and pull-off can be obtained using slurs.
</p>

<pre class="verbatim">\new TabStaff {
  \relative c' {
    d4( e\2)
    a( g)
  }
}
</pre><p>
 <a href="8c/lily-8fcbad90.ly">
  <img align="middle"
       border="0"
       src="8c/lily-8fcbad90.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-1.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-hammer-on-and-pull-off" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Hammer on and pull off&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: How to print two rehearsal marks above and below the same barline (method 2) &gt; </a>]</td></tr></table>
<a name="editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 1)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo;, one on top of the other. It
shifts the lower rehearsal mark below the staff and then adds padding
above it in order to place the upper rehearsal mark above the staff.
</p>
<p>By adjusting the extra-offset and baseline-skip values you can increase
or decrease the overall space between the rehearsal mark and the staff.
</p>
<p>Because nearly every type of glyph or string can be made to behave like
a rehearsal mark it is possible to centre those above and below a bar
line.
</p>
<p>Adding the appropriate &rsquo;break visibility&rsquo; as shown in snippet 1 will
allow you to position two marks at the end of a line as well.
</p>
<p>Note: Method 1 is less complex than Method 2 but does not really allow
for fine tuning of placement of one of the rehearsal marks without
affecting the other.  It may also give some problems with vertical
spacing, since using <code>extra-offset</code> does not change the bounding
box of the mark from its original value.
</p>

<pre class="verbatim">\relative c'{
  c d e f |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \circle 1 \box A }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \flat { \bold \small \italic Fine. } }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \override Score.RehearsalMark.break-visibility = #begin-of-line-invisible
  \mark \markup \center-column { \fermata \box z }
}
</pre><p>
 <a href="07/lily-41bbeb51.ly">
  <img align="middle"
       border="0"
       src="07/lily-41bbeb51.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-2.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: How to print two rehearsal marks above and below the same barline (method 1)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-making-some-staff-lines-thicker-than-the-others" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Making some staff lines thicker than the others &gt; </a>]</td></tr></table>
<a name="editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 2)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo; - one above the stave and one
below, by creating two voices, adding the Rehearsal Mark engraver to
each voice - without this no rehearsal mark is printed - and then
placing each rehearsal mark UP and DOWN in each voice respectively.
</p>
<p>This method (as opposed to method 1) is more complex, but allows for
more flexibility, should it be needed to tweak each rehearsal mark
independently of the other.
</p>

<pre class="verbatim">\score {
  \relative c'
  &lt;&lt;
    \new Staff {
      &lt;&lt;
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
        }
        { c4 d e f
          \mark \markup { \box A }
          c4 d e f
        }
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
          \override RehearsalMark.direction = #DOWN
        }
        { s4 s s s
          \mark \markup { \circle 1 }
          s4 s s s
        }
      &gt;&gt;
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Mark_engraver&quot;
      \remove &quot;Staff_collecting_engraver&quot;
    }
  }
}
</pre><p>
 <a href="99/lily-c497ffda.ly">
  <img align="middle"
       border="0"
       src="99/lily-c497ffda.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-some-staff-lines-thicker-than-the-others.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Making-some-staff-lines-thicker-than-the-others"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: How to print two rehearsal marks above and below the same barline (method 2)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-marking-notes-of-spoken-parts-with-a-cross-on-the-stem" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Marking notes of spoken parts with a cross on the stem &gt; </a>]</td></tr></table>
<a name="editorial-annotations-making-some-staff-lines-thicker-than-the-others"></a>
<h2 class="unnumberedsec">Making some staff lines thicker than the others</h2>


<p>For educational purposes, a staff line can be thickened (e.g., the
middle line, or to emphasize the line of the G clef).  This can be
achieved by adding extra lines very close to the line that should be
emphasized, using the <code>line-positions</code> property of the
<code>StaffSymbol</code> object.
</p>

<pre class="verbatim">{
  \override Staff.StaffSymbol.line-positions =
    #'(-4 -2 -0.2 0 0.2 2 4)
  d'4 e' f' g'
}
</pre><p>
 <a href="c4/lily-adb86609.ly">
  <img align="middle"
       border="0"
       src="c4/lily-adb86609.png"
       alt="[image of music]">
 </a>
</p>




<a name="marking-notes-of-spoken-parts-with-a-cross-on-the-stem.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Marking-notes-of-spoken-parts-with-a-cross-on-the-stem"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-making-some-staff-lines-thicker-than-the-others" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Making some staff lines thicker than the others&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-measure-counter" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Measure counter &gt; </a>]</td></tr></table>
<a name="editorial-annotations-marking-notes-of-spoken-parts-with-a-cross-on-the-stem"></a>
<h2 class="unnumberedsec">Marking notes of spoken parts with a cross on the stem</h2>


<p>This example shows how to put crosses on stems.  Mark the beginning of
a spoken section with the <code>\speakOn</code> keyword, and end it with the
<code>\speakOff</code> keyword.
</p>

<pre class="verbatim">speakOn = {
  \override Stem.stencil =
    #(lambda (grob)
       (let* ((x-parent (ly:grob-parent grob X))
              (is-rest? (ly:grob? (ly:grob-object x-parent 'rest))))
         (if is-rest?
             empty-stencil
             (ly:stencil-combine-at-edge
              (ly:stem::print grob)
              Y
              (- (ly:grob-property grob 'direction))
              (grob-interpret-markup grob
                                     (markup #:center-align #:fontsize -4
                                             #:musicglyph &quot;noteheads.s2cross&quot;))
              -2.3))))
}

speakOff = {
  \revert Stem.stencil
  \revert Flag.stencil
}

\score {
  \new Staff {
    \relative c'' {
      a4 b a c
      \speakOn
      g4 f r g
      b4 r d e
      \speakOff
      c4 a g f
    }
  }
}
</pre><p>
 <a href="4d/lily-f1f77f16.ly">
  <img align="middle"
       border="0"
       src="4d/lily-f1f77f16.png"
       alt="[image of music]">
 </a>
</p>




<a name="measure-counter.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Measure-counter"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-marking-notes-of-spoken-parts-with-a-cross-on-the-stem" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Marking notes of spoken parts with a cross on the stem&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-numbering-groups-of-measures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Numbering groups of measures &gt; </a>]</td></tr></table>
<a name="editorial-annotations-measure-counter"></a>
<h2 class="unnumberedsec">Measure counter</h2>


<p>This snippet provides a workaround for emitting measure counters using
transparent percent repeats.
</p>

<pre class="verbatim">&lt;&lt;
  \context Voice = &quot;foo&quot; {
    \clef bass
    c4 r g r
    c4 r g r
    c4 r g r
    c4 r g r
  }
  \context Voice = &quot;foo&quot; {
    \set countPercentRepeats = ##t
    \hide PercentRepeat
    \override PercentRepeatCounter.staff-padding = #1
    \repeat percent 4 { s1 }
  }
&gt;&gt;
</pre><p>
 <a href="1a/lily-7dc05678.ly">
  <img align="middle"
       border="0"
       src="1a/lily-7dc05678.png"
       alt="[image of music]">
 </a>
</p>




<a name="numbering-groups-of-measures.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Numbering-groups-of-measures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-measure-counter" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Measure counter&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-positioning-fingering-indications-precisely" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Positioning fingering indications precisely &gt; </a>]</td></tr></table>
<a name="editorial-annotations-numbering-groups-of-measures"></a>
<h2 class="unnumberedsec">Numbering groups of measures</h2>


<p>This snippet demonstrates the use of the
<code>Measure_counter_engraver</code> to number groups of successive
measures.  Any stretch of measures may be numbered, whether consisting
of repetitions or not.
</p>

<p>The engraver must be added to the appropriate context.  Here, a
<code>Staff</code> context is used; another possibility is a <code>Dynamics</code>
context.
</p>

<p>The counter is begun with <code>\startMeasureCount</code> and ended with
<code>\stopMeasureCount</code>.  Numbering will start by default with
<code>1</code>, but this behavior may be modified by overriding the
<code>count-from</code> property.
</p>

<p>When a measure extends across a line break, the number will appear
twice, the second time in parentheses.
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff
    \consists #Measure_counter_engraver
  }
}

\new Staff {
  \startMeasureCount
  \repeat unfold 7 {
    c'4 d' e' f'
  }
  \stopMeasureCount
  \bar &quot;||&quot;
  g'4 f' e' d'
  \override Staff.MeasureCounter.count-from = #2
  \startMeasureCount
  \repeat unfold 5 {
    g'4 f' e' d'
  }
  g'4 f'
  \bar &quot;&quot;
  \break
  e'4 d'
  \repeat unfold 7 {
    g'4 f' e' d'
  }
  \stopMeasureCount
}
</pre><p>
 <a href="a0/lily-b9cb1f5a.ly">
  <img align="middle"
       border="0"
       src="a0/lily-b9cb1f5a.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-fingering-indications-precisely.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Positioning-fingering-indications-precisely"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-numbering-groups-of-measures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Numbering groups of measures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-positioning-text-markups-inside-slurs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Positioning text markups inside slurs &gt; </a>]</td></tr></table>
<a name="editorial-annotations-positioning-fingering-indications-precisely"></a>
<h2 class="unnumberedsec">Positioning fingering indications precisely</h2>


<p>Generally the options available for positioning the fingering of chords
work well by default, but if one of the indications needs to positioned
more precisely the following tweak may be used.  This is particularly
useful for correcting the positioning when intervals of a second are
involved.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(left)
  &lt;c-1 d-2 a'-5&gt;4
  &lt;c-1 d-\tweak extra-offset #'(0 . 0.2)-2 a'-5&gt;4
  \set fingeringOrientations = #'(down)
  &lt;c-1 d-2 a'-5&gt;4
  &lt;c-\tweak extra-offset #'(0 . -1.1)-1
   d-\tweak extra-offset #'(-1.2 . -1.8)-2 a'-5&gt;4
  \set fingeringOrientations = #'(down right up)
  &lt;c-1 d-\tweak extra-offset #'(-0.3 . 0)-2 a'-5&gt;4
  &lt;c-1 d-\tweak extra-offset #'(-1 . 1.2)-2 a'-5&gt;4
  \set fingeringOrientations = #'(up)
  &lt;c-1 d-\tweak extra-offset #'(0 . 1.1)-2
   a'-\tweak extra-offset #'(0 . 1)-5&gt;4
  &lt;c-1 d-\tweak extra-offset #'(-1.2 . 1.5)-2
   a'-\tweak extra-offset #'(0 . 1.4)-5&gt;4
}
</pre><p>
 <a href="ae/lily-577bcc93.ly">
  <img align="middle"
       border="0"
       src="ae/lily-577bcc93.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-text-markups-inside-slurs.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Positioning-text-markups-inside-slurs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-positioning-fingering-indications-precisely" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Positioning fingering indications precisely&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-printing-text-from-right-to-left" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Printing text from right to left &gt; </a>]</td></tr></table>
<a name="editorial-annotations-positioning-text-markups-inside-slurs"></a>
<h2 class="unnumberedsec">Positioning text markups inside slurs</h2>


<p>Text markups need to have the <code>outside-staff-priority</code> property
set to false in order to be printed inside slurs.
</p>

<pre class="verbatim">\relative c'' {
  \override TextScript.avoid-slur = #'inside
  \override TextScript.outside-staff-priority = ##f
  c2(^\markup { \halign #-10 \natural } d4.) c8
}
</pre><p>
 <a href="7e/lily-e382e3e0.ly">
  <img align="middle"
       border="0"
       src="7e/lily-e382e3e0.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-text-from-right-to-left.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Printing-text-from-right-to-left"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-positioning-text-markups-inside-slurs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Positioning text markups inside slurs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-string-number-extender-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: String number extender lines &gt; </a>]</td></tr></table>
<a name="editorial-annotations-printing-text-from-right-to-left"></a>
<h2 class="unnumberedsec">Printing text from right to left</h2>


<p>It is possible to print text from right to left in a markup object, as
demonstrated here.
</p>

<pre class="verbatim">{
  b1^\markup {
    \line { i n g i r u m i m u s n o c t e }
  }
  f'_\markup {
    \override #'(text-direction . -1)
    \line { i n g i r u m i m u s n o c t e }
  }
}
</pre><p>
 <a href="a0/lily-8111190c.ly">
  <img align="middle"
       border="0"
       src="a0/lily-8111190c.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-number-extender-lines.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-String-number-extender-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-printing-text-from-right-to-left" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Printing text from right to left&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-using-postscript-to-generate-special-note-head-shapes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Using PostScript to generate special note head shapes &gt; </a>]</td></tr></table>
<a name="editorial-annotations-string-number-extender-lines"></a>
<h2 class="unnumberedsec">String number extender lines</h2>


<p>Make an extender line for string number indications, showing that a
series of notes is supposed to be played all on the same string.
</p>

<pre class="verbatim">stringNumberSpanner =
  #(define-music-function (StringNumber) (string?)
    #{
      \override TextSpanner.style = #'solid
      \override TextSpanner.font-size = #-5
      \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
      \override TextSpanner.bound-details.left.text =
        \markup { \circle \number $StringNumber }
    #})


\relative c {
  \clef &quot;treble_8&quot;
  \stringNumberSpanner &quot;5&quot;
  \textSpannerDown
  a8\startTextSpan
  b c d e f\stopTextSpan
  \stringNumberSpanner &quot;4&quot;
  g\startTextSpan a
  bes4 a g2\stopTextSpan
}
</pre><p>
 <a href="a5/lily-2fb3daf1.ly">
  <img align="middle"
       border="0"
       src="a5/lily-2fb3daf1.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-postscript-to-generate-special-note-head-shapes.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Using-PostScript-to-generate-special-note-head-shapes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-string-number-extender-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: String number extender lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#editorial-annotations-using-the-whiteout-property" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Editorial annotations: Using the whiteout property &gt; </a>]</td></tr></table>
<a name="editorial-annotations-using-postscript-to-generate-special-note-head-shapes"></a>
<h2 class="unnumberedsec">Using PostScript to generate special note head shapes</h2>


<p>When a note head with a special shape cannot easily be generated with
graphic markup, PostScript code can be used to generate the shape.
This example shows how a parallelogram-shaped note head is generated.
</p>

<pre class="verbatim">parallelogram =
  #(ly:make-stencil (list 'embedded-ps
    &quot;gsave
      currentpoint translate
      newpath
      0 0.25 moveto
      1.3125 0.75 lineto
      1.3125 -0.25 lineto
      0 -0.75 lineto
      closepath
      fill
      grestore&quot; )
    (cons 0 1.3125)
    (cons -.75 .75))

myNoteHeads = \override NoteHead.stencil = \parallelogram
normalNoteHeads = \revert NoteHead.stencil

\relative c'' {
  \myNoteHeads
  g4 d'
  \normalNoteHeads
  &lt;f, \tweak stencil \parallelogram b e&gt;4 d
}
</pre><p>
 <a href="1e/lily-362946f3.ly">
  <img align="middle"
       border="0"
       src="1e/lily-362946f3.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-the-whiteout-property.ly"></a>

<hr size="6">
<a name="Editorial-annotations_003a-Using-the-whiteout-property"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#text" title="Next chapter">&nbsp;Text &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-using-postscript-to-generate-special-note-head-shapes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Using PostScript to generate special note head shapes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#editorial-annotations" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Editorial annotations&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text &gt; </a>]</td></tr></table>
<a name="editorial-annotations-using-the-whiteout-property"></a>
<h2 class="unnumberedsec">Using the whiteout property</h2>


<p>Any graphical object can be printed over a white background to mask
parts of objects that lie beneath.  This can be useful to improve the
appearance of collisions in complex situations when repositioning
objects is impractical.  It is necessary to explicitly set the
<code>layer</code> property to control which objects are masked by the white
background.
</p>
<p>In this example the collision of the tie with the time signature is
improved by masking out the part of the tie that crosses the time
signature by setting the <code>whiteout</code> property of
<code>TimeSignature</code>. To do this <code>TimeSignature</code> is moved to a
layer above <code>Tie</code>, which is left in the default layer of 1, and
<code>StaffSymbol</code> is moved to a layer above <code>TimeSignature</code> so it
is not masked.
</p>

<pre class="verbatim">{
  \override Score.StaffSymbol.layer = #4
  \override Staff.TimeSignature.layer = #3
  b'2 b'~
  \once \override Staff.TimeSignature.whiteout = ##t
  \time 3/4
  b' r4
}
</pre><p>
 <a href="51/lily-a56b0756.ly">
  <img align="middle"
       border="0"
       src="51/lily-a56b0756.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#editorial-annotations" title="Beginning of this chapter or previous chapter"> &lt;&lt; Editorial annotations&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#editorial-annotations-using-the-whiteout-property" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Editorial annotations: Using the whiteout property&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-adding-markups-in-a-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Adding markups in a tablature &gt; </a>]</td></tr></table>
<a name="text"></a>
<h1 class="unnumbered">Text</h1>

<a name="index-Text"></a>
<p><a href="notation-big-page.html#text">Text</a>
</p>

<a name="adding-markups-in-a-tablature.ly"></a>

<hr size="6">
<a name="Text_003a-Adding-markups-in-a-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-adding-the-current-date-to-a-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Adding the current date to a score &gt; </a>]</td></tr></table>
<a name="text-adding-markups-in-a-tablature"></a>
<h2 class="unnumberedsec">Adding markups in a tablature</h2>


<p>By default markups does not show in a tablature. To make them appear,
simply use the command <code>\revert TabStaff.TextScript.stencil</code>
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=919
% by P.P.Schneider on June 2014

high  = { r4 r8 &lt;g c'&gt; q r8 r4 }

low = { c4 r4 c8 r8 g,8 b, }

pulse = { s8^&quot;1&quot; s^&quot;&amp;&quot; s^&quot;2&quot; s^&quot;&amp;&quot; s^&quot;3&quot; s^&quot;&amp;&quot; s^&quot;4&quot; s^&quot;&amp;&quot; }

\score {
 \new TabStaff {
   \repeat unfold 2 &lt;&lt; \high \\ \low \\ \pulse &gt;&gt;
  }
  \layout {
    \context {
      \TabStaff
      \clef moderntab
      \revert TextScript.stencil
      \override TextScript.font-series = #'bold
      \override TextScript.font-size = #-2
      \override TextScript.color = #red

    }
    \context {
      \Score
      proportionalNotationDuration = #(ly:make-moment 1/8)
    }
  }
}
</pre><p>
 <a href="28/lily-a4ac69a4.ly">
  <img align="middle"
       border="0"
       src="28/lily-a4ac69a4.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-the-current-date-to-a-score.ly"></a>

<hr size="6">
<a name="Text_003a-Adding-the-current-date-to-a-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-adding-markups-in-a-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Adding markups in a tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-adjusting-lyrics-vertical-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Adjusting lyrics vertical spacing &gt; </a>]</td></tr></table>
<a name="text-adding-the-current-date-to-a-score"></a>
<h2 class="unnumberedsec">Adding the current date to a score</h2>


<p>With a little Scheme code, the current date can easily be added to a
score.
</p>

<pre class="verbatim">% first, define a variable to hold the formatted date:
date = #(strftime &quot;%d-%m-%Y&quot; (localtime (current-time)))

% use it in the title block:
\header {
  title = &quot;Including the date!&quot;
  subtitle = \date
}

\score {
  \relative c'' {
    c4 c c c
  }
}
% and use it in a \markup block:
\markup {
  \date
}
</pre><p>
 <a href="f0/lily-ea2a4b72.ly">
  <img align="middle"
       border="0"
       src="f0/lily-ea2a4b72.png"
       alt="[image of music]">
 </a>
</p>




<a name="adjusting-lyrics-vertical-spacing.ly"></a>

<hr size="6">
<a name="Text_003a-Adjusting-lyrics-vertical-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-adding-the-current-date-to-a-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Adding the current date to a score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-aligning-and-centering-instrument-names" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Aligning and centering instrument names &gt; </a>]</td></tr></table>
<a name="text-adjusting-lyrics-vertical-spacing"></a>
<h2 class="unnumberedsec">Adjusting lyrics vertical spacing</h2>


<p>This snippet shows how to bring the lyrics line closer to the staff.
</p>

<pre class="verbatim">% Default layout:
&lt;&lt;
  \new Staff \new Voice = melody \relative c' {
    c4 d e f
    g4 f e d
    c1
  }
  \new Lyrics \lyricsto melody { aa aa aa aa aa aa aa aa aa }

  \new Staff {
    \new Voice = melody \relative c' {
      c4 d e f
      g4 f e d
      c1
    }
  }
  % Reducing the minimum space below the staff and above the lyrics:
  \new Lyrics \with {
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing =
      #'((basic-distance . 1))
  }
  \lyricsto melody { aa aa aa aa aa aa aa aa aa }
&gt;&gt;
</pre><p>
 <a href="8e/lily-6a2f611e.ly">
  <img align="middle"
       border="0"
       src="8e/lily-6a2f611e.png"
       alt="[image of music]">
 </a>
</p>




<a name="aligning-and-centering-instrument-names.ly"></a>

<hr size="6">
<a name="Text_003a-Aligning-and-centering-instrument-names"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-adjusting-lyrics-vertical-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Adjusting lyrics vertical spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-aligning-objects-created-with-the-_005cmark-command" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Aligning objects created with the \mark command &gt; </a>]</td></tr></table>
<a name="text-aligning-and-centering-instrument-names"></a>
<h2 class="unnumberedsec">Aligning and centering instrument names</h2>


<p>The horizontal alignment of instrument names is tweaked by changing the
<code>Staff.InstrumentName #'self-alignment-X</code> property. The
<code>\layout</code> variables <code>indent</code> and <code>short-indent</code> define
the space in which the instrument names are aligned before the first
and the following systems, respectively.
</p>

<pre class="verbatim">\score {
  \new StaffGroup &lt;&lt;

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #LEFT
      instrumentName = \markup \left-column {
        &quot;Left aligned&quot;
        &quot;instrument name&quot;
        }
        shortInstrumentName = &quot;Left&quot;
      }

      {  c''1 \break c''1 }

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #CENTER
      instrumentName = \markup \center-column {
        Centered
        &quot;instrument name&quot;
        }
      shortInstrumentName = &quot;Centered&quot;
    }

    { g'1 g'1}

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #RIGHT
      instrumentName = \markup \right-column {
        &quot;Right aligned&quot;
        &quot;instrument name&quot;
      }
      shortInstrumentName = &quot;Right&quot;
    }

    { e'1 e'1 }

  &gt;&gt;

  \layout {
    ragged-right = ##t
    indent = 4\cm
    short-indent = 2\cm
  }
}
</pre><p>
 <a href="16/lily-2e2f869f.ly">
  <img align="middle"
       border="0"
       src="16/lily-2e2f869f.png"
       alt="[image of music]">
 </a>
</p>




<a name="aligning-objects-created-with-the--mark-command.ly"></a>

<hr size="6">
<a name="Text_003a-Aligning-objects-created-with-the-_005cmark-command"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-aligning-and-centering-instrument-names" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Aligning and centering instrument names&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-aligning-syllables-with-melisma" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Aligning syllables with melisma &gt; </a>]</td></tr></table>
<a name="text-aligning-objects-created-with-the-_005cmark-command"></a>
<h2 class="unnumberedsec">Aligning objects created with the \mark command</h2>


<p>By default the <code>\mark</code> command centers objects over a bar line.
This behavior can be modified to align at right or left.
</p>

<pre class="verbatim">\relative c' {
  c1 \mark &quot;(Center)&quot;
  c1
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \mark &quot;(Left)&quot;
  c4 c c c
  c4 c c c
  \once \override Score.RehearsalMark.self-alignment-X = #RIGHT
  \mark &quot;(Right)&quot;
  c1
}
</pre><p>
 <a href="57/lily-67d8a66a.ly">
  <img align="middle"
       border="0"
       src="57/lily-67d8a66a.png"
       alt="[image of music]">
 </a>
</p>




<a name="aligning-syllables-with-melisma.ly"></a>

<hr size="6">
<a name="Text_003a-Aligning-syllables-with-melisma"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-aligning-objects-created-with-the-_005cmark-command" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Aligning objects created with the \mark command&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-blanking-staff-lines-using-the-_005cwhiteout-command" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Blanking staff lines using the \whiteout command &gt; </a>]</td></tr></table>
<a name="text-aligning-syllables-with-melisma"></a>
<h2 class="unnumberedsec">Aligning syllables with melisma</h2>


<p>By default, lyrics syllables that start a melisma are left aligned on
their note.  The alignment can be altered using the
<code>lyricMelismaAlignment</code> property.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \new Staff {
      \relative c''
      \new Voice = &quot;vocal&quot; {
        c d~^\markup default  d e
        c d~^\markup &quot;right aligned&quot; d e
        c d~^\markup &quot;center aligned&quot; d e
        c d~^\markup &quot;reset to default&quot; d e
      }
    }
    \new Lyrics \lyricsto &quot;vocal&quot; {
      word word word
      \set lyricMelismaAlignment = #RIGHT
      word word word
      \set lyricMelismaAlignment = #CENTER
      word word word
      \unset lyricMelismaAlignment
      word word word
    }
  &gt;&gt;
}
</pre><p>
 <a href="59/lily-80e3035f.ly">
  <img align="middle"
       border="0"
       src="59/lily-80e3035f.png"
       alt="[image of music]">
 </a>
</p>




<a name="blanking-staff-lines-using-the--whiteout-command.ly"></a>

<hr size="6">
<a name="Text_003a-Blanking-staff-lines-using-the-_005cwhiteout-command"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-aligning-syllables-with-melisma" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Aligning syllables with melisma&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-center-text-below-hairpin-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Center text below hairpin dynamics &gt; </a>]</td></tr></table>
<a name="text-blanking-staff-lines-using-the-_005cwhiteout-command"></a>
<h2 class="unnumberedsec">Blanking staff lines using the \whiteout command</h2>


<p>The <code>\whiteout</code> command underlays a markup with a white box.
Since staff lines are in a lower layer than most other grobs, this
white box will not overlap any other grob.
</p>

<pre class="verbatim">\layout {
  ragged-right = ##f
}

\relative c' {
  \override TextScript.extra-offset = #'(2 . 4)
  c2-\markup { \whiteout \pad-markup #0.5 &quot;middle C&quot; } c
}
</pre><p>
 <a href="6a/lily-8543563a.ly">
  <img align="middle"
       border="0"
       src="6a/lily-8543563a.png"
       alt="[image of music]">
 </a>
</p>




<a name="center-text-below-hairpin-dynamics.ly"></a>

<hr size="6">
<a name="Text_003a-Center-text-below-hairpin-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-blanking-staff-lines-using-the-_005cwhiteout-command" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Blanking staff lines using the \whiteout command&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-changing-ottava-text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Changing ottava text &gt; </a>]</td></tr></table>
<a name="text-center-text-below-hairpin-dynamics"></a>
<h2 class="unnumberedsec">Center text below hairpin dynamics</h2>


<p>This example provides a function to typeset a hairpin (de)crescendo
with some additional text below it, such as &ldquo;molto&rdquo; or &ldquo;poco&rdquo;.
The added text will change the direction according to the direction of
the hairpin. The Hairpin is aligned to DynamicText.
</p>
<p>The example also illustrates how to modify the way an object is
normally printed, using some Scheme code.
</p>

<pre class="verbatim">hairpinWithCenteredText =
#(define-music-function (text) (markup?)
  #{
    \once \override Voice.Hairpin.after-line-breaking =
      #(lambda (grob)
        (let* ((stencil (ly:hairpin::print grob))
               (par-y (ly:grob-parent grob Y))
               (dir (ly:grob-property par-y 'direction))
               (new-stencil (ly:stencil-aligned-to
                 (ly:stencil-combine-at-edge
                   (ly:stencil-aligned-to stencil X CENTER)
                   Y dir
                   (ly:stencil-aligned-to
                     (grob-interpret-markup grob text) X CENTER))
                 X LEFT))
               (staff-space (ly:output-def-lookup
                 (ly:grob-layout grob) 'staff-space))
               (staff-line-thickness
                 (ly:output-def-lookup (ly:grob-layout grob) 'line-thickness))
               (par-x (ly:grob-parent grob X))
               (dyn-text (grob::has-interface par-x 'dynamic-text-interface))
               (dyn-text-stencil-x-length
                 (if dyn-text
                   (interval-length
                     (ly:stencil-extent (ly:grob-property par-x 'stencil) X))
                   0))
               (x-shift
                 (if dyn-text
                   (-
                     (+ staff-space dyn-text-stencil-x-length)
                     (* 0.5 staff-line-thickness)) 0)))

        (ly:grob-set-property! grob 'Y-offset 0)
        (ly:grob-set-property! grob 'stencil
           (ly:stencil-translate-axis
            new-stencil
            x-shift X))))
  #})

hairpinMolto =
\hairpinWithCenteredText \markup { \italic molto }

hairpinMore =
\hairpinWithCenteredText \markup { \larger moltissimo }

\layout { ragged-right = ##f }

\relative c' {
  \hairpinMolto
  c2\&lt; c\f
  \hairpinMore
  c2\ppppp\&lt; c\f
  \break
  \hairpinMolto
  c2^\&lt; c\f
  \hairpinMore
  c2\ppppp\&lt; c\f
}
</pre><p>
 <a href="d7/lily-614b3166.ly">
  <img align="middle"
       border="0"
       src="d7/lily-614b3166.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-ottava-text.ly"></a>

<hr size="6">
<a name="Text_003a-Changing-ottava-text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-center-text-below-hairpin-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Center text below hairpin dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-changing-the-default-text-font-family" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Changing the default text font family &gt; </a>]</td></tr></table>
<a name="text-changing-ottava-text"></a>
<h2 class="unnumberedsec">Changing ottava text</h2>


<p>Internally, <code>\ottava</code> sets the properties <code>ottavation</code> (for
example, to <code>8va</code> or <code>8vb</code>) and <code>middleCPosition</code>.  To
override the text of the bracket, set <code>ottavation</code> after invoking
<code>\ottava</code>.
</p>
<p>Short text is especially useful when a brief ottava is used.
</p>

<pre class="verbatim">{
  c'2
  \ottava #1
  \set Staff.ottavation = #&quot;8&quot;
  c''2
  \ottava #0
  c'1
  \ottava #1
  \set Staff.ottavation = #&quot;Text&quot;
  c''1
}
</pre><p>
 <a href="87/lily-c8f983d7.ly">
  <img align="middle"
       border="0"
       src="87/lily-c8f983d7.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-default-text-font-family.ly"></a>

<hr size="6">
<a name="Text_003a-Changing-the-default-text-font-family"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-changing-ottava-text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Changing ottava text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-combining-dynamics-with-markup-texts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Combining dynamics with markup texts &gt; </a>]</td></tr></table>
<a name="text-changing-the-default-text-font-family"></a>
<h2 class="unnumberedsec">Changing the default text font family</h2>


<p>The default font families for text can be overridden with
<code>make-pango-font-tree</code>.
</p>

<pre class="verbatim">\paper {
  % change for other default global staff size.
  myStaffSize = #20
  %{
     run
         lilypond -dshow-available-fonts blabla
     to show all fonts available in the process log.
  %}

  #(define fonts
    (make-pango-font-tree &quot;Times New Roman&quot;
                          &quot;Nimbus Sans,Nimbus Sans L&quot;
                          &quot;Luxi Mono&quot;
;;                        &quot;Helvetica&quot;
;;                        &quot;Courier&quot;
     (/ myStaffSize 20)))
}

\relative c'' {
  c4^\markup {
    roman: foo \bold bla \italic bar \italic \bold baz
  }
  c'4_\markup {
    \override #'(font-family . sans)
    {
      sans: foo \bold bla \italic bar \italic \bold baz
    }
  }
  c'2^\markup {
    \override #'(font-family . typewriter)
    {
      mono: foo \bold bla \italic bar \italic \bold baz
    }
  }
}
</pre><p>
 <a href="be/lily-0064cb0d.ly">
  <img align="middle"
       border="0"
       src="be/lily-0064cb0d.png"
       alt="[image of music]">
 </a>
</p>




<a name="combining-dynamics-with-markup-texts.ly"></a>

<hr size="6">
<a name="Text_003a-Combining-dynamics-with-markup-texts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-changing-the-default-text-font-family" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Changing the default text font family&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-combining-two-parts-on-the-same-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Combining two parts on the same staff &gt; </a>]</td></tr></table>
<a name="text-combining-dynamics-with-markup-texts"></a>
<h2 class="unnumberedsec">Combining dynamics with markup texts</h2>


<p>Some dynamics may involve text indications (such as &ldquo;più forte&rdquo; or
&ldquo;piano subito&rdquo;). These can be produced using a <code>\markup</code>
block.
</p>

<pre class="verbatim">piuF = \markup { \italic più \dynamic f }

\layout { ragged-right = ##f }

\relative c'' {
  c2\f c-\piuF
}
</pre><p>
 <a href="a8/lily-e66129d1.ly">
  <img align="middle"
       border="0"
       src="a8/lily-e66129d1.png"
       alt="[image of music]">
 </a>
</p>




<a name="combining-two-parts-on-the-same-staff.ly"></a>

<hr size="6">
<a name="Text_003a-Combining-two-parts-on-the-same-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-combining-dynamics-with-markup-texts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Combining dynamics with markup texts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-creating-_0022real_0022-parenthesized-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Creating &quot;real&quot; parenthesized dynamics &gt; </a>]</td></tr></table>
<a name="text-combining-two-parts-on-the-same-staff"></a>
<h2 class="unnumberedsec">Combining two parts on the same staff</h2>


<p>The part combiner tool ( <code>\partcombine</code> command ) allows the
combination of several different parts on the same staff.  Text
directions such as &ldquo;solo&rdquo; or &ldquo;a2&rdquo; are added by default; to remove
them, simply set the property <code>printPartCombineTexts</code> to <code>f</code>.
For vocal scores (hymns), there is no need to add &ldquo;solo/a2&rdquo; texts,
so they should be switched off.  However, it might be better not to use
it if there are any solos, as they won&rsquo;t be indicated.  In such cases,
standard polyphonic notation may be preferable.
</p>
<p>This snippet presents the three ways two parts can be printed on a same
staff: standard polyphony, <code>\partcombine</code> without texts, and
<code>\partcombine</code> with texts.
</p>




<pre class="verbatim">musicDown = \relative c'' {
  g4 e4.( d8) c4 |
  r2 g'4( f8 e) |
  d2 \stemDown a
}

\score {
    &lt;&lt;
    \new Staff \with { instrumentName = #&quot;Standard polyphony&quot; }

      &lt;&lt; \musicUp \\ \musicDown &gt;&gt;

    \new Staff \with {
      instrumentName = #&quot;PartCombine without text&quot;
      printPartCombineTexts = ##f
    }

    \partcombine \musicUp \musicDown

    \new Staff \with { instrumentName = #&quot;PartCombine with text&quot; }
      \partcombine \musicUp \musicDown
    &gt;&gt;
  \layout {
    indent = 6.0\cm
    \context {
      \Score
      \override SystemStartBar.collapse-height = #30
    }
  }
}
</pre><p>
 <a href="f3/lily-8c907d99.ly">
  <img align="middle"
       border="0"
       src="f3/lily-8c907d99.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-real-parenthesized-dynamics.ly"></a>

<hr size="6">
<a name="Text_003a-Creating-_0022real_0022-parenthesized-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-combining-two-parts-on-the-same-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Combining two parts on the same staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-creating-simultaneous-rehearsal-marks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Creating simultaneous rehearsal marks &gt; </a>]</td></tr></table>
<a name="text-creating-_0022real_0022-parenthesized-dynamics"></a>
<h2 class="unnumberedsec">Creating &quot;real&quot; parenthesized dynamics</h2>


<p>Although the easiest way to add parentheses to a dynamic mark is to use
a <code>\markup</code> block, this method has a downside: the created
objects will behave like text markups, and not like dynamics.
</p>
<p>However, it is possible to create a similar object using the equivalent
Scheme code (as described in the Notation Reference), combined with the
<code>make-dynamic-script</code> function. This way, the markup will be
regarded as a dynamic, and therefore will remain compatible with
commands such as <code>\dynamicUp</code> or <code>\dynamicDown</code>.
</p>



<pre class="verbatim">paren =
#(define-event-function (dyn) (ly:event?)
   (make-dynamic-script
    #{ \markup \concat {
         \normal-text \italic \fontsize #2 (
	 \pad-x #0.2 #(ly:music-property dyn 'text)
	 \normal-text \italic \fontsize #2 )
       }
    #}))

\relative c'' {
  c4\paren\f c c \dynamicUp c\paren\p
}
</pre><p>
 <a href="8b/lily-4b6a07d1.ly">
  <img align="middle"
       border="0"
       src="8b/lily-4b6a07d1.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-simultaneous-rehearsal-marks.ly"></a>

<hr size="6">
<a name="Text_003a-Creating-simultaneous-rehearsal-marks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-creating-_0022real_0022-parenthesized-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Creating &quot;real&quot; parenthesized dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-creating-text-spanners" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Creating text spanners &gt; </a>]</td></tr></table>
<a name="text-creating-simultaneous-rehearsal-marks"></a>
<h2 class="unnumberedsec">Creating simultaneous rehearsal marks</h2>


<p>Unlike text scripts, rehearsal marks cannot be stacked at a particular
point in a score: only one <code>RehearsalMark</code> object is created.
Using an invisible measure and bar line, an extra rehearsal mark can be
added, giving the appearance of two marks in the same column. This
method may also prove useful for placing rehearsal marks at both the
end of one system and the start of the following system.
</p>

<pre class="verbatim">{
  \key a \major
  \set Score.markFormatter = #format-mark-box-letters
  \once \override Score.RehearsalMark.outside-staff-priority = #5000
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \once \override Score.RehearsalMark.break-align-symbols = #'(key-signature)
  \mark \markup { \bold { Senza denti } }

  % the hidden measure and bar line
  % \cadenzaOn turns off automatic calculation of bar numbers
  \cadenzaOn
  \once \override Score.TimeSignature.stencil = ##f
  \time 1/16
  s16 \bar &quot;&quot;
  \cadenzaOff

  \time 4/4
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \mark \markup { \box \bold Intro }
  d'1
  \mark \default
  d'1
}
</pre><p>
 <a href="e4/lily-94c094d5.ly">
  <img align="middle"
       border="0"
       src="e4/lily-94c094d5.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-text-spanners.ly"></a>

<hr size="6">
<a name="Text_003a-Creating-text-spanners"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-creating-simultaneous-rehearsal-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Creating simultaneous rehearsal marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-demonstrating-all-headers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Demonstrating all headers &gt; </a>]</td></tr></table>
<a name="text-creating-text-spanners"></a>
<h2 class="unnumberedsec">Creating text spanners</h2>


<p>The <code>\startTextSpan</code> and <code>\stopTextSpan</code> commands allow the
creation of text spanners as easily as pedal indications or
octavations. Override some properties of the <code>TextSpanner</code> object
to modify its output.
</p>

<pre class="verbatim">\paper { ragged-right = ##f }

\relative c'' {
  \override TextSpanner.bound-details.left.text = #&quot;bla&quot;
  \override TextSpanner.bound-details.right.text = #&quot;blu&quot;
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \override TextSpanner.style = #'line
  \once \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \override TextSpanner.style = #'dashed-line
  \override TextSpanner.bound-details.left.text =
    \markup { \draw-line #'(0 . 1) }
  \override TextSpanner.bound-details.right.text =
    \markup { \draw-line #'(0 . -2) }
  \once \override TextSpanner.bound-details.right.padding = #-2

  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \set Staff.middleCPosition = #-13
  \override TextSpanner.dash-period = #10
  \override TextSpanner.dash-fraction = #0.5
  \override TextSpanner.thickness = #10
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan
}
</pre><p>
 <a href="96/lily-3ca49b8e.ly">
  <img align="middle"
       border="0"
       src="96/lily-3ca49b8e.png"
       alt="[image of music]">
 </a>
</p>




<a name="demonstrating-all-headers.ly"></a>

<hr size="6">
<a name="Text_003a-Demonstrating-all-headers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-creating-text-spanners" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Creating text spanners&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-embedding-native-postscript-in-a-_005cmarkup-block" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Embedding native PostScript in a \markup block &gt; </a>]</td></tr></table>
<a name="text-demonstrating-all-headers"></a>
<h2 class="unnumberedsec">Demonstrating all headers</h2>

<p>All header fields with special meanings.
</p><pre class="verbatim">\header {
  copyright = &quot;copyright&quot;
  title = &quot;title&quot;
  subtitle = &quot;subtitle&quot;
  composer = &quot;composer&quot;
  arranger = &quot;arranger&quot;
  instrument = &quot;instrument&quot;
  metre = &quot;metre&quot;
  opus = &quot;opus&quot;
  piece = &quot;piece&quot;
  poet = &quot;poet&quot;
  texidoc = &quot;All header fields with special meanings.&quot;
  copyright = &quot;public domain&quot;
  enteredby = &quot;jcn&quot;
  source = &quot;urtext&quot;
}

\layout {
  ragged-right = ##f
}

\score {
  \relative c'' { c1 | c | c | c }
}

\score {
   \relative c'' { c1 | c | c | c }
   \header {
     title = &quot;localtitle&quot;
     subtitle = &quot;localsubtitle&quot;
     composer = &quot;localcomposer&quot;
     arranger = &quot;localarranger&quot;
     instrument = &quot;localinstrument&quot;
     metre = &quot;localmetre&quot;
     opus = &quot;localopus&quot;
     piece = &quot;localpiece&quot;
     poet = &quot;localpoet&quot;
     copyright = &quot;localcopyright&quot;
   }
}
</pre><p>
 <a href="0f/lily-530031e4.ly">
  <img align="middle"
       border="0"
       src="0f/lily-530031e4.png"
       alt="[image of music]">
 </a>
</p>




<a name="embedding-native-postscript-in-a--markup-block.ly"></a>

<hr size="6">
<a name="Text_003a-Embedding-native-PostScript-in-a-_005cmarkup-block"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-demonstrating-all-headers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Demonstrating all headers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-formatting-lyrics-syllables" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Formatting lyrics syllables &gt; </a>]</td></tr></table>
<a name="text-embedding-native-postscript-in-a-_005cmarkup-block"></a>
<h2 class="unnumberedsec">Embedding native PostScript in a \markup block</h2>


<p>PostScript code can be directly inserted inside a <code>\markup</code>
block.
</p>

<pre class="verbatim">% PostScript is a registered trademark of Adobe Systems Inc.

\relative c'' {
  a4-\markup { \postscript #&quot;3 4 moveto 5 3 rlineto stroke&quot; }
  -\markup { \postscript #&quot;[ 0 1 ] 0 setdash 3 5 moveto 5 -3 rlineto stroke &quot; }

  b4-\markup { \postscript #&quot;3 4 moveto 0 0 1 2 8 4 20 3.5 rcurveto stroke&quot; }
  s2
  a'1
}
</pre><p>
 <a href="ca/lily-930b8726.ly">
  <img align="middle"
       border="0"
       src="ca/lily-930b8726.png"
       alt="[image of music]">
 </a>
</p>




<a name="formatting-lyrics-syllables.ly"></a>

<hr size="6">
<a name="Text_003a-Formatting-lyrics-syllables"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-embedding-native-postscript-in-a-_005cmarkup-block" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Embedding native PostScript in a \markup block&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-how-to-put-ties-between-syllables-in-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: How to put ties between syllables in lyrics &gt; </a>]</td></tr></table>
<a name="text-formatting-lyrics-syllables"></a>
<h2 class="unnumberedsec">Formatting lyrics syllables</h2>


<p>Markup mode may be used to format individual syllables in lyrics.
</p>

<pre class="verbatim">mel = \relative c'' { c4 c c c }
lyr = \lyricmode {
  Lyrics \markup { \italic can } \markup { \with-color #red contain }
  \markup { \fontsize #8 \bold Markup! }
}

&lt;&lt;
  \new Voice = melody \mel
  \new Lyrics \lyricsto melody \lyr
&gt;&gt;
</pre><p>
 <a href="0f/lily-65a31eac.ly">
  <img align="middle"
       border="0"
       src="0f/lily-65a31eac.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-put-ties-between-syllables-in-lyrics.ly"></a>

<hr size="6">
<a name="Text_003a-How-to-put-ties-between-syllables-in-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-formatting-lyrics-syllables" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Formatting lyrics syllables&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-lyrics-alignment" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Lyrics alignment &gt; </a>]</td></tr></table>
<a name="text-how-to-put-ties-between-syllables-in-lyrics"></a>
<h2 class="unnumberedsec">How to put ties between syllables in lyrics</h2>


<p>This can be achieved by separating those syllables by tildes.
</p>

<pre class="verbatim">\lyrics {
  wa~o~a
}
</pre><p>
 <a href="f8/lily-4bfe929a.ly">
  <img align="middle"
       border="0"
       src="f8/lily-4bfe929a.png"
       alt="[image of music]">
 </a>
</p>




<a name="lyrics-alignment.ly"></a>

<hr size="6">
<a name="Text_003a-Lyrics-alignment"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-how-to-put-ties-between-syllables-in-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: How to put ties between syllables in lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-markup-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Markup lines &gt; </a>]</td></tr></table>
<a name="text-lyrics-alignment"></a>
<h2 class="unnumberedsec">Lyrics alignment</h2>


<p>Horizontal alignment for lyrics can be set by overriding the
<code>self-alignment-X</code> property of the <code>LyricText</code> object.
<code>#-1</code> is left, <code>#0</code> is center and <code>#1</code> is right;
however, you can use <code>#LEFT</code>, <code>#CENTER</code> and <code>#RIGHT</code> as
well.
</p>

<pre class="verbatim">\layout { ragged-right = ##f }
\relative c'' {
  c1
  c1
  c1
}
\addlyrics {
  \once \override LyricText.self-alignment-X = #LEFT
  &quot;This is left-aligned&quot;
  \once \override LyricText.self-alignment-X = #CENTER
  &quot;This is centered&quot;
  \once \override LyricText.self-alignment-X = #1
  &quot;This is right-aligned&quot;
}
</pre><p>
 <a href="a6/lily-ed20001e.ly">
  <img align="middle"
       border="0"
       src="a6/lily-ed20001e.png"
       alt="[image of music]">
 </a>
</p>




<a name="markup-lines.ly"></a>

<hr size="6">
<a name="Text_003a-Markup-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-lyrics-alignment" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Lyrics alignment&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-multi_002dmeasure-rest-markup" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Multi-measure rest markup &gt; </a>]</td></tr></table>
<a name="text-markup-lines"></a>
<h2 class="unnumberedsec">Markup lines</h2>


<p>Text that can spread over pages is entered with the
<code>\markuplines</code> command.
</p>

<pre class="verbatim">%% updated/modified by P.P.Schneider on Feb. 2014

#(set-default-paper-size &quot;a6&quot;)

#(define-markup-list-command (paragraph layout props args) (markup-list?)
  (interpret-markup-list layout props
   (make-justified-lines-markup-list (cons (make-hspace-markup 2) args))))

% Candide, Voltaire
\markuplist {
  \override-lines #'(baseline-skip . 2.5) {
    \paragraph {
      Il y avait en Westphalie, dans le château de M. le baron de
      Thunder-ten-tronckh, un jeune garçon à qui la nature avait donné
      les mœurs les plus douces.  Sa physionomie annonçait son âme.
      Il avait le jugement assez droit, avec l'esprit le plus
      \concat { simple \hspace #.3 ; }
      c'est, je crois, pour cette raison qu'on le nommait Candide.  Les
      anciens domestiques de la maison soupçonnaient qu'il était fils
      de la sœur de monsieur le baron et d'un bon et honnête
      gentilhomme du voisinage, que cette demoiselle ne voulut jamais
      épouser parce qu'il n'avait pu prouver que soixante et onze
      quartiers, et que le reste de son arbre généalogique avait été
      perdu par l'injure du temps.
    }
    \vspace #.3
    \paragraph {
      Monsieur le baron était un des plus puissants seigneurs de la
      Westphalie, car son château avait une porte et des fenêtres.  Sa
      grande salle même était ornée d'une tapisserie.  Tous les chiens
      de ses basses-cours composaient une meute dans le
      \concat { besoin \hspace #.3 ; }
      ses palefreniers étaient ses
      \concat { piqueurs \hspace #.3 ; }
      le vicaire du village était
      son grand-aumônier.  Ils l'appelaient tous monseigneur, et ils
      riaient quand il faisait des contes.
    }
  }
}
</pre><p>
 <a href="65/lily-12061388.ly">
  <img align="middle"
       border="0"
       src="65/lily-12061388.png"
       alt="[image of music]">
 </a>
</p>




<a name="multi-measure-rest-markup.ly"></a>

<hr size="6">
<a name="Text_003a-Multi_002dmeasure-rest-markup"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-markup-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Markup lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-ottava-text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Ottava text &gt; </a>]</td></tr></table>
<a name="text-multi_002dmeasure-rest-markup"></a>
<h2 class="unnumberedsec">Multi-measure rest markup</h2>


<p>Markups attached to a multi-measure rest will be centered above or
below it.  Long markups attached to multi-measure rests do not cause
the measure to expand.  To expand a multi-measure rest to fit the
markup, use an empty chord with an attached markup before the
multi-measure rest.
</p>
<p>Text attached to a spacer rest in this way is left-aligned to the
position where the note would be placed in the measure, but if the
measure length is determined by the length of the text, the text will
appear to be centered.
</p>

<pre class="verbatim">\relative c' {
  \compressMMRests {
    \textLengthOn
    &lt;&gt;^\markup { [MAJOR GENERAL] }
    R1*19
    &lt;&gt;_\markup { \italic { Cue: ... it is yours } }
    &lt;&gt;^\markup { A }
    R1*30^\markup { [MABEL] }
    \textLengthOff
    c4^\markup { CHORUS } d f c
  }
}
</pre><p>
 <a href="57/lily-ff12d7ff.ly">
  <img align="middle"
       border="0"
       src="57/lily-ff12d7ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="ottava-text.ly"></a>

<hr size="6">
<a name="Text_003a-Ottava-text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-multi_002dmeasure-rest-markup" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Multi-measure rest markup&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-outputting-the-version-number" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Outputting the version number &gt; </a>]</td></tr></table>
<a name="text-ottava-text"></a>
<h2 class="unnumberedsec">Ottava text</h2>


<p>Internally, <code>\ottava</code> sets the properties <code>ottavation</code> (for
example, to <code>8va</code> or <code>8vb</code>) and <code>middleCPosition</code>.  To
override the text of the bracket, set <code>ottavation</code> after invoking
<code>\ottava</code>.
</p>

<pre class="verbatim">{
  \ottava #1
  \set Staff.ottavation = #&quot;8&quot;
  c''1
  \ottava #0
  c'1
  \ottava #1
  \set Staff.ottavation = #&quot;Text&quot;
  c''1
}
</pre><p>
 <a href="11/lily-fdce2e3d.ly">
  <img align="middle"
       border="0"
       src="11/lily-fdce2e3d.png"
       alt="[image of music]">
 </a>
</p>




<a name="outputting-the-version-number.ly"></a>

<hr size="6">
<a name="Text_003a-Outputting-the-version-number"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-ottava-text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Ottava text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-piano-template-with-centered-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Piano template with centered lyrics &gt; </a>]</td></tr></table>
<a name="text-outputting-the-version-number"></a>
<h2 class="unnumberedsec">Outputting the version number</h2>


<p>By putting the output of
    <code>lilypond-version</code> into a lyric, it is possible to print the
    version number of LilyPond in a score, or in a document generated
    with <code>lilypond-book</code>.  Another possibility is to append the
    version number to the doc-string, in this manner:
</p>

<pre class="verbatim">\score {
  \new Lyrics {
    \override Score.RehearsalMark.self-alignment-X = #LEFT
    \mark #(string-append &quot;Processed with LilyPond version &quot; (lilypond-version))
    s2
  }
}
</pre><p>
 <a href="68/lily-8bf445ae.ly">
  <img align="middle"
       border="0"
       src="68/lily-8bf445ae.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-with-centered-lyrics.ly"></a>

<hr size="6">
<a name="Text_003a-Piano-template-with-centered-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-outputting-the-version-number" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Outputting the version number&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-printing-bar-numbers-with-changing-regular-intervals" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Printing bar numbers with changing regular intervals &gt; </a>]</td></tr></table>
<a name="text-piano-template-with-centered-lyrics"></a>
<h2 class="unnumberedsec">Piano template with centered lyrics</h2>


<p>Instead of having a full staff for the melody and lyrics, lyrics can be
centered between the staves of a piano staff.
</p>

<pre class="verbatim">upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = upper { \new Voice = &quot;singer&quot; \upper }
    \new Lyrics \lyricsto &quot;singer&quot; \text
    \new Staff = lower { \lower }
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="8f/lily-fef1140c.ly">
  <img align="middle"
       border="0"
       src="8f/lily-fef1140c.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-bar-numbers-with-changing-regular-intervals.ly"></a>

<hr size="6">
<a name="Text_003a-Printing-bar-numbers-with-changing-regular-intervals"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-piano-template-with-centered-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Piano template with centered lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-printing-marks-at-the-end-of-a-line" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Printing marks at the end of a line &gt; </a>]</td></tr></table>
<a name="text-printing-bar-numbers-with-changing-regular-intervals"></a>
<h2 class="unnumberedsec">Printing bar numbers with changing regular intervals</h2>


<p>The bar number interval can be changed by changing the context function
<code>{set-bar-number-visibility}</code>.
</p>

<pre class="verbatim">\relative c' {
  \override Score.BarNumber.break-visibility = #end-of-line-invisible
  \context Score \applyContext #(set-bar-number-visibility 4)
  \repeat unfold 10 c'1
  \context Score \applyContext #(set-bar-number-visibility 2)
  \repeat unfold 10 c
}
</pre><p>
 <a href="5f/lily-2e47b8c9.ly">
  <img align="middle"
       border="0"
       src="5f/lily-2e47b8c9.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-marks-at-the-end-of-a-line.ly"></a>

<hr size="6">
<a name="Text_003a-Printing-marks-at-the-end-of-a-line"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-printing-bar-numbers-with-changing-regular-intervals" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Printing bar numbers with changing regular intervals&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-printing-marks-on-every-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Printing marks on every staff &gt; </a>]</td></tr></table>
<a name="text-printing-marks-at-the-end-of-a-line"></a>
<h2 class="unnumberedsec">Printing marks at the end of a line</h2>


<p>Marks can be printed at the end of the current line, instead of the
beginning of the following line.  In such cases, it might be preferable
to align the right end of the mark with the bar line.
</p>

<pre class="verbatim">\relative c'' {
  g2 c
  d,2 a'
  \once \override Score.RehearsalMark.break-visibility = #end-of-line-visible
  \once \override Score.RehearsalMark.self-alignment-X = #RIGHT
  \mark &quot;D.C. al Fine&quot;
  \break
  g2 b,
  c1 \bar &quot;||&quot;
}
</pre><p>
 <a href="54/lily-8016ef4d.ly">
  <img align="middle"
       border="0"
       src="54/lily-8016ef4d.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-marks-on-every-staff.ly"></a>

<hr size="6">
<a name="Text_003a-Printing-marks-on-every-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-printing-marks-at-the-end-of-a-line" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Printing marks at the end of a line&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-printing-text-from-right-to-left" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Printing text from right to left &gt; </a>]</td></tr></table>
<a name="text-printing-marks-on-every-staff"></a>
<h2 class="unnumberedsec">Printing marks on every staff</h2>


<p>Although text marks are normally only printed above the topmost staff,
they may also be printed on every staff.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \new Staff { c''1 \mark &quot;molto&quot; c'' }
    \new Staff { c'1 \mark &quot;molto&quot; c' }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Mark_engraver&quot;
      \remove &quot;Staff_collecting_engraver&quot;
    }
    \context {
      \Staff
      \consists &quot;Mark_engraver&quot;
      \consists &quot;Staff_collecting_engraver&quot;
    }
  }
}
</pre><p>
 <a href="f0/lily-5604934a.ly">
  <img align="middle"
       border="0"
       src="f0/lily-5604934a.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-text-from-right-to-left.ly"></a>

<hr size="6">
<a name="Text_003a-Printing-text-from-right-to-left"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-printing-marks-on-every-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Printing marks on every staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-putting-lyrics-inside-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Putting lyrics inside the staff &gt; </a>]</td></tr></table>
<a name="text-printing-text-from-right-to-left"></a>
<h2 class="unnumberedsec">Printing text from right to left</h2>


<p>It is possible to print text from right to left in a markup object, as
demonstrated here.
</p>

<pre class="verbatim">{
  b1^\markup {
    \line { i n g i r u m i m u s n o c t e }
  }
  f'_\markup {
    \override #'(text-direction . -1)
    \line { i n g i r u m i m u s n o c t e }
  }
}
</pre><p>
 <a href="a0/lily-8111190c.ly">
  <img align="middle"
       border="0"
       src="a0/lily-8111190c.png"
       alt="[image of music]">
 </a>
</p>




<a name="putting-lyrics-inside-the-staff.ly"></a>

<hr size="6">
<a name="Text_003a-Putting-lyrics-inside-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-printing-text-from-right-to-left" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Printing text from right to left&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-stand_002dalone-two_002dcolumn-markup" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Stand-alone two-column markup &gt; </a>]</td></tr></table>
<a name="text-putting-lyrics-inside-the-staff"></a>
<h2 class="unnumberedsec">Putting lyrics inside the staff</h2>


<p>Lyrics can be moved vertically to place them inside the staff.  The
lyrics are moved with <code>\override LyricText.extra-offset = #'(0 .
dy)</code> and there are similar commands to move the extenders and hyphens.
The offset needed is established with trial and error.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff &lt;&lt;
    \new Voice = &quot;voc&quot; \relative c' { \stemDown a bes c8 b c4 }
  &gt;&gt;
  \new Lyrics \with {
    \override LyricText.extra-offset = #'(0 . 8.6)
    \override LyricExtender.extra-offset = #'(0 . 8.6)
    \override LyricHyphen.extra-offset = #'(0 . 8.6)
  } \lyricsto &quot;voc&quot; { La la -- la __ _ la }
&gt;&gt;
</pre><p>
 <a href="ae/lily-31a15ff2.ly">
  <img align="middle"
       border="0"
       src="ae/lily-31a15ff2.png"
       alt="[image of music]">
 </a>
</p>




<a name="stand-alone-two-column-markup.ly"></a>

<hr size="6">
<a name="Text_003a-Stand_002dalone-two_002dcolumn-markup"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-putting-lyrics-inside-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Putting lyrics inside the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-string-number-extender-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: String number extender lines &gt; </a>]</td></tr></table>
<a name="text-stand_002dalone-two_002dcolumn-markup"></a>
<h2 class="unnumberedsec">Stand-alone two-column markup</h2>


<p>Stand-alone text may be arranged in several columns using
<code>\markup</code> commands:
</p>

<pre class="verbatim">\markup {
  \fill-line {
    \hspace #1
    \column {
      \line { O sacrum convivium }
      \line { in quo Christus sumitur, }
      \line { recolitur memoria passionis ejus, }
      \line { mens impletur gratia, }
      \line { futurae gloriae nobis pignus datur. }
      \line { Amen. }
    }
    \hspace #2
    \column \italic {
      \line { O sacred feast }
      \line { in which Christ is received, }
      \line { the memory of His Passion is renewed, }
      \line { the mind is filled with grace, }
      \line { and a pledge of future glory is given to us. }
      \line { Amen. }
    }
    \hspace #1
  }
}
</pre><p>
 <a href="dd/lily-b1408a4c.ly">
  <img align="middle"
       border="0"
       src="dd/lily-b1408a4c.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-number-extender-lines.ly"></a>

<hr size="6">
<a name="Text_003a-String-number-extender-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-stand_002dalone-two_002dcolumn-markup" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Stand-alone two-column markup&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-three_002dsided-box" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Three-sided box &gt; </a>]</td></tr></table>
<a name="text-string-number-extender-lines"></a>
<h2 class="unnumberedsec">String number extender lines</h2>


<p>Make an extender line for string number indications, showing that a
series of notes is supposed to be played all on the same string.
</p>

<pre class="verbatim">stringNumberSpanner =
  #(define-music-function (StringNumber) (string?)
    #{
      \override TextSpanner.style = #'solid
      \override TextSpanner.font-size = #-5
      \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
      \override TextSpanner.bound-details.left.text =
        \markup { \circle \number $StringNumber }
    #})


\relative c {
  \clef &quot;treble_8&quot;
  \stringNumberSpanner &quot;5&quot;
  \textSpannerDown
  a8\startTextSpan
  b c d e f\stopTextSpan
  \stringNumberSpanner &quot;4&quot;
  g\startTextSpan a
  bes4 a g2\stopTextSpan
}
</pre><p>
 <a href="a5/lily-2fb3daf1.ly">
  <img align="middle"
       border="0"
       src="a5/lily-2fb3daf1.png"
       alt="[image of music]">
 </a>
</p>




<a name="three-sided-box.ly"></a>

<hr size="6">
<a name="Text_003a-Three_002dsided-box"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-string-number-extender-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: String number extender lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-utf_002d8" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: UTF-8 &gt; </a>]</td></tr></table>
<a name="text-three_002dsided-box"></a>
<h2 class="unnumberedsec">Three-sided box</h2>


<p>This example shows how to add a markup command to get a three sided box
around some text (or other markup).
</p>

<pre class="verbatim">% New command to add a three sided box, with sides north, west and south
% Based on the box-stencil command defined in scm/stencil.scm
% Note that &quot;;;&quot; is used to comment a line in Scheme
#(define-public (NWS-box-stencil stencil thickness padding)
   &quot;Add a box around STENCIL, producing a new stencil.&quot;
   (let* ((x-ext (interval-widen (ly:stencil-extent stencil X) padding))
          (y-ext (interval-widen (ly:stencil-extent stencil Y) padding))
          (y-rule (make-filled-box-stencil (cons 0 thickness) y-ext))
          (x-rule (make-filled-box-stencil
                   (interval-widen x-ext thickness) (cons 0 thickness))))
     ;; (set! stencil (ly:stencil-combine-at-edge stencil X 1 y-rule padding))
     (set! stencil (ly:stencil-combine-at-edge stencil X LEFT y-rule padding))
     (set! stencil (ly:stencil-combine-at-edge stencil Y UP x-rule 0.0))
     (set! stencil (ly:stencil-combine-at-edge stencil Y DOWN x-rule 0.0))
     stencil))

% The corresponding markup command, based on the \box command defined
% in scm/define-markup-commands.scm
#(define-markup-command (NWS-box layout props arg) (markup?)
   #:properties ((thickness 0.1) (font-size 0) (box-padding 0.2))
   &quot;Draw a box round @var{arg}.  Looks at @code{thickness},
@code{box-padding} and @code{font-size} properties to determine line
thickness and padding around the markup.&quot;
   (let ((pad (* (magstep font-size) box-padding))
         (m (interpret-markup layout props arg)))
     (NWS-box-stencil m thickness pad)))

% Test it:

\relative c' {
  c1^\markup { \NWS-box ABCD }
  c1^\markup { \NWS-box \note #&quot;4&quot; #1.0 }
}
</pre><p>
 <a href="bc/lily-d950329d.ly">
  <img align="middle"
       border="0"
       src="bc/lily-d950329d.png"
       alt="[image of music]">
 </a>
</p>




<a name="utf-8.ly"></a>

<hr size="6">
<a name="Text_003a-UTF_002d8"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-three_002dsided-box" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Three-sided box&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Vocal ensemble template with lyrics aligned below and above the staves &gt; </a>]</td></tr></table>
<a name="text-utf_002d8"></a>
<h2 class="unnumberedsec">UTF-8</h2>


<p>Various scripts may be used for texts (like titles and lyrics) by
entering them in UTF-8 encoding, and using a Pango based backend.
Depending on the fonts installed, this fragment will render Bulgarian
(Cyrillic), Hebrew, Japanese and Portuguese.
</p>

<pre class="verbatim">% Font settings for Cyrillic and Hebrew
% Linux Libertine fonts contain Cyrillic and Hebrew glyphs.
\paper {
  #(define fonts
    (set-global-fonts
     #:roman &quot;Linux Libertine O,serif&quot;
     #:sans &quot;Linux Biolinum O,sans-serif&quot;
     #:typewriter &quot;Linux Libertine Mono O,monospace&quot;
   ))
}

% Cyrillic font
bulgarian = \lyricmode {
  Жълтата дюля беше щастлива, че пухът, който цъфна, замръзна като гьон.
}

hebrew = \lyricmode {
  זה כיף סתם לשמוע איך תנצח קרפד עץ טוב בגן.
}

japanese = \lyricmode {
  いろはにほへど ちりぬるを
  わがよたれぞ  つねならむ
  うゐのおくや  まけふこえて
  あさきゆめみじ ゑひもせず
}

% &quot;a legal song to you&quot;
portuguese = \lyricmode {
  à vo -- cê uma can -- ção legal
}

\relative c' {
  c2 d
  e2 f
  g2 f
  e1
}
\addlyrics { \bulgarian }
\addlyrics { \hebrew }
\addlyrics { \japanese }
\addlyrics { \portuguese }
</pre><p>
 <a href="81/lily-c9a0120a.ly">
  <img align="middle"
       border="0"
       src="81/lily-c9a0120a.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves.ly"></a>

<hr size="6">
<a name="Text_003a-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-utf_002d8" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: UTF-8&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#text-volta-text-markup-using-repeatcommands" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Text: Volta text markup using repeatCommands &gt; </a>]</td></tr></table>
<a name="text-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<h2 class="unnumberedsec">Vocal ensemble template with lyrics aligned below and above the staves</h2>


<p>This template is basically the same as the simple &ldquo;Vocal ensemble&rdquo;
template, with the exception that here all the lyrics lines are placed
using <code>alignAboveContext</code> and <code>alignBelowContext</code>.
</p>

<pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff = &quot;women&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
      \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;women&quot; }
      \lyricsto &quot;sopranos&quot; \sopWords
    \new Lyrics \with { alignBelowContext = #&quot;women&quot; }
      \lyricsto &quot;altos&quot; \altoWords
    % we could remove the line about this with the line below, since
    % we want the alto lyrics to be below the alto Voice anyway.
    % \new Lyrics \lyricsto &quot;altos&quot; \altoWords

    \new Staff = &quot;men&quot; &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
      \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;men&quot; }
      \lyricsto &quot;tenors&quot; \tenorWords
    \new Lyrics \with { alignBelowContext = #&quot;men&quot; }
      \lyricsto &quot;basses&quot; \bassWords
    % again, we could replace the line above this with the line below.
    % \new Lyrics \lyricsto &quot;basses&quot; \bassWords
  &gt;&gt;
}
</pre><p>
 <a href="8b/lily-01f33d94.ly">
  <img align="middle"
       border="0"
       src="8b/lily-01f33d94.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-text-markup-using-repeatcommands.ly"></a>

<hr size="6">
<a name="Text_003a-Volta-text-markup-using-repeatCommands"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#vocal-music" title="Next chapter">&nbsp;Vocal music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Vocal ensemble template with lyrics aligned below and above the staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#text" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Text&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music &gt; </a>]</td></tr></table>
<a name="text-volta-text-markup-using-repeatcommands"></a>
<h2 class="unnumberedsec">Volta text markup using repeatCommands</h2>


<p>Though volte are best specified using <code>\repeat volta</code>, the
context property <code>repeatCommands</code> must be used in cases where the
volta text needs more advanced formatting with <code>\markup</code>.
</p>

<p>Since <code>repeatCommands</code> takes a list, the simplest method of
including markup is to use an identifier for the text and embed it in
the command list using the Scheme syntax <code>#(list (list 'volta
textIdentifier))</code>. Start- and end-repeat commands can be added as
separate list elements:
</p>

<pre class="verbatim">voltaAdLib = \markup { 1. 2. 3... \text \italic { ad lib. } }

\relative c'' {
  c1
  \set Score.repeatCommands = #(list (list 'volta voltaAdLib) 'start-repeat)
  c4 b d e
  \set Score.repeatCommands = #'((volta #f) (volta &quot;4.&quot;) end-repeat)
  f1
  \set Score.repeatCommands = #'((volta #f))
}
</pre><p>
 <a href="18/lily-3265464a.ly">
  <img align="middle"
       border="0"
       src="18/lily-3265464a.png"
       alt="[image of music]">
 </a>
</p>





<hr size="6">
<a name="Vocal-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#text" title="Beginning of this chapter or previous chapter"> &lt;&lt; Text&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#text-volta-text-markup-using-repeatcommands" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Text: Volta text markup using repeatCommands&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-adding-ambitus-per-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Adding ambitus per voice &gt; </a>]</td></tr></table>
<a name="vocal-music"></a>
<h1 class="unnumbered">Vocal music</h1>

<a name="index-Vocal-music"></a>
<p><a href="notation-big-page.html#vocal-music">Vocal music</a>
</p>

<a name="adding-ambitus-per-voice.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Adding-ambitus-per-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-adding-indicators-to-staves-which-get-split-after-a-break" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Adding indicators to staves which get split after a break &gt; </a>]</td></tr></table>
<a name="vocal-music-adding-ambitus-per-voice"></a>
<h2 class="unnumberedsec">Adding ambitus per voice</h2>


<p>Ambitus can be added per voice. In this case, the ambitus must be moved
manually to prevent collisions.
</p>

<pre class="verbatim">\new Staff &lt;&lt;
  \new Voice \with {
    \consists &quot;Ambitus_engraver&quot;
  } \relative c'' {
    \override Ambitus.X-offset = #2.0
    \voiceOne
    c4 a d e
    f1
  }
  \new Voice \with {
    \consists &quot;Ambitus_engraver&quot;
  } \relative c' {
    \voiceTwo
    es4 f g as
    b1
  }
&gt;&gt;
</pre><p>
 <a href="53/lily-04b16abb.ly">
  <img align="middle"
       border="0"
       src="53/lily-04b16abb.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-indicators-to-staves-which-get-split-after-a-break.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Adding-indicators-to-staves-which-get-split-after-a-break"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-adding-ambitus-per-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Adding ambitus per voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-adding-orchestral-cues-to-a-vocal-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Adding orchestral cues to a vocal score &gt; </a>]</td></tr></table>
<a name="vocal-music-adding-indicators-to-staves-which-get-split-after-a-break"></a>
<h2 class="unnumberedsec">Adding indicators to staves which get split after a break</h2>


<p>This snippet defines the <code>\splitStaffBarLine</code>,
<code>convUpStaffBarLine</code> and <code>convDownStaffBarLine</code> commands.
These add arrows at a bar line, to denote that several voices sharing a
staff will each continue on a staff of their own in the next system, or
that voices split in this way recombine.
</p>

<pre class="verbatim">#(define-markup-command (arrow-at-angle layout props angle-deg length fill)
   (number? number? boolean?)
   (let* (
           (PI-OVER-180 (/ (atan 1 1) 34))
           (degrees-&gt;radians (lambda (degrees) (* degrees PI-OVER-180)))
           (angle-rad (degrees-&gt;radians angle-deg))
           (target-x (* length (cos angle-rad)))
           (target-y (* length (sin angle-rad))))
     (interpret-markup layout props
       (markup
        #:translate (cons (/ target-x 2) (/ target-y 2))
        #:rotate angle-deg
        #:translate (cons (/ length -2) 0)
        #:concat (#:draw-line (cons length 0)
                   #:arrow-head X RIGHT fill)))))


splitStaffBarLineMarkup = \markup \with-dimensions #'(0 . 0) #'(0 . 0) {
  \combine
  \arrow-at-angle #45 #(sqrt 8) ##t
  \arrow-at-angle #-45 #(sqrt 8) ##t
}

splitStaffBarLine = {
  \once \override Staff.BarLine.stencil =
  #(lambda (grob)
     (ly:stencil-combine-at-edge
      (ly:bar-line::print grob)
      X RIGHT
      (grob-interpret-markup grob splitStaffBarLineMarkup)
      0))
  \break
}

convDownStaffBarLine = {
  \once \override Staff.BarLine.stencil =
  #(lambda (grob)
     (ly:stencil-combine-at-edge
      (ly:bar-line::print grob)
      X RIGHT
      (grob-interpret-markup grob #{
        \markup\with-dimensions #'(0 . 0) #'(0 . 0) {
          \translate #'(0 . -.13)\arrow-at-angle #-45 #(sqrt 8) ##t
        }#})
      0))
  \break
}

convUpStaffBarLine = {
  \once \override Staff.BarLine.stencil =
  #(lambda (grob)
     (ly:stencil-combine-at-edge
      (ly:bar-line::print grob)
      X RIGHT
      (grob-interpret-markup grob #{
        \markup\with-dimensions #'(0 . 0) #'(0 . 0) {
          \translate #'(0 . .14)\arrow-at-angle #45 #(sqrt 8) ##t
        }#})
      0))
  \break
}


\paper {
  ragged-right = ##t
  short-indent = 10\mm
}

separateSopranos = {
  \set Staff.instrumentName = &quot;AI AII&quot;
  \set Staff.shortInstrumentName = &quot;AI AII&quot;
  \splitStaffBarLine
  \change Staff = &quot;up&quot;
}
convSopranos = {
  \convDownStaffBarLine
  \change Staff = &quot;shared&quot;
  \set Staff.instrumentName = &quot;S A&quot;
  \set Staff.shortInstrumentName = &quot;S A&quot;
}

sI = {
  \voiceOne
  \repeat unfold 4 f''2
  \separateSopranos
  \repeat unfold 4 g''2
  \convSopranos
  \repeat unfold 4 c''2
}
sII = {
  s1*2
  \voiceTwo
  \change Staff = &quot;up&quot;
  \repeat unfold 4 d''2
}
aI = {
  \voiceTwo
  \repeat unfold 4 a'2
  \voiceOne
  \repeat unfold 4 b'2
  \convUpStaffBarLine
  \voiceTwo
  \repeat unfold 4 g'2
}
aII = {
  s1*2
  \voiceTwo
  \repeat unfold 4 g'2
}
ten = {
  \voiceOne
  \repeat unfold 4 c'2
  \repeat unfold 4 d'2
  \repeat unfold 4 c'2
}
bas = {
  \voiceTwo
  \repeat unfold 4 f2
  \repeat unfold 4 g2
  \repeat unfold 4 c2
}

\score {
  &lt;&lt;
    \new ChoirStaff &lt;&lt;
      \new Staff = up \with {
        instrumentName = &quot;SI SII&quot;
        shortInstrumentName = &quot;SI SII&quot;
      } {
        s1*4
      }

      \new Staff = shared \with {
        instrumentName = &quot;S A&quot;
        shortInstrumentName = &quot;S A&quot;
      } &lt;&lt;
        \new Voice = sopI \sI
        \new Voice = sopII \sII
        \new Voice = altI \aI
        \new Voice = altII \aII
      &gt;&gt;
      \new Lyrics \with {
        alignBelowContext = up
      }
      \lyricsto sopII { e f g h }
      \new Lyrics \lyricsto altI { a b c d e f g h i j k l }

      \new Staff = men \with {
        instrumentName = &quot;T B&quot;
        shortInstrumentName = &quot;T B&quot;
      } &lt;&lt;
        \clef F
        \new Voice = ten \ten
        \new Voice = bas \bas
      &gt;&gt;
      \new Lyrics \lyricsto bas { a b c d e f g h i j k l }
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context {
      \Staff \RemoveEmptyStaves
      \override VerticalAxisGroup.remove-first = ##t
    }
  }
}
</pre><p>
 <a href="77/lily-56c42df3.ly">
  <img align="middle"
       border="0"
       src="77/lily-56c42df3.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-orchestral-cues-to-a-vocal-score.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Adding-orchestral-cues-to-a-vocal-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-adding-indicators-to-staves-which-get-split-after-a-break" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Adding indicators to staves which get split after a break&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-adjusting-lyrics-vertical-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Adjusting lyrics vertical spacing &gt; </a>]</td></tr></table>
<a name="vocal-music-adding-orchestral-cues-to-a-vocal-score"></a>
<h2 class="unnumberedsec">Adding orchestral cues to a vocal score</h2>


<p>This shows one approach to simplify adding many orchestral cues to the
piano reduction in a vocal score.  The music function <code>\cueWhile</code>
takes four arguments: the music from which the cue is to be taken, as
defined by <code>\addQuote</code>, the name to be inserted before the cue
notes, then either <code>#UP</code> or <code>#DOWN</code> to specify either
<code>\voiceOne</code> with the name above the staff or <code>\voiceTwo</code>
with the name below the staff, and finally the piano music in parallel
with which the cue notes are to appear.  The name of the cued
instrument is positioned to the left of the cued notes. Many passages
can be cued, but they cannot overlap each other in time.
</p>

<pre class="verbatim">cueWhile =
#(define-music-function
   (instrument name dir music)
   (string? string? ly:dir? ly:music?)
   #{
     \cueDuring $instrument #dir {
       \once \override TextScript.self-alignment-X = #RIGHT
       \once \override TextScript.direction = $dir
       &lt;&gt;-\markup { \tiny #name }
       $music
     }
   #})

flute = \relative c'' {
  \transposition c'
  s4 s4 e g
}
\addQuote &quot;flute&quot; { \flute }

clarinet = \relative c' {
  \transposition bes
  fis4 d d c
}
\addQuote &quot;clarinet&quot; { \clarinet }

singer = \relative c'' { c4. g8 g4 bes4 }
words = \lyricmode { here's the lyr -- ics }

pianoRH = \relative c'' {
  \transposition c'
  \cueWhile &quot;clarinet&quot; &quot;Clar.&quot; #DOWN { c4. g8 }
  \cueWhile &quot;flute&quot; &quot;Flute&quot; #UP { g4 bes4 }
}
pianoLH = \relative c { c4 &lt;c' e&gt; e, &lt;g c&gt; }

\score {
  &lt;&lt;
    \new Staff {
      \new Voice = &quot;singer&quot; {
        \singer
      }
    }
    \new Lyrics {
      \lyricsto &quot;singer&quot;
      \words
    }
    \new PianoStaff &lt;&lt;
      \new Staff {
        \new Voice {
          \pianoRH
        }
      }
      \new Staff {
        \clef &quot;bass&quot;
        \pianoLH
      }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="94/lily-b8fcef02.ly">
  <img align="middle"
       border="0"
       src="94/lily-b8fcef02.png"
       alt="[image of music]">
 </a>
</p>




<a name="adjusting-lyrics-vertical-spacing.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Adjusting-lyrics-vertical-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-adding-orchestral-cues-to-a-vocal-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Adding orchestral cues to a vocal score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-aligning-syllables-with-melisma" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Aligning syllables with melisma &gt; </a>]</td></tr></table>
<a name="vocal-music-adjusting-lyrics-vertical-spacing"></a>
<h2 class="unnumberedsec">Adjusting lyrics vertical spacing</h2>


<p>This snippet shows how to bring the lyrics line closer to the staff.
</p>

<pre class="verbatim">% Default layout:
&lt;&lt;
  \new Staff \new Voice = melody \relative c' {
    c4 d e f
    g4 f e d
    c1
  }
  \new Lyrics \lyricsto melody { aa aa aa aa aa aa aa aa aa }

  \new Staff {
    \new Voice = melody \relative c' {
      c4 d e f
      g4 f e d
      c1
    }
  }
  % Reducing the minimum space below the staff and above the lyrics:
  \new Lyrics \with {
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing =
      #'((basic-distance . 1))
  }
  \lyricsto melody { aa aa aa aa aa aa aa aa aa }
&gt;&gt;
</pre><p>
 <a href="8e/lily-6a2f611e.ly">
  <img align="middle"
       border="0"
       src="8e/lily-6a2f611e.png"
       alt="[image of music]">
 </a>
</p>




<a name="aligning-syllables-with-melisma.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Aligning-syllables-with-melisma"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-adjusting-lyrics-vertical-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Adjusting lyrics vertical spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-ambitus-with-multiple-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Ambitus with multiple voices &gt; </a>]</td></tr></table>
<a name="vocal-music-aligning-syllables-with-melisma"></a>
<h2 class="unnumberedsec">Aligning syllables with melisma</h2>


<p>By default, lyrics syllables that start a melisma are left aligned on
their note.  The alignment can be altered using the
<code>lyricMelismaAlignment</code> property.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \new Staff {
      \relative c''
      \new Voice = &quot;vocal&quot; {
        c d~^\markup default  d e
        c d~^\markup &quot;right aligned&quot; d e
        c d~^\markup &quot;center aligned&quot; d e
        c d~^\markup &quot;reset to default&quot; d e
      }
    }
    \new Lyrics \lyricsto &quot;vocal&quot; {
      word word word
      \set lyricMelismaAlignment = #RIGHT
      word word word
      \set lyricMelismaAlignment = #CENTER
      word word word
      \unset lyricMelismaAlignment
      word word word
    }
  &gt;&gt;
}
</pre><p>
 <a href="59/lily-80e3035f.ly">
  <img align="middle"
       border="0"
       src="59/lily-80e3035f.png"
       alt="[image of music]">
 </a>
</p>




<a name="ambitus-with-multiple-voices.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Ambitus-with-multiple-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-aligning-syllables-with-melisma" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Aligning syllables with melisma&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-ambitus" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Ambitus &gt; </a>]</td></tr></table>
<a name="vocal-music-ambitus-with-multiple-voices"></a>
<h2 class="unnumberedsec">Ambitus with multiple voices</h2>


<p>Adding the <code>Ambitus_engraver</code> to the <code>Staff</code> context creates
a single ambitus per staff, even in the case of staves with multiple
voices.
</p>

<pre class="verbatim">\new Staff \with {
  \consists &quot;Ambitus_engraver&quot;
  }
&lt;&lt;
  \new Voice \relative c'' {
    \voiceOne
    c4 a d e
    f1
  }
  \new Voice \relative c' {
    \voiceTwo
    es4 f g as
    b1
  }
&gt;&gt;
</pre><p>
 <a href="96/lily-df33b2cc.ly">
  <img align="middle"
       border="0"
       src="96/lily-df33b2cc.png"
       alt="[image of music]">
 </a>
</p>




<a name="ambitus.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Ambitus"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-ambitus-with-multiple-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Ambitus with multiple voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-ancient-notation-template-_002d-modern-transcription-of-gregorian-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Ancient notation template -- modern transcription of gregorian music &gt; </a>]</td></tr></table>
<a name="vocal-music-ambitus"></a>
<h2 class="unnumberedsec">Ambitus</h2>


<p>Ambitus indicate pitch ranges for voices.
</p>

<p>Accidentals only show up if they are not part of the key signature.
<code>AmbitusNoteHead</code> grobs also have ledger lines.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Ambitus_engraver&quot;
  }
}

&lt;&lt;
  \new Staff {
    \relative c' {
      \time 2/4
      c4 f'
    }
  }
  \new Staff {
    \relative c' {
      \time  2/4
      \key d \major
      cis4 as'
    }
  }
&gt;&gt;
</pre><p>
 <a href="47/lily-5e5c67f8.ly">
  <img align="middle"
       border="0"
       src="47/lily-5e5c67f8.png"
       alt="[image of music]">
 </a>
</p>




<a name="ancient-notation-template----modern-transcription-of-gregorian-music.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-ambitus" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Ambitus&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-anglican-psalm-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Anglican psalm template &gt; </a>]</td></tr></table>
<a name="vocal-music-ancient-notation-template-_002d-modern-transcription-of-gregorian-music"></a>
<h2 class="unnumberedsec">Ancient notation template &ndash; modern transcription of gregorian music</h2>


<p>This example demonstrates how to do modern transcription of Gregorian
music. Gregorian music has no measure, no stems; it uses only half and
quarter note heads, and special marks, indicating rests of different
length.
</p>

<pre class="verbatim">\include &quot;gregorian.ly&quot;

chant = \relative c' {
  \set Score.timing = ##f
  f4 a2 \divisioMinima
  g4 b a2 f2 \divisioMaior
  g4( f) f( g) a2 \finalis
}

verba = \lyricmode {
  Lo -- rem ip -- sum do -- lor sit a -- met
}

\score {
  \new Staff &lt;&lt;
    \new Voice = &quot;melody&quot; \chant
    \new Lyrics = &quot;one&quot; \lyricsto melody \verba
  &gt;&gt;
  \layout {
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Bar_engraver&quot;
      \hide Stem
    }
    \context {
      \Voice
      \override Stem.length = #0
    }
    \context {
      \Score
      barAlways = ##t
    }
  }
}
</pre><p>
 <a href="7b/lily-377306ba.ly">
  <img align="middle"
       border="0"
       src="7b/lily-377306ba.png"
       alt="[image of music]">
 </a>
</p>




<a name="anglican-psalm-template.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Anglican-psalm-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-ancient-notation-template-_002d-modern-transcription-of-gregorian-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Ancient notation template -- modern transcription of gregorian music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-arranging-separate-lyrics-on-a-single-line" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Arranging separate lyrics on a single line &gt; </a>]</td></tr></table>
<a name="vocal-music-anglican-psalm-template"></a>
<h2 class="unnumberedsec">Anglican psalm template</h2>


<p>This template shows one way of setting out an Anglican psalm chant. It
also shows how the verses may be added as stand-alone text under the
music.  The two verses are coded in different styles to demonstrate
more possibilities.
</p>

<pre class="verbatim">SopranoMusic = \relative g' {
  g1 | c2 b | a1 | \bar &quot;||&quot;
  a1 | d2 c | c b | c1 | \bar &quot;||&quot;
}

AltoMusic = \relative c' {
  e1 | g2 g | f1 |
  f1 | f2 e | d d | e1 |
}

TenorMusic = \relative a {
  c1 | c2 c | c1 |
  d1 | g,2 g | g g | g1 |
}

BassMusic =  \relative c {
  c1 | e2 e | f1 |
  d1 | b2 c | g' g | c,1 |
}

global = {
  \time 2/2
}

dot = \markup {
  \raise #0.7 \musicglyph #&quot;dots.dot&quot;
}

tick = \markup {
  \raise #1 \fontsize #-5 \musicglyph #&quot;scripts.rvarcomma&quot;
}

% Use markup to center the chant on the page
\markup {
  \fill-line {
    \score {  % centered
      &lt;&lt;
        \new ChoirStaff &lt;&lt;
          \new Staff &lt;&lt;
            \global
            \clef &quot;treble&quot;
            \new Voice = &quot;Soprano&quot; &lt;&lt;
              \voiceOne
              \SopranoMusic
            &gt;&gt;
            \new Voice = &quot;Alto&quot; &lt;&lt;
              \voiceTwo
              \AltoMusic
            &gt;&gt;
          &gt;&gt;
          \new Staff &lt;&lt;
            \clef &quot;bass&quot;
            \global
            \new Voice = &quot;Tenor&quot; &lt;&lt;
              \voiceOne
              \TenorMusic
            &gt;&gt;
            \new Voice = &quot;Bass&quot; &lt;&lt;
              \voiceTwo
              \BassMusic
            &gt;&gt;
          &gt;&gt;
        &gt;&gt;
      &gt;&gt;
      \layout {
        \context {
          \Score
          \override SpacingSpanner.base-shortest-duration = #(ly:make-moment 1/2)
        }
        \context {
          \Staff
          \remove &quot;Time_signature_engraver&quot;
        }
      }
    }  % End score
  }
}  % End markup

\markup {
  \fill-line {
    \column {
      \left-align {
        \null \null \null
        \line {
          \fontsize #5 O
          \fontsize #3 come
          let us \bold sing | unto \dot the | Lord : let
        }
        \line {
          us heartily
          \concat { re \bold joice }
          in the | strength of | our
        }
        \line {
          sal | vation.
        }
        \null
        \line {
          \hspace #2.5 8. Today if ye will hear his voice *
        }
        \line {
          \concat { \bold hard en }
          \tick not your \tick hearts : as in the pro-
        }
        \line {
          vocation * and as in the \bold day of tempt- \tick
        }
        \line {
          -ation \tick in the \tick wilderness.
        }
      }
    }
  }
}
</pre><p>
 <a href="01/lily-e41e14d9.ly">
  <img align="middle"
       border="0"
       src="01/lily-e41e14d9.png"
       alt="[image of music]">
 </a>
</p>




<a name="arranging-separate-lyrics-on-a-single-line.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Arranging-separate-lyrics-on-a-single-line"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-anglican-psalm-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Anglican psalm template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-changing-stanza-fonts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Changing stanza fonts &gt; </a>]</td></tr></table>
<a name="vocal-music-arranging-separate-lyrics-on-a-single-line"></a>
<h2 class="unnumberedsec">Arranging separate lyrics on a single line</h2>


<p>Sometimes you may want to put lyrics for different performers on a
single line: where there is rapidly alternating text, for example.
This snippet shows how this can be done with <code>\override
VerticalAxisGroup.nonstaff-nonstaff-spacing.minimum-distance = ##f</code>.
</p>

<pre class="verbatim">\layout {
  \context {
    \Lyrics
    \override VerticalAxisGroup.nonstaff-nonstaff-spacing.minimum-distance = ##f
  }
}

aliceSings = \markup { \smallCaps &quot;Alice&quot; }
eveSings = \markup { \smallCaps &quot;Eve&quot; }

&lt;&lt;
  \new Staff &lt;&lt;
    \new Voice = &quot;alice&quot; {
      f'4^\aliceSings g' r2 |
      s1 |
      f'4^\aliceSings g' r2 |
      s1 | \break
      % ...

      \voiceOne
      s2 a'8^\aliceSings a' b'4 |
      \oneVoice
      g'1
    }
    \new Voice = &quot;eve&quot; {
      s1 |
      a'2^\eveSings g' |
      s1 |
      a'2^\eveSings g'
      % ...

      \voiceTwo
      f'4^\eveSings a'8 g' f'4 e' |
      \oneVoice
      s1
    }
  &gt;&gt;
  \new Lyrics \lyricsto &quot;alice&quot; {
    may -- be
    sec -- ond
    % ...
    Shut up, you fool!
  }
  \new Lyrics \lyricsto &quot;eve&quot; {
    that the
    words are
    % ...
    …and then I was like–
  }
&gt;&gt;
</pre><p>
 <a href="e7/lily-58e32d9c.ly">
  <img align="middle"
       border="0"
       src="e7/lily-58e32d9c.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-stanza-fonts.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Changing-stanza-fonts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-arranging-separate-lyrics-on-a-single-line" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Arranging separate lyrics on a single line&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-chant-or-psalms-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Chant or psalms notation &gt; </a>]</td></tr></table>
<a name="vocal-music-changing-stanza-fonts"></a>
<h2 class="unnumberedsec">Changing stanza fonts</h2>


<p>Fonts can be changed independently for each stanza, including the font
used for printing the stanza number.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  g2 e4
  a2 f4
  g2.
}
\addlyrics {
  \set stanza = #&quot;1. &quot;
  Hi, my name is Bert.
}
\addlyrics {
  \override StanzaNumber.font-name = #&quot;DejaVu Sans&quot;
  \set stanza = #&quot;2. &quot;
  \override LyricText.font-family = #'typewriter
  Oh, ché -- ri, je t'aime
}
</pre><p>
 <a href="f3/lily-59c4637b.ly">
  <img align="middle"
       border="0"
       src="f3/lily-59c4637b.png"
       alt="[image of music]">
 </a>
</p>




<a name="chant-or-psalms-notation.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Chant-or-psalms-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-changing-stanza-fonts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Changing stanza fonts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-forcing-hyphens-to-be-shown" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Forcing hyphens to be shown &gt; </a>]</td></tr></table>
<a name="vocal-music-chant-or-psalms-notation"></a>
<h2 class="unnumberedsec">Chant or psalms notation</h2>


<p>This form of notation is used for Psalm chant, where verses aren&rsquo;t
always the same length.
</p>

<pre class="verbatim">stemOff = \hide Staff.Stem
stemOn  = \undo \stemOff

\score {
  \new Staff \with { \remove &quot;Time_signature_engraver&quot; }
  {
    \key g \minor
    \cadenzaOn
    \stemOff a'\breve bes'4 g'4
    \stemOn a'2 \bar &quot;||&quot;
    \stemOff a'\breve g'4 a'4
    \stemOn f'2 \bar &quot;||&quot;
    \stemOff a'\breve^\markup { \italic flexe }
    \stemOn g'2 \bar &quot;||&quot;
  }
}
</pre><p>
 <a href="6c/lily-0d850cf4.ly">
  <img align="middle"
       border="0"
       src="6c/lily-0d850cf4.png"
       alt="[image of music]">
 </a>
</p>




<a name="forcing-hyphens-to-be-shown.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Forcing-hyphens-to-be-shown"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-chant-or-psalms-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Chant or psalms notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-formatting-lyrics-syllables" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Formatting lyrics syllables &gt; </a>]</td></tr></table>
<a name="vocal-music-forcing-hyphens-to-be-shown"></a>
<h2 class="unnumberedsec">Forcing hyphens to be shown</h2>


<p>If LilyPond does not think there is space for a hyphen, it will be
omitted.  The behaviour can be overridden with the
<code>minimum-distance</code> property of <code>LyricHyphen</code>.
</p>

<pre class="verbatim">\relative c'' {
  c32 c c c
  c32 c c c
  c32 c c c
  c32 c c c
}
\addlyrics {
  syl -- lab word word
  \override LyricHyphen.minimum-distance = #1.0
  syl -- lab word word
  \override LyricHyphen.minimum-distance = #2.0
  syl -- lab word word
  \revert LyricHyphen.minimum-distance
  syl -- lab word word
}
</pre><p>
 <a href="74/lily-04e4a08e.ly">
  <img align="middle"
       border="0"
       src="74/lily-04e4a08e.png"
       alt="[image of music]">
 </a>
</p>




<a name="formatting-lyrics-syllables.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Formatting-lyrics-syllables"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-forcing-hyphens-to-be-shown" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Forcing hyphens to be shown&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-how-to-put-ties-between-syllables-in-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: How to put ties between syllables in lyrics &gt; </a>]</td></tr></table>
<a name="vocal-music-formatting-lyrics-syllables"></a>
<h2 class="unnumberedsec">Formatting lyrics syllables</h2>


<p>Markup mode may be used to format individual syllables in lyrics.
</p>

<pre class="verbatim">mel = \relative c'' { c4 c c c }
lyr = \lyricmode {
  Lyrics \markup { \italic can } \markup { \with-color #red contain }
  \markup { \fontsize #8 \bold Markup! }
}

&lt;&lt;
  \new Voice = melody \mel
  \new Lyrics \lyricsto melody \lyr
&gt;&gt;
</pre><p>
 <a href="0f/lily-65a31eac.ly">
  <img align="middle"
       border="0"
       src="0f/lily-65a31eac.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-put-ties-between-syllables-in-lyrics.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-How-to-put-ties-between-syllables-in-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-formatting-lyrics-syllables" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Formatting lyrics syllables&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-hymn-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Hymn template &gt; </a>]</td></tr></table>
<a name="vocal-music-how-to-put-ties-between-syllables-in-lyrics"></a>
<h2 class="unnumberedsec">How to put ties between syllables in lyrics</h2>


<p>This can be achieved by separating those syllables by tildes.
</p>

<pre class="verbatim">\lyrics {
  wa~o~a
}
</pre><p>
 <a href="f8/lily-4bfe929a.ly">
  <img align="middle"
       border="0"
       src="f8/lily-4bfe929a.png"
       alt="[image of music]">
 </a>
</p>




<a name="hymn-template.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Hymn-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-how-to-put-ties-between-syllables-in-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: How to put ties between syllables in lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-lyrics-alignment" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Lyrics alignment &gt; </a>]</td></tr></table>
<a name="vocal-music-hymn-template"></a>
<h2 class="unnumberedsec">Hymn template</h2>


<p>This code shows one way of setting out a hymn tune when each line
starts and ends with a partial measure.  It also shows how to add the
verses as stand-alone text under the music.
</p>

<pre class="verbatim">Timeline = {
  \time 4/4
  \tempo 4=96
  \partial 2
  s2 | s1 | s2 \breathe s2 | s1 | s2 \bar &quot;||&quot; \break
  s2 | s1 | s2 \breathe s2 | s1 | s2 \bar &quot;||&quot;
}

SopranoMusic = \relative g' {
  g4 g | g g g g | g g g g | g g g g | g2
  g4 g | g g g g | g g g g | g g g g | g2
}

AltoMusic = \relative c' {
  d4 d | d d d d | d d d d | d d d d | d2
  d4 d | d d d d | d d d d | d d d d | d2
}

TenorMusic = \relative a {
  b4 b | b b b b | b b b b | b b b b | b2
  b4 b | b b b b | b b b b | b b b b | b2
}

BassMusic =  \relative g {
  g4 g | g g g g | g g g g | g g g g | g2
  g4 g | g g g g | g g g g | g g g g | g2
}

global = {
 \key g \major
}

\score {  % Start score
  &lt;&lt;
    \new PianoStaff &lt;&lt;  % Start pianostaff
      \new Staff &lt;&lt;  % Start Staff = RH
        \global
        \clef &quot;treble&quot;
        \new Voice = &quot;Soprano&quot; &lt;&lt;  % Start Voice = &quot;Soprano&quot;
          \Timeline
          \voiceOne
          \SopranoMusic
        &gt;&gt;  % End Voice = &quot;Soprano&quot;
        \new Voice = &quot;Alto&quot; &lt;&lt;  % Start Voice = &quot;Alto&quot;
          \Timeline
          \voiceTwo
          \AltoMusic
        &gt;&gt;  % End Voice = &quot;Alto&quot;
      &gt;&gt;  % End Staff = RH
      \new Staff &lt;&lt;  % Start Staff = LH
        \global
        \clef &quot;bass&quot;
        \new Voice = &quot;Tenor&quot; &lt;&lt;  % Start Voice = &quot;Tenor&quot;
          \Timeline
          \voiceOne
          \TenorMusic
        &gt;&gt;  % End Voice = &quot;Tenor&quot;
        \new Voice = &quot;Bass&quot; &lt;&lt;  % Start Voice = &quot;Bass&quot;
          \Timeline
          \voiceTwo
          \BassMusic
        &gt;&gt;  % End Voice = &quot;Bass&quot;
      &gt;&gt;  % End Staff = LH
    &gt;&gt;  % End pianostaff
  &gt;&gt;
}  % End score

\markup {
  \fill-line {
    &quot;&quot;
    {
      \column {
        \left-align {
          &quot;This is line one of the first verse&quot;
          &quot;This is line two of the same&quot;
          &quot;And here's line three of the first verse&quot;
          &quot;And the last line of the same&quot;
        }
      }
    }
    &quot;&quot;
  }
}

\paper {  % Start paper block
  indent = 0     % don't indent first system
  line-width = 130   % shorten line length to suit music
}  % End paper block
</pre><p>
 <a href="b7/lily-3cf7cdbc.ly">
  <img align="middle"
       border="0"
       src="b7/lily-3cf7cdbc.png"
       alt="[image of music]">
 </a>
</p>




<a name="lyrics-alignment.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Lyrics-alignment"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-hymn-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Hymn template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-marking-notes-of-spoken-parts-with-a-cross-on-the-stem" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Marking notes of spoken parts with a cross on the stem &gt; </a>]</td></tr></table>
<a name="vocal-music-lyrics-alignment"></a>
<h2 class="unnumberedsec">Lyrics alignment</h2>


<p>Horizontal alignment for lyrics can be set by overriding the
<code>self-alignment-X</code> property of the <code>LyricText</code> object.
<code>#-1</code> is left, <code>#0</code> is center and <code>#1</code> is right;
however, you can use <code>#LEFT</code>, <code>#CENTER</code> and <code>#RIGHT</code> as
well.
</p>

<pre class="verbatim">\layout { ragged-right = ##f }
\relative c'' {
  c1
  c1
  c1
}
\addlyrics {
  \once \override LyricText.self-alignment-X = #LEFT
  &quot;This is left-aligned&quot;
  \once \override LyricText.self-alignment-X = #CENTER
  &quot;This is centered&quot;
  \once \override LyricText.self-alignment-X = #1
  &quot;This is right-aligned&quot;
}
</pre><p>
 <a href="a6/lily-ed20001e.ly">
  <img align="middle"
       border="0"
       src="a6/lily-ed20001e.png"
       alt="[image of music]">
 </a>
</p>




<a name="marking-notes-of-spoken-parts-with-a-cross-on-the-stem.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Marking-notes-of-spoken-parts-with-a-cross-on-the-stem"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-lyrics-alignment" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Lyrics alignment&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-obtaining-2_002e12-lyrics-spacing-in-newer-versions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Obtaining 2.12 lyrics spacing in newer versions &gt; </a>]</td></tr></table>
<a name="vocal-music-marking-notes-of-spoken-parts-with-a-cross-on-the-stem"></a>
<h2 class="unnumberedsec">Marking notes of spoken parts with a cross on the stem</h2>


<p>This example shows how to put crosses on stems.  Mark the beginning of
a spoken section with the <code>\speakOn</code> keyword, and end it with the
<code>\speakOff</code> keyword.
</p>

<pre class="verbatim">speakOn = {
  \override Stem.stencil =
    #(lambda (grob)
       (let* ((x-parent (ly:grob-parent grob X))
              (is-rest? (ly:grob? (ly:grob-object x-parent 'rest))))
         (if is-rest?
             empty-stencil
             (ly:stencil-combine-at-edge
              (ly:stem::print grob)
              Y
              (- (ly:grob-property grob 'direction))
              (grob-interpret-markup grob
                                     (markup #:center-align #:fontsize -4
                                             #:musicglyph &quot;noteheads.s2cross&quot;))
              -2.3))))
}

speakOff = {
  \revert Stem.stencil
  \revert Flag.stencil
}

\score {
  \new Staff {
    \relative c'' {
      a4 b a c
      \speakOn
      g4 f r g
      b4 r d e
      \speakOff
      c4 a g f
    }
  }
}
</pre><p>
 <a href="4d/lily-f1f77f16.ly">
  <img align="middle"
       border="0"
       src="4d/lily-f1f77f16.png"
       alt="[image of music]">
 </a>
</p>




<a name="obtaining-2.12-lyrics-spacing-in-newer-versions.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Obtaining-2_002e12-lyrics-spacing-in-newer-versions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-marking-notes-of-spoken-parts-with-a-cross-on-the-stem" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Marking notes of spoken parts with a cross on the stem&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-orchestra-choir-and-piano-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Orchestra choir and piano template &gt; </a>]</td></tr></table>
<a name="vocal-music-obtaining-2_002e12-lyrics-spacing-in-newer-versions"></a>
<h2 class="unnumberedsec">Obtaining 2.12 lyrics spacing in newer versions</h2>


<p>The vertical spacing engine changed since version 2.14.  This can cause
lyrics to be spaced differently.
</p>
<p>It is possible to set properties for <code>Lyric</code> and <code>Staff</code>
contexts to get the spacing engine to behave as it did in version 2.12.
</p>


<pre class="verbatim">global = {
  \key d \major
  \time 3/4
}

sopMusic = \relative c' {
  % VERSE ONE
  fis4 fis fis | \break
  fis4. e8 e4
}

altoMusic = \relative c' {
  % VERSE ONE
  d4 d d |
  d4. b8 b4 |
}

tenorMusic = \relative c' {
  a4 a a |
  b4. g8 g4 |
}

bassMusic = \relative c {
  d4 d d |
  g,4. g8 g4 |
}

words = \lyricmode {
  Great is Thy faith -- ful -- ness,
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Lyrics = sopranos
    \new Staff = women &lt;&lt;
      \new Voice = &quot;sopranos&quot; {
        \voiceOne
        \global \sopMusic
      }
      \new Voice = &quot;altos&quot; {
        \voiceTwo
        \global \altoMusic
      }
    &gt;&gt;
    \new Lyrics = &quot;altos&quot;
    \new Lyrics = &quot;tenors&quot;
    \new Staff = men &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; {
        \voiceOne
        \global \tenorMusic
      }
      \new Voice = &quot;basses&quot; {
        \voiceTwo  \global \bassMusic
      }
    &gt;&gt;
    \new Lyrics = basses
    \context Lyrics = sopranos \lyricsto sopranos \words
    \context Lyrics = altos \lyricsto altos \words
    \context Lyrics = tenors \lyricsto tenors \words
    \context Lyrics = basses \lyricsto basses \words
  &gt;&gt;
  \layout {
    \context {
      \Lyrics
      \override VerticalAxisGroup.staff-affinity = ##f
      \override VerticalAxisGroup.staff-staff-spacing =
        #'((basic-distance . 0)
	   (minimum-distance . 2)
	   (padding . 2))
    }
    \context {
      \Staff
      \override VerticalAxisGroup.staff-staff-spacing =
        #'((basic-distance . 0)
	   (minimum-distance . 2)
	   (padding . 2))
    }
  }
}
</pre><p>
 <a href="8b/lily-99997a38.ly">
  <img align="middle"
       border="0"
       src="8b/lily-99997a38.png"
       alt="[image of music]">
 </a>
</p>




<a name="orchestra,-choir-and-piano-template.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Orchestra-choir-and-piano-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-obtaining-2_002e12-lyrics-spacing-in-newer-versions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Obtaining 2.12 lyrics spacing in newer versions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-piano-template-with-melody-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Piano template with melody and lyrics &gt; </a>]</td></tr></table>
<a name="vocal-music-orchestra-choir-and-piano-template"></a>
<h2 class="unnumberedsec">Orchestra choir and piano template</h2>


<p>This template demonstrates the use of nested <code>StaffGroup</code> and
<code>GrandStaff</code> contexts to sub-group instruments of the same type
together, and a way to use <code>\transpose</code> so that variables hold
music for transposing instruments at concert pitch.
</p>

<pre class="verbatim">fluteMusic = \relative c' { \key g \major g'1 b }

% Pitches as written on a manuscript for Clarinet in A
% are transposed to concert pitch.

clarinetMusic = \transpose c' a
  \relative c'' { \key bes \major bes1 d }

trumpetMusic = \relative c { \key g \major g''1 b }

% Key signature is often omitted for horns

hornMusic = \transpose c' f
  \relative c { d'1 fis }

percussionMusic = \relative c { \key g \major g1 b }

sopranoMusic = \relative c'' { \key g \major g'1 b }

sopranoLyrics = \lyricmode { Lyr -- ics }

altoIMusic = \relative c' { \key g \major g'1 b }

altoIIMusic = \relative c' { \key g \major g'1 b }

altoILyrics =  \sopranoLyrics

altoIILyrics = \lyricmode { Ah -- ah }

tenorMusic = \relative c' { \clef &quot;treble_8&quot; \key g \major g1 b }

tenorLyrics = \sopranoLyrics

pianoRHMusic = \relative c { \key g \major g''1 b }

pianoLHMusic = \relative c { \clef bass \key g \major g1 b }

violinIMusic = \relative c' { \key g \major g'1 b }

violinIIMusic = \relative c' { \key g \major g'1 b }

violaMusic = \relative c { \clef alto \key g \major g'1 b }

celloMusic = \relative c { \clef bass \key g \major g1 b }

bassMusic = \relative c { \clef &quot;bass_8&quot; \key g \major g,1 b }

\score {
  &lt;&lt;
    \new StaffGroup = &quot;StaffGroup_woodwinds&quot; &lt;&lt;
      \new Staff = &quot;Staff_flute&quot; \with { instrumentName = #&quot;Flute&quot; }
      \fluteMusic

      \new Staff = &quot;Staff_clarinet&quot; \with {
        instrumentName = \markup { \concat { &quot;Clarinet in B&quot; \flat } }
      }

      % Declare that written Middle C in the music
      % to follow sounds a concert B flat, for
      % output using sounded pitches such as MIDI.
      %\transposition bes

      % Print music for a B-flat clarinet
      \transpose bes c' \clarinetMusic
    &gt;&gt;

    \new StaffGroup = &quot;StaffGroup_brass&quot; &lt;&lt;
      \new Staff = &quot;Staff_hornI&quot; \with { instrumentName = #&quot;Horn in F&quot; }
       % \transposition f
        \transpose f c' \hornMusic

      \new Staff = &quot;Staff_trumpet&quot; \with { instrumentName = #&quot;Trumpet in  C&quot; }
      \trumpetMusic

    &gt;&gt;
    \new RhythmicStaff = &quot;RhythmicStaff_percussion&quot;
    \with { instrumentName = #&quot;Percussion&quot; }
    &lt;&lt;
      \percussionMusic
    &gt;&gt;
    \new PianoStaff \with { instrumentName = #&quot;Piano&quot; }
    &lt;&lt;
      \new Staff { \pianoRHMusic }
      \new Staff { \pianoLHMusic }
    &gt;&gt;
    \new ChoirStaff = &quot;ChoirStaff_choir&quot; &lt;&lt;
      \new Staff = &quot;Staff_soprano&quot; \with { instrumentName = #&quot;Soprano&quot; }
      \new Voice = &quot;soprano&quot;
      \sopranoMusic

      \new Lyrics \lyricsto &quot;soprano&quot; { \sopranoLyrics }
      \new GrandStaff = &quot;GrandStaff_altos&quot;
      \with { \accepts Lyrics } &lt;&lt;
        \new Staff = &quot;Staff_altoI&quot;  \with { instrumentName = #&quot;Alto I&quot; }
        \new Voice = &quot;altoI&quot;
        \altoIMusic

        \new Lyrics \lyricsto &quot;altoI&quot; { \altoILyrics }
        \new Staff = &quot;Staff_altoII&quot; \with { instrumentName = #&quot;Alto II&quot; }
        \new Voice = &quot;altoII&quot;
        \altoIIMusic

        \new Lyrics \lyricsto &quot;altoII&quot; { \altoIILyrics }
      &gt;&gt;

      \new Staff = &quot;Staff_tenor&quot; \with { instrumentName = #&quot;Tenor&quot; }
        \new Voice = &quot;tenor&quot;
        \tenorMusic

      \new Lyrics \lyricsto &quot;tenor&quot; { \tenorLyrics }
    &gt;&gt;
    \new StaffGroup = &quot;StaffGroup_strings&quot; &lt;&lt;
      \new GrandStaff = &quot;GrandStaff_violins&quot; &lt;&lt;
        \new Staff = &quot;Staff_violinI&quot; \with { instrumentName = #&quot;Violin I&quot; }
        \violinIMusic

        \new Staff = &quot;Staff_violinII&quot; \with { instrumentName = #&quot;Violin II&quot; }
        \violinIIMusic
      &gt;&gt;

      \new Staff = &quot;Staff_viola&quot; \with { instrumentName = #&quot;Viola&quot; }
      \violaMusic

      \new Staff = &quot;Staff_cello&quot; \with { instrumentName = #&quot;Cello&quot; }
      \celloMusic

      \new Staff = &quot;Staff_bass&quot; \with { instrumentName = #&quot;Double Bass&quot; }
      \bassMusic
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre><p>
 <a href="63/lily-1cd18f77.ly">
  <img align="middle"
       border="0"
       src="63/lily-1cd18f77.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-with-melody-and-lyrics.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Piano-template-with-melody-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-orchestra-choir-and-piano-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Orchestra choir and piano template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-putting-lyrics-inside-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Putting lyrics inside the staff &gt; </a>]</td></tr></table>
<a name="vocal-music-piano-template-with-melody-and-lyrics"></a>
<h2 class="unnumberedsec">Piano template with melody and lyrics</h2>


<p>Here is a typical song format: one staff with the melody and lyrics,
with piano accompaniment underneath.
</p>

<pre class="verbatim">melody = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

\score {
  &lt;&lt;
    \new Voice = &quot;mel&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto mel \text
    \new PianoStaff &lt;&lt;
      \new Staff = &quot;upper&quot; \upper
      \new Staff = &quot;lower&quot; \lower
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
  }
  \midi { }
}
</pre><p>
 <a href="b6/lily-36167b72.ly">
  <img align="middle"
       border="0"
       src="b6/lily-36167b72.png"
       alt="[image of music]">
 </a>
</p>




<a name="putting-lyrics-inside-the-staff.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Putting-lyrics-inside-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-piano-template-with-melody-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Piano template with melody and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-satb-choir-template-_002d-four-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: SATB Choir template - four staves &gt; </a>]</td></tr></table>
<a name="vocal-music-putting-lyrics-inside-the-staff"></a>
<h2 class="unnumberedsec">Putting lyrics inside the staff</h2>


<p>Lyrics can be moved vertically to place them inside the staff.  The
lyrics are moved with <code>\override LyricText.extra-offset = #'(0 .
dy)</code> and there are similar commands to move the extenders and hyphens.
The offset needed is established with trial and error.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff &lt;&lt;
    \new Voice = &quot;voc&quot; \relative c' { \stemDown a bes c8 b c4 }
  &gt;&gt;
  \new Lyrics \with {
    \override LyricText.extra-offset = #'(0 . 8.6)
    \override LyricExtender.extra-offset = #'(0 . 8.6)
    \override LyricHyphen.extra-offset = #'(0 . 8.6)
  } \lyricsto &quot;voc&quot; { La la -- la __ _ la }
&gt;&gt;
</pre><p>
 <a href="ae/lily-31a15ff2.ly">
  <img align="middle"
       border="0"
       src="ae/lily-31a15ff2.png"
       alt="[image of music]">
 </a>
</p>




<a name="satb-choir-template---four-staves.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-SATB-Choir-template-_002d-four-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-putting-lyrics-inside-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Putting lyrics inside the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-single-staff-template-with-notes-lyrics-and-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Single staff template with notes lyrics and chords &gt; </a>]</td></tr></table>
<a name="vocal-music-satb-choir-template-_002d-four-staves"></a>
<h2 class="unnumberedsec">SATB Choir template - four staves</h2>


<p>SATB choir template (four staves)
</p>

<pre class="verbatim">global = {
  \key c \major
  \time 4/4
  \dynamicUp
}
sopranonotes = \relative c'' {
  c2 \p \&lt; d c d \f
}
sopranowords = \lyricmode { do do do do }
altonotes = \relative c'' {
  c2\p d c d
}
altowords = \lyricmode { re re re re }
tenornotes = {
  \clef &quot;G_8&quot;
  c2\mp d c d
}
tenorwords = \lyricmode { mi mi mi mi }
bassnotes = {
  \clef bass
  c2\mf d c d
}
basswords = \lyricmode { mi mi mi mi }

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff &lt;&lt;
      \new Voice = &quot;soprano&quot; &lt;&lt;
        \global
        \sopranonotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;soprano&quot; \sopranowords
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;alto&quot; &lt;&lt;
        \global
        \altonotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;alto&quot; \altowords
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;tenor&quot; &lt;&lt;
        \global
        \tenornotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;tenor&quot; \tenorwords
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;bass&quot; &lt;&lt;
        \global
        \bassnotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;bass&quot; \basswords
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="2d/lily-2444b243.ly">
  <img align="middle"
       border="0"
       src="2d/lily-2444b243.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes,-lyrics,-and-chords.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Single-staff-template-with-notes-lyrics-and-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-satb-choir-template-_002d-four-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: SATB Choir template - four staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-single-staff-template-with-notes-lyrics-chords-and-frets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Single staff template with notes lyrics chords and frets &gt; </a>]</td></tr></table>
<a name="vocal-music-single-staff-template-with-notes-lyrics-and-chords"></a>
<h2 class="unnumberedsec">Single staff template with notes lyrics and chords</h2>


<p>This template allows the preparation of a song with melody, words, and
chords.
</p>

<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

harmonies = \chordmode {
  a2 c
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Voice = &quot;one&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="24/lily-998753a9.ly">
  <img align="middle"
       border="0"
       src="24/lily-998753a9.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes,-lyrics,-chords-and-frets.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Single-staff-template-with-notes-lyrics-chords-and-frets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-single-staff-template-with-notes-lyrics-and-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Single staff template with notes lyrics and chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-single-staff-template-with-notes-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Single staff template with notes and lyrics &gt; </a>]</td></tr></table>
<a name="vocal-music-single-staff-template-with-notes-lyrics-chords-and-frets"></a>
<h2 class="unnumberedsec">Single staff template with notes lyrics chords and frets</h2>


<p>Here is a simple lead sheet template with melody, lyrics, chords and
fret diagrams.
</p>

<pre class="verbatim">verseI = \lyricmode {
  \set stanza = #&quot;1.&quot;
  This is the first verse
}

verseII = \lyricmode {
  \set stanza = #&quot;2.&quot;
  This is the second verse.
}

theChords = \chordmode {
  % insert chords for chordnames and fretboards here
  c2 g4 c
}

staffMelody = \relative c' {
   \key c \major
   \clef treble
   % Type notes for melody here
   c4 d8 e f4 g
   \bar &quot;|.&quot;
}

\score {
  &lt;&lt;
    \context ChordNames { \theChords }
    \context FretBoards { \theChords }
    \new Staff {
      \context Voice = &quot;voiceMelody&quot; { \staffMelody }
    }
    \new Lyrics = &quot;lyricsI&quot; {
      \lyricsto &quot;voiceMelody&quot; \verseI
    }
    \new Lyrics = &quot;lyricsII&quot; {
      \lyricsto &quot;voiceMelody&quot; \verseII
    }
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="83/lily-2dbd9efe.ly">
  <img align="middle"
       border="0"
       src="83/lily-2dbd9efe.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes-and-lyrics.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Single-staff-template-with-notes-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-single-staff-template-with-notes-lyrics-chords-and-frets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Single staff template with notes lyrics chords and frets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-skips-in-lyric-mode-_00282_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Skips in lyric mode (2) &gt; </a>]</td></tr></table>
<a name="vocal-music-single-staff-template-with-notes-and-lyrics"></a>
<h2 class="unnumberedsec">Single staff template with notes and lyrics</h2>


<p>This small template demonstrates a simple melody with lyrics. Cut and
paste, add notes, then words for the lyrics. This example turns off
automatic beaming, which is common for vocal parts. To use automatic
beaming, change or comment out the relevant line.
</p>

<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score{
  &lt;&lt;
    \new Voice = &quot;one&quot; {
      \autoBeamOff
      \melody
    }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="2d/lily-27a6fe3a.ly">
  <img align="middle"
       border="0"
       src="2d/lily-27a6fe3a.png"
       alt="[image of music]">
 </a>
</p>




<a name="skips-in-lyric-mode-2.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Skips-in-lyric-mode-_00282_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-single-staff-template-with-notes-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Single staff template with notes and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-skips-in-lyric-mode" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Skips in lyric mode &gt; </a>]</td></tr></table>
<a name="vocal-music-skips-in-lyric-mode-_00282_0029"></a>
<h2 class="unnumberedsec">Skips in lyric mode (2)</h2>


<p>Although <code>s</code> skips cannot be used in <code>\lyricmode</code> (it is
taken to be a literal &ldquo;s&rdquo;, not a space), double quotes (<code>&quot;&quot;</code>)
or underscores (<code>_</code>) are available.So for example:
</p>

<pre class="verbatim">&lt;&lt;
  \relative c'' { a4 b c d }
  \new Lyrics \lyricmode { a4 &quot;&quot; _ gap }
&gt;&gt;
</pre><p>
 <a href="f1/lily-fe6e5923.ly">
  <img align="middle"
       border="0"
       src="f1/lily-fe6e5923.png"
       alt="[image of music]">
 </a>
</p>




<a name="skips-in-lyric-mode.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Skips-in-lyric-mode"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-skips-in-lyric-mode-_00282_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Skips in lyric mode (2)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-using-arpeggiobracket-to-make-divisi-more-visible" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Using arpeggioBracket to make divisi more visible &gt; </a>]</td></tr></table>
<a name="vocal-music-skips-in-lyric-mode"></a>
<h2 class="unnumberedsec">Skips in lyric mode</h2>


<p>The <code>s</code> syntax for skips is only available in note mode and chord
mode. In other situations, for example, when entering lyrics, using the
<code>\skip</code> command is recommended.
</p>

<pre class="verbatim">&lt;&lt;
  \relative c'' { a1 | a }
  \new Lyrics \lyricmode { \skip 1 bla1 }
&gt;&gt;
</pre><p>
 <a href="98/lily-b467671c.ly">
  <img align="middle"
       border="0"
       src="98/lily-b467671c.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-arpeggiobracket-to-make-divisi-more-visible.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Using-arpeggioBracket-to-make-divisi-more-visible"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-skips-in-lyric-mode" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Skips in lyric mode&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-using-tags-to-produce-mensural-and-modern-music-from-the-same-source" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Using tags to produce mensural and modern music from the same source &gt; </a>]</td></tr></table>
<a name="vocal-music-using-arpeggiobracket-to-make-divisi-more-visible"></a>
<h2 class="unnumberedsec">Using arpeggioBracket to make divisi more visible</h2>


<p>The <code>arpeggioBracket</code> can be used to indicate the division of
voices where there are no stems to provide the information. This is
often seen in choral music.
</p>

<pre class="verbatim">\include &quot;english.ly&quot;

\score {
  \relative c'' {
    \key a \major
    \time 2/2
    &lt;&lt;
      \new Voice = &quot;upper&quot;
      &lt;&lt;
        { \voiceOne \arpeggioBracket
          a2( b2
          &lt;b d&gt;1\arpeggio)
          &lt;cs e&gt;\arpeggio ~
          &lt;cs e&gt;4
        }
        \addlyrics { \lyricmode { A -- men. } }
      &gt;&gt;
      \new Voice = &quot;lower&quot;
      { \voiceTwo
        a1 ~
        a
        a ~
        a4 \bar &quot;|.&quot;
      }
    &gt;&gt;
  }
  \layout { ragged-right = ##t }
}
</pre><p>
 <a href="9c/lily-5d3b932d.ly">
  <img align="middle"
       border="0"
       src="9c/lily-5d3b932d.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-tags-to-produce-mensural-and-modern-music-from-the-same-source.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Using-tags-to-produce-mensural-and-modern-music-from-the-same-source"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-using-arpeggiobracket-to-make-divisi-more-visible" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Using arpeggioBracket to make divisi more visible&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-vertically-aligning-ossias-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Vertically aligning ossias and lyrics &gt; </a>]</td></tr></table>
<a name="vocal-music-using-tags-to-produce-mensural-and-modern-music-from-the-same-source"></a>
<h2 class="unnumberedsec">Using tags to produce mensural and modern music from the same source</h2>


<p>By using tags, it&rsquo;s possible to use the same music to produce both
mensural and modern music.  In this snippet, a function <code>menrest</code>
is introduced, allowing mensural rests to be pitched as in the
original, but with modern rests in the standard staff position.  Tags
are used to produce different types of bar line at the end of the
music, but tags can also be used where other differences are needed:
for example using &ldquo;whole measure rests&rdquo; (R1, R\breve etc.) in
modern music, but normal rests (r1, r\breve, etc.) in the mensural
version.  Note that converting mensural music to its modern equivalent
is usually referred to as <code>transcription</code>.
</p>

<pre class="verbatim">menrest = #(define-music-function (note)
  (ly:music?)
#{
    \tag #'mens $(make-music 'RestEvent note)
    \tag #'mod $(make-music 'RestEvent note 'pitch '())
#})

MensStyle = {
  \autoBeamOff
  \override NoteHead.style = #'petrucci
  \override Score.BarNumber.transparent = ##t
  \override Stem.neutral-direction = #up
}

finalis = {
  \once \override BreathingSign.stencil = #ly:breathing-sign::finalis
  \once \override BreathingSign.Y-offset = #0
  \once \override BreathingSign.minimum-X-extent = #'(-1.0 . 0.0)
  \once \override BreathingSign.minimum-Y-extent = #'(-2.5 . 2.5)

  \breathe
}

Music = \relative c'' {
  \set Score.tempoHideNote = ##t
  \key f \major
  \time 4/4
  g1 d'2 \menrest bes4 bes2 a2 r4 g4 fis2.
  \tag #'mens { \finalis }
  \tag #'mod { \bar &quot;||&quot; }
}

MenLyr = \lyricmode { So farre, deere life, deare life }
ModLyr = \lyricmode { So far, dear life, dear life }

\score {
  \keepWithTag #'mens {
    &lt;&lt;
      \new MensuralStaff
      {
        \new MensuralVoice = Cantus \clef &quot;mensural-c1&quot; \MensStyle \Music
      }
      \new Lyrics \lyricsto Cantus \MenLyr
    &gt;&gt;
  }
}

\score {
  \keepWithTag #'mod {
    \new ChoirStaff &lt;&lt;
      \new Staff
      {
        \new Voice = Sop \with {
          \remove &quot;Note_heads_engraver&quot;
          \consists &quot;Completion_heads_engraver&quot;
          \remove &quot;Rest_engraver&quot;
          \consists &quot;Completion_rest_engraver&quot; }
        {
          \shiftDurations #1 #0 { \autoBeamOff \Music }
        }
      }
      \new Lyrics \lyricsto Sop \ModLyr
    &gt;&gt;
  }
}
</pre><p>
 <a href="8d/lily-34ce813c.ly">
  <img align="middle"
       border="0"
       src="8d/lily-34ce813c.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-aligning-ossias-and-lyrics.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Vertically-aligning-ossias-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-using-tags-to-produce-mensural-and-modern-music-from-the-same-source" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Using tags to produce mensural and modern music from the same source&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-vertically-centered-common-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Vertically centered common lyrics &gt; </a>]</td></tr></table>
<a name="vocal-music-vertically-aligning-ossias-and-lyrics"></a>
<h2 class="unnumberedsec">Vertically aligning ossias and lyrics</h2>


<p>This snippet demonstrates the use of the context properties
<code>alignBelowContext</code> and <code>alignAboveContext</code> to control the
positioning of lyrics and ossias.
</p>

<pre class="verbatim">\paper {
  ragged-right = ##t
}

\relative c' &lt;&lt;
  \new Staff = &quot;1&quot; { c4 c s2 }
  \new Staff = &quot;2&quot; { c4 c s2 }
  \new Staff = &quot;3&quot; { c4 c s2 }
  { \skip 2
    &lt;&lt;
      \lyrics {
        \set alignBelowContext = #&quot;1&quot;
        lyrics4 below
      }
      \new Staff \with {
        alignAboveContext = #&quot;3&quot;
        fontSize = #-2
        \override StaffSymbol.staff-space = #(magstep -2)
        \remove &quot;Time_signature_engraver&quot;
      } {
        \tuplet 6/4 {
          \override TextScript.padding = #3
          c8[^&quot;ossia above&quot; d e d e f]
        }
      }
    &gt;&gt;
  }
&gt;&gt;
</pre><p>
 <a href="c9/lily-f55b8b69.ly">
  <img align="middle"
       border="0"
       src="c9/lily-f55b8b69.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-centered-common-lyrics.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Vertically-centered-common-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-vertically-aligning-ossias-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Vertically aligning ossias and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-vocal-ensemble-template-with-automatic-piano-reduction" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Vocal ensemble template with automatic piano reduction &gt; </a>]</td></tr></table>
<a name="vocal-music-vertically-centered-common-lyrics"></a>
<h2 class="unnumberedsec">Vertically centered common lyrics</h2>


<p>In a vocal piece where there are several (two, four or more) lines of
lyrics and common lyrics for all voices at some point, the common
lyrics may be made to appear vertically centered, as shown in the
following example:
</p>

<pre class="verbatim">dropLyrics = {
  \override LyricText.extra-offset = #'(0 . -4.5)
  \override LyricHyphen.extra-offset = #'(0 . -4.5)
  \override LyricExtender.extra-offset = #'(0 . -4.5)
  \override StanzaNumber.extra-offset = #'(0 . -4.5)
}

raiseLyrics = {
  \revert LyricText.extra-offset
  \revert LyricHyphen.extra-offset
  \revert LyricExtender.extra-offset
  \revert StanzaNumber.extra-offset
}

skipFour = \repeat unfold 4 { \skip 8 }

lyricsA = \lyricmode {
  The first verse has
  \dropLyrics
  \set stanza = #&quot;   All:&quot;
  the com -- mon __ words
  \raiseLyrics
  used in all four.
}

lyricsB = \lyricmode { In stan -- za two,   \skipFour al -- so ap -- pear. }

lyricsC = \lyricmode { By the third verse,  \skipFour are get -- ting dull. }

lyricsD = \lyricmode { Last stan -- za, and \skipFour get used once more. }

melody = \relative c' {
  c4 d e f |
  g f e8( e f) d |
  c4 e d c |
}

\score {
  &lt;&lt;
    \new Voice = m \melody
    \new Lyrics \lyricsto m \lyricsA
    \new Lyrics \lyricsto m \lyricsB
    \new Lyrics \lyricsto m \lyricsC
    \new Lyrics \lyricsto m \lyricsD
  &gt;&gt;
}
</pre><p>
 <a href="3b/lily-f48e7b71.ly">
  <img align="middle"
       border="0"
       src="3b/lily-f48e7b71.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-automatic-piano-reduction.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Vocal-ensemble-template-with-automatic-piano-reduction"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-vertically-centered-common-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Vertically centered common lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Vocal ensemble template with lyrics aligned below and above the staves &gt; </a>]</td></tr></table>
<a name="vocal-music-vocal-ensemble-template-with-automatic-piano-reduction"></a>
<h2 class="unnumberedsec">Vocal ensemble template with automatic piano reduction</h2>


<p>This template adds an automatic piano reduction to the standard SATB
vocal score demonstrated in &ldquo;Vocal ensemble template&rdquo;. This
demonstrates one of the strengths of LilyPond – you can use a music
definition more than once. If any changes are made to the vocal notes
(say, <code>tenorMusic</code>), then the changes will also apply to the piano
reduction.
</p>

<pre class="verbatim">\paper {
  top-system-spacing.basic-distance = #10
  score-system-spacing.basic-distance = #20
  system-system-spacing.basic-distance = #20
  last-bottom-spacing.basic-distance = #10
}

global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative {
  c''4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative {
  e'4 f d e
}
altoWords =\lyricmode {
  ha ha ha ha
}

tenorMusic = \relative {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  &lt;&lt;
    \new ChoirStaff &lt;&lt;
      \new Lyrics = &quot;sopranos&quot; \with {
        % This is needed for lyrics above a staff
        \override VerticalAxisGroup.staff-affinity = #DOWN
      }
      \new Staff = &quot;women&quot; &lt;&lt;
        \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
        \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = &quot;altos&quot;
      \new Lyrics = &quot;tenors&quot; \with {
        % This is needed for lyrics above a staff
        \override VerticalAxisGroup.staff-affinity = #DOWN
      }

      \new Staff = &quot;men&quot; &lt;&lt;
        \clef bass
        \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
        \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = &quot;basses&quot;
      \context Lyrics = &quot;sopranos&quot; \lyricsto &quot;sopranos&quot; \sopWords
      \context Lyrics = &quot;altos&quot; \lyricsto &quot;altos&quot; \altoWords
      \context Lyrics = &quot;tenors&quot; \lyricsto &quot;tenors&quot; \tenorWords
      \context Lyrics = &quot;basses&quot; \lyricsto &quot;basses&quot; \bassWords
    &gt;&gt;
    \new PianoStaff &lt;&lt;
      \new Staff &lt;&lt;
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \sopMusic &gt;&gt;
        &lt;&lt; \global \altoMusic &gt;&gt;
      &gt;&gt;
      \new Staff &lt;&lt;
        \clef bass
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \tenorMusic &gt;&gt;
        &lt;&lt; \global \bassMusic &gt;&gt;
      &gt;&gt;
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="7e/lily-b74604fe.ly">
  <img align="middle"
       border="0"
       src="7e/lily-b74604fe.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-vocal-ensemble-template-with-automatic-piano-reduction" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Vocal ensemble template with automatic piano reduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-vocal-ensemble-template-with-verse-and-refrain" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Vocal ensemble template with verse and refrain &gt; </a>]</td></tr></table>
<a name="vocal-music-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<h2 class="unnumberedsec">Vocal ensemble template with lyrics aligned below and above the staves</h2>


<p>This template is basically the same as the simple &ldquo;Vocal ensemble&rdquo;
template, with the exception that here all the lyrics lines are placed
using <code>alignAboveContext</code> and <code>alignBelowContext</code>.
</p>

<pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff = &quot;women&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
      \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;women&quot; }
      \lyricsto &quot;sopranos&quot; \sopWords
    \new Lyrics \with { alignBelowContext = #&quot;women&quot; }
      \lyricsto &quot;altos&quot; \altoWords
    % we could remove the line about this with the line below, since
    % we want the alto lyrics to be below the alto Voice anyway.
    % \new Lyrics \lyricsto &quot;altos&quot; \altoWords

    \new Staff = &quot;men&quot; &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
      \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;men&quot; }
      \lyricsto &quot;tenors&quot; \tenorWords
    \new Lyrics \with { alignBelowContext = #&quot;men&quot; }
      \lyricsto &quot;basses&quot; \bassWords
    % again, we could replace the line above this with the line below.
    % \new Lyrics \lyricsto &quot;basses&quot; \bassWords
  &gt;&gt;
}
</pre><p>
 <a href="8b/lily-01f33d94.ly">
  <img align="middle"
       border="0"
       src="8b/lily-01f33d94.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-verse-and-refrain.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Vocal-ensemble-template-with-verse-and-refrain"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Vocal ensemble template with lyrics aligned below and above the staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#vocal-music-vocal-ensemble-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal music: Vocal ensemble template &gt; </a>]</td></tr></table>
<a name="vocal-music-vocal-ensemble-template-with-verse-and-refrain"></a>
<h2 class="unnumberedsec">Vocal ensemble template with verse and refrain</h2>


<p>This template creates a score which starts with a solo verse and
continues into a refrain for two voices.  It also demonstrates the use
of spacer rests within the <code>\global</code> variable to define meter
changes (and other elements common to all parts) throughout the entire
score.
</p>

<pre class="verbatim">global = {
  \key g \major

  % verse
  \time 3/4
  s2.*2
  \break

  % refrain
  \time 2/4
  s2*2
  \bar &quot;|.&quot;
}

SoloNotes = \relative g' {
  \clef &quot;treble&quot;

  % verse
  g4 g g |
  b4 b b |

  % refrain
  R2*2 |
}

SoloLyrics = \lyricmode {
  One two three |
  four five six |
}

SopranoNotes = \relative c'' {
  \clef &quot;treble&quot;

  % verse
  R2.*2 |

  % refrain
  c4 c |
  g4 g |
}

SopranoLyrics = \lyricmode {
  la la |
  la la |
}

BassNotes = \relative c {
  \clef &quot;bass&quot;

  % verse
  R2.*2 |

  % refrain
  c4 e |
  d4 d |
}

BassLyrics = \lyricmode {
  dum dum |
  dum dum |
}

\score {
  &lt;&lt;
    \new Voice = &quot;SoloVoice&quot; &lt;&lt; \global \SoloNotes &gt;&gt;
    \new Lyrics \lyricsto &quot;SoloVoice&quot; \SoloLyrics

    \new ChoirStaff &lt;&lt;
      \new Voice = &quot;SopranoVoice&quot; &lt;&lt; \global \SopranoNotes &gt;&gt;
      \new Lyrics \lyricsto &quot;SopranoVoice&quot; \SopranoLyrics

      \new Voice = &quot;BassVoice&quot; &lt;&lt; \global \BassNotes &gt;&gt;
      \new Lyrics \lyricsto &quot;BassVoice&quot; \BassLyrics
    &gt;&gt;
  &gt;&gt;
  \layout {
    ragged-right = ##t
    \context { \Staff
      % these lines prevent empty staves from being printed
      \RemoveEmptyStaves
      \override VerticalAxisGroup.remove-first = ##t
    }
  }
}
</pre><p>
 <a href="80/lily-f3131e82.ly">
  <img align="middle"
       border="0"
       src="80/lily-f3131e82.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template.ly"></a>

<hr size="6">
<a name="Vocal-music_003a-Vocal-ensemble-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#chords" title="Next chapter">&nbsp;Chords &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-vocal-ensemble-template-with-verse-and-refrain" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Vocal ensemble template with verse and refrain&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#vocal-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords &gt; </a>]</td></tr></table>
<a name="vocal-music-vocal-ensemble-template"></a>
<h2 class="unnumberedsec">Vocal ensemble template</h2>


<p>Here is a standard four-part SATB vocal score. With larger ensembles,
it is often useful to include a section which is included in all parts.
For example, the time signature and key signature are almost always the
same for all parts. Like in the &ldquo;Hymn&rdquo; template, the four voices are
regrouped on only two staves.
</p>

<pre class="verbatim">\paper {
  top-system-spacing.basic-distance = #10
  score-system-spacing.basic-distance = #20
  system-system-spacing.basic-distance = #20
  last-bottom-spacing.basic-distance = #10
}

global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative {
  c''4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative {
  e'4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Lyrics = &quot;sopranos&quot; \with {
      % this is needed for lyrics above a staff
      \override VerticalAxisGroup.staff-affinity = #DOWN
    }
    \new Staff = &quot;women&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; {
        \voiceOne
        &lt;&lt; \global \sopMusic &gt;&gt;
      }
      \new Voice = &quot;altos&quot; {
        \voiceTwo
        &lt;&lt; \global \altoMusic &gt;&gt;
      }
    &gt;&gt;
    \new Lyrics = &quot;altos&quot;
    \new Lyrics = &quot;tenors&quot; \with {
      % this is needed for lyrics above a staff
      \override VerticalAxisGroup.staff-affinity = #DOWN
    }
    \new Staff = &quot;men&quot; &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; {
        \voiceOne
        &lt;&lt; \global \tenorMusic &gt;&gt;
      }
      \new Voice = &quot;basses&quot; {
        \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt;
      }
    &gt;&gt;
    \new Lyrics = &quot;basses&quot;
    \context Lyrics = &quot;sopranos&quot; \lyricsto &quot;sopranos&quot; \sopWords
    \context Lyrics = &quot;altos&quot; \lyricsto &quot;altos&quot; \altoWords
    \context Lyrics = &quot;tenors&quot; \lyricsto &quot;tenors&quot; \tenorWords
    \context Lyrics = &quot;basses&quot; \lyricsto &quot;basses&quot; \bassWords
  &gt;&gt;
}
</pre><p>
 <a href="1b/lily-d20d643e.ly">
  <img align="middle"
       border="0"
       src="1b/lily-d20d643e.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#vocal-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; Vocal music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#vocal-music-vocal-ensemble-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal music: Vocal ensemble template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-adding-a-figured-bass-above-or-below-the-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Adding a figured bass above or below the notes &gt; </a>]</td></tr></table>
<a name="chords"></a>
<h1 class="unnumbered">Chords</h1>

<a name="index-Chord-notation"></a>
<p><a href="notation-big-page.html#chord-notation">Chord notation</a>
</p>

<a name="adding-a-figured-bass-above-or-below-the-notes.ly"></a>

<hr size="6">
<a name="Chords_003a-Adding-a-figured-bass-above-or-below-the-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-adding-bar-lines-to-chordnames-context" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Adding bar lines to ChordNames context &gt; </a>]</td></tr></table>
<a name="chords-adding-a-figured-bass-above-or-below-the-notes"></a>
<h2 class="unnumberedsec">Adding a figured bass above or below the notes</h2>


<p>When writing a figured bass, you can place the figures above or below
the bass notes, by defining the
<code>BassFigureAlignmentPositioning.direction</code> property (exclusively
in a <code>Staff</code> context). Choices are <code>#UP</code> (or <code>#1</code>),
<code>#CENTER</code> (or <code>#0</code>) and <code>#DOWN</code> (or <code>#-1</code>).
</p>
<p>This property can be changed as many times as you wish. Use
<code>\once \override</code> if you don&rsquo;t want the override to apply to the
whole score.
</p>

<pre class="verbatim">bass = {
  \clef bass
  g4 b, c d
  e d8 c d2
}

continuo = \figuremode {
  &lt;_&gt;4 &lt;6&gt;4 &lt;5/&gt;4
  \override Staff.BassFigureAlignmentPositioning.direction = #UP
  %\bassFigureStaffAlignmentUp
  &lt; _+ &gt;4 &lt;6&gt;
  \set Staff.useBassFigureExtenders = ##t
  \override Staff.BassFigureAlignmentPositioning.direction = #DOWN
  %\bassFigureStaffAlignmentDown
  &lt;4&gt;4. &lt;4&gt;8 &lt;_+&gt;4
}

\score {
  &lt;&lt;
    \new Staff = bassStaff \bass
    \context Staff = bassStaff \continuo
  &gt;&gt;
}
</pre><p>
 <a href="26/lily-6006274b.ly">
  <img align="middle"
       border="0"
       src="26/lily-6006274b.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-bar-lines-to-chordnames-context.ly"></a>

<hr size="6">
<a name="Chords_003a-Adding-bar-lines-to-ChordNames-context"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-adding-a-figured-bass-above-or-below-the-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Adding a figured bass above or below the notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-avoiding-collisions-with-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Avoiding collisions with chord fingerings &gt; </a>]</td></tr></table>
<a name="chords-adding-bar-lines-to-chordnames-context"></a>
<h2 class="unnumberedsec">Adding bar lines to ChordNames context</h2>


<p>To add bar line indications in the <code>ChordNames</code> context, add the
<code>Bar_engraver</code>.
</p>

<pre class="verbatim">\new ChordNames \with {
  \override BarLine.bar-extent = #'(-2 . 2)
  \consists &quot;Bar_engraver&quot;
}

\chordmode {
  f1:maj7 f:7 bes:7
}
</pre><p>
 <a href="2b/lily-0430c842.ly">
  <img align="middle"
       border="0"
       src="2b/lily-0430c842.png"
       alt="[image of music]">
 </a>
</p>




<a name="avoiding-collisions-with-chord-fingerings.ly"></a>

<hr size="6">
<a name="Chords_003a-Avoiding-collisions-with-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-adding-bar-lines-to-chordnames-context" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Adding bar lines to ChordNames context&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-bar-chords-notation-for-guitar-_0028with-text-spanner_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Bar chords notation for Guitar (with Text Spanner) &gt; </a>]</td></tr></table>
<a name="chords-avoiding-collisions-with-chord-fingerings"></a>
<h2 class="unnumberedsec">Avoiding collisions with chord fingerings</h2>


<p>Fingerings and string numbers applied to individual notes will
automatically avoid beams and stems, but this is not true by default
for fingerings and string numbers applied to the individual notes of
chords.  The following example shows how this default behavior can be
overridden.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(up)
  \set stringNumberOrientations = #'(up)
  \set strokeFingerOrientations = #'(up)

  % Default behavior
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
  &lt;f c'-\rightHandFinger #2 &gt;8

  % No tweak needed
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
   % Corrected to avoid collisions
  \override StrokeFinger.add-stem-support = ##t
  &lt;f c'-\rightHandFinger #2 &gt;8
}
</pre><p>
 <a href="6d/lily-465697fc.ly">
  <img align="middle"
       border="0"
       src="6d/lily-465697fc.png"
       alt="[image of music]">
 </a>
</p>




<a name="bar-chords-notation-for-guitar-with-text-spanner.ly"></a>

<hr size="6">
<a name="Chords_003a-Bar-chords-notation-for-Guitar-_0028with-Text-Spanner_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-avoiding-collisions-with-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Avoiding collisions with chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-changing-chord-separator" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Changing chord separator &gt; </a>]</td></tr></table>
<a name="chords-bar-chords-notation-for-guitar-_0028with-text-spanner_0029"></a>
<h2 class="unnumberedsec">Bar chords notation for Guitar (with Text Spanner)</h2>


<p>Here is how to print bar chords (or barre chords) or half-bar chords
(just uncomment the appropriate line for to select either one). The
syntax is : <code>\bbarre #'fret_number' note(s)</code>
</p>






<pre class="verbatim">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% %%%%%%%  Cut here ----- Start 'bbarred.ly'

%% C with slash -------------------------------
cWithSlash = \markup {
  \combine \roman C \translate #'(0.6 . -0.4) \draw-line #'(0 . 2.0)
}
%% Span -----------------------------------
%% Syntax: \bbarre #&quot;text&quot; { notes } - text = any number of box
bbarre =
#(define-music-function (barre location str music) (string? ly:music?)
   (let ((elts (extract-named-music music '(NoteEvent EventChord))))
     (if (pair? elts)
         (let ((first-element (first elts))
               (last-element (last elts)))
           (set! (ly:music-property first-element 'articulations)
                 (cons (make-music 'TextSpanEvent 'span-direction -1)
                       (ly:music-property first-element 'articulations)))
           (set! (ly:music-property last-element 'articulations)
                 (cons (make-music 'TextSpanEvent 'span-direction 1)
                       (ly:music-property last-element 'articulations))))))
   #{
       \once \override TextSpanner.font-size = #-2
       \once \override TextSpanner.font-shape = #'upright
       \once \override TextSpanner.staff-padding = #3
       \once \override TextSpanner.style = #'line
       \once \override TextSpanner.to-barline = ##f
       \once \override TextSpanner.bound-details =
            #`((left
                (text . ,#{ \markup { \draw-line #'( 0 . -.5) } #})
                (Y . 0)
                (padding . 0.25)
                (attach-dir . -2))
               (right
                (text . ,#{ \markup { \cWithSlash #str } #})
                (Y . 0)
                (padding . 0.25)
                (attach-dir . 2)))
%% uncomment this line for make full barred
      % \once \override TextSpanner.bound-details.left.text = \markup{&quot;B&quot; #str}
      $music
   #})

%% %%%%%%%  Cut here ----- End 'bbarred.ly'
%% Copy and change the last line for full barred. Rename in 'fbarred.ly'
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Syntaxe: \bbarre #&quot;text&quot; { notes } - text = any number of box
\relative c'{ \clef &quot;G_8&quot; \stemUp \bbarre #&quot;III&quot; { &lt;f a'&gt;16[  c' d c d8] } }
</pre><p>
 <a href="4e/lily-154a1a41.ly">
  <img align="middle"
       border="0"
       src="4e/lily-154a1a41.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-chord-separator.ly"></a>

<hr size="6">
<a name="Chords_003a-Changing-chord-separator"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-bar-chords-notation-for-guitar-_0028with-text-spanner_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Bar chords notation for Guitar (with Text Spanner)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-changing-the-chord-names-to-german-or-semi_002dgerman-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Changing the chord names to German or semi-German notation &gt; </a>]</td></tr></table>
<a name="chords-changing-chord-separator"></a>
<h2 class="unnumberedsec">Changing chord separator</h2>


<p>The separator between different parts of a chord name can be set to any
markup.
</p>

<pre class="verbatim">\chords {
  c:7sus4
  \set chordNameSeparator
    = \markup { \typewriter | }
  c:7sus4
}
</pre><p>
 <a href="eb/lily-c6b7c993.ly">
  <img align="middle"
       border="0"
       src="eb/lily-c6b7c993.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-chord-names-to-german-or-semi-german-notation.ly"></a>

<hr size="6">
<a name="Chords_003a-Changing-the-chord-names-to-German-or-semi_002dGerman-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-changing-chord-separator" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Changing chord separator&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-changing-the-positions-of-figured-bass-alterations" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Changing the positions of figured bass alterations &gt; </a>]</td></tr></table>
<a name="chords-changing-the-chord-names-to-german-or-semi_002dgerman-notation"></a>
<h2 class="unnumberedsec">Changing the chord names to German or semi-German notation</h2>


<p>The english naming of chords (default) can be changed to german
(<code>\germanChords</code> replaces B and Bes with H and B) or semi-german
(<code>\semiGermanChords</code> replaces B and Bes with H and Bb).
</p>




<pre class="verbatim">scm = \chordmode {
  c1/c | cis/cis
  b1/b | bis/bis | bes/bes
}


\layout {
  ragged-right = ##t
  \context {
    \ChordNames
    \consists &quot;Instrument_name_engraver&quot;
  }
}

&lt;&lt;
  \new ChordNames {
    \set instrumentName = #&quot;default&quot;
    \scm
  }
  \new ChordNames {
    \set instrumentName = #&quot;german&quot;
    \germanChords \scm
  }
  \new ChordNames {
    \set instrumentName = #&quot;semi-german&quot;
    \semiGermanChords \scm
  }
  \new ChordNames {
    \set instrumentName = #&quot;italian&quot;
    \italianChords \scm
  }
  \new ChordNames {
    \set instrumentName = #&quot;french&quot;
    \frenchChords \scm
  }
  \context Voice { \scm }
&gt;&gt;
</pre><p>
 <a href="28/lily-eb2947e6.ly">
  <img align="middle"
       border="0"
       src="28/lily-eb2947e6.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-positions-of-figured-bass-alterations.ly"></a>

<hr size="6">
<a name="Chords_003a-Changing-the-positions-of-figured-bass-alterations"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-changing-the-chord-names-to-german-or-semi_002dgerman-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Changing the chord names to German or semi-German notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-chord-name-exceptions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Chord name exceptions &gt; </a>]</td></tr></table>
<a name="chords-changing-the-positions-of-figured-bass-alterations"></a>
<h2 class="unnumberedsec">Changing the positions of figured bass alterations</h2>


<p>Accidentals and plus signs can appear before or after the numbers,
depending on the <code>figuredBassAlterationDirection</code> and
<code>figuredBassPlusDirection</code> properties.
</p>

<pre class="verbatim">\figures {
  &lt;6\+&gt; &lt;5+&gt; &lt;6 4-&gt; r
  \set figuredBassAlterationDirection = #RIGHT
  &lt;6\+&gt; &lt;5+&gt; &lt;6 4-&gt; r
  \set figuredBassPlusDirection = #RIGHT
  &lt;6\+&gt; &lt;5+&gt; &lt;6 4-&gt; r
  \set figuredBassAlterationDirection = #LEFT
  &lt;6\+&gt; &lt;5+&gt; &lt;6 4-&gt; r
}
</pre><p>
 <a href="ef/lily-87d461c2.ly">
  <img align="middle"
       border="0"
       src="ef/lily-87d461c2.png"
       alt="[image of music]">
 </a>
</p>




<a name="chord-name-exceptions.ly"></a>

<hr size="6">
<a name="Chords_003a-Chord-name-exceptions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-changing-the-positions-of-figured-bass-alterations" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Changing the positions of figured bass alterations&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-chord-name-major7" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: chord name major7 &gt; </a>]</td></tr></table>
<a name="chords-chord-name-exceptions"></a>
<h2 class="unnumberedsec">Chord name exceptions</h2>


<p>The property <code>chordNameExceptions</code> can be used to store a list of
special notations for specific chords.
</p>

<pre class="verbatim">% modify maj9 and 6(add9)
% Exception music is chords with markups
chExceptionMusic = {
  &lt;c e g b d'&gt;1-\markup { \super &quot;maj9&quot; }
  &lt;c e g a d'&gt;1-\markup { \super &quot;6(add9)&quot; }
}

% Convert music to list and prepend to existing exceptions.
chExceptions = #( append
  ( sequential-music-to-chord-exceptions chExceptionMusic #t)
  ignatzekExceptions)

theMusic = \chordmode {
  g1:maj9 g1:6.9
  \set chordNameExceptions = #chExceptions
  g1:maj9 g1:6.9
}

\layout {
  ragged-right = ##t
}

&lt;&lt; \context ChordNames \theMusic
   \context Voice \theMusic
&gt;&gt;
</pre><p>
 <a href="99/lily-5328669a.ly">
  <img align="middle"
       border="0"
       src="99/lily-5328669a.png"
       alt="[image of music]">
 </a>
</p>




<a name="chord-name-major7.ly"></a>

<hr size="6">
<a name="Chords_003a-chord-name-major7"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-chord-name-exceptions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Chord name exceptions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-clusters" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Clusters &gt; </a>]</td></tr></table>
<a name="chords-chord-name-major7"></a>
<h2 class="unnumberedsec">chord name major7</h2>


<p>The layout of the major 7 can be tuned with <code>majorSevenSymbol</code>.
</p>

<pre class="verbatim">\chords {
  c:7+
  \set majorSevenSymbol = \markup { j7 }
  c:7+
}
</pre><p>
 <a href="46/lily-043b36b8.ly">
  <img align="middle"
       border="0"
       src="46/lily-043b36b8.png"
       alt="[image of music]">
 </a>
</p>




<a name="clusters.ly"></a>

<hr size="6">
<a name="Chords_003a-Clusters"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-chord-name-major7" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: chord name major7&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-controlling-the-placement-of-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Controlling the placement of chord fingerings &gt; </a>]</td></tr></table>
<a name="chords-clusters"></a>
<h2 class="unnumberedsec">Clusters</h2>


<p>Clusters are a device to denote that a complete range of notes is to be
played.
</p>

<pre class="verbatim">fragment = \relative c' {
  c4 f &lt;e d'&gt;4
  &lt;g a&gt;8 &lt;e a&gt; a4 c2 &lt;d b&gt;4
  e2 c
}

&lt;&lt;
  \new Staff \fragment
  \new Staff \makeClusters \fragment
&gt;&gt;
</pre><p>
 <a href="5c/lily-6149fead.ly">
  <img align="middle"
       border="0"
       src="5c/lily-6149fead.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-the-placement-of-chord-fingerings.ly"></a>

<hr size="6">
<a name="Chords_003a-Controlling-the-placement-of-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-clusters" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Clusters&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-cross_002dstaff-chords-_002d-beaming-problems-workaround" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Cross-staff chords - beaming problems workaround &gt; </a>]</td></tr></table>
<a name="chords-controlling-the-placement-of-chord-fingerings"></a>
<h2 class="unnumberedsec">Controlling the placement of chord fingerings</h2>


<p>The placement of fingering numbers can be controlled precisely. For
fingering orientation to apply, you must use a chord construct &lt;&gt; even
if it is a single note.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(left)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down right up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(left)
  &lt;c-1&gt;2
  \set fingeringOrientations = #'(down)
  &lt;e-3&gt;2
}
</pre><p>
 <a href="7a/lily-cfc0f100.ly">
  <img align="middle"
       border="0"
       src="7a/lily-cfc0f100.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-chords---beaming-problems-workaround.ly"></a>

<hr size="6">
<a name="Chords_003a-Cross_002dstaff-chords-_002d-beaming-problems-workaround"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-controlling-the-placement-of-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Controlling the placement of chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-displaying-complex-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Displaying complex chords &gt; </a>]</td></tr></table>
<a name="chords-cross_002dstaff-chords-_002d-beaming-problems-workaround"></a>
<h2 class="unnumberedsec">Cross-staff chords - beaming problems workaround</h2>


<p>Sometimes it is better to use stems from the upper staff for creating
cross-staff chords, because no problems with automatic beam collision
avoidance then arise.  If the stems from the lower staff were used in
the following example, it would be necessary to change the automatic
beam collision avoidance settings so that it doesn&rsquo;t detect collisions
between staves using <code>\override Staff.Beam.collision-voice-only =
##t</code>
</p>

<pre class="verbatim">\new PianoStaff &lt;&lt;
  \new Staff = up
    \relative c' {
      &lt;&lt;
        { r4
          \override Stem.cross-staff = ##t
          \override Stem.length = #19 % this is in half-spaces,
              % so it makes stems 9.5 staffspaces long
          \override Stem.Y-offset = #-6 % stems are normally lengthened
              % upwards, so here we must lower the stem by the amount
              % equal to the lengthening - in this case (19 - 7) / 2
              % (7 is default stem length)
          e e e }
        { s4
          \change Staff = &quot;bottom&quot;
          \override NoteColumn.ignore-collision = ##t
          c, c c
        }
      &gt;&gt;
    }
  \new Staff = bottom
    \relative c' {
      \clef bass
      \voiceOne
      g8 a g a g a g a
    }
&gt;&gt;
</pre><p>
 <a href="40/lily-ecd2f53a.ly">
  <img align="middle"
       border="0"
       src="40/lily-ecd2f53a.png"
       alt="[image of music]">
 </a>
</p>




<a name="displaying-complex-chords.ly"></a>

<hr size="6">
<a name="Chords_003a-Displaying-complex-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-cross_002dstaff-chords-_002d-beaming-problems-workaround" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Cross-staff chords - beaming problems workaround&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-manually-break-figured-bass-extenders-for-only-some-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Manually break figured bass extenders for only some numbers &gt; </a>]</td></tr></table>
<a name="chords-displaying-complex-chords"></a>
<h2 class="unnumberedsec">Displaying complex chords</h2>


<p>Here is a way to display a chord where the same note is played twice
with different accidentals.
</p>

<pre class="verbatim">fixA = {
  \once \override Stem.length = #11
}

fixB = {
  \once \override NoteHead.X-offset = #1.7
  \once \override Stem.length = #7
  \once \override Stem.rotation = #'(45 0 0)
  \once \override Stem.extra-offset = #'(-0.1 . -0.2)
  \once \override Flag.style = #'no-flag
  \once \override Accidental.extra-offset = #'(4 . -.1)
}


\relative c' {
  &lt;&lt; { \fixA &lt;b d!&gt;8 } \\ { \voiceThree \fixB dis } &gt;&gt; s
}
</pre><p>
 <a href="20/lily-c341836c.ly">
  <img align="middle"
       border="0"
       src="20/lily-c341836c.png"
       alt="[image of music]">
 </a>
</p>




<a name="manually-break-figured-bass-extenders-for-only-some-numbers.ly"></a>

<hr size="6">
<a name="Chords_003a-Manually-break-figured-bass-extenders-for-only-some-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-displaying-complex-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Displaying complex chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-showing-chords-at-changes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Showing chords at changes &gt; </a>]</td></tr></table>
<a name="chords-manually-break-figured-bass-extenders-for-only-some-numbers"></a>
<h2 class="unnumberedsec">Manually break figured bass extenders for only some numbers</h2>


<p>Figured bass often uses extenders to indicate continuation of the
corresponding step. However, in this case lilypond is in greedy-mode
and uses extenders whenever possible. To break individual extenders,
one can simply use a modifier \! to a number, which breaks any
extender attributed to that number right before the number.
</p>

<pre class="verbatim">bassfigures = \figuremode {
  \set useBassFigureExtenders = ##t
  &lt;6 4&gt;4 &lt;6 4\!&gt; &lt;6 4\!&gt; &lt;6 4\!&gt; |  &lt;6\! 4\!&gt;  &lt;6 4&gt; &lt;6 4\!&gt; &lt;6 4&gt;
}

&lt;&lt;
  \new Staff \relative c'' { c1 c1 }
  \new FiguredBass \bassfigures
&gt;&gt;
</pre><p>
 <a href="6c/lily-184eba97.ly">
  <img align="middle"
       border="0"
       src="6c/lily-184eba97.png"
       alt="[image of music]">
 </a>
</p>




<a name="showing-chords-at-changes.ly"></a>

<hr size="6">
<a name="Chords_003a-Showing-chords-at-changes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-manually-break-figured-bass-extenders-for-only-some-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Manually break figured bass extenders for only some numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-simple-lead-sheet" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Simple lead sheet &gt; </a>]</td></tr></table>
<a name="chords-showing-chords-at-changes"></a>
<h2 class="unnumberedsec">Showing chords at changes</h2>


<p>Chord names can be displayed only at the start of lines and when the
chord changes.
</p>

<pre class="verbatim">harmonies = \chordmode {
  c1:m c:m \break c:m c:m d
}

&lt;&lt;
  \new ChordNames {
    \set chordChanges = ##t
    \harmonies
  }
  \new Staff {
    \relative c' { \harmonies }
  }
&gt;&gt;
</pre><p>
 <a href="16/lily-a6ce51d6.ly">
  <img align="middle"
       border="0"
       src="16/lily-a6ce51d6.png"
       alt="[image of music]">
 </a>
</p>




<a name="simple-lead-sheet.ly"></a>

<hr size="6">
<a name="Chords_003a-Simple-lead-sheet"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-showing-chords-at-changes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Showing chords at changes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-single-staff-template-with-notes-lyrics-and-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Single staff template with notes lyrics and chords &gt; </a>]</td></tr></table>
<a name="chords-simple-lead-sheet"></a>
<h2 class="unnumberedsec">Simple lead sheet</h2>


<p>When put together, chord names, a melody, and lyrics form a lead sheet:
</p>

<pre class="verbatim">&lt;&lt;
  \chords { c2 g:sus4 f e }
  \relative c'' {
    a4 e c8 e r4
    b2 c4( d)
  }
  \addlyrics { One day this shall be free __ }
&gt;&gt;
</pre><p>
 <a href="74/lily-d02bc6c7.ly">
  <img align="middle"
       border="0"
       src="74/lily-d02bc6c7.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes,-lyrics,-and-chords.ly"></a>

<hr size="6">
<a name="Chords_003a-Single-staff-template-with-notes-lyrics-and-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-simple-lead-sheet" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Simple lead sheet&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-single-staff-template-with-notes-lyrics-chords-and-frets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Single staff template with notes lyrics chords and frets &gt; </a>]</td></tr></table>
<a name="chords-single-staff-template-with-notes-lyrics-and-chords"></a>
<h2 class="unnumberedsec">Single staff template with notes lyrics and chords</h2>


<p>This template allows the preparation of a song with melody, words, and
chords.
</p>

<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

harmonies = \chordmode {
  a2 c
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Voice = &quot;one&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="24/lily-998753a9.ly">
  <img align="middle"
       border="0"
       src="24/lily-998753a9.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes,-lyrics,-chords-and-frets.ly"></a>

<hr size="6">
<a name="Chords_003a-Single-staff-template-with-notes-lyrics-chords-and-frets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-single-staff-template-with-notes-lyrics-and-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Single staff template with notes lyrics and chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-single-staff-template-with-notes-and-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Single staff template with notes and chords &gt; </a>]</td></tr></table>
<a name="chords-single-staff-template-with-notes-lyrics-chords-and-frets"></a>
<h2 class="unnumberedsec">Single staff template with notes lyrics chords and frets</h2>


<p>Here is a simple lead sheet template with melody, lyrics, chords and
fret diagrams.
</p>

<pre class="verbatim">verseI = \lyricmode {
  \set stanza = #&quot;1.&quot;
  This is the first verse
}

verseII = \lyricmode {
  \set stanza = #&quot;2.&quot;
  This is the second verse.
}

theChords = \chordmode {
  % insert chords for chordnames and fretboards here
  c2 g4 c
}

staffMelody = \relative c' {
   \key c \major
   \clef treble
   % Type notes for melody here
   c4 d8 e f4 g
   \bar &quot;|.&quot;
}

\score {
  &lt;&lt;
    \context ChordNames { \theChords }
    \context FretBoards { \theChords }
    \new Staff {
      \context Voice = &quot;voiceMelody&quot; { \staffMelody }
    }
    \new Lyrics = &quot;lyricsI&quot; {
      \lyricsto &quot;voiceMelody&quot; \verseI
    }
    \new Lyrics = &quot;lyricsII&quot; {
      \lyricsto &quot;voiceMelody&quot; \verseII
    }
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="83/lily-2dbd9efe.ly">
  <img align="middle"
       border="0"
       src="83/lily-2dbd9efe.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes-and-chords.ly"></a>

<hr size="6">
<a name="Chords_003a-Single-staff-template-with-notes-and-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-single-staff-template-with-notes-lyrics-chords-and-frets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Single staff template with notes lyrics chords and frets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-vertically-centering-paired-figured-bass-extenders" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Vertically centering paired figured bass extenders &gt; </a>]</td></tr></table>
<a name="chords-single-staff-template-with-notes-and-chords"></a>
<h2 class="unnumberedsec">Single staff template with notes and chords</h2>


<p>Want to prepare a lead sheet with a melody and chords? Look no further!
</p>


<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  f4 e8[ c] d4 g
  a2 ~ a
}

harmonies = \chordmode {
  c4:m f:min7 g:maj c:aug
  d2:dim b4:5 e:sus
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Staff \melody
  &gt;&gt;
  \layout{ }
  \midi { }
}
</pre><p>
 <a href="95/lily-6a45e9d2.ly">
  <img align="middle"
       border="0"
       src="95/lily-6a45e9d2.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-centering-paired-figured-bass-extenders.ly"></a>

<hr size="6">
<a name="Chords_003a-Vertically-centering-paired-figured-bass-extenders"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-single-staff-template-with-notes-and-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Single staff template with notes and chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#chords-volta-below-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Chords: Volta below chords &gt; </a>]</td></tr></table>
<a name="chords-vertically-centering-paired-figured-bass-extenders"></a>
<h2 class="unnumberedsec">Vertically centering paired figured bass extenders</h2>


<p>Where figured bass extender lines are being used by setting
<code>useBassFigureExtenders</code> to true, pairs of congruent figured bass
extender lines are vertically centered if
<code>figuredBassCenterContinuations</code> is set to true.
</p>

<pre class="verbatim">&lt;&lt;
  \relative c' {
    c8 c b b a a c16 c b b
    c8 c b b a a c16 c b b
    c8 c b b a a c c b b
  }
  \figures {
    \set useBassFigureExtenders = ##t
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 r
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 &lt;4 3+&gt;16 r
    \set figuredBassCenterContinuations = ##t
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 r
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 &lt;4 3+&gt;16 r
    \set figuredBassCenterContinuations = ##f
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 r
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 &lt;4 3+&gt;8
  }
&gt;&gt;
</pre><p>
 <a href="9f/lily-79d0e669.ly">
  <img align="middle"
       border="0"
       src="9f/lily-79d0e669.png"
       alt="[image of music]">
 </a>
</p>




<a name="volta-below-chords.ly"></a>

<hr size="6">
<a name="Chords_003a-Volta-below-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#keyboards" title="Next chapter">&nbsp;Keyboards &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-vertically-centering-paired-figured-bass-extenders" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Vertically centering paired figured bass extenders&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#chords" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Chords&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards &gt; </a>]</td></tr></table>
<a name="chords-volta-below-chords"></a>
<h2 class="unnumberedsec">Volta below chords</h2>


<p>By adding the <code>Volta_engraver</code> to the relevant staff, volte can be
put under chords.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \chords {
      c1
      c1
    }
    \new Staff \with {
      \consists &quot;Volta_engraver&quot;
    }
    {
      \repeat volta 2 { c'1 }
      \alternative { c' }
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Volta_engraver&quot;
    }
  }
}
</pre><p>
 <a href="62/lily-5c52ad22.ly">
  <img align="middle"
       border="0"
       src="62/lily-5c52ad22.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Keyboards"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#chords" title="Beginning of this chapter or previous chapter"> &lt;&lt; Chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#chords-volta-below-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Chords: Volta below chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-accordion_002ddiscant-symbols" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Accordion-discant symbols &gt; </a>]</td></tr></table>
<a name="keyboards"></a>
<h1 class="unnumbered">Keyboards</h1>

<a name="index-Keyboard-and-other-multi_002dstaff-instruments"></a>
<p><a href="notation-big-page.html#keyboard-and-other-multi_002dstaff-instruments">Keyboard and other multi-staff instruments</a>
</p>

<a name="accordion-discant-symbols.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Accordion_002ddiscant-symbols"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-accordion-register-symbols" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Accordion register symbols &gt; </a>]</td></tr></table>
<a name="keyboards-accordion_002ddiscant-symbols"></a>
<h2 class="unnumberedsec">Accordion-discant symbols</h2>


<p>This snippet has been obsoleted by predefined markup commands, see
&rsquo;Accordion Registers&rsquo; in the Notation Reference.  It&rsquo;s still useful as
a simple demonstration of how to combine symbols: the placement of the
symbols added with <code>\markup</code> can be tweaked by changing the
<code>\translate-scaled</code> arguments.  <code>\translate-scaled</code> is used
here rather than <code>\translate</code> in order to let the positioning of
the symbol parts adapt to changes of <code>font-size</code>.
</p>

<pre class="verbatim">discant = \markup {
  \musicglyph #&quot;accordion.discant&quot;
}
dot = \markup {
  \musicglyph #&quot;accordion.dot&quot;
}

\layout { ragged-right = ##t }

% 16 voets register
accBasson = ^\markup {
  \combine
  \discant
  \translate-scaled #'(0 . 0.5) \dot
}

% een korig 8 en 16 voets register
accBandon = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 0.5) \dot
      \translate-scaled #'(0 . 1.5) \dot
}

accVCello = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 0.5) \dot
      \combine
        \translate-scaled #'(0 . 1.5) \dot
        \translate-scaled #'(1 . 1.5) \dot
}

% 4-8-16 voets register
accHarmon = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 0.5) \dot
      \combine
        \translate-scaled #'(0 . 1.5) \dot
        \translate-scaled #'(0 . 2.5) \dot
}

accTrombon = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 0.5) \dot
      \combine
        \translate-scaled #'(0 . 1.5) \dot
        \combine
          \translate-scaled #'(1 . 1.5) \dot
          \translate-scaled #'(-1 . 1.5) \dot
}

% eenkorig 4 en 16 voets register
accOrgan = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 0.5) \dot
      \translate-scaled #'(0 . 2.5) \dot
}

accMaster = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 0.5) \dot
      \combine
        \translate-scaled #'(0 . 1.5) \dot
        \combine
          \translate-scaled #'(1 . 1.5) \dot
          \combine
            \translate-scaled #'(-1 . 1.5) \dot
            \translate-scaled #'(0 . 2.5) \dot
}

accAccord = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 1.5) \dot
      \combine
        \translate-scaled #'(1 . 1.5) \dot
        \combine
          \translate-scaled #'(-1 . 1.5) \dot
          \translate-scaled #'(0 . 2.5) \dot
}

accMusette = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 1.5) \dot
      \combine
        \translate-scaled #'(1 . 1.5) \dot
        \translate-scaled #'(-1 . 1.5) \dot
}

accCeleste = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 1.5) \dot
      \translate-scaled #'(-1 . 1.5) \dot
}

accOboe = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 1.5) \dot
      \translate-scaled #'(0 . 2.5) \dot
}

accClarin = ^\markup {
  \combine
    \discant
    \translate-scaled #'(0 . 1.5) \dot
}

accPiccolo = ^\markup {
    \combine
       \discant
       \translate-scaled #'(0 . 2.5) \dot
}

accViolin = ^\markup {
  \combine
    \discant
    \combine
      \translate-scaled #'(0 . 1.5) \dot
      \combine
        \translate-scaled #'(1 . 1.5) \dot
        \translate-scaled #'(0 . 2.5) \dot
}

\relative c'' {
  c4 d\accBasson e f
  c4 d\accBandon e f
  c4 d\accVCello e f
  c4 d\accHarmon e f
  c4 d\accTrombon e f
  \break
  c4 d\accOrgan e f
  c4 d\accMaster e f
  c4 d\accAccord e f
  c4 d\accMusette e f
  c4 d\accCeleste e f
  \break
  c4 d\accOboe e f
  c4 d\accClarin e f
  c4 d\accPiccolo e f
  c4 d\accViolin e f
}
</pre><p>
 <a href="76/lily-8bda61d1.ly">
  <img align="middle"
       border="0"
       src="76/lily-8bda61d1.png"
       alt="[image of music]">
 </a>
</p>




<a name="accordion-register-symbols.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Accordion-register-symbols"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-accordion_002ddiscant-symbols" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Accordion-discant symbols&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-changing-the-text-for-sustain-markings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Changing the text for sustain markings &gt; </a>]</td></tr></table>
<a name="keyboards-accordion-register-symbols"></a>
<h2 class="unnumberedsec">Accordion register symbols</h2>


<p>Accordion register symbols are available as <code>\markup</code> as well as
as standalone music events (as register changes tend to occur between
actual music events.  Bass registers are not overly standardized.  The
available commands can be found in &rsquo;Accordion Registers&rsquo; in the
Notation Reference.
</p>

<pre class="verbatim">#(use-modules (scm accreg))

\new PianoStaff
&lt;&lt;
  \new Staff \relative {
    \clef treble \discant &quot;10&quot; r8 s32 f'[ bes f] s e[ a e] s d[ g d] s16 e32[ a]
    &lt;&lt;
      { r16 &lt;f bes&gt; r &lt;e a&gt; r &lt;d g&gt; }
      \\
      { d r a r bes r }
    &gt;&gt; |
    &lt;cis e a&gt;1
  }
  \new Staff \relative {
    \clef treble \freeBass &quot;1&quot; r8 d'32 s16. c32 s16. bes32 s16. a32[ cis] s16
    \clef bass \stdBass &quot;Master&quot;
    &lt;&lt;
      { r16 &lt;f, bes d&gt;^&quot;b&quot; r &lt;e a c&gt;^&quot;am&quot; r &lt;d g bes&gt;^&quot;gm&quot; |
      &lt;e a cis&gt;1^&quot;a&quot; }
      \\
      { d8_&quot;D&quot; c_&quot;C&quot; bes_&quot;B&quot; | a1_&quot;A&quot; }
    &gt;&gt;
  }
&gt;&gt;
</pre><p>
 <a href="3e/lily-1fe57bed.ly">
  <img align="middle"
       border="0"
       src="3e/lily-1fe57bed.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-text-for-sustain-markings.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Changing-the-text-for-sustain-markings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-accordion-register-symbols" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Accordion register symbols&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-clusters" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Clusters &gt; </a>]</td></tr></table>
<a name="keyboards-changing-the-text-for-sustain-markings"></a>
<h2 class="unnumberedsec">Changing the text for sustain markings</h2>


<p><code>Staff.pedalSustainStrings</code> can be used to set the text used for
pedal down and up.  Note that the only valid strings are those found in
the list of pedal glyphs - the values used this snippet constitute an
exhaustive list.
</p>

<pre class="verbatim">sustainNotes = { c4\sustainOn d e\sustainOff\sustainOn f\sustainOff }

\relative c' {
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;P&quot; &quot;P-&quot; &quot;-&quot;)
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;d&quot; &quot;de&quot; &quot;e&quot;)
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;M&quot; &quot;M-&quot; &quot;-&quot;)
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;Ped&quot; &quot;*Ped&quot; &quot;*&quot;)
  \sustainNotes
}
</pre><p>
 <a href="91/lily-7704e9e8.ly">
  <img align="middle"
       border="0"
       src="91/lily-7704e9e8.png"
       alt="[image of music]">
 </a>
</p>




<a name="clusters.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Clusters"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-changing-the-text-for-sustain-markings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Changing the text for sustain markings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-controlling-the-placement-of-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Controlling the placement of chord fingerings &gt; </a>]</td></tr></table>
<a name="keyboards-clusters"></a>
<h2 class="unnumberedsec">Clusters</h2>


<p>Clusters are a device to denote that a complete range of notes is to be
played.
</p>

<pre class="verbatim">fragment = \relative c' {
  c4 f &lt;e d'&gt;4
  &lt;g a&gt;8 &lt;e a&gt; a4 c2 &lt;d b&gt;4
  e2 c
}

&lt;&lt;
  \new Staff \fragment
  \new Staff \makeClusters \fragment
&gt;&gt;
</pre><p>
 <a href="5c/lily-6149fead.ly">
  <img align="middle"
       border="0"
       src="5c/lily-6149fead.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-the-placement-of-chord-fingerings.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Controlling-the-placement-of-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-clusters" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Clusters&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-creating-slurs-across-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Creating slurs across voices &gt; </a>]</td></tr></table>
<a name="keyboards-controlling-the-placement-of-chord-fingerings"></a>
<h2 class="unnumberedsec">Controlling the placement of chord fingerings</h2>


<p>The placement of fingering numbers can be controlled precisely. For
fingering orientation to apply, you must use a chord construct &lt;&gt; even
if it is a single note.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(left)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down right up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(left)
  &lt;c-1&gt;2
  \set fingeringOrientations = #'(down)
  &lt;e-3&gt;2
}
</pre><p>
 <a href="7a/lily-cfc0f100.ly">
  <img align="middle"
       border="0"
       src="7a/lily-cfc0f100.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-slurs-across-voices.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Creating-slurs-across-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-controlling-the-placement-of-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Controlling the placement of chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-cross_002dstaff-chords-_002d-beaming-problems-workaround" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Cross-staff chords - beaming problems workaround &gt; </a>]</td></tr></table>
<a name="keyboards-creating-slurs-across-voices"></a>
<h2 class="unnumberedsec">Creating slurs across voices</h2>


<p>In some situations, it may be necessary to create slurs between notes
from different voices.
</p>
<p>The solution is to add invisible notes to one of the voices, using
<code>\hideNotes</code>.
</p>
<p>This example is measure 235 of the Ciaconna from Bach&rsquo;s 2nd Partita for
solo violin, BWV 1004.
</p>

<pre class="verbatim">\relative c' {
  &lt;&lt;
    {
      d16( a') s a s a[ s a] s a[ s a]
    }
    \\
    {
      \slurUp
      bes,16[ s e](
      \hideNotes a)
      \unHideNotes f[(
      \hideNotes a)
      \unHideNotes fis](
      \hideNotes a)
      \unHideNotes g[(
      \hideNotes a)
      \unHideNotes gis](
      \hideNotes a)
    }
  &gt;&gt;
}
</pre><p>
 <a href="35/lily-8ea95a2b.ly">
  <img align="middle"
       border="0"
       src="35/lily-8ea95a2b.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-chords---beaming-problems-workaround.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Cross_002dstaff-chords-_002d-beaming-problems-workaround"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-creating-slurs-across-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Creating slurs across voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-cross_002dstaff-tremolos" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Cross-staff tremolos &gt; </a>]</td></tr></table>
<a name="keyboards-cross_002dstaff-chords-_002d-beaming-problems-workaround"></a>
<h2 class="unnumberedsec">Cross-staff chords - beaming problems workaround</h2>


<p>Sometimes it is better to use stems from the upper staff for creating
cross-staff chords, because no problems with automatic beam collision
avoidance then arise.  If the stems from the lower staff were used in
the following example, it would be necessary to change the automatic
beam collision avoidance settings so that it doesn&rsquo;t detect collisions
between staves using <code>\override Staff.Beam.collision-voice-only =
##t</code>
</p>

<pre class="verbatim">\new PianoStaff &lt;&lt;
  \new Staff = up
    \relative c' {
      &lt;&lt;
        { r4
          \override Stem.cross-staff = ##t
          \override Stem.length = #19 % this is in half-spaces,
              % so it makes stems 9.5 staffspaces long
          \override Stem.Y-offset = #-6 % stems are normally lengthened
              % upwards, so here we must lower the stem by the amount
              % equal to the lengthening - in this case (19 - 7) / 2
              % (7 is default stem length)
          e e e }
        { s4
          \change Staff = &quot;bottom&quot;
          \override NoteColumn.ignore-collision = ##t
          c, c c
        }
      &gt;&gt;
    }
  \new Staff = bottom
    \relative c' {
      \clef bass
      \voiceOne
      g8 a g a g a g a
    }
&gt;&gt;
</pre><p>
 <a href="40/lily-ecd2f53a.ly">
  <img align="middle"
       border="0"
       src="40/lily-ecd2f53a.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-tremolos.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Cross_002dstaff-tremolos"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-cross_002dstaff-chords-_002d-beaming-problems-workaround" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Cross-staff chords - beaming problems workaround&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-fine_002dtuning-pedal-brackets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Fine-tuning pedal brackets &gt; </a>]</td></tr></table>
<a name="keyboards-cross_002dstaff-tremolos"></a>
<h2 class="unnumberedsec">Cross-staff tremolos</h2>


<p>Since <code>\repeat tremolo</code> expects exactly two musical arguments for
chord tremolos, the note or chord which changes staff within a
cross-staff tremolo should be placed inside curly braces together with
its <code>\change Staff</code> command.
</p>

<pre class="verbatim">\new PianoStaff &lt;&lt;
  \new Staff = &quot;up&quot; \relative c'' {
    \key a \major
    \time 3/8
    s4.
  }
  \new Staff = &quot;down&quot; \relative c'' {
    \key a \major
    \time 3/8
    \voiceOne
    \repeat tremolo 6 {
      &lt;a e'&gt;32
      {
        \change Staff = &quot;up&quot;
        \voiceTwo
        &lt;cis a' dis&gt;32
      }
    }
  }
&gt;&gt;
</pre><p>
 <a href="2b/lily-ea876e0b.ly">
  <img align="middle"
       border="0"
       src="2b/lily-ea876e0b.png"
       alt="[image of music]">
 </a>
</p>




<a name="fine-tuning-pedal-brackets.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Fine_002dtuning-pedal-brackets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-cross_002dstaff-tremolos" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Cross-staff tremolos&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-indicating-cross_002dstaff-chords-with-arpeggio-bracket" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Indicating cross-staff chords with arpeggio bracket &gt; </a>]</td></tr></table>
<a name="keyboards-fine_002dtuning-pedal-brackets"></a>
<h2 class="unnumberedsec">Fine-tuning pedal brackets</h2>


<p>The appearance of pedal brackets may be altered in different ways.
</p>

<pre class="verbatim">\paper { ragged-right = ##f }
\relative c'' {
  c2\sostenutoOn c
  c2\sostenutoOff c
  \once \override Staff.PianoPedalBracket.shorten-pair = #'(-7 . -2)
  c2\sostenutoOn c
  c2\sostenutoOff c
  \once \override Staff.PianoPedalBracket.edge-height = #'(0 . 3)
  c2\sostenutoOn c
  c2\sostenutoOff c
}
</pre><p>
 <a href="02/lily-59b6eb39.ly">
  <img align="middle"
       border="0"
       src="02/lily-59b6eb39.png"
       alt="[image of music]">
 </a>
</p>




<a name="indicating-cross-staff-chords-with-arpeggio-bracket.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Indicating-cross_002dstaff-chords-with-arpeggio-bracket"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-fine_002dtuning-pedal-brackets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Fine-tuning pedal brackets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-jazz-combo-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Jazz combo template &gt; </a>]</td></tr></table>
<a name="keyboards-indicating-cross_002dstaff-chords-with-arpeggio-bracket"></a>
<h2 class="unnumberedsec">Indicating cross-staff chords with arpeggio bracket</h2>


<p>An arpeggio bracket can indicate that notes on two different staves are
to be played with the same hand. In order to do this, the
<code>PianoStaff</code> must be set to accept cross-staff arpeggios and the
arpeggios must be set to the bracket shape in the <code>PianoStaff</code>
context.
</p>

<p>(Debussy, Les collines d’Anacapri, m. 65)
</p>

<pre class="verbatim">\new PianoStaff &lt;&lt;
  \set PianoStaff.connectArpeggios = ##t
  \override PianoStaff.Arpeggio.stencil = #ly:arpeggio::brew-chord-bracket
  \new Staff {
    \relative c' {
      \key b \major
      \time 6/8
      b8-.(\arpeggio fis'-.\&gt; cis-. e-. gis-. b-.)\!\fermata^\laissezVibrer
      \bar &quot;||&quot;
    }
  }
  \new Staff {
    \relative c' {
      \clef bass
      \key b \major
      &lt;&lt;
        {
          &lt;a e cis&gt;2.\arpeggio
        }
        \\
        {
          &lt;a, e a,&gt;2.
        }
      &gt;&gt;
    }
  }
&gt;&gt;
</pre><p>
 <a href="cf/lily-c94f1d4f.ly">
  <img align="middle"
       border="0"
       src="cf/lily-c94f1d4f.png"
       alt="[image of music]">
 </a>
</p>




<a name="jazz-combo-template.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Jazz-combo-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-indicating-cross_002dstaff-chords-with-arpeggio-bracket" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Indicating cross-staff chords with arpeggio bracket&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-laissez-vibrer-ties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Laissez vibrer ties &gt; </a>]</td></tr></table>
<a name="keyboards-jazz-combo-template"></a>
<h2 class="unnumberedsec">Jazz combo template</h2>


<p>This is quite an advanced template, for a jazz ensemble. Note that all
instruments are notated in <code>\key c \major</code>. This refers to the
key in concert pitch; the key will be automatically transposed if the
music is within a <code>\transpose</code> section.
</p>

<pre class="verbatim">  }
}
% To make the example display in the documentation
\paper {
  paper-width = 130
}
%#(set-global-staff-size 16)
\include &quot;english.ly&quot;

%%%%%%%%%%%% Some macros %%%%%%%%%%%%%%%%%%%

sl = {
  \override NoteHead.style = #'slash
  \hide Stem
}
nsl = {
  \revert NoteHead.style
  \undo \hide Stem
}
crOn = \override NoteHead.style = #'cross
crOff = \revert NoteHead.style

%% insert chord name style stuff here.

jazzChords = { }

%%%%%%%%%%%% Keys'n'thangs %%%%%%%%%%%%%%%%%

global = { \time 4/4 }

Key = { \key c \major }

% ############ Horns ############

% ------ Trumpet ------
trpt = \transpose c d \relative c'' {
  \Key
  c1 | c | c |
}
trpHarmony = \transpose c' d {
  \jazzChords
}
trumpet = {
  \global
  \clef treble
  &lt;&lt;
    \trpt
  &gt;&gt;
}

% ------ Alto Saxophone ------
alto = \transpose c a \relative c' {
  \Key
  c1 | c | c |
}
altoHarmony = \transpose c' a {
  \jazzChords
}
altoSax = {
  \global
  \clef treble
  &lt;&lt;
    \alto
  &gt;&gt;
}

% ------ Baritone Saxophone ------
bari = \transpose c a' \relative c {
  \Key
  c1
  c1
  \sl
  d4^&quot;Solo&quot; d d d
  \nsl
}
bariHarmony = \transpose c' a \chordmode {
  \jazzChords s1 s d2:maj e:m7
}
bariSax = {
  \global
  \clef treble
  &lt;&lt;
    \bari
  &gt;&gt;
}

% ------ Trombone ------
tbone = \relative c {
  \Key
  c1 | c | c
}
tboneHarmony = \chordmode {
  \jazzChords
}
trombone = {
  \global
  \clef bass
  &lt;&lt;
    \tbone
  &gt;&gt;
}

% ############ Rhythm Section #############

% ------ Guitar ------
gtr = \relative c'' {
  \Key
  c1
  \sl
  b4 b b b
  \nsl
  c1
}
gtrHarmony = \chordmode {
  \jazzChords
  s1 c2:min7+ d2:maj9
}
guitar = {
  \global
  \clef treble
  &lt;&lt;
    \gtr
  &gt;&gt;
}

%% ------ Piano ------
rhUpper = \relative c'' {
  \voiceOne
  \Key
  c1 | c | c
}
rhLower = \relative c' {
  \voiceTwo
  \Key
  e1 | e | e
}

lhUpper = \relative c' {
  \voiceOne
  \Key
  g1 | g | g
}
lhLower = \relative c {
  \voiceTwo
  \Key
  c1 | c | c
}

PianoRH = {
  \clef treble
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \rhUpper
    \new Voice = &quot;two&quot; \rhLower
  &gt;&gt;
}
PianoLH = {
  \clef bass
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \lhUpper
    \new Voice = &quot;two&quot; \lhLower
  &gt;&gt;
}

piano = {
  &lt;&lt;
    \new Staff = &quot;upper&quot; \PianoRH
    \new Staff = &quot;lower&quot; \PianoLH
  &gt;&gt;
}

% ------ Bass Guitar ------
Bass = \relative c {
  \Key
  c1 | c | c
}
bass = {
  \global
  \clef bass
  &lt;&lt;
    \Bass
  &gt;&gt;
}

% ------ Drums ------
up = \drummode {
  \voiceOne
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
}
down = \drummode {
  \voiceTwo
  bd4 s bd s
  bd4 s bd s
  bd4 s bd s
}

drumContents = {
  \global
  &lt;&lt;
    \new DrumVoice \up
    \new DrumVoice \down
  &gt;&gt;
}

%%%%%%%%% It All Goes Together Here %%%%%%%%%%%%%%%%%%%%%%

\score {
  &lt;&lt;
    \new StaffGroup = &quot;horns&quot; &lt;&lt;
      \new Staff = &quot;trumpet&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \trumpet
      \new Staff = &quot;altosax&quot; \with { instrumentName = #&quot;Alto Sax&quot; }
      \altoSax
      \new ChordNames = &quot;barichords&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \bariHarmony
      \new Staff = &quot;barisax&quot; \with { instrumentName = #&quot;Bari Sax&quot; }
      \bariSax
      \new Staff = &quot;trombone&quot; \with { instrumentName = #&quot;Trombone&quot; }
      \trombone
    &gt;&gt;

    \new StaffGroup = &quot;rhythm&quot; &lt;&lt;
      \new ChordNames = &quot;chords&quot; \gtrHarmony
      \new Staff = &quot;guitar&quot; \with { instrumentName = #&quot;Guitar&quot; }
      \guitar
      \new PianoStaff = &quot;piano&quot; \with {
        instrumentName = #&quot;Piano&quot;
        midiInstrument = #&quot;acoustic grand&quot;
      }
      \piano
      \new Staff = &quot;bass&quot; \with { instrumentName = #&quot;Bass&quot; }
      \bass
      \new DrumStaff \with { instrumentName = #&quot;Drums&quot; }
      \drumContents
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
    \context {
      \Score
      \override BarNumber.padding = #3
      \override RehearsalMark.padding = #2
      skipBars = ##t
    }
  }
  \midi { }
}
</pre><p>
 <a href="11/lily-52f7d620.ly">
  <img align="middle"
       border="0"
       src="11/lily-52f7d620.png"
       alt="[image of music]">
 </a>
</p>




<a name="laissez-vibrer-ties.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Laissez-vibrer-ties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-jazz-combo-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Jazz combo template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-piano-template-_0028simple_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Piano template (simple) &gt; </a>]</td></tr></table>
<a name="keyboards-laissez-vibrer-ties"></a>
<h2 class="unnumberedsec">Laissez vibrer ties</h2>


<p>Laissez vibrer ties have a fixed size. Their formatting can be tuned
using <code>'tie-configuration</code>.
</p>

<pre class="verbatim">\relative c' {
  &lt;c e g&gt;4\laissezVibrer r &lt;c f g&gt;\laissezVibrer r
  &lt;c d f g&gt;4\laissezVibrer r &lt;c d f g&gt;4.\laissezVibrer r8

  &lt;c d e f&gt;4\laissezVibrer r
  \override LaissezVibrerTieColumn.tie-configuration
     = #`((-7 . ,DOWN)
          (-5 . ,DOWN)
          (-3 . ,UP)
          (-1 . ,UP))
  &lt;c d e f&gt;4\laissezVibrer r
}
</pre><p>
 <a href="a7/lily-958b3403.ly">
  <img align="middle"
       border="0"
       src="a7/lily-958b3403.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-simple.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Piano-template-_0028simple_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-laissez-vibrer-ties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Laissez vibrer ties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-piano-template-with-centered-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Piano template with centered lyrics &gt; </a>]</td></tr></table>
<a name="keyboards-piano-template-_0028simple_0029"></a>
<h2 class="unnumberedsec">Piano template (simple)</h2>


<p>Here is a simple piano staff with some notes.
</p>

<pre class="verbatim">lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

\score {
  \new PianoStaff \with { instrumentName = #&quot;Piano&quot; }
  &lt;&lt;
    \new Staff = &quot;upper&quot; \upper
    \new Staff = &quot;lower&quot; \lower
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="30/lily-2e7eaa60.ly">
  <img align="middle"
       border="0"
       src="30/lily-2e7eaa60.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-with-centered-lyrics.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Piano-template-with-centered-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-piano-template-_0028simple_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Piano template (simple)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-piano-template-with-melody-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Piano template with melody and lyrics &gt; </a>]</td></tr></table>
<a name="keyboards-piano-template-with-centered-lyrics"></a>
<h2 class="unnumberedsec">Piano template with centered lyrics</h2>


<p>Instead of having a full staff for the melody and lyrics, lyrics can be
centered between the staves of a piano staff.
</p>

<pre class="verbatim">upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = upper { \new Voice = &quot;singer&quot; \upper }
    \new Lyrics \lyricsto &quot;singer&quot; \text
    \new Staff = lower { \lower }
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="8f/lily-fef1140c.ly">
  <img align="middle"
       border="0"
       src="8f/lily-fef1140c.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-with-melody-and-lyrics.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Piano-template-with-melody-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-piano-template-with-centered-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Piano template with centered lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-removing-brace-on-first-line-of-piano-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Removing brace on first line of piano score &gt; </a>]</td></tr></table>
<a name="keyboards-piano-template-with-melody-and-lyrics"></a>
<h2 class="unnumberedsec">Piano template with melody and lyrics</h2>


<p>Here is a typical song format: one staff with the melody and lyrics,
with piano accompaniment underneath.
</p>

<pre class="verbatim">melody = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

\score {
  &lt;&lt;
    \new Voice = &quot;mel&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto mel \text
    \new PianoStaff &lt;&lt;
      \new Staff = &quot;upper&quot; \upper
      \new Staff = &quot;lower&quot; \lower
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
  }
  \midi { }
}
</pre><p>
 <a href="b6/lily-36167b72.ly">
  <img align="middle"
       border="0"
       src="b6/lily-36167b72.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-brace-on-first-line-of-piano-score.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Removing-brace-on-first-line-of-piano-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-piano-template-with-melody-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Piano template with melody and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-using-autochange-with-more-than-one-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Using autochange with more than one voice &gt; </a>]</td></tr></table>
<a name="keyboards-removing-brace-on-first-line-of-piano-score"></a>
<h2 class="unnumberedsec">Removing brace on first line of piano score</h2>


<p>This snippet removes the first brace from a <code>PianoStaff</code> or a
<code>GrandStaff</code>. It may be useful when cutting and pasting the
engraved image into existing music.
</p>
<p>It uses <code>\alterBroken</code>.
</p>

<pre class="verbatim">someMusic =  {
  \once \override Staff.Clef.stencil = ##f
  \once \override Staff.TimeSignature.stencil = ##f
  \repeat unfold 3 c1 \break
  \repeat unfold 5 c1 \break
  \repeat unfold 5 c1
}

\score {
  \new PianoStaff
  &lt;&lt;
    \new Staff = &quot;right&quot; \relative c'' \someMusic
    \new Staff = &quot;left&quot; \relative c' { \clef F \someMusic }
  &gt;&gt;
  \layout {
    indent=75
    \context {
      \PianoStaff
      \alterBroken transparent #'(#t) SystemStartBrace
    }
  }
}
</pre><p>
 <a href="54/lily-65276f1a.ly">
  <img align="middle"
       border="0"
       src="54/lily-65276f1a.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-autochange-with-more-than-one-voice.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Using-autochange-with-more-than-one-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-removing-brace-on-first-line-of-piano-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Removing brace on first line of piano score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#keyboards-vocal-ensemble-template-with-automatic-piano-reduction" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Keyboards: Vocal ensemble template with automatic piano reduction &gt; </a>]</td></tr></table>
<a name="keyboards-using-autochange-with-more-than-one-voice"></a>
<h2 class="unnumberedsec">Using autochange with more than one voice</h2>


<p>Using <code>autochange</code> with more than one voice.
</p>

<pre class="verbatim">\score
{
  \new PianoStaff
  &lt;&lt;
    \new Staff = &quot;up&quot; {
      &lt;&lt;
        \set Timing.beamExceptions = #'()
        \set Timing.beatStructure = #'(4)
        \new Voice {
          \voiceOne
          \autochange
          \relative c' {
            g8 a b c d e f g
            g,8 a b c d e f g
          }
        }

        \new Voice {
          \voiceTwo
          \autochange
          \relative c' {
            g8 a b c d e f g
            g,,8 a b c d e f g
          }
        }
      &gt;&gt;
    }

    \new Staff = &quot;down&quot; {
      \clef bass
    }
  &gt;&gt;
}
</pre><p>
 <a href="fc/lily-64bc4ffa.ly">
  <img align="middle"
       border="0"
       src="fc/lily-64bc4ffa.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-automatic-piano-reduction.ly"></a>

<hr size="6">
<a name="Keyboards_003a-Vocal-ensemble-template-with-automatic-piano-reduction"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#percussion" title="Next chapter">&nbsp;Percussion &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-using-autochange-with-more-than-one-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Using autochange with more than one voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#keyboards" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Keyboards&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion &gt; </a>]</td></tr></table>
<a name="keyboards-vocal-ensemble-template-with-automatic-piano-reduction"></a>
<h2 class="unnumberedsec">Vocal ensemble template with automatic piano reduction</h2>


<p>This template adds an automatic piano reduction to the standard SATB
vocal score demonstrated in &ldquo;Vocal ensemble template&rdquo;. This
demonstrates one of the strengths of LilyPond – you can use a music
definition more than once. If any changes are made to the vocal notes
(say, <code>tenorMusic</code>), then the changes will also apply to the piano
reduction.
</p>

<pre class="verbatim">\paper {
  top-system-spacing.basic-distance = #10
  score-system-spacing.basic-distance = #20
  system-system-spacing.basic-distance = #20
  last-bottom-spacing.basic-distance = #10
}

global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative {
  c''4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative {
  e'4 f d e
}
altoWords =\lyricmode {
  ha ha ha ha
}

tenorMusic = \relative {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  &lt;&lt;
    \new ChoirStaff &lt;&lt;
      \new Lyrics = &quot;sopranos&quot; \with {
        % This is needed for lyrics above a staff
        \override VerticalAxisGroup.staff-affinity = #DOWN
      }
      \new Staff = &quot;women&quot; &lt;&lt;
        \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
        \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = &quot;altos&quot;
      \new Lyrics = &quot;tenors&quot; \with {
        % This is needed for lyrics above a staff
        \override VerticalAxisGroup.staff-affinity = #DOWN
      }

      \new Staff = &quot;men&quot; &lt;&lt;
        \clef bass
        \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
        \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = &quot;basses&quot;
      \context Lyrics = &quot;sopranos&quot; \lyricsto &quot;sopranos&quot; \sopWords
      \context Lyrics = &quot;altos&quot; \lyricsto &quot;altos&quot; \altoWords
      \context Lyrics = &quot;tenors&quot; \lyricsto &quot;tenors&quot; \tenorWords
      \context Lyrics = &quot;basses&quot; \lyricsto &quot;basses&quot; \bassWords
    &gt;&gt;
    \new PianoStaff &lt;&lt;
      \new Staff &lt;&lt;
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \sopMusic &gt;&gt;
        &lt;&lt; \global \altoMusic &gt;&gt;
      &gt;&gt;
      \new Staff &lt;&lt;
        \clef bass
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \tenorMusic &gt;&gt;
        &lt;&lt; \global \bassMusic &gt;&gt;
      &gt;&gt;
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="7e/lily-b74604fe.ly">
  <img align="middle"
       border="0"
       src="7e/lily-b74604fe.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Percussion"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#keyboards" title="Beginning of this chapter or previous chapter"> &lt;&lt; Keyboards&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#keyboards-vocal-ensemble-template-with-automatic-piano-reduction" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Keyboards: Vocal ensemble template with automatic piano reduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion-adding-drum-parts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion: Adding drum parts &gt; </a>]</td></tr></table>
<a name="percussion"></a>
<h1 class="unnumbered">Percussion</h1>

<a name="index-Percussion"></a>
<p><a href="notation-big-page.html#percussion">Percussion</a>
</p>

<a name="adding-drum-parts.ly"></a>

<hr size="6">
<a name="Percussion_003a-Adding-drum-parts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#percussion" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Percussion&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion: Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi &gt; </a>]</td></tr></table>
<a name="percussion-adding-drum-parts"></a>
<h2 class="unnumberedsec">Adding drum parts</h2>


<p>Using the powerful pre-configured tools such as the <code>\drummode</code>
function and the <code>DrumStaff</code> context, inputting drum parts is
quite easy: drums are placed at their own staff positions (with a
special clef symbol) and have note heads according to the drum.
Attaching an extra symbol to the drum or restricting the number of
lines is possible.
</p>

<pre class="verbatim">drl = \drummode {
        bd4 sn8 bd bd4 &lt;&lt; bd ss &gt;&gt;
        bd8 tommh tommh bd toml toml bd tomfh16 tomfh
      }
timb = \drummode {
         timh4 ssh timl8 ssh r timh r4
         ssh8 timl r4 cb8 cb
       }

\score {
  &lt;&lt;
    \new DrumStaff \with {
      instrumentName = #&quot;timbales&quot;
      drumStyleTable = #timbales-style
      \override StaffSymbol.line-count = #2
      \override BarLine.bar-extent = #'(-1 . 1)
    }
    &lt;&lt;
      \timb
    &gt;&gt;
    \new DrumStaff \with { instrumentName = #&quot;drums&quot; }
    &lt;&lt;
      \new DrumVoice { \stemUp \drh }
      \new DrumVoice { \stemDown \drl }
    &gt;&gt;
  &gt;&gt;
  \layout { }
  \midi { \tempo 4 = 120 }
}
</pre><p>
 <a href="ba/lily-1c5797ff.ly">
  <img align="middle"
       border="0"
       src="ba/lily-1c5797ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="customize-drumpitchnames,-drumstyletable-and-drumpitchtable-in-layout-and-midi.ly"></a>

<hr size="6">
<a name="Percussion_003a-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion-adding-drum-parts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion: Adding drum parts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#percussion" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Percussion&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion-heavily-customized-polymetric-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion: Heavily customized polymetric time signatures &gt; </a>]</td></tr></table>
<a name="percussion-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi"></a>
<h2 class="unnumberedsec">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</h2>


<p>If you want to use customized drum-pitch-names for an own drum-style
with proper output for layout and midi, follow the steps as
demonstrated in the code below. In short:
</p>
<p>* define the names * define the appearence * tell LilyPond to use it
for layout * assign pitches to the names * tell LilyPond to use them
for midi
</p>

<pre class="verbatim">%% This snippet tries to amend
%% NR 2.5.1 Common notation for percussion - Custom percussion staves
%% http://lilypond.org/doc/v2.18/Documentation/notation/common-notation-for-percussion#custom-percussion-staves

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% To use custom drum-pitch-names for your score and midi you need to follow
%% this route:
%%
%%%%%%%%%%%%
%% LAYOUT:
%%%%%%%%%%%%
%%
%% (1) Define a name and put it in `drumPitchNames'
%%     This can be done at toplevel with
%%         drumPitchNames #'my-name  = #'my-name
%%     or shorter:
%%         drumPitchNames.my-name  = #'my-name
%%     It's possible to add an alias as well.
%% (2) Define how it should be printed
%%     Therefore put them into a toplevel-list, where each entry should look:
%%         (my-name
%%           note-head-style-or-default
%%             articulation-string-or-#f
%%               staff-position)
%%     Example:
%%         #(define my-style
%%           '(
%%             (my-name default &quot;tenuto&quot; -1)
%%             ; ...
%%             ))
%% (3) Tell LilyPond to use this custom-definitions, with
%%         drumStyleTable = #(alist-&gt;hash-table my-style)
%%     in a \layout or \with
%%
%%     Now we're done for layout, here a short, but complete example:
%%         \new DrumStaff
%%           \with { drumStyleTable = #(alist-&gt;hash-table my-style) }
%%           \drummode { my-name }
%%
%%%%%%%%%%%%
%% MIDI:
%%%%%%%%%%%%
%%
%% (1) Again at toplvel, assign a pitch to your custom-note-name
%%         midiDrumPitches #'my-name = #(ly:make-pitch -1 4 FLAT)
%%     or shorter:
%%         midiDrumPitches.my-name = ges
%%     Note that you have to use the name, which is in drumPitchNames, no alias
%% (2) Tell LilyPond to use this pitch(es), with
%%         drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
%%
%%     Example:
%%         \score {
%%            \new DrumStaff
%%             \with {
%%               drumStyleTable = #(alist-&gt;hash-table my-style)
%%               drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
%%             }
%%             \drummode { my-name4 }
%%           \layout {}
%%           \midi {}
%%         }
%%
%%%%%%%%%%%%
%% TESTING
%%%%%%%%%%%%
%%
%% To test whether all is fine, run the following sequence in terminal:
%%         lilypond my-file.ly
%%         midi2ly my-file.midi
%%         gedit my-file-midi.ly
%%
%% Which will do:
%% 1. create pdf and midi
%% 2. transform the midi back to a .ly-file
%%    (note: midi2ly is not always good in correctly identifying enharmonic pitches)
%% 3. open this file in gedit (or use another editor)
%% Now watch what you've got.
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% FULL EXAMPLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

drumPitchNames.dbass      = #'dbass
drumPitchNames.dba        = #'dbass  % 'db is in use already
drumPitchNames.dbassmute  = #'dbassmute
drumPitchNames.dbm        = #'dbassmute
drumPitchNames.do         = #'dopen
drumPitchNames.dopenmute  = #'dopenmute
drumPitchNames.dom        = #'dopenmute
drumPitchNames.dslap      = #'dslap
drumPitchNames.ds         = #'dslap
drumPitchNames.dslapmute  = #'dslapmute
drumPitchNames.dsm        = #'dslapmute

#(define djembe
  '((dbass      default  #f         -2)
    (dbassmute  default  &quot;stopped&quot;  -2)
    (dopen      default  #f          0)
    (dopenmute  default  &quot;stopped&quot;   0)
    (dslap      default  #f          2)
    (dslapmute  default  &quot;stopped&quot;   2)))

midiDrumPitches.dbass = g
midiDrumPitches.dbassmute = fis
midiDrumPitches.dopen =  a
midiDrumPitches.dopenmute = gis
midiDrumPitches.dslap =  b
midiDrumPitches.dslapmute = ais

one = \drummode { r4 dba4 do ds r dbm dom dsm }

\score {
   \new DrumStaff
    \with {
      \override StaffSymbol.line-count =  #3
      instrumentName = #&quot;Djembe &quot;
      drumStyleTable = #(alist-&gt;hash-table djembe)
      drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
    }
    \one
  \layout {}
  \midi {}
}
</pre><p>
 <a href="24/lily-1782ec30.ly">
  <img align="middle"
       border="0"
       src="24/lily-1782ec30.png"
       alt="[image of music]">
 </a>
</p>




<a name="heavily-customized-polymetric-time-signatures.ly"></a>

<hr size="6">
<a name="Percussion_003a-Heavily-customized-polymetric-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion: Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#percussion" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Percussion&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion-jazz-combo-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion: Jazz combo template &gt; </a>]</td></tr></table>
<a name="percussion-heavily-customized-polymetric-time-signatures"></a>
<h2 class="unnumberedsec">Heavily customized polymetric time signatures</h2>


<p>Though the polymetric time signature shown was not the most essential
item here, it has been included to show the beat of this piece (which
is the template of a real Balkan song!).
</p>

<pre class="verbatim">drum = \new DrumStaff \drummode {
  \bar &quot;.|:&quot; bd4.^\markup { Drums } sn4 bd \bar &quot;;&quot; sn4.
  bd4 sn \bar &quot;;&quot; bd sn bd4. sn4 bd \bar &quot;:|.&quot;
}

  \new Staff \with {
    instrumentName = \markup { \concat { &quot;B&quot; \flat &quot; Sop.&quot; } }
  }

{
  \melody
  \drum
}
</pre><p>
 <a href="97/lily-5f9d780a.ly">
  <img align="middle"
       border="0"
       src="97/lily-5f9d780a.png"
       alt="[image of music]">
 </a>
</p>




<a name="jazz-combo-template.ly"></a>

<hr size="6">
<a name="Percussion_003a-Jazz-combo-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion-heavily-customized-polymetric-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion: Heavily customized polymetric time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#percussion" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Percussion&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion-percussion-beaters" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion: Percussion beaters &gt; </a>]</td></tr></table>
<a name="percussion-jazz-combo-template"></a>
<h2 class="unnumberedsec">Jazz combo template</h2>


<p>This is quite an advanced template, for a jazz ensemble. Note that all
instruments are notated in <code>\key c \major</code>. This refers to the
key in concert pitch; the key will be automatically transposed if the
music is within a <code>\transpose</code> section.
</p>

<pre class="verbatim">  }
}
% To make the example display in the documentation
\paper {
  paper-width = 130
}
%#(set-global-staff-size 16)
\include &quot;english.ly&quot;

%%%%%%%%%%%% Some macros %%%%%%%%%%%%%%%%%%%

sl = {
  \override NoteHead.style = #'slash
  \hide Stem
}
nsl = {
  \revert NoteHead.style
  \undo \hide Stem
}
crOn = \override NoteHead.style = #'cross
crOff = \revert NoteHead.style

%% insert chord name style stuff here.

jazzChords = { }

%%%%%%%%%%%% Keys'n'thangs %%%%%%%%%%%%%%%%%

global = { \time 4/4 }

Key = { \key c \major }

% ############ Horns ############

% ------ Trumpet ------
trpt = \transpose c d \relative c'' {
  \Key
  c1 | c | c |
}
trpHarmony = \transpose c' d {
  \jazzChords
}
trumpet = {
  \global
  \clef treble
  &lt;&lt;
    \trpt
  &gt;&gt;
}

% ------ Alto Saxophone ------
alto = \transpose c a \relative c' {
  \Key
  c1 | c | c |
}
altoHarmony = \transpose c' a {
  \jazzChords
}
altoSax = {
  \global
  \clef treble
  &lt;&lt;
    \alto
  &gt;&gt;
}

% ------ Baritone Saxophone ------
bari = \transpose c a' \relative c {
  \Key
  c1
  c1
  \sl
  d4^&quot;Solo&quot; d d d
  \nsl
}
bariHarmony = \transpose c' a \chordmode {
  \jazzChords s1 s d2:maj e:m7
}
bariSax = {
  \global
  \clef treble
  &lt;&lt;
    \bari
  &gt;&gt;
}

% ------ Trombone ------
tbone = \relative c {
  \Key
  c1 | c | c
}
tboneHarmony = \chordmode {
  \jazzChords
}
trombone = {
  \global
  \clef bass
  &lt;&lt;
    \tbone
  &gt;&gt;
}

% ############ Rhythm Section #############

% ------ Guitar ------
gtr = \relative c'' {
  \Key
  c1
  \sl
  b4 b b b
  \nsl
  c1
}
gtrHarmony = \chordmode {
  \jazzChords
  s1 c2:min7+ d2:maj9
}
guitar = {
  \global
  \clef treble
  &lt;&lt;
    \gtr
  &gt;&gt;
}

%% ------ Piano ------
rhUpper = \relative c'' {
  \voiceOne
  \Key
  c1 | c | c
}
rhLower = \relative c' {
  \voiceTwo
  \Key
  e1 | e | e
}

lhUpper = \relative c' {
  \voiceOne
  \Key
  g1 | g | g
}
lhLower = \relative c {
  \voiceTwo
  \Key
  c1 | c | c
}

PianoRH = {
  \clef treble
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \rhUpper
    \new Voice = &quot;two&quot; \rhLower
  &gt;&gt;
}
PianoLH = {
  \clef bass
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \lhUpper
    \new Voice = &quot;two&quot; \lhLower
  &gt;&gt;
}

piano = {
  &lt;&lt;
    \new Staff = &quot;upper&quot; \PianoRH
    \new Staff = &quot;lower&quot; \PianoLH
  &gt;&gt;
}

% ------ Bass Guitar ------
Bass = \relative c {
  \Key
  c1 | c | c
}
bass = {
  \global
  \clef bass
  &lt;&lt;
    \Bass
  &gt;&gt;
}

% ------ Drums ------
up = \drummode {
  \voiceOne
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
}
down = \drummode {
  \voiceTwo
  bd4 s bd s
  bd4 s bd s
  bd4 s bd s
}

drumContents = {
  \global
  &lt;&lt;
    \new DrumVoice \up
    \new DrumVoice \down
  &gt;&gt;
}

%%%%%%%%% It All Goes Together Here %%%%%%%%%%%%%%%%%%%%%%

\score {
  &lt;&lt;
    \new StaffGroup = &quot;horns&quot; &lt;&lt;
      \new Staff = &quot;trumpet&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \trumpet
      \new Staff = &quot;altosax&quot; \with { instrumentName = #&quot;Alto Sax&quot; }
      \altoSax
      \new ChordNames = &quot;barichords&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \bariHarmony
      \new Staff = &quot;barisax&quot; \with { instrumentName = #&quot;Bari Sax&quot; }
      \bariSax
      \new Staff = &quot;trombone&quot; \with { instrumentName = #&quot;Trombone&quot; }
      \trombone
    &gt;&gt;

    \new StaffGroup = &quot;rhythm&quot; &lt;&lt;
      \new ChordNames = &quot;chords&quot; \gtrHarmony
      \new Staff = &quot;guitar&quot; \with { instrumentName = #&quot;Guitar&quot; }
      \guitar
      \new PianoStaff = &quot;piano&quot; \with {
        instrumentName = #&quot;Piano&quot;
        midiInstrument = #&quot;acoustic grand&quot;
      }
      \piano
      \new Staff = &quot;bass&quot; \with { instrumentName = #&quot;Bass&quot; }
      \bass
      \new DrumStaff \with { instrumentName = #&quot;Drums&quot; }
      \drumContents
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
    \context {
      \Score
      \override BarNumber.padding = #3
      \override RehearsalMark.padding = #2
      skipBars = ##t
    }
  }
  \midi { }
}
</pre><p>
 <a href="11/lily-52f7d620.ly">
  <img align="middle"
       border="0"
       src="11/lily-52f7d620.png"
       alt="[image of music]">
 </a>
</p>




<a name="percussion-beaters.ly"></a>

<hr size="6">
<a name="Percussion_003a-Percussion-beaters"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion-jazz-combo-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion: Jazz combo template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#percussion" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Percussion&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#percussion-printing-music-with-different-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Percussion: Printing music with different time signatures &gt; </a>]</td></tr></table>
<a name="percussion-percussion-beaters"></a>
<h2 class="unnumberedsec">Percussion beaters</h2>


<p>Graphic symbols for percussion instruments are not natively supported;
however it is possible to include such symbols, either as an external
EPS file or as embedded PostScript code inside a markup, as
demonstrated in this example.
</p>

<pre class="verbatim">stick = \markup {
  \with-dimensions #'(0 . 5) #'(0 . 5)
  \postscript #&quot;
    0 6 translate
    0.8 -0.8 scale
    0 0 0 setrgbcolor
    [] 0 setdash
    1 setlinewidth
    0 setlinejoin
    0 setlinecap
    gsave [1 0 0 1 0 0] concat
    gsave [1 0 0 1 -3.5406095 -199.29342] concat
    gsave
    0 0 0 setrgbcolor
    newpath
    7.1434065 200.94354 moveto
    7.2109628 200.90454 7.2785188 200.86554 7.3460747 200.82654 curveto
    8.2056347 202.31535 9.0651946 203.80414 9.9247546 205.29295 curveto
    9.8571989 205.33195 9.7896429 205.37095 9.7220864 205.40996 curveto
    8.8625264 203.92115 8.0029664 202.43233 7.1434065 200.94354 curveto
    closepath
    eofill
    grestore
    gsave
    0 0 0 setrgbcolor
    newpath
    4.9646672 203.10444 moveto
    5.0036707 203.03688 5.0426744 202.96933 5.0816777 202.90176 curveto
    6.5704792 203.76133 8.0592809 204.6209 9.5480824 205.48045 curveto
    9.5090791 205.54801 9.4700754 205.61556 9.4310717 205.68311 curveto
    7.94227 204.82356 6.4534687 203.96399 4.9646672 203.10444 curveto
    closepath
    eofill
    grestore
    gsave
    &lt;&lt;
    /ShadingType 3
    /ColorSpace /DeviceRGB
    /Coords [113.13708 207.87465 0 113.13708 207.87465 16.162441]
    /Extend [true true]
    /Domain [0 1]
    /Function &lt;&lt;
    /FunctionType 3
    /Functions
    [
    &lt;&lt;
    /FunctionType 2
    /Domain [0 1]
    /C0 [1 1 1]
    /C1 [0.72941178 0.72941178 0.72941178]
    /N 1
    &gt;&gt;
    ]
    /Domain [0 1]
    /Bounds [ ]
    /Encode [ 0 1 ]
    &gt;&gt;
    &gt;&gt;
    newpath
    7.6422017 200.76488 moveto
    7.6505696 201.02554 7.3905363 201.24867 7.1341335 201.20075 curveto
    6.8759501 201.16916 6.6949602 200.87978 6.7801462 200.63381 curveto
    6.8480773 200.39155 7.1438307 200.25377 7.3728389 200.35861 curveto
    7.5332399 200.42458 7.6444521 200.59122 7.6422017 200.76488 curveto
    closepath
    clip
    gsave [
      0.052859054 0.063089841 -0.020912282 0.017521108 5.7334261 189.76443
    ] concat
    shfill
    grestore
    grestore
    0 0 0 setrgbcolor
    [] 0 setdash
    0.027282091 setlinewidth
    0 setlinejoin
    0 setlinecap
    newpath
    7.6422017 200.76488 moveto
    7.6505696 201.02554 7.3905363 201.24867 7.1341335 201.20075 curveto
    6.8759501 201.16916 6.6949602 200.87978 6.7801462 200.63381 curveto
    6.8480773 200.39155 7.1438307 200.25377 7.3728389 200.35861 curveto
    7.5332399 200.42458 7.6444521 200.59122 7.6422017 200.76488 curveto
    closepath
    stroke
    gsave
    &lt;&lt;
    /ShadingType 3
    /ColorSpace /DeviceRGB
    /Coords [113.13708 207.87465 0 113.13708 207.87465 16.162441]
    /Extend [true true]
    /Domain [0 1]
    /Function &lt;&lt;
    /FunctionType 3
    /Functions
    [
    &lt;&lt;
    /FunctionType 2
    /Domain [0 1]
    /C0 [1 1 1]
    /C1 [0.72941178 0.72941178 0.72941178]
    /N 1
    &gt;&gt;
    ]
    /Domain [0 1]
    /Bounds [ ]
    /Encode [ 0 1 ]
    &gt;&gt;
    &gt;&gt;
    newpath
    5.2721217 202.83181 moveto
    5.2804896 203.09247 5.0204563 203.3156 4.7640539 203.26768 curveto
    4.5058701 203.23609 4.3248803 202.94671 4.4100662 202.70074 curveto
    4.4779975 202.45848 4.7737511 202.3207 5.0027593 202.42554 curveto
    5.1631598 202.49149 5.2743721 202.65813 5.2721217 202.83181 curveto
    closepath
    clip
    gsave [
      0.052859054 0.063089841 -0.020912282 0.017521108 3.363346 191.83136
    ] concat
    shfill
    grestore
    grestore
    0 0 0 setrgbcolor
    [] 0 setdash
    0.027282091 setlinewidth
    0 setlinejoin
    0 setlinecap
    newpath
    5.2721217 202.83181 moveto
    5.2804896 203.09247 5.0204563 203.3156 4.7640539 203.26768 curveto
    4.5058701 203.23609 4.3248803 202.94671 4.4100662 202.70074 curveto
    4.4779975 202.45848 4.7737511 202.3207 5.0027593 202.42554 curveto
    5.1631598 202.49149 5.2743721 202.65813 5.2721217 202.83181 curveto
    closepath
    stroke
    grestore
    grestore
  &quot;
}

\score {
  b1^\stick
}
</pre><p>
 <a href="5e/lily-f86d135c.ly">
  <img align="middle"
       border="0"
       src="5e/lily-f86d135c.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-music-with-different-time-signatures.ly"></a>

<hr size="6">
<a name="Percussion_003a-Printing-music-with-different-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#fretted-strings" title="Next chapter">&nbsp;Fretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion-percussion-beaters" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion: Percussion beaters&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#percussion" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Percussion&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings &gt; </a>]</td></tr></table>
<a name="percussion-printing-music-with-different-time-signatures"></a>
<h2 class="unnumberedsec">Printing music with different time signatures</h2>


<p>In the following snippet, two parts have a completely different time
signature, yet remain synchronized. The bar lines can no longer be
printed at the <code>Score</code> level; to allow independent bar lines in
each part, the <code>Default_barline_engraver</code> and
<code>Timing_translator</code> are moved from the <code>Score</code> context to the
<code>Staff</code> context.
</p>
<p>If bar numbers are required, the <code>Bar_number_engraver</code> should also
be moved, since it relies on properties set by the
<code>Timing_translator</code>; a <code>\with</code> block can be used to add bar
numbers to the relevant staff.
</p>



<pre class="verbatim">\paper {
  indent = #0
  ragged-right = ##t
}

global = { \time 3/4 { s2.*3 } \bar &quot;&quot; \break { s2.*3 } }

\layout {
  \context {
    \Score
    \remove &quot;Timing_translator&quot;
    \remove &quot;Default_bar_line_engraver&quot;
    \remove &quot;Bar_number_engraver&quot;
    \override SpacingSpanner.uniform-stretching = ##t
    \override SpacingSpanner.strict-note-spacing = ##t
    proportionalNotationDuration = #(ly:make-moment 1/64)
  }
  \context {
    \Staff
    \consists &quot;Timing_translator&quot;
    \consists &quot;Default_bar_line_engraver&quot;
  }
  \context {
    \Voice
    \remove &quot;Forbid_line_break_engraver&quot;
    tupletFullLength = ##t
  }
}

Bassklarinette = \new Staff \with {
  \consists &quot;Bar_number_engraver&quot;
  barNumberVisibility = #(every-nth-bar-number-visible 2)
  \override BarNumber.break-visibility = #end-of-line-invisible
} &lt;&lt;
  \global {
    \bar &quot;|&quot;
    \clef treble
    \time 3/8
    d''4.

    \bar &quot;|&quot;
    \time 3/4
    r8 des''2( c''8)

    \bar &quot;|&quot;
    \time 7/8
    r4. ees''2 ~

    \bar &quot;|&quot;
    \time 2/4
    \tupletUp
    \tuplet 3/2 { ees''4 r4 d''4 ~ }

    \bar &quot;|&quot;
    \time 3/8
    \tupletUp
    \tuplet 4/3 { d''4 r4 }

    \bar &quot;|&quot;
    \time 2/4
    e''2

    \bar &quot;|&quot;
    \time 3/8
    es''4.

    \bar &quot;|&quot;
    \time 3/4
    r8 d''2 r8
    \bar &quot;|&quot;
  }
&gt;&gt;

Perkussion = \new StaffGroup &lt;&lt;
  \new Staff &lt;&lt;
    \global {
      \bar &quot;|&quot;
      \clef percussion
      \time 3/4
      r4 c'2 ~

      \bar &quot;|&quot;
      c'2.

      \bar &quot;|&quot;
      R2.

      \bar &quot;|&quot;
      r2 g'4 ~

      \bar &quot;|&quot;
      g'2. ~

      \bar &quot;|&quot;
      g'2.
    }
  &gt;&gt;
  \new Staff &lt;&lt;
    \global {
      \bar &quot;|&quot;
      \clef percussion
      \time 3/4
      R2.

      \bar &quot;|&quot;
      g'2. ~

      \bar &quot;|&quot;
      g'2.

      \bar &quot;|&quot;
      r4 g'2 ~

      \bar &quot;|&quot;
      g'2 r4

      \bar &quot;|&quot;
      g'2.
    }
  &gt;&gt;
&gt;&gt;

\score {
  &lt;&lt;
    \Bassklarinette
    \Perkussion
  &gt;&gt;
}
</pre><p>
 <a href="19/lily-9b7cfb87.ly">
  <img align="middle"
       border="0"
       src="19/lily-9b7cfb87.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Fretted-strings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#percussion" title="Beginning of this chapter or previous chapter"> &lt;&lt; Percussion&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#percussion-printing-music-with-different-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Percussion: Printing music with different time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-adding-fingerings-to-a-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Adding fingerings to a score &gt; </a>]</td></tr></table>
<a name="fretted-strings"></a>
<h1 class="unnumbered">Fretted strings</h1>

<a name="index-Fretted-string-instruments"></a>
<p><a href="notation-big-page.html#fretted-string-instruments">Fretted string instruments</a>
</p>

<a name="adding-fingerings-to-a-score.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Adding-fingerings-to-a-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-adding-fingerings-to-tablatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Adding fingerings to tablatures &gt; </a>]</td></tr></table>
<a name="fretted-strings-adding-fingerings-to-a-score"></a>
<h2 class="unnumberedsec">Adding fingerings to a score</h2>


<p>Fingering instructions can be entered using a simple syntax.
</p>

<pre class="verbatim">\relative c'' {
  c4-1 d-2 f-4 e-3
}
</pre><p>
 <a href="d5/lily-524b17d8.ly">
  <img align="middle"
       border="0"
       src="d5/lily-524b17d8.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-fingerings-to-tablatures.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Adding-fingerings-to-tablatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-adding-fingerings-to-a-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Adding fingerings to a score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-adding-markups-in-a-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Adding markups in a tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-adding-fingerings-to-tablatures"></a>
<h2 class="unnumberedsec">Adding fingerings to tablatures</h2>


<p>To add fingerings to tablatures, use a combination of <code>\markup</code>
and <code>\finger</code>.
</p>

<pre class="verbatim">one = \markup { \finger 1 }
two = \markup { \finger 2 }
threeTwo = \markup {
  \override #'(baseline-skip . 2)
  \column {
    \finger 3
    \finger 2
  }
}
threeFour = \markup {
  \override #'(baseline-skip . 2)
  \column {
    \finger 3
    \finger 4
  }
}

\score {
  \new TabStaff {
    \tabFullNotation
    \stemUp
    e8\4^\one b\2 &lt;g\3 e'\1&gt;^&gt;[ b\2 e\4]
    &lt;a\3 fis'\1&gt;^&gt;^\threeTwo[ b\2 e\4]
  }
}
</pre><p>
 <a href="c4/lily-8dfb3985.ly">
  <img align="middle"
       border="0"
       src="c4/lily-8dfb3985.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-markups-in-a-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Adding-markups-in-a-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-adding-fingerings-to-tablatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Adding fingerings to tablatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-allowing-fingerings-to-be-printed-inside-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Allowing fingerings to be printed inside the staff &gt; </a>]</td></tr></table>
<a name="fretted-strings-adding-markups-in-a-tablature"></a>
<h2 class="unnumberedsec">Adding markups in a tablature</h2>


<p>By default markups does not show in a tablature. To make them appear,
simply use the command <code>\revert TabStaff.TextScript.stencil</code>
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=919
% by P.P.Schneider on June 2014

high  = { r4 r8 &lt;g c'&gt; q r8 r4 }

low = { c4 r4 c8 r8 g,8 b, }

pulse = { s8^&quot;1&quot; s^&quot;&amp;&quot; s^&quot;2&quot; s^&quot;&amp;&quot; s^&quot;3&quot; s^&quot;&amp;&quot; s^&quot;4&quot; s^&quot;&amp;&quot; }

\score {
 \new TabStaff {
   \repeat unfold 2 &lt;&lt; \high \\ \low \\ \pulse &gt;&gt;
  }
  \layout {
    \context {
      \TabStaff
      \clef moderntab
      \revert TextScript.stencil
      \override TextScript.font-series = #'bold
      \override TextScript.font-size = #-2
      \override TextScript.color = #red

    }
    \context {
      \Score
      proportionalNotationDuration = #(ly:make-moment 1/8)
    }
  }
}
</pre><p>
 <a href="28/lily-a4ac69a4.ly">
  <img align="middle"
       border="0"
       src="28/lily-a4ac69a4.png"
       alt="[image of music]">
 </a>
</p>




<a name="allowing-fingerings-to-be-printed-inside-the-staff.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Allowing-fingerings-to-be-printed-inside-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-adding-markups-in-a-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Adding markups in a tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-bar-chords-notation-for-guitar-_0028with-text-spanner_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Bar chords notation for Guitar (with Text Spanner) &gt; </a>]</td></tr></table>
<a name="fretted-strings-allowing-fingerings-to-be-printed-inside-the-staff"></a>
<h2 class="unnumberedsec">Allowing fingerings to be printed inside the staff</h2>


<p>By default, vertically oriented fingerings are positioned outside the
staff.  However, this behavior can be canceled. Note: you must use a
chord construct &lt;&gt;, even if it is only a single note.
</p>

<pre class="verbatim">\relative c' {
  &lt;c-1 e-2 g-3 b-5&gt;2
  \override Fingering.staff-padding = #'()
  &lt;c-1 e-2 g-3 b-5&gt;4 &lt;g'-0&gt;
}
</pre><p>
 <a href="15/lily-012deba9.ly">
  <img align="middle"
       border="0"
       src="15/lily-012deba9.png"
       alt="[image of music]">
 </a>
</p>




<a name="bar-chords-notation-for-guitar-with-text-spanner.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Bar-chords-notation-for-Guitar-_0028with-Text-Spanner_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-allowing-fingerings-to-be-printed-inside-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Allowing fingerings to be printed inside the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-changing-fret-orientations" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Changing fret orientations &gt; </a>]</td></tr></table>
<a name="fretted-strings-bar-chords-notation-for-guitar-_0028with-text-spanner_0029"></a>
<h2 class="unnumberedsec">Bar chords notation for Guitar (with Text Spanner)</h2>


<p>Here is how to print bar chords (or barre chords) or half-bar chords
(just uncomment the appropriate line for to select either one). The
syntax is : <code>\bbarre #'fret_number' note(s)</code>
</p>






<pre class="verbatim">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% %%%%%%%  Cut here ----- Start 'bbarred.ly'

%% C with slash -------------------------------
cWithSlash = \markup {
  \combine \roman C \translate #'(0.6 . -0.4) \draw-line #'(0 . 2.0)
}
%% Span -----------------------------------
%% Syntax: \bbarre #&quot;text&quot; { notes } - text = any number of box
bbarre =
#(define-music-function (barre location str music) (string? ly:music?)
   (let ((elts (extract-named-music music '(NoteEvent EventChord))))
     (if (pair? elts)
         (let ((first-element (first elts))
               (last-element (last elts)))
           (set! (ly:music-property first-element 'articulations)
                 (cons (make-music 'TextSpanEvent 'span-direction -1)
                       (ly:music-property first-element 'articulations)))
           (set! (ly:music-property last-element 'articulations)
                 (cons (make-music 'TextSpanEvent 'span-direction 1)
                       (ly:music-property last-element 'articulations))))))
   #{
       \once \override TextSpanner.font-size = #-2
       \once \override TextSpanner.font-shape = #'upright
       \once \override TextSpanner.staff-padding = #3
       \once \override TextSpanner.style = #'line
       \once \override TextSpanner.to-barline = ##f
       \once \override TextSpanner.bound-details =
            #`((left
                (text . ,#{ \markup { \draw-line #'( 0 . -.5) } #})
                (Y . 0)
                (padding . 0.25)
                (attach-dir . -2))
               (right
                (text . ,#{ \markup { \cWithSlash #str } #})
                (Y . 0)
                (padding . 0.25)
                (attach-dir . 2)))
%% uncomment this line for make full barred
      % \once \override TextSpanner.bound-details.left.text = \markup{&quot;B&quot; #str}
      $music
   #})

%% %%%%%%%  Cut here ----- End 'bbarred.ly'
%% Copy and change the last line for full barred. Rename in 'fbarred.ly'
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Syntaxe: \bbarre #&quot;text&quot; { notes } - text = any number of box
\relative c'{ \clef &quot;G_8&quot; \stemUp \bbarre #&quot;III&quot; { &lt;f a'&gt;16[  c' d c d8] } }
</pre><p>
 <a href="4e/lily-154a1a41.ly">
  <img align="middle"
       border="0"
       src="4e/lily-154a1a41.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-fret-orientations.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Changing-fret-orientations"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-bar-chords-notation-for-guitar-_0028with-text-spanner_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Bar chords notation for Guitar (with Text Spanner)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-chord-glissando-in-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Chord glissando in tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-changing-fret-orientations"></a>
<h2 class="unnumberedsec">Changing fret orientations</h2>


<p>Fret diagrams can be oriented in three ways.  By default the top string
or fret in the different orientations will be aligned.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;

&lt;&lt;
  \chords {
    c1
    c1
    c1
  }
  \new FretBoards {
    \chordmode {
      c1
      \override FretBoard.fret-diagram-details.orientation =
        #'landscape
      c1
      \override FretBoard.fret-diagram-details.orientation =
        #'opposing-landscape
      c1
    }
  }
  \new Voice {
    c'1
    c'1
    c'
  }
&gt;&gt;
</pre><p>
 <a href="c9/lily-4aeae678.ly">
  <img align="middle"
       border="0"
       src="c9/lily-4aeae678.png"
       alt="[image of music]">
 </a>
</p>




<a name="chord-glissando-in-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Chord-glissando-in-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-changing-fret-orientations" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Changing fret orientations&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-chordchanges-for-fretboards" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: ChordChanges for FretBoards &gt; </a>]</td></tr></table>
<a name="fretted-strings-chord-glissando-in-tablature"></a>
<h2 class="unnumberedsec">Chord glissando in tablature</h2>


<p>Slides for chords are indicated by default in both <code>Staff</code> and
<code>TabStaff</code>. String numbers are necessary for <code>TabStaff</code>
because automatic string calculations are different for chords and for
single notes.
</p>

<pre class="verbatim">myMusic = \relative c' {
  &lt;c e g&gt;1 \glissando &lt;f a c&gt;
}

\score {
  &lt;&lt;
    \new Staff {
      \clef &quot;treble_8&quot;
      \myMusic
    }
    \new TabStaff \myMusic
  &gt;&gt;
}

\score {
  &lt;&lt;
    \new Staff {
      \clef &quot;treble_8&quot;
      \myMusic
    }
    \new TabStaff \with { \override Glissando.style = #'none } {
      \myMusic
    }
  &gt;&gt;
}
</pre><p>
 <a href="8d/lily-f0ccb9ec.ly">
  <img align="middle"
       border="0"
       src="8d/lily-f0ccb9ec.png"
       alt="[image of music]">
 </a>
</p>




<a name="chordchanges-for-fretboards.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-ChordChanges-for-FretBoards"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-chord-glissando-in-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Chord glissando in tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-controlling-the-placement-of-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Controlling the placement of chord fingerings &gt; </a>]</td></tr></table>
<a name="fretted-strings-chordchanges-for-fretboards"></a>
<h2 class="unnumberedsec">ChordChanges for FretBoards</h2>


<p>FretBoards can be set to display only when the chord changes or at the
beginning of a new line.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;

myChords = \chordmode {
  c1 c1 \break
  \set chordChanges = ##t
  c1 c1 \break
  c1 c1
}

&lt;&lt;
  \new ChordNames { \myChords }
  \new FretBoards { \myChords }
  \new Staff { \myChords }
&gt;&gt;
</pre><p>
 <a href="53/lily-aa01322a.ly">
  <img align="middle"
       border="0"
       src="53/lily-aa01322a.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-the-placement-of-chord-fingerings.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Controlling-the-placement-of-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-chordchanges-for-fretboards" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: ChordChanges for FretBoards&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-customizing-fretboard-fret-diagrams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Customizing fretboard fret diagrams &gt; </a>]</td></tr></table>
<a name="fretted-strings-controlling-the-placement-of-chord-fingerings"></a>
<h2 class="unnumberedsec">Controlling the placement of chord fingerings</h2>


<p>The placement of fingering numbers can be controlled precisely. For
fingering orientation to apply, you must use a chord construct &lt;&gt; even
if it is a single note.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(left)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(down right up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(up)
  &lt;c-1 e-3 a-5&gt;4
  \set fingeringOrientations = #'(left)
  &lt;c-1&gt;2
  \set fingeringOrientations = #'(down)
  &lt;e-3&gt;2
}
</pre><p>
 <a href="7a/lily-cfc0f100.ly">
  <img align="middle"
       border="0"
       src="7a/lily-cfc0f100.png"
       alt="[image of music]">
 </a>
</p>




<a name="customizing-fretboard-fret-diagrams.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Customizing-fretboard-fret-diagrams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-controlling-the-placement-of-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Controlling the placement of chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-customizing-markup-fret-diagrams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Customizing markup fret diagrams &gt; </a>]</td></tr></table>
<a name="fretted-strings-customizing-fretboard-fret-diagrams"></a>
<h2 class="unnumberedsec">Customizing fretboard fret diagrams</h2>


<p>Fret diagram properties can be set through
<code>'fret-diagram-details</code>.  For FretBoard fret diagrams, overrides
are applied to the <code>FretBoards.FretBoard</code> object. Like
<code>Voice</code>, <code>FretBoards</code> is a bottom level context, therefore
can be omitted in property overrides.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;
\storePredefinedDiagram #default-fret-table \chordmode { c' }
                        #guitar-tuning
                        #&quot;x;1-1-(;3-2;3-3;3-4;1-1-);&quot;
&lt;&lt;
  \new ChordNames {
    \chordmode { c1 | c | c | d }
  }
  \new FretBoards {
    % Set global properties of fret diagram
    \override FretBoards.FretBoard.size = #'1.2
    \override FretBoard.fret-diagram-details.finger-code = #'in-dot
    \override FretBoard.fret-diagram-details.dot-color = #'white
    \chordmode {
      c
      \once \override FretBoard.size = #'1.0
      \once \override FretBoard.fret-diagram-details.barre-type = #'straight
      \once \override FretBoard.fret-diagram-details.dot-color = #'black
      \once \override FretBoard.fret-diagram-details.finger-code = #'below-string
      c'
      \once \override FretBoard.fret-diagram-details.barre-type = #'none
      \once \override FretBoard.fret-diagram-details.number-type = #'arabic
      \once \override FretBoard.fret-diagram-details.orientation = #'landscape
      \once \override FretBoard.fret-diagram-details.mute-string = #&quot;M&quot;
      \once \override FretBoard.fret-diagram-details.label-dir = #LEFT
      \once \override FretBoard.fret-diagram-details.dot-color = #'black
      c'
      \once \override FretBoard.fret-diagram-details.finger-code = #'below-string
      \once \override FretBoard.fret-diagram-details.dot-radius = #0.35
      \once \override FretBoard.fret-diagram-details.dot-position = #0.5
      \once \override FretBoard.fret-diagram-details.fret-count = #3
      d
    }
  }
  \new Voice {
    c'1 | c' | c' | d'
  }
&gt;&gt;
</pre><p>
 <a href="c6/lily-2ebd583d.ly">
  <img align="middle"
       border="0"
       src="c6/lily-2ebd583d.png"
       alt="[image of music]">
 </a>
</p>




<a name="customizing-markup-fret-diagrams.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Customizing-markup-fret-diagrams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-customizing-fretboard-fret-diagrams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Customizing fretboard fret diagrams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-defining-predefined-fretboards-for-other-instruments" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Defining predefined fretboards for other instruments &gt; </a>]</td></tr></table>
<a name="fretted-strings-customizing-markup-fret-diagrams"></a>
<h2 class="unnumberedsec">Customizing markup fret diagrams</h2>


<p>Fret diagram properties can be set through
<code>'fret-diagram-details</code>.  For markup fret diagrams, overrides can
be applied to the <code>Voice.TextScript</code> object or directly to the
markup.
</p>

<pre class="verbatim">&lt;&lt;
  \chords { c1 | c | c | d }

  \new Voice = &quot;mel&quot; {
    \textLengthOn
    % Set global properties of fret diagram
    \override TextScript.size = #'1.2
    \override TextScript.fret-diagram-details.finger-code = #'in-dot
    \override TextScript.fret-diagram-details.dot-color = #'white

    %% C major for guitar, no barre, using defaults
       % terse style
    c'1^\markup { \fret-diagram-terse #&quot;x;3-3;2-2;o;1-1;o;&quot; }

    %% C major for guitar, barred on third fret
       % verbose style
       % size 1.0
       % roman fret label, finger labels below string, straight barre
    c'1^\markup {
      % standard size
      \override #'(size . 1.0) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . in-dot)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
       % verbose style
       % landscape orientation, arabic numbers, M for mute string
       % no barre, fret label down or left, small mute label font
    c'1^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (number-type . arabic)
                   (label-dir . -1)
                   (mute-string . &quot;M&quot;)
                   (orientation . landscape)
                   (barre-type . none)
                   (xo-font-magnification . 0.4)
                   (xo-padding . 0.3))) {
        \fret-diagram-verbose #'((mute 6)
                                 (place-fret 5 3 1)
                                 (place-fret 4 5 2)
                                 (place-fret 3 5 3)
                                 (place-fret 2 5 4)
                                 (place-fret 1 3 1)
                                 (barre 5 1 3))
      }
    }

    %% simple D chord
       % terse style
       % larger dots, centered dots, fewer frets
       % label below string
    d'1^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }
  }
&gt;&gt;
</pre><p>
 <a href="87/lily-6ed1c5d9.ly">
  <img align="middle"
       border="0"
       src="87/lily-6ed1c5d9.png"
       alt="[image of music]">
 </a>
</p>




<a name="defining-predefined-fretboards-for-other-instruments.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Defining-predefined-fretboards-for-other-instruments"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-customizing-markup-fret-diagrams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Customizing markup fret diagrams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-faking-a-hammer-in-tablatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Faking a hammer in tablatures &gt; </a>]</td></tr></table>
<a name="fretted-strings-defining-predefined-fretboards-for-other-instruments"></a>
<h2 class="unnumberedsec">Defining predefined fretboards for other instruments</h2>


<p>Predefined fret diagrams can be added for new instruments in addition
to the standards used for guitar.  This file shows how this is done by
defining a new string-tuning and a few predefined fretboards for the
Venezuelan cuatro.
</p>
<p>This file also shows how fingerings can be included in the chords used
as reference points for the chord lookup, and displayed in  the fret
diagram and the <code>TabStaff</code>, but not the music.
</p>

<p>These fretboards are not transposable because they contain string
information.  This is planned to be corrected in the future.
</p>

<pre class="verbatim">% add FretBoards for the Cuatro
%   Note: This section could be put into a separate file
%      predefined-cuatro-fretboards.ly
%      and \included into each of your compositions

cuatroTuning = #`(,(ly:make-pitch 0 6 0)
                  ,(ly:make-pitch 1 3 SHARP)
		  ,(ly:make-pitch 1 1 0)
		  ,(ly:make-pitch 0 5 0))

dSix = { &lt;a\4 b\1 d\3 fis\2&gt; }
dMajor = { &lt;a\4 d\1 d\3 fis \2&gt; }
aMajSeven = { &lt;a\4 cis\1 e\3 g\2&gt; }
dMajSeven = { &lt;a\4 c\1 d\3 fis\2&gt; }
gMajor = { &lt;b\4 b\1 d\3 g\2&gt; }

\storePredefinedDiagram #default-fret-table \dSix
                        #cuatroTuning
                        #&quot;o;o;o;o;&quot;
\storePredefinedDiagram #default-fret-table \dMajor
                        #cuatroTuning
                        #&quot;o;o;o;3-3;&quot;
\storePredefinedDiagram #default-fret-table \aMajSeven
                        #cuatroTuning
                        #&quot;o;2-2;1-1;2-3;&quot;
\storePredefinedDiagram #default-fret-table \dMajSeven
                        #cuatroTuning
                        #&quot;o;o;o;1-1;&quot;
\storePredefinedDiagram #default-fret-table \gMajor
                        #cuatroTuning
                        #&quot;2-2;o;1-1;o;&quot;

% end of potential include file /predefined-cuatro-fretboards.ly


#(set-global-staff-size 16)

primerosNames = \chordmode {
  d:6 d a:maj7 d:maj7
  g
}
primeros = {
  \dSix \dMajor \aMajSeven \dMajSeven
  \gMajor
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \primerosNames
    }

    \new Staff {
      \new Voice \with {
        \remove &quot;New_fingering_engraver&quot;
      }
      \relative c'' {
        \primeros
      }
    }

    \new FretBoards {
      \set Staff.stringTunings = #cuatroTuning
%      \override FretBoard
%        #'(fret-diagram-details string-count) = #'4
      \override FretBoard.fret-diagram-details.finger-code = #'in-dot
      \primeros
    }

    \new TabStaff \relative c'' {
      \set TabStaff.stringTunings = #cuatroTuning
      \primeros
    }

  &gt;&gt;

  \layout {
    \context {
      \Score
      \override SpacingSpanner.base-shortest-duration = #(ly:make-moment 1 16)
    }
  }
  \midi { }
}
</pre><p>
 <a href="ce/lily-8fd49ddb.ly">
  <img align="middle"
       border="0"
       src="ce/lily-8fd49ddb.png"
       alt="[image of music]">
 </a>
</p>




<a name="faking-a-hammer-in-tablatures.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Faking-a-hammer-in-tablatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-defining-predefined-fretboards-for-other-instruments" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Defining predefined fretboards for other instruments&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-fingerings-string-indications-and-right_002dhand-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Fingerings string indications and right-hand fingerings &gt; </a>]</td></tr></table>
<a name="fretted-strings-faking-a-hammer-in-tablatures"></a>
<h2 class="unnumberedsec">Faking a hammer in tablatures</h2>


<p>A hammer in tablature can be faked with slurs.
</p>

<pre class="verbatim">\score {
  \new TabStaff {
    \relative c'' {
      \tabFullNotation
      c4( d) d( d)
      d2( c)
    }
  }
}
</pre><p>
 <a href="98/lily-ea9d9b3c.ly">
  <img align="middle"
       border="0"
       src="98/lily-ea9d9b3c.png"
       alt="[image of music]">
 </a>
</p>




<a name="fingerings,-string-indications,-and-right-hand-fingerings.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Fingerings-string-indications-and-right_002dhand-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-faking-a-hammer-in-tablatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Faking a hammer in tablatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-flamenco-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Flamenco notation &gt; </a>]</td></tr></table>
<a name="fretted-strings-fingerings-string-indications-and-right_002dhand-fingerings"></a>
<h2 class="unnumberedsec">Fingerings string indications and right-hand fingerings</h2>


<p>This example combines left-hand fingering, string indications, and
right-hand fingering.
</p>

<pre class="verbatim">#(define RH rightHandFinger)

\relative c {
  \clef &quot;treble_8&quot;
  &lt;c-3\5-\RH #1 &gt;4
  &lt;e-2\4-\RH #2 &gt;4
  &lt;g-0\3-\RH #3 &gt;4
  &lt;c-1\2-\RH #4 &gt;4
}
</pre><p>
 <a href="d7/lily-ddd5a227.ly">
  <img align="middle"
       border="0"
       src="d7/lily-ddd5a227.png"
       alt="[image of music]">
 </a>
</p>




<a name="flamenco-notation.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Flamenco-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-fingerings-string-indications-and-right_002dhand-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Fingerings string indications and right-hand fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-fret-diagrams-explained-and-developed" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Fret diagrams explained and developed &gt; </a>]</td></tr></table>
<a name="fretted-strings-flamenco-notation"></a>
<h2 class="unnumberedsec">Flamenco notation</h2>


<p>For flamenco guitar, special notation is used:
</p>

<p>* a golpe symbol to indicate a slap on the guitar body with the nail of
the ring finger * an arrow to indicate (the direction of) strokes *
different letters for fingering (&ldquo;p&rdquo;: thumb, &ldquo;i&rdquo;: index finger,
&ldquo;m&rdquo;: middle finger, &ldquo;a&rdquo;: ring finger and &ldquo;x&rdquo;: little finger) *
3- and 4-finger rasgueados; stroke upwards with all fingers, ending
with an up- and down using the index finger * abanicos: strokes (in
tuples) with thumb (down), little and index finger (both up). There&rsquo;s
also an abanico 2 where middle and ring finger are used instead of the
little finger. * alza pua: fast playing with the thumb
</p>

<p>Most figures use arrows in combination with fingering; with abanicos
and rasgueados, noteheads are printed only for the first chord.
</p>
<p>This snippet contains some header-like code that can be copied as
&lsquo;<samp>flamenco.ly</samp>&rsquo; and included in source files.
</p>

<pre class="verbatim">%%%%%%%  Cut here ----- Start 'flamenco.ly'

% Text indicators :
abanico = ^\markup\small { \italic Abanico }
rasgueado = ^\markup\small { \italic Ras. }
alzapua = ^\markup\small { \italic Alzapua }

% Finger stroke symbols :
strokeUp = \markup\combine\override #'(thickness . 1.3) \draw-line #'(0 . 2)\raise #2 \arrow-head #Y #UP ##f
strokeDown = \markup\combine\arrow-head #Y #DOWN ##f \override #'(thickness . 1.3) \draw-line #'(0 . 2)

% Golpe symbol :
golpe = \markup {
  \filled-box #'(0 . 1) #'(0 . 1) #0
  \hspace #-1.6
  \with-color #white
  \filled-box #'(0.15 . 0.85) #'(0.15 . 0.85) #0
}

% Strokes, fingers and golpe command :
RHp = \rightHandFinger #1
RHi = \rightHandFinger #2
RHm = \rightHandFinger #3
RHa = \rightHandFinger #4
RHx = \rightHandFinger #5
RHu = \rightHandFinger \strokeUp
RHd = \rightHandFinger \strokeDown
RHg = \rightHandFinger \golpe

% Just handy :)
tupletOff = {
  \once \omit TupletNumber
  \once \omit TupletBracket
}

tupletsOff = {
  \omit TupletNumber
  \override TupletBracket.bracket-visibility = #'if-no-beam
}

tupletsOn = {
  \override TupletBracket.bracket-visibility = #'default
  \undo \omit TupletNumber
}

headsOff = {
  \hide TabNoteHead
  \hide NoteHead
  \override NoteHead.no-ledgers = ##t
}

headsOn = {
  \override TabNoteHead.transparent = ##f
  \override NoteHead.transparent = ##f
  \override NoteHead.no-ledgers = ##f
}

%%%%%%%  Cut here ----- End 'flamenco.ly'
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

part = \relative c' {
  \set strokeFingerOrientations = #'(up)
  \override StrokeFinger.add-stem-support = ##t
  \key a\major
  &lt;a, e' a cis e\RHu\RHi&gt;8
  &lt;a e' a cis e\RHd\RHi&gt;8
  r4
  r2^\markup\golpe
  &lt;a e' a cis e\RHu\RHi&gt;8
  &lt;a e' a cis e\RHd\RHi&gt;8
  &lt;a e' a cis e\RHu\RHi\RHg&gt;8
  &lt;a e' a cis e\RHd\RHi&gt;8
  r2
  &lt;a e' a cis e\RHu\RHa&gt;16\rasgueado
  \headsOff
  &lt;a e' a cis e\RHu\RHm&gt;
  &lt;a e' a cis e\RHu\RHi&gt;
  &lt;a e' a cis e\RHd\RHi&gt;~
  \headsOn
  &lt;a e' a cis e&gt;2
  r4
  \tupletOff
  \tuplet 5/4 {
    &lt;a e' a cis e\RHu\RHx&gt;16\rasgueado
    \headsOff
    &lt;a e' a cis e\RHu\RHa&gt;
    &lt;a e' a cis e\RHu\RHm&gt;
    &lt;a e' a cis e\RHu\RHi&gt;
    &lt;a e' a cis e\RHd\RHi&gt;~
    \headsOn
  }
  &lt;a e' a cis e&gt;2
  r4
  \tupletsOff
  \tuplet 3/2 {
    &lt;a e' a cis e\RHd\RHp&gt;8\abanico
    \headsOff
    &lt;a e' a cis e\RHu\RHx&gt;
    &lt;a e' a cis e\RHu\RHi&gt;
    \headsOn
  }
  \tuplet 3/2 {
    &lt;a e' a cis e\RHd\RHp&gt;8
    \headsOff
    &lt;a e' a cis e\RHu\RHx&gt;
    &lt;a e' a cis e\RHu\RHi&gt;
    \headsOn
  }
  \tuplet 3/2 {
    &lt;a e' a cis e\RHd\RHp&gt;8
    \headsOff
    &lt;a e' a cis e\RHu\RHx&gt;
    &lt;a e' a cis e\RHu\RHi&gt;
    \headsOn
  }
  \tuplet 3/2 {
    &lt;a e' a cis e\RHd\RHp&gt;8
    \headsOff
    &lt;a e' a cis e\RHu\RHx&gt;
    &lt;a e' a cis e\RHu\RHi&gt;
    \headsOn
  }
  \tupletsOff
  \override Beam.positions = #'(2 . 2)
  \tuplet 3/2 {
    a8\RHp\alzapua
    &lt;e' a\RHu\RHg&gt;
    &lt;e a\RHd&gt;
  }
  \tuplet 3/2 {
    a,8\RHp
    &lt;e' a\RHu\RHg&gt;
    &lt;e a\RHd&gt;
  }
  \tuplet 3/2 {
    a,8\RHp
    &lt;e' a\RHu\RHg&gt;
    &lt;e a\RHd&gt;
  }
  \tuplet 3/2 {
    a,8\RHp
    &lt;e' a\RHu\RHg&gt;
    &lt;e a\RHd&gt;
  }
  \tupletsOn
  &lt;a, e' a\RHu\RHm&gt;1
  \bar &quot;|.&quot;
}

\score {
  \new StaffGroup &lt;&lt;
    \context Staff = &quot;part&quot; &lt;&lt;
      \clef &quot;G_8&quot;
      {
        \part
      }
    &gt;&gt;
    \context TabStaff {
      \part
    }
  &gt;&gt;
  \layout {
    ragged-right = ##t
  }
}
</pre><p>
 <a href="3f/lily-bf9965ba.ly">
  <img align="middle"
       border="0"
       src="3f/lily-bf9965ba.png"
       alt="[image of music]">
 </a>
</p>




<a name="fret-diagrams-explained-and-developed.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Fret-diagrams-explained-and-developed"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-flamenco-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Flamenco notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-fretboards-alternate-tables" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Fretboards alternate tables &gt; </a>]</td></tr></table>
<a name="fretted-strings-fret-diagrams-explained-and-developed"></a>
<h2 class="unnumberedsec">Fret diagrams explained and developed</h2>


<p>This snippet shows many possibilities for obtaining and tweaking fret
diagrams.
</p>

<pre class="verbatim">&lt;&lt;
  \chords {
    a2 a
    \repeat unfold 3 {
      c c c d d
    }
  }

  \new Voice = &quot;mel&quot; {
    \textLengthOn
    % Set global properties of fret diagram
    \override TextScript.size = #1.2
    \override TextScript.fret-diagram-details.finger-code = #'below-string
    \override TextScript.fret-diagram-details.dot-color = #'black

    %% A chord for ukulele
    a'2^\markup {
      \override #'(fret-diagram-details . (
                   (string-count . 4)
                   (dot-color . white)
                   (finger-code . in-dot))) {
        \fret-diagram #&quot;4-2-2;3-1-1;2-o;1-o;&quot;
      }
    }

    %% A chord for ukulele, with formatting defined in definition string
    %  1.2 * size, 4 strings, 4 frets, fingerings below string
    %  dot radius .35 of fret spacing, dot position 0.55 of fret spacing
    a'2^\markup {
      \override #'(fret-diagram-details . (
                   (dot-color . white)
                   (open-string . &quot;o&quot;))) {
        \fret-diagram #&quot;s:1.2;w:4;h:3;f:2;d:0.35;p:0.55;4-2-2;3-1-1;2-o;1-o;&quot;
      }
    }

      %% These chords will be in normal orientation

    %% C major for guitar, barred on third fret
    %  verbose style
    %  roman fret label, finger labels below string, straight barre
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . below-string)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
    %% Double barre used to test barre function
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . arabic)
                     (dot-label-font-mag . 0.9)
                     (finger-code . in-dot)
                     (fret-label-font-mag . 0.6)
                     (fret-label-vertical-offset . 0)
                     (label-dir . -1)
                     (mute-string . &quot;M&quot;)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 4 2 5)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, with capo on third fret
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-upper)
                     (dot-label-font-mag . 0.9)
                     (finger-code . none)
                     (fret-label-vertical-offset . 0.5)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (capo 3)
                                   (open 5)
                                   (place-fret 4 5 1)
                                   (place-fret 3 5 2)
                                   (place-fret 2 5 3)
                                   (open 1))
        }
      }
    }

    %% simple D chord
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (string-thickness-factor . 0.3)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

    %% simple D chord, large top fret thickness
    d'2^\markup  {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (top-fret-thickness . 7)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

      % These chords will be in landscape orientation
    \override TextScript.fret-diagram-details.orientation = #'landscape

    %% C major for guitar, barred on third fret
    %  verbose style
    %  roman fret label, finger labels below string, straight barre
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . below-string)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
    %% Double barre used to test barre function
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . arabic)
                     (dot-label-font-mag . 0.9)
                     (finger-code . in-dot)
                     (fret-label-font-mag . 0.6)
                     (fret-label-vertical-offset . 0)
                     (label-dir . -1)
                     (mute-string . &quot;M&quot;)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 4 2 5)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, with capo on third fret
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-upper)
                     (dot-label-font-mag . 0.9)
                     (finger-code . none)
                     (fret-label-vertical-offset . 0.5)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (capo 3)
                                   (open 5)
                                   (place-fret 4 5 1)
                                   (place-fret 3 5 2)
                                   (place-fret 2 5 3)
                                   (open 1))
        }
      }
    }

    %% simple D chord
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

    %% simple D chord, large top fret thickness
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (top-fret-thickness . 7)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

      % These chords will be in opposing-landscape orientation
    \override TextScript.fret-diagram-details.orientation = #'opposing-landscape

    %% C major for guitar, barred on third fret
    %  verbose style
    %  roman fret label, finger labels below string, straight barre
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . below-string)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
    %% Double barre used to test barre function
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . arabic)
                     (dot-label-font-mag . 0.9)
                     (finger-code . in-dot)
                     (fret-label-font-mag . 0.6)
                     (fret-label-vertical-offset . 0)
                     (label-dir . -1)
                     (mute-string . &quot;M&quot;)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 4 2 5)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, with capo on third fret
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-upper)
                     (dot-label-font-mag . 0.9)
                     (finger-code . none)
                     (fret-label-vertical-offset . 0.5)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (capo 3)
                                   (open 5)
                                   (place-fret 4 5 1)
                                   (place-fret 3 5 2)
                                   (place-fret 2 5 3)
                                   (open 1))
        }
      }
    }

    %% simple D chord
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

    %% simple D chord, large top fret thickness
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (top-fret-thickness . 7)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }
  }
&gt;&gt;
</pre><p>
 <a href="ae/lily-b565578c.ly">
  <img align="middle"
       border="0"
       src="ae/lily-b565578c.png"
       alt="[image of music]">
 </a>
</p>




<a name="fretboards-alternate-tables.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Fretboards-alternate-tables"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-fret-diagrams-explained-and-developed" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Fret diagrams explained and developed&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-fretted_002dstring-harmonics-in-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Fretted-string harmonics in tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-fretboards-alternate-tables"></a>
<h2 class="unnumberedsec">Fretboards alternate tables</h2>


<p>Alternate fretboard tables can be created.  These would be used in
order to have alternate fretboards for a given chord.
</p>
<p>In order to use an alternate fretboard table, the table must first be
created.  Fretboards are then added to the table.
</p>
<p>The created fretboard table can be blank, or it can be copied from an
existing table.
</p>
<p>The table to be used in displaying predefined fretboards is selected by
the property <code>\predefinedDiagramTable</code>.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;

% Make a blank new fretboard table
#(define custom-fretboard-table-one (make-fretboard-table))

% Make a new fretboard table as a copy of default-fret-table
#(define custom-fretboard-table-two (make-fretboard-table default-fret-table))

% Add a chord to custom-fretboard-table-one
\storePredefinedDiagram #custom-fretboard-table-one
                        \chordmode{c}
                        #guitar-tuning
                        &quot;3-(;3;5;5;5;3-);&quot;

% Add a chord to custom-fretboard-table-two
\storePredefinedDiagram #custom-fretboard-table-two
                        \chordmode{c}
                        #guitar-tuning
                        &quot;x;3;5;5;5;o;&quot;

&lt;&lt;
  \chords {
    c1 | d1 |
    c1 | d1 |
    c1 | d1 |
  }
  \new FretBoards {
    \chordmode {
      \set predefinedDiagramTable = #default-fret-table
      c1 | d1 |
      \set predefinedDiagramTable = #custom-fretboard-table-one
      c1 | d1 |
      \set predefinedDiagramTable = #custom-fretboard-table-two
      c1 | d1 |
    }
  }
  \new Staff {
    \clef &quot;treble_8&quot;
    &lt;&lt;
      \chordmode {
        c1 | d1 |
        c1 | d1 |
        c1 | d1 |
      }
      {
        s1_\markup &quot;Default table&quot; | s1 |
        s1_\markup \column {&quot;New table&quot; &quot;from empty&quot;} | s1 |
        s1_\markup \column {&quot;New table&quot; &quot;from default&quot;} | s1 |
      }
    &gt;&gt;
  }
&gt;&gt;
</pre><p>
 <a href="a3/lily-61e896b8.ly">
  <img align="middle"
       border="0"
       src="a3/lily-61e896b8.png"
       alt="[image of music]">
 </a>
</p>




<a name="fretted-string-harmonics-in-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Fretted_002dstring-harmonics-in-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-fretboards-alternate-tables" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Fretboards alternate tables&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-guitar-slides" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Guitar slides &gt; </a>]</td></tr></table>
<a name="fretted-strings-fretted_002dstring-harmonics-in-tablature"></a>
<h2 class="unnumberedsec">Fretted-string harmonics in tablature</h2>


<p>Demonstrates fretted-string harmonics in tablature
</p>

<pre class="verbatim">pinchedHarmonics = {
   \textSpannerDown
   \override TextSpanner.bound-details.left.text =
      \markup {\halign #-0.5 \teeny &quot;PH&quot; }
      \override TextSpanner.style =
         #'dashed-line
   \override TextSpanner.dash-period = #0.6
   \override TextSpanner.bound-details.right.attach-dir = #1
   \override TextSpanner.bound-details.right.text =
      \markup { \draw-line #'(0 . 1) }
   \override TextSpanner.bound-details.right.padding = #-0.5
}

harmonics = {
  %artificial harmonics (AH)
  \textLengthOn
  &lt;\parenthesize b b'\harmonic&gt;4_\markup{ \teeny &quot;AH 16&quot; }
  &lt;\parenthesize g g'\harmonic&gt;4_\markup{ \teeny &quot;AH 17&quot; }
  &lt;\parenthesize d' d''\harmonic&gt;2_\markup{ \teeny &quot;AH 19&quot; }
  %pinched harmonics (PH)
  \pinchedHarmonics
  &lt;a'\harmonic&gt;2\startTextSpan
  &lt;d''\harmonic&gt;4
  &lt;e'\harmonic&gt;4\stopTextSpan
  %tapped harmonics (TH)
  &lt;\parenthesize g\4 g'\harmonic&gt;4_\markup{ \teeny &quot;TH 17&quot; }
  &lt;\parenthesize a\4 a'\harmonic&gt;4_\markup{ \teeny &quot;TH 19&quot; }
  &lt;\parenthesize c'\3 c''\harmonic&gt;2_\markup{ \teeny &quot;TH 17&quot; }
  %touch harmonics (TCH)
  a4( &lt;e''\harmonic&gt;2. )_\markup{ \teeny &quot;TCH&quot; }
}

frettedStrings = {
  %artificial harmonics (AH)
  \harmonicByFret #4 g4\3
  \harmonicByFret #5 d4\4
  \harmonicByFret #7 g2\3
  %pinched harmonics (PH)
  \harmonicByFret #7 d2\4
  \harmonicByFret #5 d4\4
  \harmonicByFret #7 a4\5
  %tapped harmonics (TH)
  \harmonicByFret #5 d4\4
  \harmonicByFret #7 d4\4
  \harmonicByFret #5 g2\3
  %touch harmonics (TCH)
  a4 \harmonicByFret #9 g2.\3
}

\score {
  &lt;&lt;
    \new Staff
    \with { \omit StringNumber } {
      \new Voice {
        \clef &quot;treble_8&quot;
        \harmonics
      }
    }
    \new TabStaff {
      \new TabVoice {
        \frettedStrings
      }
    }
  &gt;&gt;
}
</pre><p>
 <a href="d7/lily-1dfce909.ly">
  <img align="middle"
       border="0"
       src="d7/lily-1dfce909.png"
       alt="[image of music]">
 </a>
</p>




<a name="guitar-slides.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Guitar-slides"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-fretted_002dstring-harmonics-in-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Fretted-string harmonics in tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-guitar-strum-rhythms" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Guitar strum rhythms &gt; </a>]</td></tr></table>
<a name="fretted-strings-guitar-slides"></a>
<h2 class="unnumberedsec">Guitar slides</h2>


<p>Unlike glissandos, slides may go from an imprecise point of the
fretboard to a specific fret. A good way to do this is to add a hidden
grace note before the note which is actually played, as demonstrated in
the following example.
</p>

<pre class="verbatim">%% Hide fret number: useful to draw slide into/from a casual point of
%% the fretboard.
hideFretNumber = {
  \once \hide TabNoteHead
  \once \hide NoteHead
  \once \hide Stem
  \once \override NoteHead.no-ledgers = ##t
  \once \override Glissando.bound-details.left.padding = #0.3
}

music= \relative c' {
  \grace { \hideFretNumber d8\2 \glissando s2 } g2\2
  \grace { \hideFretNumber g8\2 \glissando s2 } d2 |

  \grace { \hideFretNumber c,8 \glissando s } f4\5^\markup \tiny { Slide into }
  \grace { \hideFretNumber f8 \glissando s } a4\4
  \grace { \hideFretNumber e'8\3 \glissando s } b4\3^\markup \tiny { Slide from }
  \grace { \hideFretNumber b'8 \glissando s2 } g4 |
}

\score {
  &lt;&lt;
    \new Staff {
      \clef &quot;G_8&quot;
      \music
    }
    \new TabStaff {
      \music
    }
  &gt;&gt;
}
</pre><p>
 <a href="e5/lily-75514dca.ly">
  <img align="middle"
       border="0"
       src="e5/lily-75514dca.png"
       alt="[image of music]">
 </a>
</p>




<a name="guitar-strum-rhythms.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Guitar-strum-rhythms"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-guitar-slides" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Guitar slides&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-hammer-on-and-pull-off-using-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Hammer on and pull off using chords &gt; </a>]</td></tr></table>
<a name="fretted-strings-guitar-strum-rhythms"></a>
<h2 class="unnumberedsec">Guitar strum rhythms</h2>


<p>For guitar music, it is possible to show strum rhythms, along with
melody notes, chord names and fret diagrams.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;
&lt;&lt;
  \new ChordNames {
    \chordmode {
      c1 | f | g | c
    }
  }
  \new FretBoards {
    \chordmode {
      c1 | f | g | c
    }
  }
  \new Voice \with {
    \consists &quot;Pitch_squash_engraver&quot;
  } {
    \relative c'' {
      \improvisationOn
      c4 c8 c c4 c8 c
      f4 f8 f f4 f8 f
      g4 g8 g g4 g8 g
      c4 c8 c c4 c8 c
    }
  }
  \new Voice = &quot;melody&quot; {
    \relative c'' {
      c2 e4 e4
      f2. r4
      g2. a4
      e4 c2.
    }
  }
  \new Lyrics {
    \lyricsto &quot;melody&quot; {
      This is my song.
      I like to sing.
    }
  }
&gt;&gt;
</pre><p>
 <a href="94/lily-7a7e0333.ly">
  <img align="middle"
       border="0"
       src="94/lily-7a7e0333.png"
       alt="[image of music]">
 </a>
</p>




<a name="hammer-on-and-pull-off-using-chords.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Hammer-on-and-pull-off-using-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-guitar-strum-rhythms" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Guitar strum rhythms&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-hammer-on-and-pull-off-using-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Hammer on and pull off using voices &gt; </a>]</td></tr></table>
<a name="fretted-strings-hammer-on-and-pull-off-using-chords"></a>
<h2 class="unnumberedsec">Hammer on and pull off using chords</h2>


<p>When using hammer-on or pull-off with chorded notes, only a single arc
is drawn. However &ldquo;double arcs&rdquo; are possible by setting the
<code>doubleSlurs</code> property to <code>#t</code>.
</p>

<pre class="verbatim">\new TabStaff {
  \relative c' {
    % chord hammer-on and pull-off
    \set doubleSlurs = ##t
    &lt;g' b&gt;8( &lt;a c&gt; &lt;g b&gt;)
  }
}
</pre><p>
 <a href="dc/lily-7f5af7b2.ly">
  <img align="middle"
       border="0"
       src="dc/lily-7f5af7b2.png"
       alt="[image of music]">
 </a>
</p>




<a name="hammer-on-and-pull-off-using-voices.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Hammer-on-and-pull-off-using-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-hammer-on-and-pull-off-using-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Hammer on and pull off using chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-hammer-on-and-pull-off" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Hammer on and pull off &gt; </a>]</td></tr></table>
<a name="fretted-strings-hammer-on-and-pull-off-using-voices"></a>
<h2 class="unnumberedsec">Hammer on and pull off using voices</h2>


<p>The arc of hammer-on and pull-off is upwards in voices one and three
and downwards in voices two and four:
</p>

<pre class="verbatim">\new TabStaff {
  \relative c' {
    &lt;&lt; { \voiceOne g2( a) }
    \\ { \voiceTwo a,( b) }
    &gt;&gt; \oneVoice
  }
}
</pre><p>
 <a href="e3/lily-7bb4d9c9.ly">
  <img align="middle"
       border="0"
       src="e3/lily-7bb4d9c9.png"
       alt="[image of music]">
 </a>
</p>




<a name="hammer-on-and-pull-off.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Hammer-on-and-pull-off"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-hammer-on-and-pull-off-using-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Hammer on and pull off using voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-how-to-change-fret-diagram-position" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: How to change fret diagram position &gt; </a>]</td></tr></table>
<a name="fretted-strings-hammer-on-and-pull-off"></a>
<h2 class="unnumberedsec">Hammer on and pull off</h2>


<p>Hammer-on and pull-off can be obtained using slurs.
</p>

<pre class="verbatim">\new TabStaff {
  \relative c' {
    d4( e\2)
    a( g)
  }
}
</pre><p>
 <a href="8c/lily-8fcbad90.ly">
  <img align="middle"
       border="0"
       src="8c/lily-8fcbad90.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-change-fret-diagram-position.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-How-to-change-fret-diagram-position"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-hammer-on-and-pull-off" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Hammer on and pull off&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-jazz-combo-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Jazz combo template &gt; </a>]</td></tr></table>
<a name="fretted-strings-how-to-change-fret-diagram-position"></a>
<h2 class="unnumberedsec">How to change fret diagram position</h2>


<p>If you want to move the position of a fret diagram, for example, to
avoid collision, or to place it between two notes, you have various
possibilities:
</p>
<p>1) modify #&rsquo;padding or #&rsquo;extra-offset values (as shown in the first
snippet)
</p>
<p>2) you can add an invisible voice and attach the fret diagrams to the
invisible notes in that voice (as shown in the second example).
</p>
<p> If you need to move the fret according with a rythmic position inside
the bar (in the example, the third beat of the measure) the second
example is better, because the fret is aligned with the third beat
itself.
</p>

<pre class="verbatim">harmonies = \chordmode
{
  a8:13
% THE FOLLOWING IS THE COMMAND TO MOVE THE CHORD NAME
  \once \override ChordNames.ChordName.extra-offset = #'(10 . 0)
  b8:13 s2.
% THIS LINE IS THE SECOND METHOD
    s4 s4  b4:13
}

\score
{
  &lt;&lt;
    \new ChordNames \harmonies
    \new Staff
    {a8^\markup { \fret-diagram  #&quot;6-x;5-0;4-2;3-0;2-0;1-2;&quot;  }
% THE FOLLOWING IS THE COMMAND TO MOVE THE FRET DIAGRAM
     \once \override TextScript.extra-offset = #'(10 . 0)
     b4.~^\markup { \fret-diagram  #&quot;6-x;5-2;4-4;3-2;2-2;1-4;&quot;  } b4. a8\break
% HERE IS THE SECOND METHOD
     &lt;&lt;
       { a8 b4.~ b4. a8}
       { s4 s4 s4^\markup { \fret-diagram  #&quot;6-x;5-2;4-4;3-2;2-2;1-4;&quot;  }
       }
     &gt;&gt;
   }
  &gt;&gt;
}
</pre><p>
 <a href="fd/lily-899855ab.ly">
  <img align="middle"
       border="0"
       src="fd/lily-899855ab.png"
       alt="[image of music]">
 </a>
</p>




<a name="jazz-combo-template.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Jazz-combo-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-how-to-change-fret-diagram-position" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: How to change fret diagram position&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-laissez-vibrer-ties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Laissez vibrer ties &gt; </a>]</td></tr></table>
<a name="fretted-strings-jazz-combo-template"></a>
<h2 class="unnumberedsec">Jazz combo template</h2>


<p>This is quite an advanced template, for a jazz ensemble. Note that all
instruments are notated in <code>\key c \major</code>. This refers to the
key in concert pitch; the key will be automatically transposed if the
music is within a <code>\transpose</code> section.
</p>

<pre class="verbatim">  }
}
% To make the example display in the documentation
\paper {
  paper-width = 130
}
%#(set-global-staff-size 16)
\include &quot;english.ly&quot;

%%%%%%%%%%%% Some macros %%%%%%%%%%%%%%%%%%%

sl = {
  \override NoteHead.style = #'slash
  \hide Stem
}
nsl = {
  \revert NoteHead.style
  \undo \hide Stem
}
crOn = \override NoteHead.style = #'cross
crOff = \revert NoteHead.style

%% insert chord name style stuff here.

jazzChords = { }

%%%%%%%%%%%% Keys'n'thangs %%%%%%%%%%%%%%%%%

global = { \time 4/4 }

Key = { \key c \major }

% ############ Horns ############

% ------ Trumpet ------
trpt = \transpose c d \relative c'' {
  \Key
  c1 | c | c |
}
trpHarmony = \transpose c' d {
  \jazzChords
}
trumpet = {
  \global
  \clef treble
  &lt;&lt;
    \trpt
  &gt;&gt;
}

% ------ Alto Saxophone ------
alto = \transpose c a \relative c' {
  \Key
  c1 | c | c |
}
altoHarmony = \transpose c' a {
  \jazzChords
}
altoSax = {
  \global
  \clef treble
  &lt;&lt;
    \alto
  &gt;&gt;
}

% ------ Baritone Saxophone ------
bari = \transpose c a' \relative c {
  \Key
  c1
  c1
  \sl
  d4^&quot;Solo&quot; d d d
  \nsl
}
bariHarmony = \transpose c' a \chordmode {
  \jazzChords s1 s d2:maj e:m7
}
bariSax = {
  \global
  \clef treble
  &lt;&lt;
    \bari
  &gt;&gt;
}

% ------ Trombone ------
tbone = \relative c {
  \Key
  c1 | c | c
}
tboneHarmony = \chordmode {
  \jazzChords
}
trombone = {
  \global
  \clef bass
  &lt;&lt;
    \tbone
  &gt;&gt;
}

% ############ Rhythm Section #############

% ------ Guitar ------
gtr = \relative c'' {
  \Key
  c1
  \sl
  b4 b b b
  \nsl
  c1
}
gtrHarmony = \chordmode {
  \jazzChords
  s1 c2:min7+ d2:maj9
}
guitar = {
  \global
  \clef treble
  &lt;&lt;
    \gtr
  &gt;&gt;
}

%% ------ Piano ------
rhUpper = \relative c'' {
  \voiceOne
  \Key
  c1 | c | c
}
rhLower = \relative c' {
  \voiceTwo
  \Key
  e1 | e | e
}

lhUpper = \relative c' {
  \voiceOne
  \Key
  g1 | g | g
}
lhLower = \relative c {
  \voiceTwo
  \Key
  c1 | c | c
}

PianoRH = {
  \clef treble
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \rhUpper
    \new Voice = &quot;two&quot; \rhLower
  &gt;&gt;
}
PianoLH = {
  \clef bass
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \lhUpper
    \new Voice = &quot;two&quot; \lhLower
  &gt;&gt;
}

piano = {
  &lt;&lt;
    \new Staff = &quot;upper&quot; \PianoRH
    \new Staff = &quot;lower&quot; \PianoLH
  &gt;&gt;
}

% ------ Bass Guitar ------
Bass = \relative c {
  \Key
  c1 | c | c
}
bass = {
  \global
  \clef bass
  &lt;&lt;
    \Bass
  &gt;&gt;
}

% ------ Drums ------
up = \drummode {
  \voiceOne
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
}
down = \drummode {
  \voiceTwo
  bd4 s bd s
  bd4 s bd s
  bd4 s bd s
}

drumContents = {
  \global
  &lt;&lt;
    \new DrumVoice \up
    \new DrumVoice \down
  &gt;&gt;
}

%%%%%%%%% It All Goes Together Here %%%%%%%%%%%%%%%%%%%%%%

\score {
  &lt;&lt;
    \new StaffGroup = &quot;horns&quot; &lt;&lt;
      \new Staff = &quot;trumpet&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \trumpet
      \new Staff = &quot;altosax&quot; \with { instrumentName = #&quot;Alto Sax&quot; }
      \altoSax
      \new ChordNames = &quot;barichords&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \bariHarmony
      \new Staff = &quot;barisax&quot; \with { instrumentName = #&quot;Bari Sax&quot; }
      \bariSax
      \new Staff = &quot;trombone&quot; \with { instrumentName = #&quot;Trombone&quot; }
      \trombone
    &gt;&gt;

    \new StaffGroup = &quot;rhythm&quot; &lt;&lt;
      \new ChordNames = &quot;chords&quot; \gtrHarmony
      \new Staff = &quot;guitar&quot; \with { instrumentName = #&quot;Guitar&quot; }
      \guitar
      \new PianoStaff = &quot;piano&quot; \with {
        instrumentName = #&quot;Piano&quot;
        midiInstrument = #&quot;acoustic grand&quot;
      }
      \piano
      \new Staff = &quot;bass&quot; \with { instrumentName = #&quot;Bass&quot; }
      \bass
      \new DrumStaff \with { instrumentName = #&quot;Drums&quot; }
      \drumContents
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
    \context {
      \Score
      \override BarNumber.padding = #3
      \override RehearsalMark.padding = #2
      skipBars = ##t
    }
  }
  \midi { }
}
</pre><p>
 <a href="11/lily-52f7d620.ly">
  <img align="middle"
       border="0"
       src="11/lily-52f7d620.png"
       alt="[image of music]">
 </a>
</p>




<a name="laissez-vibrer-ties.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Laissez-vibrer-ties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-jazz-combo-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Jazz combo template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-let-tabstaff-print-the-topmost-string-at-bottom" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Let TabStaff print the topmost string at bottom &gt; </a>]</td></tr></table>
<a name="fretted-strings-laissez-vibrer-ties"></a>
<h2 class="unnumberedsec">Laissez vibrer ties</h2>


<p>Laissez vibrer ties have a fixed size. Their formatting can be tuned
using <code>'tie-configuration</code>.
</p>

<pre class="verbatim">\relative c' {
  &lt;c e g&gt;4\laissezVibrer r &lt;c f g&gt;\laissezVibrer r
  &lt;c d f g&gt;4\laissezVibrer r &lt;c d f g&gt;4.\laissezVibrer r8

  &lt;c d e f&gt;4\laissezVibrer r
  \override LaissezVibrerTieColumn.tie-configuration
     = #`((-7 . ,DOWN)
          (-5 . ,DOWN)
          (-3 . ,UP)
          (-1 . ,UP))
  &lt;c d e f&gt;4\laissezVibrer r
}
</pre><p>
 <a href="a7/lily-958b3403.ly">
  <img align="middle"
       border="0"
       src="a7/lily-958b3403.png"
       alt="[image of music]">
 </a>
</p>




<a name="let-tabstaff-print-the-topmost-string-at-bottom.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Let-TabStaff-print-the-topmost-string-at-bottom"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-laissez-vibrer-ties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Laissez vibrer ties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-letter-tablature-formatting" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Letter tablature formatting &gt; </a>]</td></tr></table>
<a name="fretted-strings-let-tabstaff-print-the-topmost-string-at-bottom"></a>
<h2 class="unnumberedsec">Let TabStaff print the topmost string at bottom</h2>


<p>In tablatures usually the first string is printed topmost. If you want
to have it at the bottom change the
<code>stringOneTopmost</code>-context-property. For a context-wide setting
this could be done in <code>layout</code> as well.
</p>

<pre class="verbatim">%
%\layout {
%  \context {
%    \Score
%    stringOneTopmost = ##f
%  }
%  \context {
%    \TabStaff
%    tablatureFormat = #fret-letter-tablature-format
%  }
%}

m = {
  \cadenzaOn
  e, b, e gis! b e'
  \bar &quot;||&quot;
}

&lt;&lt;
  \new Staff { \clef &quot;G_8&quot; &lt;&gt;_&quot;default&quot; \m &lt;&gt;_&quot;italian (historic)&quot;\m }
  \new TabStaff
  {
    \m
    \set Score.stringOneTopmost = ##f
    \set TabStaff.tablatureFormat = #fret-letter-tablature-format
    \m
  }
&gt;&gt;
</pre><p>
 <a href="dc/lily-c1a53a3d.ly">
  <img align="middle"
       border="0"
       src="dc/lily-c1a53a3d.png"
       alt="[image of music]">
 </a>
</p>




<a name="letter-tablature-formatting.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Letter-tablature-formatting"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-let-tabstaff-print-the-topmost-string-at-bottom" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Let TabStaff print the topmost string at bottom&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-open-string-harmonics-in-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Open string harmonics in tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-letter-tablature-formatting"></a>
<h2 class="unnumberedsec">Letter tablature formatting</h2>


<p>Tablature can be formatted using letters instead of numbers.
</p>

<pre class="verbatim">music = \relative c {
  c4 d e f
  g4 a b c
  d4 e f g
}

&lt;&lt;
  \new Staff {
    \clef &quot;G_8&quot;
    \music
  }
  \new TabStaff \with {
    tablatureFormat = #fret-letter-tablature-format
  }
  {
    \music
  }
&gt;&gt;
</pre><p>
 <a href="fa/lily-40fdaf5e.ly">
  <img align="middle"
       border="0"
       src="fa/lily-40fdaf5e.png"
       alt="[image of music]">
 </a>
</p>




<a name="open-string-harmonics-in-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Open-string-harmonics-in-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-letter-tablature-formatting" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Letter tablature formatting&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-placement-of-right_002dhand-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Placement of right-hand fingerings &gt; </a>]</td></tr></table>
<a name="fretted-strings-open-string-harmonics-in-tablature"></a>
<h2 class="unnumberedsec">Open string harmonics in tablature</h2>


<p>This snippet demonstrates open-string harmonics
</p>

<pre class="verbatim">openStringHarmonics = {
  \textSpannerDown
  \override TextSpanner.staff-padding = #3
  \override TextSpanner.dash-fraction = #0.3
  \override TextSpanner.dash-period = #1

  %first harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;1st harm. &quot;
  \harmonicByFret #12 e,2\6\startTextSpan
  \harmonicByRatio #1/2 e,\6\stopTextSpan

  %second harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;2nd harm. &quot;
  \harmonicByFret #7 e,\6\startTextSpan
  \harmonicByRatio #1/3 e,\6
  \harmonicByFret #19 e,\6
  \harmonicByRatio #2/3 e,\6\stopTextSpan
  %\harmonicByFret #19 &lt; e,\6 a,\5 d\4 &gt;
  %\harmonicByRatio #2/3 &lt; e,\6 a,\5 d\4 &gt;

  %third harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;3rd harm. &quot;
  \harmonicByFret #5 e,\6\startTextSpan
  \harmonicByRatio #1/4 e,\6
  \harmonicByFret #24 e,\6
  \harmonicByRatio #3/4 e,\6\stopTextSpan
  \break

  %fourth harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;4th harm. &quot;
  \harmonicByFret #4 e,\6\startTextSpan
  \harmonicByRatio #1/5 e,\6
  \harmonicByFret #9 e,\6
  \harmonicByRatio #2/5 e,\6
  \harmonicByFret #16 e,\6
  \harmonicByRatio #3/5 e,\6\stopTextSpan

  %fifth harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;5th harm. &quot;
  \harmonicByFret #3 e,\6\startTextSpan
  \harmonicByRatio #1/6 e,\6\stopTextSpan
  \break

  %sixth harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;6th harm. &quot;
  \harmonicByFret #2.7 e,\6\startTextSpan
  \harmonicByRatio #1/7 e,\6\stopTextSpan

  %seventh harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;7th harm. &quot;
  \harmonicByFret #2.3 e,\6\startTextSpan
  \harmonicByRatio #1/8 e,\6\stopTextSpan

  %eighth harmonic
  \override TextSpanner.bound-details.left.text = \markup\small &quot;8th harm. &quot;
  \harmonicByFret #2 e,\6\startTextSpan
  \harmonicByRatio #1/9 e,\6\stopTextSpan
}

\score {
  &lt;&lt;
    \new Staff
    \with { \omit StringNumber } {
      \new Voice {
        \clef &quot;treble_8&quot;
        \openStringHarmonics
      }
    }
    \new TabStaff {
      \new TabVoice {
        \openStringHarmonics
      }
    }
  &gt;&gt;
}
</pre><p>
 <a href="76/lily-aaee04b9.ly">
  <img align="middle"
       border="0"
       src="76/lily-aaee04b9.png"
       alt="[image of music]">
 </a>
</p>




<a name="placement-of-right-hand-fingerings.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Placement-of-right_002dhand-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-open-string-harmonics-in-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Open string harmonics in tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-polyphony-in-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Polyphony in tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-placement-of-right_002dhand-fingerings"></a>
<h2 class="unnumberedsec">Placement of right-hand fingerings</h2>


<p>It is possible to exercise greater control over the placement of
right-hand fingerings by setting a specific property, as demonstrated
in the following example. Note: you must use a chord construct
</p>

<pre class="verbatim">#(define RH rightHandFinger)

\relative c {
  \clef &quot;treble_8&quot;

  \set strokeFingerOrientations = #'(up down)
  &lt;c-\RH #1 e-\RH #2 g-\RH #3 c-\RH #4 &gt;4

  \set strokeFingerOrientations = #'(up right down)
  &lt;c-\RH #1 e-\RH #2 g-\RH #3 c-\RH #4 &gt;4

  \set strokeFingerOrientations = #'(left)
  &lt;c-\RH #1 e-\RH #2 g-\RH #3 c-\RH #4 &gt;2
}
</pre><p>
 <a href="1c/lily-9124fe6c.ly">
  <img align="middle"
       border="0"
       src="1c/lily-9124fe6c.png"
       alt="[image of music]">
 </a>
</p>




<a name="polyphony-in-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Polyphony-in-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-placement-of-right_002dhand-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Placement of right-hand fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-slides-in-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Slides in tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-polyphony-in-tablature"></a>
<h2 class="unnumberedsec">Polyphony in tablature</h2>


<p>Polyphony is created the same way in a <code>TabStaff</code> as in a regular
staff.
</p>

<pre class="verbatim">upper = \relative c' {
  \time 12/8
  \key e \minor
  \voiceOne
  r4. r8 e, fis g16 b g e e' b c b a g fis e
}

lower = \relative c {
  \key e \minor
  \voiceTwo
  r16 e d c b a g4 fis8 e fis g a b c
}

\score {
  &lt;&lt;
    \new StaffGroup = &quot;tab with traditional&quot; &lt;&lt;
      \new Staff = &quot;guitar traditional&quot; &lt;&lt;
        \clef &quot;treble_8&quot;
        \context Voice = &quot;upper&quot; \upper
        \context Voice = &quot;lower&quot; \lower
      &gt;&gt;
      \new TabStaff = &quot;guitar tab&quot; &lt;&lt;
        \context TabVoice = &quot;upper&quot; \upper
        \context TabVoice = &quot;lower&quot; \lower
      &gt;&gt;
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="60/lily-563bb2a4.ly">
  <img align="middle"
       border="0"
       src="60/lily-563bb2a4.png"
       alt="[image of music]">
 </a>
</p>




<a name="slides-in-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Slides-in-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-polyphony-in-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Polyphony in tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-stem-and-beam-behavior-in-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: Stem and beam behavior in tablature &gt; </a>]</td></tr></table>
<a name="fretted-strings-slides-in-tablature"></a>
<h2 class="unnumberedsec">Slides in tablature</h2>


<p>Slides can be typeset in both <code>Staff</code> and <code>TabStaff</code>
contexts:
</p>

<pre class="verbatim">slides = {
  c'8\3(\glissando d'8\3)
  c'8\3\glissando d'8\3
  \hideNotes
  \grace { g16\glissando }
  \unHideNotes
  c'4\3
  \afterGrace d'4\3\glissando {
  \stemDown \hideNotes
  g16 }
  \unHideNotes
}

\score {
  &lt;&lt;
    \new Staff { \clef &quot;treble_8&quot; \slides }
    \new TabStaff { \slides }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \override Glissando.minimum-length = #4
      \override Glissando.springs-and-rods =
                          #ly:spanner::set-spacing-rods
      \override Glissando.thickness = #2
      \omit StringNumber
      % or:
      %\override StringNumber.stencil = ##f
    }
  }
}
</pre><p>
 <a href="da/lily-b50fc872.ly">
  <img align="middle"
       border="0"
       src="da/lily-b50fc872.png"
       alt="[image of music]">
 </a>
</p>




<a name="stem-and-beam-behavior-in-tablature.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-Stem-and-beam-behavior-in-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-slides-in-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Slides in tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#fretted-strings-string-number-extender-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fretted strings: String number extender lines &gt; </a>]</td></tr></table>
<a name="fretted-strings-stem-and-beam-behavior-in-tablature"></a>
<h2 class="unnumberedsec">Stem and beam behavior in tablature</h2>


<p>The direction of stems is controlled the same way in tablature as in
traditional notation. Beams can be made horizontal, as shown in this
example.
</p>

<pre class="verbatim">\new TabStaff {
  \relative c {
    \tabFullNotation
    g16 b d g b d g b
    \stemDown
    \override Beam.concaveness = #10000
    g,,16 b d g b d g b
  }
}
</pre><p>
 <a href="a2/lily-c9acc7f2.ly">
  <img align="middle"
       border="0"
       src="a2/lily-c9acc7f2.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-number-extender-lines.ly"></a>

<hr size="6">
<a name="Fretted-strings_003a-String-number-extender-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#unfretted-strings" title="Next chapter">&nbsp;Unfretted strings &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-stem-and-beam-behavior-in-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: Stem and beam behavior in tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#fretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings &gt; </a>]</td></tr></table>
<a name="fretted-strings-string-number-extender-lines"></a>
<h2 class="unnumberedsec">String number extender lines</h2>


<p>Make an extender line for string number indications, showing that a
series of notes is supposed to be played all on the same string.
</p>

<pre class="verbatim">stringNumberSpanner =
  #(define-music-function (StringNumber) (string?)
    #{
      \override TextSpanner.style = #'solid
      \override TextSpanner.font-size = #-5
      \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
      \override TextSpanner.bound-details.left.text =
        \markup { \circle \number $StringNumber }
    #})


\relative c {
  \clef &quot;treble_8&quot;
  \stringNumberSpanner &quot;5&quot;
  \textSpannerDown
  a8\startTextSpan
  b c d e f\stopTextSpan
  \stringNumberSpanner &quot;4&quot;
  g\startTextSpan a
  bes4 a g2\stopTextSpan
}
</pre><p>
 <a href="a5/lily-2fb3daf1.ly">
  <img align="middle"
       border="0"
       src="a5/lily-2fb3daf1.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Unfretted-strings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#fretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#fretted-strings-string-number-extender-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fretted strings: String number extender lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings-changing-_005cflageolet-mark-size" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings: Changing \flageolet mark size &gt; </a>]</td></tr></table>
<a name="unfretted-strings"></a>
<h1 class="unnumbered">Unfretted strings</h1>

<a name="index-Unfretted-string-instruments"></a>
<p><a href="notation-big-page.html#unfretted-string-instruments">Unfretted string instruments</a>
</p>

<a name="changing--flageolet-mark-size.ly"></a>

<hr size="6">
<a name="Unfretted-strings_003a-Changing-_005cflageolet-mark-size"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#unfretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Unfretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings-creating-slurs-across-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings: Creating slurs across voices &gt; </a>]</td></tr></table>
<a name="unfretted-strings-changing-_005cflageolet-mark-size"></a>
<h2 class="unnumberedsec">Changing \flageolet mark size</h2>


<p>To make the <code>\flageolet</code> circle smaller use the following Scheme
function.
</p>

<pre class="verbatim">smallFlageolet =
#(let ((m (make-articulation &quot;flageolet&quot;)))
   (set! (ly:music-property m 'tweaks)
         (acons 'font-size -3
                (ly:music-property m 'tweaks)))
   m)

\layout { ragged-right = ##f }

\relative c'' {
  d4^\flageolet_\markup { default size } d_\flageolet
  c4^\smallFlageolet_\markup { smaller } c_\smallFlageolet
}
</pre><p>
 <a href="4b/lily-f8b9f823.ly">
  <img align="middle"
       border="0"
       src="4b/lily-f8b9f823.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-slurs-across-voices.ly"></a>

<hr size="6">
<a name="Unfretted-strings_003a-Creating-slurs-across-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings-changing-_005cflageolet-mark-size" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings: Changing \flageolet mark size&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#unfretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Unfretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings-dotted-harmonics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings: Dotted harmonics &gt; </a>]</td></tr></table>
<a name="unfretted-strings-creating-slurs-across-voices"></a>
<h2 class="unnumberedsec">Creating slurs across voices</h2>


<p>In some situations, it may be necessary to create slurs between notes
from different voices.
</p>
<p>The solution is to add invisible notes to one of the voices, using
<code>\hideNotes</code>.
</p>
<p>This example is measure 235 of the Ciaconna from Bach&rsquo;s 2nd Partita for
solo violin, BWV 1004.
</p>

<pre class="verbatim">\relative c' {
  &lt;&lt;
    {
      d16( a') s a s a[ s a] s a[ s a]
    }
    \\
    {
      \slurUp
      bes,16[ s e](
      \hideNotes a)
      \unHideNotes f[(
      \hideNotes a)
      \unHideNotes fis](
      \hideNotes a)
      \unHideNotes g[(
      \hideNotes a)
      \unHideNotes gis](
      \hideNotes a)
    }
  &gt;&gt;
}
</pre><p>
 <a href="35/lily-8ea95a2b.ly">
  <img align="middle"
       border="0"
       src="35/lily-8ea95a2b.png"
       alt="[image of music]">
 </a>
</p>




<a name="dotted-harmonics.ly"></a>

<hr size="6">
<a name="Unfretted-strings_003a-Dotted-harmonics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings-creating-slurs-across-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings: Creating slurs across voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#unfretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Unfretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings-snap_002dpizzicato-or-bartok-pizzicato" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings: Snap-pizzicato or Bartok pizzicato &gt; </a>]</td></tr></table>
<a name="unfretted-strings-dotted-harmonics"></a>
<h2 class="unnumberedsec">Dotted harmonics</h2>


<p>Artificial harmonics using <code>\harmonic</code> do not show dots.  To
override this behavior, set the context property <code>harmonicDots</code>.
</p>

<pre class="verbatim">\relative c''' {
  \time 3/4
  \key f \major
  \set harmonicDots = ##t
  &lt;bes f'\harmonic&gt;2. ~
  &lt;bes f'\harmonic&gt;4. &lt;a e'\harmonic&gt;8( &lt;gis dis'\harmonic&gt; &lt;g d'\harmonic&gt;)
  &lt;fis cis'\harmonic&gt;2.
  &lt;bes f'\harmonic&gt;2.
}
</pre><p>
 <a href="5c/lily-45a21625.ly">
  <img align="middle"
       border="0"
       src="5c/lily-45a21625.png"
       alt="[image of music]">
 </a>
</p>




<a name="snap-pizzicato-or-bartok-pizzicato.ly"></a>

<hr size="6">
<a name="Unfretted-strings_003a-Snap_002dpizzicato-or-Bartok-pizzicato"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings-dotted-harmonics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings: Dotted harmonics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#unfretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Unfretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings-string-quartet-template-_0028simple_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings: String quartet template (simple) &gt; </a>]</td></tr></table>
<a name="unfretted-strings-snap_002dpizzicato-or-bartok-pizzicato"></a>
<h2 class="unnumberedsec">Snap-pizzicato or Bartok pizzicato</h2>


<p>A snap-pizzicato (also known as &ldquo;Bartok pizzicato&rdquo;) is a &ldquo;strong
pizzicato where the string is plucked vertically by snapping and
rebounds off the fingerboard of the instrument&rdquo; (Wikipedia).  It is
denoted by a circle with a vertical line going from the center upwards
outside the circle.
</p>

<pre class="verbatim">\relative c' {
  c4\snappizzicato
  &lt;c' e g&gt;4\snappizzicato
  &lt;c' e g&gt;4^\snappizzicato
  &lt;c, e g&gt;4_\snappizzicato
}
</pre><p>
 <a href="63/lily-fac57a97.ly">
  <img align="middle"
       border="0"
       src="63/lily-fac57a97.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-quartet-template-simple.ly"></a>

<hr size="6">
<a name="Unfretted-strings_003a-String-quartet-template-_0028simple_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings-snap_002dpizzicato-or-bartok-pizzicato" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings: Snap-pizzicato or Bartok pizzicato&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#unfretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Unfretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#unfretted-strings-string-quartet-template-with-separate-parts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Unfretted strings: String quartet template with separate parts &gt; </a>]</td></tr></table>
<a name="unfretted-strings-string-quartet-template-_0028simple_0029"></a>
<h2 class="unnumberedsec">String quartet template (simple)</h2>


<p>This template demonstrates a simple string quartet. It also uses a
<code>\global</code> section for time and key signatures
</p>

<pre class="verbatim">violinOne = \new Voice \relative c'' {
  c2 d
  e1
  \bar &quot;|.&quot;
}

violinTwo = \new Voice \relative c'' {
  g2 f
  e1
  \bar &quot;|.&quot;
}

viola = \new Voice \relative c' {
  \clef alto
  e2 d
  c1
  \bar &quot;|.&quot;
}

cello = \new Voice \relative c' {
  \clef bass
  c2 b
  a1
  \bar &quot;|.&quot;
}

\score {
  \new StaffGroup &lt;&lt;
    \new Staff \with { instrumentName = &quot;Violin 1&quot; }
    &lt;&lt; \global \violinOne &gt;&gt;
    \new Staff \with { instrumentName = &quot;Violin 2&quot; }
    &lt;&lt; \global \violinTwo &gt;&gt;
    \new Staff \with { instrumentName = &quot;Viola&quot; }
    &lt;&lt; \global \viola &gt;&gt;
    \new Staff \with { instrumentName = &quot;Cello&quot; }
    &lt;&lt; \global \cello &gt;&gt;
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="7a/lily-8bd39fb4.ly">
  <img align="middle"
       border="0"
       src="7a/lily-8bd39fb4.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-quartet-template-with-separate-parts.ly"></a>

<hr size="6">
<a name="Unfretted-strings_003a-String-quartet-template-with-separate-parts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#winds" title="Next chapter">&nbsp;Winds &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings-string-quartet-template-_0028simple_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings: String quartet template (simple)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#unfretted-strings" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Unfretted strings&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds &gt; </a>]</td></tr></table>
<a name="unfretted-strings-string-quartet-template-with-separate-parts"></a>
<h2 class="unnumberedsec">String quartet template with separate parts</h2>


<p>The &ldquo;String quartet template&rdquo; snippet produces a nice string
quartet, but what if you needed to print parts? This new template
demonstrates how to use the <code>\tag</code> feature to easily split a
piece into individual parts.
</p>
<p>You need to split this template into separate files; the filenames are
contained in comments at the beginning of each file. <code>piece.ly</code>
contains all the music definitions. The other files – <code>score.ly</code>,
<code>vn1.ly</code>, <code>vn2.ly</code>, <code>vla.ly</code>, and <code>vlc.ly</code> –
produce the appropriate part.
</p>

<p>Do not forget to remove specified comments when using separate files!
</p>

<pre class="verbatim">Violinone = \new Voice {
  \relative c'' {
    c2 d e1
    \bar &quot;|.&quot;
  }
}


Violintwo = \new Voice {
  \relative c'' {
    g2 f e1
    \bar &quot;|.&quot;
  }
}


Viola = \new Voice {
  \relative c' {
    \clef alto
    e2 d c1
    \bar &quot;|.&quot;
  }
}


Cello = \new Voice {
  \relative c' {
    \clef bass
    c2 b a1
    \bar &quot;|.&quot;
  }
}


music = {
  &lt;&lt;
    \tag #'score \tag #'vn1
    \new Staff \with { instrumentName = &quot;Violin 1&quot; }
    &lt;&lt; \global \Violinone &gt;&gt;

    \tag #'score \tag #'vn2
    \new Staff \with { instrumentName = &quot;Violin 2&quot; }
    &lt;&lt; \global \Violintwo&gt;&gt;

    \tag #'score \tag #'vla
    \new Staff \with { instrumentName = &quot;Viola&quot; }
    &lt;&lt; \global \Viola&gt;&gt;

    \tag #'score \tag #'vlc
    \new Staff \with { instrumentName = &quot;Cello&quot; }
    &lt;&lt; \global \Cello &gt;&gt;
  &gt;&gt;
}

% These are the other files you need to save on your computer

% score.ly
% (This is the main file)

% uncomment the line below when using a separate file
%\include &quot;piece.ly&quot;

#(set-global-staff-size 14)

\score {
  \new StaffGroup \keepWithTag #'score \music
  \layout { }
  \midi { }
}


%{ Uncomment this block when using separate files

% vn1.ly
% (This is the Violin 1 part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vn1 \music
  \layout { }
}


% vn2.ly
% (This is the Violin 2 part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vn2 \music
  \layout { }
}


% vla.ly
% (This is the Viola part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vla \music
  \layout { }
}


% vlc.ly
% (This is the Cello part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vlc \music
  \layout { }
}

%}
</pre><p>
 <a href="78/lily-7d1ea106.ly">
  <img align="middle"
       border="0"
       src="78/lily-7d1ea106.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Winds"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#unfretted-strings" title="Beginning of this chapter or previous chapter"> &lt;&lt; Unfretted strings&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#unfretted-strings-string-quartet-template-with-separate-parts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Unfretted strings: String quartet template with separate parts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-changing-the-size-of-woodwind-diagrams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Changing the size of woodwind diagrams &gt; </a>]</td></tr></table>
<a name="winds"></a>
<h1 class="unnumbered">Winds</h1>

<a name="index-Wind-instruments"></a>
<p><a href="notation-big-page.html#wind-instruments">Wind instruments</a>
</p>

<a name="changing-the-size-of-woodwind-diagrams.ly"></a>

<hr size="6">
<a name="Winds_003a-Changing-the-size-of-woodwind-diagrams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-fingering-symbols-for-wind-instruments" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Fingering symbols for wind instruments &gt; </a>]</td></tr></table>
<a name="winds-changing-the-size-of-woodwind-diagrams"></a>
<h2 class="unnumberedsec">Changing the size of woodwind diagrams</h2>


<p>The size and thickness of woodwind diagrams can be changed.
</p>

<pre class="verbatim">\relative c'' {
  \textLengthOn
  c1^\markup
    \woodwind-diagram
      #'piccolo
      #'()

  c^\markup
    \override #'(size . 1.5) {
      \woodwind-diagram
        #'piccolo
        #'()
    }
  c^\markup
    \override #'(thickness . 0.15) {
      \woodwind-diagram
        #'piccolo
        #'()
    }
}
</pre><p>
 <a href="0e/lily-5c7a4d5b.ly">
  <img align="middle"
       border="0"
       src="0e/lily-5c7a4d5b.png"
       alt="[image of music]">
 </a>
</p>




<a name="fingering-symbols-for-wind-instruments.ly"></a>

<hr size="6">
<a name="Winds_003a-Fingering-symbols-for-wind-instruments"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-changing-the-size-of-woodwind-diagrams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Changing the size of woodwind diagrams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-flute-slap-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Flute slap notation &gt; </a>]</td></tr></table>
<a name="winds-fingering-symbols-for-wind-instruments"></a>
<h2 class="unnumberedsec">Fingering symbols for wind instruments</h2>


<p>Special symbols can be achieved by combining existing glyphs, which is
useful for wind instruments.
</p>

<pre class="verbatim">centermarkup = {
  \once \override TextScript.self-alignment-X = #CENTER
  \once \override TextScript.X-offset =#(lambda (g)
  (+ (ly:self-alignment-interface::centered-on-x-parent g)
     (ly:self-alignment-interface::x-aligned-on-self g)))
}

\score {
  \relative c'{
    g\open
    \once \override TextScript.staff-padding = #-1.0
    \centermarkup
    g^\markup {
      \combine
        \musicglyph #&quot;scripts.open&quot;
        \musicglyph #&quot;scripts.tenuto&quot;
    }
    \centermarkup
    g^\markup {
      \combine
        \musicglyph #&quot;scripts.open&quot;
        \musicglyph #&quot;scripts.stopped&quot;
    }
    g\stopped
  }
}
</pre><p>
 <a href="4a/lily-3ea2438b.ly">
  <img align="middle"
       border="0"
       src="4a/lily-3ea2438b.png"
       alt="[image of music]">
 </a>
</p>




<a name="flute-slap-notation.ly"></a>

<hr size="6">
<a name="Winds_003a-Flute-slap-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-fingering-symbols-for-wind-instruments" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Fingering symbols for wind instruments&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-graphical-and-text-woodwind-diagrams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Graphical and text woodwind diagrams &gt; </a>]</td></tr></table>
<a name="winds-flute-slap-notation"></a>
<h2 class="unnumberedsec">Flute slap notation</h2>


<p>It is possible to indicate special articulation techniques such as a
flute &ldquo;tongue slap&rdquo; by replacing the note head with the appropriate
glyph.
</p>

<pre class="verbatim">slap =
#(define-music-function (music) (ly:music?)
#{
  \temporary \override NoteHead.stencil =
  #(lambda (grob)
     (grob-interpret-markup grob
      (markup #:musicglyph &quot;scripts.sforzato&quot;)))
  \temporary \override NoteHead.stem-attachment =
  #(lambda (grob)
     (let* ((thickness (ly:staff-symbol-line-thickness grob))
            (stem (ly:grob-object grob 'stem))
            (dir (ly:grob-property stem 'direction UP)))
       (cons 1 (+ (if (= dir DOWN)
                      0.5
                      0)
                  (/ thickness 2)))))
  #music
  \revert NoteHead.stencil
  \revert NoteHead.stem-attachment
#})

\relative c' {
  c4 \slap c d r
  \slap { g4 a } b r
}
</pre><p>
 <a href="f7/lily-516ef95d.ly">
  <img align="middle"
       border="0"
       src="f7/lily-516ef95d.png"
       alt="[image of music]">
 </a>
</p>




<a name="graphical-and-text-woodwind-diagrams.ly"></a>

<hr size="6">
<a name="Winds_003a-Graphical-and-text-woodwind-diagrams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-flute-slap-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Flute slap notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-recorder-fingering-chart" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Recorder fingering chart &gt; </a>]</td></tr></table>
<a name="winds-graphical-and-text-woodwind-diagrams"></a>
<h2 class="unnumberedsec">Graphical and text woodwind diagrams</h2>


<p>In many cases, the keys other than the central column can be displayed
by key name as well as by graphical means.
</p>

<pre class="verbatim">\relative c'' {
  \textLengthOn
  c1^\markup
    \woodwind-diagram
      #'piccolo
      #'((cc . (one three))
         (lh . (gis))
         (rh . (ees)))

  c^\markup
    \override #'(graphical . #f) {
      \woodwind-diagram
        #'piccolo
        #'((cc . (one three))
           (lh . (gis))
           (rh . (ees)))
    }
}
</pre><p>
 <a href="9d/lily-1507248d.ly">
  <img align="middle"
       border="0"
       src="9d/lily-1507248d.png"
       alt="[image of music]">
 </a>
</p>




<a name="recorder-fingering-chart.ly"></a>

<hr size="6">
<a name="Winds_003a-Recorder-fingering-chart"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-graphical-and-text-woodwind-diagrams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Graphical and text woodwind diagrams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-woodwind-diagrams-key-lists" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Woodwind diagrams key lists &gt; </a>]</td></tr></table>
<a name="winds-recorder-fingering-chart"></a>
<h2 class="unnumberedsec">Recorder fingering chart</h2>


<p>The following example demonstrates how fingering charts for wind
instruments can be realized.
</p>

<pre class="verbatim">% range chart for paetzold contrabass recorder

centermarkup = {
  \once \override TextScript.self-alignment-X = #CENTER
  \once \override TextScript.X-offset =#(lambda (g)
  (+ (ly:self-alignment-interface::centered-on-x-parent g)
     (ly:self-alignment-interface::x-aligned-on-self g)))
}

\score {
  \new Staff \with {
    \remove &quot;Time_signature_engraver&quot;
    \omit Stem
    \omit Flag
    \consists &quot;Horizontal_bracket_engraver&quot;
  }
  {
    \clef bass
    \set Score.timing = ##f
    f,1*1/4 \glissando
    \clef violin
    gis'1*1/4
    \stemDown a'4^\markup{1)}
    \centermarkup
    \once \override TextScript.padding = #2
    bes'1*1/4_\markup{\override #'(baseline-skip . 1.7) \column
      { \fontsize #-5 \slashed-digit #0 \finger 1 \finger 2 \finger 3 \finger 4
    \finger 5 \finger 6 \finger 7} }
    b'1*1/4
    c''4^\markup{1)}
    \centermarkup
    \once \override TextScript.padding = #2
    cis''1*1/4
    deh''1*1/4
    \centermarkup
    \once \override TextScript.padding = #2
    \once \override Staff.HorizontalBracket.direction = #UP
    e''1*1/4_\markup{\override #'(baseline-skip . 1.7) \column
      { \fontsize #-5 \slashed-digit #0 \finger 1 \finger 2 \finger 4
    \finger 5} }\startGroup
    f''1*1/4^\markup{2)}\stopGroup
  }
}
</pre><p>
 <a href="0f/lily-2b111260.ly">
  <img align="middle"
       border="0"
       src="0f/lily-2b111260.png"
       alt="[image of music]">
 </a>
</p>




<a name="woodwind-diagrams-key-lists.ly"></a>

<hr size="6">
<a name="Winds_003a-Woodwind-diagrams-key-lists"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-recorder-fingering-chart" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Recorder fingering chart&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#winds-woodwind-diagrams-listing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Winds: Woodwind diagrams listing &gt; </a>]</td></tr></table>
<a name="winds-woodwind-diagrams-key-lists"></a>
<h2 class="unnumberedsec">Woodwind diagrams key lists</h2>


<p>The snippet below produces a list of all possible keys and key settings
for woodwind diagrams as defined in
<code>scm/define-woodwind-diagrams.scm</code>.  The list will be displayed in
the log file, but not in the music.  If output to the console is
wanted, omit the <code>(current-error-port)</code> from the commands.
</p>

<pre class="verbatim">#(print-keys-verbose 'piccolo (current-error-port))
#(print-keys-verbose 'flute (current-error-port))
#(print-keys-verbose 'flute-b-extension (current-error-port))
#(print-keys-verbose 'tin-whistle (current-error-port))
#(print-keys-verbose 'oboe (current-error-port))
#(print-keys-verbose 'clarinet (current-error-port))
#(print-keys-verbose 'bass-clarinet (current-error-port))
#(print-keys-verbose 'low-bass-clarinet (current-error-port))
#(print-keys-verbose 'saxophone (current-error-port))
#(print-keys-verbose 'soprano-saxophone (current-error-port))
#(print-keys-verbose 'alto-saxophone (current-error-port))
#(print-keys-verbose 'tenor-saxophone (current-error-port))
#(print-keys-verbose 'baritone-saxophone (current-error-port))
#(print-keys-verbose 'bassoon (current-error-port))
#(print-keys-verbose 'contrabassoon (current-error-port))

\score {c''1}
</pre><p>
 <a href="6d/lily-cd472933.ly">
  <img align="middle"
       border="0"
       src="6d/lily-cd472933.png"
       alt="[image of music]">
 </a>
</p>




<a name="woodwind-diagrams-listing.ly"></a>

<hr size="6">
<a name="Winds_003a-Woodwind-diagrams-listing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#ancient-notation" title="Next chapter">&nbsp;Ancient notation &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-woodwind-diagrams-key-lists" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Woodwind diagrams key lists&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#winds" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Winds&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation &gt; </a>]</td></tr></table>
<a name="winds-woodwind-diagrams-listing"></a>
<h2 class="unnumberedsec">Woodwind diagrams listing</h2>


<p>The following music shows all of the woodwind diagrams currently
defined in LilyPond.
</p>

<pre class="verbatim">\layout {
  indent = 0
}

\relative c' {
  \textLengthOn
  c1^
  \markup {
    \center-column {
      'tin-whistle
      &quot; &quot;
       \woodwind-diagram
                  #'tin-whistle
                  #'()
    }
  }

  c1^
  \markup {
    \center-column {
      'piccolo
      &quot; &quot;
       \woodwind-diagram
                  #'piccolo
                  #'()
    }
  }

  c1^
  \markup {
    \center-column {
       'flute
       &quot; &quot;
       \woodwind-diagram
          #'flute
          #'()
    }
  }
  c1^\markup {
    \center-column {
      'oboe
      &quot; &quot;
      \woodwind-diagram
        #'oboe
        #'()
    }
  }

  c1^\markup {
    \center-column {
      'clarinet
      &quot; &quot;
      \woodwind-diagram
        #'clarinet
        #'()
    }
  }

  c1^\markup {
    \center-column {
      'bass-clarinet
      &quot; &quot;
      \woodwind-diagram
        #'bass-clarinet
        #'()
    }
  }

  c1^\markup {
    \center-column {
      'saxophone
      &quot; &quot;
      \woodwind-diagram
        #'saxophone
        #'()
    }
  }

  c1^\markup {
    \center-column {
      'bassoon
      &quot; &quot;
      \woodwind-diagram
        #'bassoon
        #'()
    }
  }

  c1^\markup {
    \center-column {
      'contrabassoon
      &quot; &quot;
      \woodwind-diagram
        #'contrabassoon
        #'()
    }
  }
}
</pre><p>
 <a href="2e/lily-c4970345.ly">
  <img align="middle"
       border="0"
       src="2e/lily-c4970345.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Ancient-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#winds" title="Beginning of this chapter or previous chapter"> &lt;&lt; Winds&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#winds-woodwind-diagrams-listing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Winds: Woodwind diagrams listing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-adding-a-figured-bass-above-or-below-the-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Adding a figured bass above or below the notes &gt; </a>]</td></tr></table>
<a name="ancient-notation"></a>
<h1 class="unnumbered">Ancient notation</h1>

<a name="index-Ancient-notation"></a>
<p><a href="notation-big-page.html#ancient-notation">Ancient notation</a>
</p>

<a name="adding-a-figured-bass-above-or-below-the-notes.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Adding-a-figured-bass-above-or-below-the-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-ancient-fonts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Ancient fonts &gt; </a>]</td></tr></table>
<a name="ancient-notation-adding-a-figured-bass-above-or-below-the-notes"></a>
<h2 class="unnumberedsec">Adding a figured bass above or below the notes</h2>


<p>When writing a figured bass, you can place the figures above or below
the bass notes, by defining the
<code>BassFigureAlignmentPositioning.direction</code> property (exclusively
in a <code>Staff</code> context). Choices are <code>#UP</code> (or <code>#1</code>),
<code>#CENTER</code> (or <code>#0</code>) and <code>#DOWN</code> (or <code>#-1</code>).
</p>
<p>This property can be changed as many times as you wish. Use
<code>\once \override</code> if you don&rsquo;t want the override to apply to the
whole score.
</p>

<pre class="verbatim">bass = {
  \clef bass
  g4 b, c d
  e d8 c d2
}

continuo = \figuremode {
  &lt;_&gt;4 &lt;6&gt;4 &lt;5/&gt;4
  \override Staff.BassFigureAlignmentPositioning.direction = #UP
  %\bassFigureStaffAlignmentUp
  &lt; _+ &gt;4 &lt;6&gt;
  \set Staff.useBassFigureExtenders = ##t
  \override Staff.BassFigureAlignmentPositioning.direction = #DOWN
  %\bassFigureStaffAlignmentDown
  &lt;4&gt;4. &lt;4&gt;8 &lt;_+&gt;4
}

\score {
  &lt;&lt;
    \new Staff = bassStaff \bass
    \context Staff = bassStaff \continuo
  &gt;&gt;
}
</pre><p>
 <a href="26/lily-6006274b.ly">
  <img align="middle"
       border="0"
       src="26/lily-6006274b.png"
       alt="[image of music]">
 </a>
</p>




<a name="ancient-fonts.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Ancient-fonts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-adding-a-figured-bass-above-or-below-the-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Adding a figured bass above or below the notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-ancient-notation-template-_002d-modern-transcription-of-gregorian-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Ancient notation template -- modern transcription of gregorian music &gt; </a>]</td></tr></table>
<a name="ancient-notation-ancient-fonts"></a>
<h2 class="unnumberedsec">Ancient fonts</h2>


<p>Shown here are many of the symbols that are included in LilyPond&rsquo;s
ancient notation.
</p>

<pre class="verbatim">upperStaff = \new VaticanaStaff = &quot;upperStaff&quot; &lt;&lt;
  \context VaticanaVoice &lt;&lt;
    \transpose c c {

      \override NoteHead.style = #'vaticana.punctum
      \key es \major
      \clef &quot;vaticana-fa2&quot;
      c1 des e f ges

      \override NoteHead.style = #'vaticana.inclinatum
      a! b ces'
      \bar &quot;|&quot;

      \override NoteHead.style = #'vaticana.quilisma
      b! des'! ges! fes!
      \breathe
      \clef &quot;vaticana-fa1&quot;
      \override NoteHead.style = #'vaticana.plica
      es d
      \override NoteHead.style = #'vaticana.reverse.plica
      c d
      \bar &quot;|&quot;

      \override NoteHead.style = #'vaticana.punctum.cavum
      es f
      \override NoteHead.style = #'vaticana.lpes
      g as
      \override NoteHead.style = #'vaticana.upes
      bes as
      \override NoteHead.style = #'vaticana.vupes
      g f
      \override NoteHead.style = #'vaticana.linea.punctum
      \once \override Staff.BarLine.bar-extent = #'(-1 . 1) \bar &quot;|&quot;

      es d
      \override NoteHead.style = #'vaticana.epiphonus
      c d
      \override NoteHead.style = #'vaticana.cephalicus
      es f

      \override Staff.KeySignature.glyph-name-alist =
        #alteration-medicaea-glyph-name-alist
      \override Staff.Accidental.glyph-name-alist =
        #alteration-medicaea-glyph-name-alist
      \override Staff.Custos.style = #'medicaea
      \override NoteHead.style = #'medicaea.punctum
      \clef &quot;medicaea-fa2&quot;
      ces des
      \bar &quot;|&quot;

      e! f! ges
      \clef &quot;medicaea-do2&quot;
      \override NoteHead.style = #'medicaea.inclinatum
      a! b! ces'
      \override NoteHead.style = #'medicaea.virga
      b! a!
      \bar &quot;|&quot;

      ges fes
      \clef &quot;medicaea-fa1&quot;
      \override NoteHead.style = #'medicaea.rvirga
      e des ces

      \override Staff.KeySignature.glyph-name-alist =
        #alteration-hufnagel-glyph-name-alist
      \override Staff.Accidental.glyph-name-alist =
        #alteration-hufnagel-glyph-name-alist
      \override Staff.Custos.style = #'hufnagel
      \override NoteHead.style = #'hufnagel.punctum
      \clef &quot;hufnagel-fa2&quot;
      ces des es
      \bar &quot;|&quot;

      fes ges
      \clef &quot;hufnagel-do2&quot;
      \override NoteHead.style = #'hufnagel.lpes
      as! bes! ces'
      \override NoteHead.style = #'hufnagel.virga
      bes! as!
      \bar &quot;|&quot;

      ges! fes!
      \clef &quot;hufnagel-do-fa&quot;
      \override NoteHead.style = #'hufnagel.punctum
      es! des ces des! es! fes!
      \bar &quot;||&quot;

      s32*1
    }
  &gt;&gt;
&gt;&gt;

lowerStaff = \new MensuralStaff = &quot;lowerStaff&quot; &lt;&lt;
  \context MensuralVoice &lt;&lt;
    \transpose c c {

      \key a \major
      cis'1 d'\breve gis'\breve e'\breve \[ e'\longa fis'\longa \]
      \set Staff.forceClef = ##t
      \clef &quot;neomensural-c2&quot;
      cis1
      \bar &quot;|&quot;

      \[ g\breve dis''\longa \]
      b\breve \[ a\longa d\longa \]
      \clef &quot;petrucci-c2&quot;

      fis1 ces1
      \clef &quot;petrucci-c2&quot;
      r\longa
      \set Staff.forceClef = ##t
      \clef &quot;mensural-c2&quot;
      r\breve
      \bar &quot;|&quot;

      r2
      \clef &quot;mensural-g&quot;
      r4 r8 r16 r16
      \override NoteHead.style = #'mensural
      \override Rest.style = #'mensural
      \clef &quot;petrucci-f&quot;
      c8 b, c16 b, c32 b, c64 b, c64 b,
      d8 e d16 e d32 e d64 e d64 e
      r\longa
      \set Staff.forceClef = ##t
      \clef &quot;petrucci-f&quot;
      r\breve
      \bar &quot;|&quot;

      r\breve
      \clef &quot;mensural-f&quot;
      r2 r4 r8 r16 r16

      \set Staff.forceClef = ##t
      \clef &quot;mensural-f&quot;
      e\breve f g a1
      \clef &quot;mensural-g&quot;

      \[ bes'!\longa a'!\longa c''!\longa \]
      e'1 d' c' d' \bar &quot;|&quot;
      \bar &quot;|&quot;

      bes'!\longa fis'!1 as'!1 ges'!\longa % lig
      \set Staff.forceClef = ##t
      \clef &quot;mensural-g&quot;
      e'2 d' c' \bar &quot;|&quot;

      \set Staff.forceClef = ##t
      \clef &quot;petrucci-g&quot;
      c'2 d' e' f'
      \clef &quot;petrucci-g&quot;
      g' as'! bes'! cis''!
      bes'! as'! gis'! fis'!
      \set Staff.forceClef = ##t
      \clef &quot;mensural-g&quot;
      es'! des'! cis'!1 \bar &quot;||&quot;
    }
  &gt;&gt;
&gt;&gt;

\paper {
  line-thickness = #(/ staff-space 5.0)
}

\score {
  &lt;&lt;
    \upperStaff
    \lowerStaff
  &gt;&gt;
  \layout {
    indent = 0.0
    \context {
      \Score
      timing = ##f
    }
    \context {
      \MensuralVoice
      \override NoteHead.style = #'neomensural
      \override Rest.style = #'neomensural
      \override Flag.style = #'mensural
      \override Stem.thickness = #1.0
    }
    \context {
      \MensuralStaff
      \revert  BarLine.transparent
      \override KeySignature.glyph-name-alist =
        #alteration-mensural-glyph-name-alist
      clefGlyph = #&quot;clefs.petrucci.c2&quot;
    }
    \context {
      \VaticanaStaff
      \revert  BarLine.transparent
      \override StaffSymbol.thickness = #2.0
      \override KeySignature.glyph-name-alist =
        #alteration-vaticana-glyph-name-alist
      \override Custos.neutral-position = #4
    }
  }
}
</pre><p>
 <a href="31/lily-afbdddcf.ly">
  <img align="middle"
       border="0"
       src="31/lily-afbdddcf.png"
       alt="[image of music]">
 </a>
</p>




<a name="ancient-notation-template----modern-transcription-of-gregorian-music.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-ancient-fonts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Ancient fonts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-ancient-time-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Ancient time signatures &gt; </a>]</td></tr></table>
<a name="ancient-notation-ancient-notation-template-_002d-modern-transcription-of-gregorian-music"></a>
<h2 class="unnumberedsec">Ancient notation template &ndash; modern transcription of gregorian music</h2>


<p>This example demonstrates how to do modern transcription of Gregorian
music. Gregorian music has no measure, no stems; it uses only half and
quarter note heads, and special marks, indicating rests of different
length.
</p>

<pre class="verbatim">\include &quot;gregorian.ly&quot;

chant = \relative c' {
  \set Score.timing = ##f
  f4 a2 \divisioMinima
  g4 b a2 f2 \divisioMaior
  g4( f) f( g) a2 \finalis
}

verba = \lyricmode {
  Lo -- rem ip -- sum do -- lor sit a -- met
}

\score {
  \new Staff &lt;&lt;
    \new Voice = &quot;melody&quot; \chant
    \new Lyrics = &quot;one&quot; \lyricsto melody \verba
  &gt;&gt;
  \layout {
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Bar_engraver&quot;
      \hide Stem
    }
    \context {
      \Voice
      \override Stem.length = #0
    }
    \context {
      \Score
      barAlways = ##t
    }
  }
}
</pre><p>
 <a href="7b/lily-377306ba.ly">
  <img align="middle"
       border="0"
       src="7b/lily-377306ba.png"
       alt="[image of music]">
 </a>
</p>




<a name="ancient-time-signatures.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Ancient-time-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-ancient-notation-template-_002d-modern-transcription-of-gregorian-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Ancient notation template -- modern transcription of gregorian music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-chant-or-psalms-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Chant or psalms notation &gt; </a>]</td></tr></table>
<a name="ancient-notation-ancient-time-signatures"></a>
<h2 class="unnumberedsec">Ancient time signatures</h2>


<p>Time signatures may also be engraved in an old style.
</p>



<pre class="verbatim">{
  \override Staff.TimeSignature.style = #'neomensural
  s1
}
</pre><p>
 <a href="75/lily-65c5483a.ly">
  <img align="middle"
       border="0"
       src="75/lily-65c5483a.png"
       alt="[image of music]">
 </a>
</p>




<a name="chant-or-psalms-notation.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Chant-or-psalms-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-ancient-time-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Ancient time signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-custodes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Custodes &gt; </a>]</td></tr></table>
<a name="ancient-notation-chant-or-psalms-notation"></a>
<h2 class="unnumberedsec">Chant or psalms notation</h2>


<p>This form of notation is used for Psalm chant, where verses aren&rsquo;t
always the same length.
</p>

<pre class="verbatim">stemOff = \hide Staff.Stem
stemOn  = \undo \stemOff

\score {
  \new Staff \with { \remove &quot;Time_signature_engraver&quot; }
  {
    \key g \minor
    \cadenzaOn
    \stemOff a'\breve bes'4 g'4
    \stemOn a'2 \bar &quot;||&quot;
    \stemOff a'\breve g'4 a'4
    \stemOn f'2 \bar &quot;||&quot;
    \stemOff a'\breve^\markup { \italic flexe }
    \stemOn g'2 \bar &quot;||&quot;
  }
}
</pre><p>
 <a href="6c/lily-0d850cf4.ly">
  <img align="middle"
       border="0"
       src="6c/lily-0d850cf4.png"
       alt="[image of music]">
 </a>
</p>




<a name="custodes.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Custodes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-chant-or-psalms-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Chant or psalms notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-incipit" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Incipit &gt; </a>]</td></tr></table>
<a name="ancient-notation-custodes"></a>
<h2 class="unnumberedsec">Custodes</h2>


<p>Custodes may be engraved in various styles.
</p>

<pre class="verbatim">\layout { ragged-right = ##t }

\new Staff \with { \consists &quot;Custos_engraver&quot; } \relative c' {
  \override Staff.Custos.neutral-position = #4

  \override Staff.Custos.style = #'hufnagel
  c1^&quot;hufnagel&quot; \break
  &lt;d a' f'&gt;1

  \override Staff.Custos.style = #'medicaea
  c1^&quot;medicaea&quot; \break
  &lt;d a' f'&gt;1

  \override Staff.Custos.style = #'vaticana
  c1^&quot;vaticana&quot; \break
  &lt;d a' f'&gt;1

  \override Staff.Custos.style = #'mensural
  c1^&quot;mensural&quot; \break
  &lt;d a' f'&gt;1
}
</pre><p>
 <a href="a5/lily-7ceec8af.ly">
  <img align="middle"
       border="0"
       src="a5/lily-7ceec8af.png"
       alt="[image of music]">
 </a>
</p>




<a name="incipit.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Incipit"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-custodes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Custodes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Mensurstriche layout (bar lines between the staves) &gt; </a>]</td></tr></table>
<a name="ancient-notation-incipit"></a>
<h2 class="unnumberedsec">Incipit</h2>


<p>When transcribing mensural music, an incipit at the beginning of the piece is
useful to indicate the original key and tempo.  Musicians today are used
to bar lines, but these were not known during the period of mensural music.  As
a compromise, bar lines are often printed between the staves, a layout style
called mensurstriche layout.
</p>
<pre class="verbatim">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% A short excerpt from the Jubilate Deo by Orlande de Lassus
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

global = {
  \set Score.skipBars = ##t
  \key g \major
  \time 4/4

  % the actual music
  \skip 1*8

  % let finis bar go through all staves
  \override Staff.BarLine.transparent = ##f

  % finis bar
  \bar &quot;|.&quot;
}

discantusIncipit = {
  \clef &quot;neomensural-c1&quot;
  \key f \major
  \time 2/2
  c''1.
}

discantusNotes = {
  \transpose c' c'' {
    \clef &quot;treble&quot;
    d'2. d'4 |
    b e' d'2 |
    c'4 e'4.( d'8 c' b |
    a4) b a2 |
    b4.( c'8 d'4) c'4 |
    \once \hide NoteHead
    c'1 |
    b\breve |
  }
}

discantusLyrics = \lyricmode {
  Ju -- bi -- la -- te De -- o,
  om -- nis ter -- ra, __ om-
  &quot;...&quot;
  -us.
}

altusIncipit = {
  \clef &quot;neomensural-c3&quot;
  \key f \major
  \time 2/2
  r1 f'1.
}

altusNotes = {
  \transpose c' c'' {
    \clef &quot;treble&quot;
    r2 g2. e4 fis g |
    a2 g4 e |
    fis g4.( fis16 e fis4) |
    g1 |
    \once \hide NoteHead
    g1 |
    g\breve |
  }
}

altusLyrics = \lyricmode {
  Ju -- bi -- la -- te
  De -- o, om -- nis ter -- ra,
  &quot;...&quot;
  -us.
}

tenorIncipit = {
  \clef &quot;neomensural-c4&quot;
  \key f \major
  \time 2/2
  r\longa
  r\breve
  r1 c'1.
}

tenorNotes = {
  \transpose c' c' {
    \clef &quot;treble_8&quot;
    R1 |
    R1 |
    R1 |
    % two measures
    r2 d'2. d'4 b e' |
    \once \hide NoteHead
    e'1 |
    d'\breve |
  }
}

tenorLyrics = \lyricmode {
  Ju -- bi -- la -- te
  &quot;...&quot;
  -us.
}

bassusIncipit = {
  \clef &quot;mensural-f&quot;
  \key f \major
  \time 2/2
  r\maxima
  f1.
}

bassusNotes = {
  \transpose c' c' {
    \clef &quot;bass&quot;
    R1 |
    R1 |
    R1 |
    R1 |
    g2. e4 |
    \once \hide NoteHead
    e1 |
    g\breve |
  }
}

bassusLyrics = \lyricmode {
  Ju -- bi-
  &quot;...&quot;
  -us.
}

\score {
  &lt;&lt;
    \new StaffGroup = choirStaff &lt;&lt;
      \new Voice = &quot;discantusNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Discantus&quot;
        \incipit \discantusIncipit
        \global
        \discantusNotes
      &gt;&gt;
      \new Lyrics \lyricsto discantusNotes { \discantusLyrics }
      \new Voice = &quot;altusNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Altus&quot;
        \global
        \incipit \altusIncipit
        \altusNotes
      &gt;&gt;
      \new Lyrics \lyricsto altusNotes { \altusLyrics }
      \new Voice = &quot;tenorNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Tenor&quot;
        \global
        \incipit \tenorIncipit
        \tenorNotes
      &gt;&gt;
      \new Lyrics \lyricsto tenorNotes { \tenorLyrics }
      \new Voice = &quot;bassusNotes&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Bassus&quot;
        \global
        \incipit \bassusIncipit
        \bassusNotes
      &gt;&gt;
      \new Lyrics \lyricsto bassusNotes { \bassusLyrics }
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context {
      \Score
      %% no bar lines in staves or lyrics
      \hide BarLine
    }
    %% the next two instructions keep the lyrics between the bar lines
    \context {
      \Lyrics
      \consists &quot;Bar_engraver&quot;
      \consists &quot;Separating_line_group_engraver&quot;
    }
    \context {
      \Voice
      %% no slurs
      \hide Slur
      %% Comment in the below &quot;\remove&quot; command to allow line
      %% breaking also at those bar lines where a note overlaps
      %% into the next measure.  The command is commented out in this
      %% short example score, but especially for large scores, you
      %% will typically yield better line breaking and thus improve
      %% overall spacing if you comment in the following command.
      %%\remove &quot;Forbid_line_break_engraver&quot;
    }
    indent = 6\cm
    incipit-width = 4\cm
  }
}
</pre><p>
 <a href="a8/lily-b5926ef2.ly">
  <img align="middle"
       border="0"
       src="a8/lily-b5926ef2.png"
       alt="[image of music]">
 </a>
</p>




<a name="mensurstriche-layout-bar-lines-between-the-staves.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-incipit" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Incipit&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-rest-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Rest styles &gt; </a>]</td></tr></table>
<a name="ancient-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<h2 class="unnumberedsec">Mensurstriche layout (bar lines between the staves)</h2>


<p>The mensurstriche-layout where the bar lines do not show on the staves
but between staves can be achieved with a <code>StaffGroup</code> instead of
a <code>ChoirStaff</code>.  The bar line on staves is blanked out using
<code>\hide</code>.
</p>

<pre class="verbatim">global = {
  \hide Staff.BarLine
  s1 s
  % the final bar line is not interrupted
  \undo \hide Staff.BarLine
  \bar &quot;|.&quot;
}

\new StaffGroup \relative c'' {
  &lt;&lt;
    \new Staff { &lt;&lt; \global { c1 c } &gt;&gt; }
    \new Staff { &lt;&lt; \global { c c } &gt;&gt; }
  &gt;&gt;
}
</pre><p>
 <a href="a8/lily-6697829e.ly">
  <img align="middle"
       border="0"
       src="a8/lily-6697829e.png"
       alt="[image of music]">
 </a>
</p>




<a name="rest-styles.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Rest-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Mensurstriche layout (bar lines between the staves)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-using-tags-to-produce-mensural-and-modern-music-from-the-same-source" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Using tags to produce mensural and modern music from the same source &gt; </a>]</td></tr></table>
<a name="ancient-notation-rest-styles"></a>
<h2 class="unnumberedsec">Rest styles</h2>


<p>Rests may be used in various styles.
</p>
<pre class="verbatim">\new Staff \relative c {
  \omit Score.TimeSignature
  \cadenzaOn

  \override Staff.Rest.style = #'mensural
  r\maxima^\markup \typewriter { mensural }
  r\longa r\breve r1 r2 r4 r8 r16 s32 s64 s128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'neomensural
  r\maxima^\markup \typewriter { neomensural }
  r\longa r\breve r1 r2 r4 r8 r16 s32 s64 s128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'classical
  r\maxima^\markup \typewriter { classical }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'z
  r\maxima^\markup \typewriter { z-style }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'default
  r\maxima^\markup \typewriter { default }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
}
</pre><p>
 <a href="1c/lily-18b7709f.ly">
  <img align="middle"
       border="0"
       src="1c/lily-18b7709f.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-tags-to-produce-mensural-and-modern-music-from-the-same-source.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Using-tags-to-produce-mensural-and-modern-music-from-the-same-source"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-rest-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Rest styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#ancient-notation-vertical-line-as-a-baroque-articulation-mark" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation: Vertical line as a baroque articulation mark &gt; </a>]</td></tr></table>
<a name="ancient-notation-using-tags-to-produce-mensural-and-modern-music-from-the-same-source"></a>
<h2 class="unnumberedsec">Using tags to produce mensural and modern music from the same source</h2>


<p>By using tags, it&rsquo;s possible to use the same music to produce both
mensural and modern music.  In this snippet, a function <code>menrest</code>
is introduced, allowing mensural rests to be pitched as in the
original, but with modern rests in the standard staff position.  Tags
are used to produce different types of bar line at the end of the
music, but tags can also be used where other differences are needed:
for example using &ldquo;whole measure rests&rdquo; (R1, R\breve etc.) in
modern music, but normal rests (r1, r\breve, etc.) in the mensural
version.  Note that converting mensural music to its modern equivalent
is usually referred to as <code>transcription</code>.
</p>

<pre class="verbatim">menrest = #(define-music-function (note)
  (ly:music?)
#{
    \tag #'mens $(make-music 'RestEvent note)
    \tag #'mod $(make-music 'RestEvent note 'pitch '())
#})

MensStyle = {
  \autoBeamOff
  \override NoteHead.style = #'petrucci
  \override Score.BarNumber.transparent = ##t
  \override Stem.neutral-direction = #up
}

finalis = {
  \once \override BreathingSign.stencil = #ly:breathing-sign::finalis
  \once \override BreathingSign.Y-offset = #0
  \once \override BreathingSign.minimum-X-extent = #'(-1.0 . 0.0)
  \once \override BreathingSign.minimum-Y-extent = #'(-2.5 . 2.5)

  \breathe
}

Music = \relative c'' {
  \set Score.tempoHideNote = ##t
  \key f \major
  \time 4/4
  g1 d'2 \menrest bes4 bes2 a2 r4 g4 fis2.
  \tag #'mens { \finalis }
  \tag #'mod { \bar &quot;||&quot; }
}

MenLyr = \lyricmode { So farre, deere life, deare life }
ModLyr = \lyricmode { So far, dear life, dear life }

\score {
  \keepWithTag #'mens {
    &lt;&lt;
      \new MensuralStaff
      {
        \new MensuralVoice = Cantus \clef &quot;mensural-c1&quot; \MensStyle \Music
      }
      \new Lyrics \lyricsto Cantus \MenLyr
    &gt;&gt;
  }
}

\score {
  \keepWithTag #'mod {
    \new ChoirStaff &lt;&lt;
      \new Staff
      {
        \new Voice = Sop \with {
          \remove &quot;Note_heads_engraver&quot;
          \consists &quot;Completion_heads_engraver&quot;
          \remove &quot;Rest_engraver&quot;
          \consists &quot;Completion_rest_engraver&quot; }
        {
          \shiftDurations #1 #0 { \autoBeamOff \Music }
        }
      }
      \new Lyrics \lyricsto Sop \ModLyr
    &gt;&gt;
  }
}
</pre><p>
 <a href="8d/lily-34ce813c.ly">
  <img align="middle"
       border="0"
       src="8d/lily-34ce813c.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertical-line-as-a-baroque-articulation-mark.ly"></a>

<hr size="6">
<a name="Ancient-notation_003a-Vertical-line-as-a-baroque-articulation-mark"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#world-music" title="Next chapter">&nbsp;World music &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-using-tags-to-produce-mensural-and-modern-music-from-the-same-source" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Using tags to produce mensural and modern music from the same source&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#ancient-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#world-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;World music &gt; </a>]</td></tr></table>
<a name="ancient-notation-vertical-line-as-a-baroque-articulation-mark"></a>
<h2 class="unnumberedsec">Vertical line as a baroque articulation mark</h2>


<p>This short vertical line placed above the note is commonly used in
baroque music.  Its meaning can vary, but generally indicates notes
that should be played with more &ldquo;weight&rdquo;.  The following example
demonstrates how to achieve such a notation.
</p>

<pre class="verbatim">upline =
#(let ((m (make-articulation &quot;stopped&quot;)))
   (set! (ly:music-property m 'tweaks)
         (acons 'font-size 3
                (acons 'stencil (lambda (grob)
                                  (grob-interpret-markup
                                   grob
                                   (make-draw-line-markup '(0 . 1))))
                       (ly:music-property m 'tweaks))))
   m)


\relative c' {
  a'4^\upline a( c d')_\upline
}
</pre><p>
 <a href="d7/lily-552d46f7.ly">
  <img align="middle"
       border="0"
       src="d7/lily-552d46f7.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="World-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#ancient-notation" title="Beginning of this chapter or previous chapter"> &lt;&lt; Ancient notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#contexts-and-engravers" title="Next chapter">&nbsp;Contexts and engravers &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#ancient-notation-vertical-line-as-a-baroque-articulation-mark" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation: Vertical line as a baroque articulation mark&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#world-music-arabic-improvisation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;World music: Arabic improvisation &gt; </a>]</td></tr></table>
<a name="world-music"></a>
<h1 class="unnumbered">World music</h1>

<a name="index-World-music"></a>
<p><a href="notation-big-page.html#world-music">World music</a>
</p>

<a name="arabic-improvisation.ly"></a>

<hr size="6">
<a name="World-music_003a-Arabic-improvisation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#world-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; World music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#contexts-and-engravers" title="Next chapter">&nbsp;Contexts and engravers &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#world-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; World music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#world-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;World music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#world-music-makam-example" title="Next section in reading order" accesskey="n" rel="next">&nbsp;World music: Makam example &gt; </a>]</td></tr></table>
<a name="world-music-arabic-improvisation"></a>
<h2 class="unnumberedsec">Arabic improvisation</h2>


<p>For improvisations or taqasim which are temporarily free, the time
signature can be omitted and <code>\cadenzaOn</code> can be used.  Adjusting
the accidental style might be required, since the absence of bar lines
will cause the accidental to be marked only once.  Here is an example
of what could be the start of a hijaz improvisation:
</p>

<pre class="verbatim">\include &quot;arabic.ly&quot;

\relative sol' {
  \key re \kurd
  \accidentalStyle forget
  \cadenzaOn
  sol4 sol sol sol fad mib sol1 fad8 mib re4. r8 mib1 fad sol
}
</pre><p>
 <a href="ea/lily-2afe5370.ly">
  <img align="middle"
       border="0"
       src="ea/lily-2afe5370.png"
       alt="[image of music]">
 </a>
</p>




<a name="makam-example.ly"></a>

<hr size="6">
<a name="World-music_003a-Makam-example"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#world-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; World music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#contexts-and-engravers" title="Next chapter">&nbsp;Contexts and engravers &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#world-music-arabic-improvisation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; World music: Arabic improvisation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#world-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;World music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#world-music-printing-text-from-right-to-left" title="Next section in reading order" accesskey="n" rel="next">&nbsp;World music: Printing text from right to left &gt; </a>]</td></tr></table>
<a name="world-music-makam-example"></a>
<h2 class="unnumberedsec">Makam example</h2>


<p>Makam is a type of melody from Turkey using 1/9th-tone microtonal
alterations. Consult the initialization file &lsquo;<samp>ly/makam.ly</samp>&rsquo; for
details of pitch names and alterations.
</p>

<pre class="verbatim">% Initialize makam settings
\include &quot;makam.ly&quot;

\relative c' {
  \set Staff.keyAlterations = #`((6 . ,(- KOMA)) (3 . ,BAKIYE))
  c4 cc db fk
  gbm4 gfc gfb efk
  fk4 db cc c
}
</pre><p>
 <a href="a9/lily-db98967e.ly">
  <img align="middle"
       border="0"
       src="a9/lily-db98967e.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-text-from-right-to-left.ly"></a>

<hr size="6">
<a name="World-music_003a-Printing-text-from-right-to-left"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#world-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; World music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#contexts-and-engravers" title="Next chapter">&nbsp;Contexts and engravers &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#world-music-makam-example" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; World music: Makam example&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#world-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;World music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers &gt; </a>]</td></tr></table>
<a name="world-music-printing-text-from-right-to-left"></a>
<h2 class="unnumberedsec">Printing text from right to left</h2>


<p>It is possible to print text from right to left in a markup object, as
demonstrated here.
</p>

<pre class="verbatim">{
  b1^\markup {
    \line { i n g i r u m i m u s n o c t e }
  }
  f'_\markup {
    \override #'(text-direction . -1)
    \line { i n g i r u m i m u s n o c t e }
  }
}
</pre><p>
 <a href="a0/lily-8111190c.ly">
  <img align="middle"
       border="0"
       src="a0/lily-8111190c.png"
       alt="[image of music]">
 </a>
</p>





<hr size="6">
<a name="Contexts-and-engravers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#world-music" title="Beginning of this chapter or previous chapter"> &lt;&lt; World music&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#world-music-printing-text-from-right-to-left" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; World music: Printing text from right to left&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-adding-a-figured-bass-above-or-below-the-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Adding a figured bass above or below the notes &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers"></a>
<h1 class="unnumbered">Contexts and engravers</h1>

<a name="index-Changing-defaults"></a>
<p><a href="notation-big-page.html#changing-defaults">Changing defaults</a>
</p>
<a name="index-Contexts-and-engravers"></a>
<p><a href="learning-big-page.html#contexts-and-engravers">Contexts and engravers</a>
</p>

<a name="adding-a-figured-bass-above-or-below-the-notes.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Adding-a-figured-bass-above-or-below-the-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-adding-an-extra-staff-at-a-line-break" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Adding an extra staff at a line break &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-adding-a-figured-bass-above-or-below-the-notes"></a>
<h2 class="unnumberedsec">Adding a figured bass above or below the notes</h2>


<p>When writing a figured bass, you can place the figures above or below
the bass notes, by defining the
<code>BassFigureAlignmentPositioning.direction</code> property (exclusively
in a <code>Staff</code> context). Choices are <code>#UP</code> (or <code>#1</code>),
<code>#CENTER</code> (or <code>#0</code>) and <code>#DOWN</code> (or <code>#-1</code>).
</p>
<p>This property can be changed as many times as you wish. Use
<code>\once \override</code> if you don&rsquo;t want the override to apply to the
whole score.
</p>

<pre class="verbatim">bass = {
  \clef bass
  g4 b, c d
  e d8 c d2
}

continuo = \figuremode {
  &lt;_&gt;4 &lt;6&gt;4 &lt;5/&gt;4
  \override Staff.BassFigureAlignmentPositioning.direction = #UP
  %\bassFigureStaffAlignmentUp
  &lt; _+ &gt;4 &lt;6&gt;
  \set Staff.useBassFigureExtenders = ##t
  \override Staff.BassFigureAlignmentPositioning.direction = #DOWN
  %\bassFigureStaffAlignmentDown
  &lt;4&gt;4. &lt;4&gt;8 &lt;_+&gt;4
}

\score {
  &lt;&lt;
    \new Staff = bassStaff \bass
    \context Staff = bassStaff \continuo
  &gt;&gt;
}
</pre><p>
 <a href="26/lily-6006274b.ly">
  <img align="middle"
       border="0"
       src="26/lily-6006274b.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-an-extra-staff-at-a-line-break.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Adding-an-extra-staff-at-a-line-break"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-adding-a-figured-bass-above-or-below-the-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Adding a figured bass above or below the notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-adding-an-extra-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Adding an extra staff &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-adding-an-extra-staff-at-a-line-break"></a>
<h2 class="unnumberedsec">Adding an extra staff at a line break</h2>


<p>When adding a new staff at a line break, some extra space is
unfortunately added at the end of the line before the break (to fit in
a key signature change, which  will never be printed anyway).  The
workaround is to add a setting of
<code>Staff.explicitKeySignatureVisibility</code> as is shown in the example.
</p>


<pre class="verbatim">\score {
  \new StaffGroup \relative c'' {
    \new Staff
    \key f \major
    c1 c^&quot;Unwanted extra space&quot; \break
    &lt;&lt; { c1 | c }
       \new Staff {
         \key f \major
         \once \omit Staff.TimeSignature
         c1 | c
       }
    &gt;&gt;
    c1 | c^&quot;Fixed here&quot; \break
    &lt;&lt; { c1 | c }
       \new Staff {
         \once \set Staff.explicitKeySignatureVisibility = #end-of-line-invisible
         \key f \major
         \once \omit Staff.TimeSignature
         c1 | c
       }
    &gt;&gt;
  }
}
</pre><p>
 <a href="13/lily-d74eece6.ly">
  <img align="middle"
       border="0"
       src="13/lily-d74eece6.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-an-extra-staff.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Adding-an-extra-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-adding-an-extra-staff-at-a-line-break" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Adding an extra staff at a line break&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Automatically changing the stem direction of the middle note based on the melody &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-adding-an-extra-staff"></a>
<h2 class="unnumberedsec">Adding an extra staff</h2>


<p>An extra staff can be added (possibly temporarily) after the start of a
piece.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \new Staff \relative c'' {
      c1 | c | c | c | c
    }
    \new StaffGroup \relative c'' {
      \new Staff {
        c1 | c
        &lt;&lt;
          {
            c1 | d
          }
          \new Staff {
            \once \omit Staff.TimeSignature
            c1 | b
          }
        &gt;&gt;
        c1
      }
    }
  &gt;&gt;
}
</pre><p>
 <a href="ef/lily-a9c7c944.ly">
  <img align="middle"
       border="0"
       src="ef/lily-a9c7c944.png"
       alt="[image of music]">
 </a>
</p>




<a name="automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-adding-an-extra-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Adding an extra staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-centered-measure-numbers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Centered measure numbers &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody"></a>
<h2 class="unnumberedsec">Automatically changing the stem direction of the middle note based on the melody</h2>


<p>LilyPond can alter the stem direction of the middle note on a staff so
that it follows the melody, by adding the <code>Melody_engraver</code> to the
Voice context and overriding the <code>neutral-direction</code> of Stem.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  a8 b g f b g |
  c  b d c b c |
}

\layout {
  \context {
    \Voice
    \consists &quot;Melody_engraver&quot;
    \autoBeamOff
    \override Stem.neutral-direction = #'()
  }
}
</pre><p>
 <a href="bf/lily-e8fb50cf.ly">
  <img align="middle"
       border="0"
       src="bf/lily-e8fb50cf.png"
       alt="[image of music]">
 </a>
</p>




<a name="centered-measure-numbers.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Centered-measure-numbers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Automatically changing the stem direction of the middle note based on the melody&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-changing-midi-output-to-one-channel-per-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Changing MIDI output to one channel per voice &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-centered-measure-numbers"></a>
<h2 class="unnumberedsec">Centered measure numbers</h2>


<p>Scores of large ensemble works often have bar numbers placed beneath
the system, centered horizontally on the measure&rsquo;s extent.  This
snippet shows how the <code>Measure_counter_engraver</code> may be used to
simulate this notational practice.  Here, the engraver has been added
to a <code>Dynamics</code> context.
</p>

<pre class="verbatim">\layout {
  \context {
    \Dynamics
    \consists #Measure_counter_engraver
    \override MeasureCounter.direction = #DOWN
    \override MeasureCounter.font-encoding = #'latin1
    \override MeasureCounter.font-shape = #'italic
    % to control the distance of the Dynamics context from the staff:
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing.padding = #2
  }
  \context {
    \Score
    \remove &quot;Bar_number_engraver&quot;
  }
}

pattern = \repeat unfold 7 { c'4 d' e' f' }

\new StaffGroup &lt;&lt;
  \new Staff {
    \pattern
  }
  \new Staff {
    \pattern
  }
  \new Dynamics {
    \startMeasureCount
    s1*7
    \stopMeasureCount
  }
&gt;&gt;
</pre><p>
 <a href="29/lily-42d43b25.ly">
  <img align="middle"
       border="0"
       src="29/lily-42d43b25.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-midi-output-to-one-channel-per-voice.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Changing-MIDI-output-to-one-channel-per-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-centered-measure-numbers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Centered measure numbers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Changing time signatures inside a polymetric section using \scaleDurations &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-changing-midi-output-to-one-channel-per-voice"></a>
<h2 class="unnumberedsec">Changing MIDI output to one channel per voice</h2>


<p>When outputting MIDI, the default behavior is for each staff to
represent one MIDI channel, with all the voices on a staff amalgamated.
This minimizes the risk of running out of MIDI channels, since there
are only 16 available per track.
</p>
<p>However, by moving the <code>Staff_performer</code> to the <code>Voice</code>
context, each voice on a staff can have its own MIDI channel, as is
demonstrated by the following example: despite being on the same staff,
two MIDI channels are created, each with a different
<code>midiInstrument</code>.
</p>

<pre class="verbatim">\score {
  \new Staff &lt;&lt;
    \new Voice \relative c''' {
      \set midiInstrument = #&quot;flute&quot;
      \voiceOne
      \key g \major
      \time 2/2
      r2 g-&quot;Flute&quot; ~
      g fis ~
      fis4 g8 fis e2 ~
      e4 d8 cis d2
    }
    \new Voice \relative c'' {
      \set midiInstrument = #&quot;clarinet&quot;
      \voiceTwo
      b1-&quot;Clarinet&quot;
      a2. b8 a
      g2. fis8 e
      fis2 r
    }
  &gt;&gt;
  \layout { }
  \midi {
    \context {
      \Staff
      \remove &quot;Staff_performer&quot;
    }
    \context {
      \Voice
      \consists &quot;Staff_performer&quot;
    }
    \tempo 2 = 72
  }
}
</pre><p>
 <a href="70/lily-f5189f37.ly">
  <img align="middle"
       border="0"
       src="70/lily-f5189f37.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-time-signatures-inside-a-polymetric-section-using--scaledurations.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Changing-time-signatures-inside-a-polymetric-section-using-_005cscaleDurations"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-changing-midi-output-to-one-channel-per-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Changing MIDI output to one channel per voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-chant-or-psalms-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Chant or psalms notation &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations"></a>
<h2 class="unnumberedsec">Changing time signatures inside a polymetric section using \scaleDurations</h2>


<p>The <code>measureLength</code> property, together with
<code>measurePosition</code>, determines when a bar line is needed.  However,
when using <code>\scaleDurations</code>, the scaling of durations makes it
difficult to change time signatures.  In this case,
<code>measureLength</code> should be set manually, using the
<code>ly:make-moment</code> callback.  The second argument must be the same
as the second argument of <code>\scaleDurations</code>.
</p>

<pre class="verbatim">\layout {
  \context {
    \Score
    \remove &quot;Timing_translator&quot;
    \remove &quot;Default_bar_line_engraver&quot;
  }
  \context {
    \Staff
    \consists &quot;Timing_translator&quot;
    \consists &quot;Default_bar_line_engraver&quot;
  }
}

&lt;&lt;
  \new Staff {
    \scaleDurations 8/5 {
      \time 6/8
      \set Timing.measureLength = #(ly:make-moment 6/5)
      b8 b b b b b
      \time 2/4
      \set Timing.measureLength = #(ly:make-moment 4/5)
      b4 b
    }
  }
  \new Staff {
    \clef bass
    \time 2/4
    c2 d e f
  }
&gt;&gt;
</pre><p>
 <a href="96/lily-f94ae815.ly">
  <img align="middle"
       border="0"
       src="96/lily-f94ae815.png"
       alt="[image of music]">
 </a>
</p>




<a name="chant-or-psalms-notation.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Chant-or-psalms-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Changing time signatures inside a polymetric section using \scaleDurations&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-creating-blank-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Creating blank staves &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-chant-or-psalms-notation"></a>
<h2 class="unnumberedsec">Chant or psalms notation</h2>


<p>This form of notation is used for Psalm chant, where verses aren&rsquo;t
always the same length.
</p>

<pre class="verbatim">stemOff = \hide Staff.Stem
stemOn  = \undo \stemOff

\score {
  \new Staff \with { \remove &quot;Time_signature_engraver&quot; }
  {
    \key g \minor
    \cadenzaOn
    \stemOff a'\breve bes'4 g'4
    \stemOn a'2 \bar &quot;||&quot;
    \stemOff a'\breve g'4 a'4
    \stemOn f'2 \bar &quot;||&quot;
    \stemOff a'\breve^\markup { \italic flexe }
    \stemOn g'2 \bar &quot;||&quot;
  }
}
</pre><p>
 <a href="6c/lily-0d850cf4.ly">
  <img align="middle"
       border="0"
       src="6c/lily-0d850cf4.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-blank-staves.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Creating-blank-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-chant-or-psalms-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Chant or psalms notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-creating-custom-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Creating custom key signatures &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-creating-blank-staves"></a>
<h2 class="unnumberedsec">Creating blank staves</h2>


<p>To create blank staves, generate empty measures then remove the
<code>Bar_number_engraver</code> from the <code>Score</code> context, and the
<code>Time_signature_engraver</code>, <code>Clef_engraver</code> and
<code>Bar_engraver</code> from the <code>Staff</code> context.
</p>

<pre class="verbatim">#(set-global-staff-size 20)

\score {
  {
    \repeat unfold 12 { s1 \break }
  }
  \layout {
    indent = 0\in
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Clef_engraver&quot;
      \remove &quot;Bar_engraver&quot;
    }
    \context {
      \Score
      \remove &quot;Bar_number_engraver&quot;
    }
  }
}

% uncomment these lines for &quot;letter&quot; size
%{
\paper {
  #(set-paper-size &quot;letter&quot;)
  ragged-last-bottom = ##f
  line-width = 7.5\in
  left-margin = 0.5\in
  bottom-margin = 0.25\in
  top-margin = 0.25\in
}
%}

% uncomment these lines for &quot;A4&quot; size
%{
\paper {
  #(set-paper-size &quot;a4&quot;)
  ragged-last-bottom = ##f
  line-width = 180
  left-margin = 15
  bottom-margin = 10
  top-margin = 10
}
%}
</pre><p>
 <a href="85/lily-d5d70a45.ly">
  <img align="middle"
       border="0"
       src="85/lily-d5d70a45.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-custom-key-signatures.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Creating-custom-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-creating-blank-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Creating blank staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-cross-staff-stems" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Cross staff stems &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-creating-custom-key-signatures"></a>
<h2 class="unnumberedsec">Creating custom key signatures</h2>


<p>LilyPond supports custom key signatures.  In this example, print for D
minor with an extended range of printed flats.
</p>

<pre class="verbatim">\new Staff \with {
  \override StaffSymbol.line-count = #8
  \override KeySignature.flat-positions = #'((-7 . 6))
  \override KeyCancellation.flat-positions = #'((-7 . 6))
  % presumably sharps are also printed in both octaves
  \override KeySignature.sharp-positions = #'((-6 . 7))
  \override KeyCancellation.sharp-positions = #'((-6 . 7))

  \override Clef.stencil = #
  (lambda (grob)(grob-interpret-markup grob
  #{ \markup\combine
    \musicglyph #&quot;clefs.C&quot;
    \translate #'(-3 . -2)
    \musicglyph #&quot;clefs.F&quot;
   #}))
    clefPosition = #3
    middleCPosition = #3
    middleCClefPosition = #3
}

{
  \key d\minor
  f bes, f bes,
}
</pre><p>
 <a href="e7/lily-35b90923.ly">
  <img align="middle"
       border="0"
       src="e7/lily-35b90923.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-stems.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Cross-staff-stems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-creating-custom-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Creating custom key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-defining-an-engraver-in-scheme_003a-ambitus-engraver" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Defining an engraver in Scheme: ambitus engraver &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-cross-staff-stems"></a>
<h2 class="unnumberedsec">Cross staff stems</h2>


<p>This snippet shows the use of the <code>Span_stem_engraver</code> and
<code>\crossStaff</code> to connect stems across staves automatically.
</p>
<p>The stem length need not be specified, as the variable distance between
noteheads and staves is calculated automatically.
</p>

<pre class="verbatim">\layout {
  \context {
    \PianoStaff
    \consists #Span_stem_engraver
  }
}

{
  \new PianoStaff &lt;&lt;
    \new Staff {
      &lt;b d'&gt;4 r d'16\&gt; e'8. g8 r\!
      e'8 f' g'4 e'2
    }
    \new Staff {
      \clef bass
      \voiceOne
      \autoBeamOff
      \crossStaff { &lt;e g&gt;4 e, g16 a8. c8} d
      \autoBeamOn
      g8 f g4 c2
    }
  &gt;&gt;
}
</pre><p>
 <a href="f6/lily-cc31242f.ly">
  <img align="middle"
       border="0"
       src="f6/lily-cc31242f.png"
       alt="[image of music]">
 </a>
</p>




<a name="defining-an-engraver-in-scheme--ambitus-engraver.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Defining-an-engraver-in-Scheme_003a-ambitus-engraver"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-cross-staff-stems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Cross staff stems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-displaying-a-whole-grandstaff-system-if-only-one-of-its-staves-is-alive" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Displaying a whole GrandStaff system if only one of its staves is alive &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-defining-an-engraver-in-scheme_003a-ambitus-engraver"></a>
<h2 class="unnumberedsec">Defining an engraver in Scheme: ambitus engraver</h2>


<p>This example demonstrates how the ambitus engraver may be defined on
the user side, with a Scheme engraver.
</p>
<p>This is basically a rewrite in Scheme of the code from
<code>lily/ambitus-engraver.cc</code>.
</p>

<pre class="verbatim">#(use-modules (oop goops))

%%%
%%% Grob utilities
%%%
%%% These are literal rewrites of some C++ methods used by the ambitus engraver.

#(define (ly:separation-item::add-conditional-item grob grob-item)
   &quot;Add @var{grob-item} to the array of conditional elements of @var{grob}.
Rewrite of @code{Separation_item::add_conditional_item} from @file{lily/separation-item.cc}.&quot;
   (ly:pointer-group-interface::add-grob grob 'conditional-elements grob-item))

#(define (ly:accidental-placement::accidental-pitch accidental-grob)
   &quot;Get the pitch from the grob cause of @var{accidental-grob}.
Rewrite of @code{accidental_pitch} from @file{lily/accidental-placement.cc}.&quot;
   (ly:event-property (ly:grob-property (ly:grob-parent accidental-grob Y) 'cause)
                      'pitch))

#(define (ly:accidental-placement::add-accidental grob accidental-grob)
   &quot;Add @var{accidental-grob}, an @code{Accidental} grob, to the
list of the accidental grobs of @var{grob}, an @code{AccidentalPlacement}
grob.
Rewrite of @code{Accidental_placement::add_accidental} from @file{lily/accidental-placement.cc}.&quot;
   (let ((pitch (ly:accidental-placement::accidental-pitch accidental-grob)))
     (set! (ly:grob-parent accidental-grob X) grob)
     (let* ((accidentals (ly:grob-object grob 'accidental-grobs))
            (handle (assq (ly:pitch-notename pitch) accidentals))
            (entry (if handle (cdr handle) '())))
       (set! (ly:grob-object grob 'accidental-grobs)
             (assq-set! accidentals
                        (ly:pitch-notename pitch)
                        (cons accidental-grob entry))))))

%%%
%%% Ambitus data structure
%%%

%%% The &lt;ambitus&gt; class holds the various grobs that are created
%%% to print an ambitus:
%%% - ambitus-group: the grob that groups all the components of an ambitus
%%% (Ambitus grob);
%%% - ambitus-line: the vertical line between the upper and lower ambitus
%%% notes (AmbitusLine grob);
%%% - ambitus-up-note and ambitus-down-note: the note head and accidental
%%% for the lower and upper note of the ambitus (see &lt;ambitus-note&gt; class
%%% below).
%%% The other slots define the key and clef context of the engraver:
%%% - start-c0: position of middle c at the beginning of the piece.  It
%%% is used to place the ambitus notes according to their pitch;
%%% - start-key-sig: the key signature at the beginning of the piece.  It
%%% is used to determine if accidentals shall be printed next to ambitus
%%% notes.

#(define-class &lt;ambitus&gt; ()
   (ambitus-group #:accessor ambitus-group)
   (ambitus-line #:accessor ambitus-line)
   (ambitus-up-note #:getter ambitus-up-note
                    #:init-form (make &lt;ambitus-note&gt;))
   (ambitus-down-note #:getter ambitus-down-note
                      #:init-form (make &lt;ambitus-note&gt;))
   (start-c0 #:accessor ambitus-start-c0
             #:init-value #f)
   (start-key-sig #:accessor ambitus-start-key-sig
                  #:init-value '()))

%%% Accessor for the lower and upper note data of an ambitus
#(define-method (ambitus-note (ambitus &lt;ambitus&gt;) direction)
   &quot;If @var{direction} is @code{UP}, then return the upper ambitus note
of @var{ambitus}, otherwise return the lower ambitus note.&quot;
   (if (= direction UP)
       (ambitus-up-note ambitus)
       (ambitus-down-note ambitus)))

%%% The &lt;ambitus-note&gt; class holds the grobs that are specific to ambitus
%%% (lower and upper) notes:
%%% - head: an AmbitusNoteHead grob;
%%% - accidental: an AmbitusAccidental grob, to be possibly printed next
%%% to the ambitus note head.
%%% Moreover:
%%% - pitch is the absolute pitch of the note
%%% - cause is the note event that causes this ambitus note, i.e. the lower
%%% or upper note of the considered music sequence.

#(define-class &lt;ambitus-note&gt; ()
   (head #:accessor ambitus-note-head
         #:init-value #f)
   (accidental #:accessor ambitus-note-accidental
               #:init-value #f)
   (cause #:accessor ambitus-note-cause
          #:init-value #f)
   (pitch #:accessor ambitus-note-pitch
          #:init-value #f))

%%%
%%% Ambitus engraving logics
%%%
%%% Rewrite of the code from @file{lily/ambitus-engraver.cc}.

#(define (make-ambitus translator)
   &quot;Build an ambitus object: initialize all the grobs and their relations.

The Ambitus grob contain all other grobs:
 Ambitus
  |- AmbitusLine
  |- AmbitusNoteHead   for upper note
  |- AmbitusAccidental for upper note
  |- AmbitusNoteHead   for lower note
  |- AmbitusAccidental for lower note

The parent of an accidental is the corresponding note head,
and the accidental is set as the 'accidental-grob of the note head
so that is printed by the function that prints notes.&quot;
   ;; make the ambitus object
   (let ((ambitus (make &lt;ambitus&gt;)))
     ;; build the Ambitus grob, which will contain all other grobs
     (set! (ambitus-group ambitus) (ly:engraver-make-grob translator 'Ambitus '()))
     ;; build the AmbitusLine grob (line between lower and upper note)
     (set! (ambitus-line ambitus) (ly:engraver-make-grob translator 'AmbitusLine '()))
     ;; build the upper and lower AmbitusNoteHead and AmbitusAccidental
     (for-each (lambda (direction)
                 (let ((head (ly:engraver-make-grob translator 'AmbitusNoteHead '()))
                       (accidental (ly:engraver-make-grob translator 'AmbitusAccidental '()))
                       (group (ambitus-group ambitus)))
                   ;; The parent of the AmbitusAccidental grob is the
                   ;; AmbitusNoteHead grob
                   (set! (ly:grob-parent accidental Y) head)
                   ;; The AmbitusAccidental grob is set as the accidental-grob
                   ;; object of the AmbitusNoteHead.  This is later used by the
                   ;; function that prints notes.
                   (set! (ly:grob-object head 'accidental-grob) accidental)
                   ;; both the note head and the accidental grobs are added
                   ;; to the main ambitus grob.
                   (ly:axis-group-interface::add-element group head)
                   (ly:axis-group-interface::add-element group accidental)
                   ;; the note head and the accidental grobs are added to the
                   ;; ambitus object
                   (set! (ambitus-note-head (ambitus-note ambitus direction))
                         head)
                   (set! (ambitus-note-accidental (ambitus-note ambitus direction))
                         accidental)))
               (list DOWN UP))
     ;; The parent of the ambitus line is the lower ambitus note head
     (set! (ly:grob-parent (ambitus-line ambitus) X)
           (ambitus-note-head (ambitus-note ambitus DOWN)))
     ;; the ambitus line is added to the ambitus main grob
     (ly:axis-group-interface::add-element (ambitus-group ambitus) (ambitus-line ambitus))
     ambitus))

#(define-method (initialize-ambitus-state (ambitus &lt;ambitus&gt;) translator)
   &quot;Initialize the state of @var{ambitus}, by getting the starting
position of middle C and key signature from @var{translator}'s context.&quot;
   (if (not (ambitus-start-c0 ambitus))
       (begin
         (set! (ambitus-start-c0 ambitus)
               (ly:context-property (ly:translator-context translator)
                                    'middleCPosition
                                    0))
         (set! (ambitus-start-key-sig ambitus)
               (ly:context-property (ly:translator-context translator)
                                    'keyAlterations)))))

#(define-method (update-ambitus-notes (ambitus &lt;ambitus&gt;) note-grob)
   &quot;Update the upper and lower ambitus pithes of @var{ambitus}, using
@var{note-grob}.&quot;
   ;; Get the event that caused the note-grob creation
   ;; and check that it is a note-event.
   (let ((note-event (ly:grob-property note-grob 'cause)))
     (if (ly:in-event-class? note-event 'note-event)
         ;; get the pitch from the note event
         (let ((pitch (ly:event-property note-event 'pitch)))
           ;; if this pitch is lower than the current ambitus lower
           ;; note pitch (or it has not been initialized yet),
           ;; then this pitch is the new ambitus lower pitch,
           ;; and conversely for upper pitch.
           (for-each (lambda (direction pitch-compare)
                       (if (or (not (ambitus-note-pitch (ambitus-note ambitus direction)))
                               (pitch-compare pitch
                                              (ambitus-note-pitch (ambitus-note ambitus direction))))
                           (begin
                             (set! (ambitus-note-pitch (ambitus-note ambitus direction))
                                   pitch)
                             (set! (ambitus-note-cause (ambitus-note ambitus direction))
                                   note-event))))
                     (list DOWN UP)
                     (list ly:pitch&lt;? (lambda (p1 p2)
                                        (ly:pitch&lt;? p2 p1))))))))

#(define-method (typeset-ambitus (ambitus &lt;ambitus&gt;) translator)
   &quot;Typeset the ambitus:
- place the lower and upper ambitus notes according to their pitch and
  the position of the middle C;
- typeset or delete the note accidentals, according to the key signature.
  An accidental, if it is to be printed, is added to an AccidentalPlacement
  grob (a grob dedicated to the placement of accidentals near a chord);
- both note heads are added to the ambitus line grob, so that a line should
  be printed between them.&quot;
   ;; check if there are lower and upper pitches
   (if (and (ambitus-note-pitch (ambitus-note ambitus UP))
            (ambitus-note-pitch (ambitus-note ambitus DOWN)))
       ;; make an AccidentalPlacement grob, for placement of note accidentals
       (let ((accidental-placement (ly:engraver-make-grob
                                    translator
                                    'AccidentalPlacement
                                    (ambitus-note-accidental (ambitus-note ambitus DOWN)))))
         ;; For lower and upper ambitus notes:
         (for-each (lambda (direction)
                     (let ((pitch (ambitus-note-pitch (ambitus-note ambitus direction))))
                       ;; set the cause and the staff position of the ambitus note
                       ;; according to the associated pitch
                       (set! (ly:grob-property (ambitus-note-head (ambitus-note ambitus direction))
                                               'cause)
                             (ambitus-note-cause (ambitus-note ambitus direction)))
                       (set! (ly:grob-property (ambitus-note-head (ambitus-note ambitus direction))
                                               'staff-position)
                             (+ (ambitus-start-c0 ambitus)
                                (ly:pitch-steps pitch)))
                       ;; determine if an accidental shall be printed for this note,
                       ;; according to the key signature
                       (let* ((handle (or (assoc (cons (ly:pitch-octave pitch)
                                                       (ly:pitch-notename pitch))
                                                 (ambitus-start-key-sig ambitus))
                                          (assoc (ly:pitch-notename pitch)
                                                 (ambitus-start-key-sig ambitus))))
                              (sig-alter (if handle (cdr handle) 0)))
                         (cond ((= (ly:pitch-alteration pitch) sig-alter)
                                ;; the note alteration is in the key signature
                                ;; =&gt; it does not have to be printed
                                (ly:grob-suicide!
                                 (ambitus-note-accidental (ambitus-note ambitus direction)))
                                (set! (ly:grob-object (ambitus-note-head (ambitus-note ambitus direction))
                                                      'accidental-grob)
                                      '()))
                               (else
                                ;; otherwise, the accidental shall be printed
                                (set! (ly:grob-property (ambitus-note-accidental
                                                         (ambitus-note ambitus direction))
                                                        'alteration)
                                      (ly:pitch-alteration pitch)))))
                       ;; add the AccidentalPlacement grob to the
                       ;; conditional items of the AmbitusNoteHead
                       (ly:separation-item::add-conditional-item
                        (ambitus-note-head (ambitus-note ambitus direction))
                        accidental-placement)
                       ;; add the AmbitusAccidental to the list of the
                       ;; AccidentalPlacement grob accidentals
                       (ly:accidental-placement::add-accidental
                        accidental-placement
                        (ambitus-note-accidental (ambitus-note ambitus direction)))
                       ;; add the AmbitusNoteHead grob to the AmbitusLine grob
                       (ly:pointer-group-interface::add-grob
                        (ambitus-line ambitus)
                        'note-heads
                        (ambitus-note-head (ambitus-note ambitus direction)))))
                   (list DOWN UP))
         ;; add the AccidentalPlacement grob to the main Ambitus grob
         (ly:axis-group-interface::add-element (ambitus-group ambitus) accidental-placement))
       ;; no notes ==&gt; suicide the grobs
       (begin
         (for-each (lambda (direction)
                     (ly:grob-suicide! (ambitus-note-accidental (ambitus-note ambitus direction)))
                     (ly:grob-suicide! (ambitus-note-head (ambitus-note ambitus direction))))
                   (list DOWN UP))
         (ly:grob-suicide! ambitus-line))))

%%%
%%% Ambitus engraver definition
%%%
#(define ambitus-engraver
   (lambda (context)
     (let ((ambitus #f))
       ;; when music is processed: make the ambitus object, if not already built
       (make-engraver
    ((process-music translator)
     (if (not ambitus)
         (set! ambitus (make-ambitus translator))))
    ;; set the ambitus clef and key signature state
    ((stop-translation-timestep translator)
     (if ambitus
         (initialize-ambitus-state ambitus translator)))
    ;; when a note-head grob is built, update the ambitus notes
    (acknowledgers
          ((note-head-interface engraver grob source-engraver)
       (if ambitus
           (update-ambitus-notes ambitus grob))))
    ;; finally, typeset the ambitus according to its upper and lower notes
    ;; (if any).
    ((finalize translator)
     (if ambitus
         (typeset-ambitus ambitus translator)))))))

%%%
%%% Example
%%%

\score {
  \new StaffGroup &lt;&lt;
    \new Staff { c'4 des' e' fis' gis' }
    \new Staff { \clef &quot;bass&quot; c4 des ~ des ees b, }
  &gt;&gt;
  \layout { \context { \Staff \consists #ambitus-engraver } }
}
</pre><p>
 <a href="d7/lily-cebe02e7.ly">
  <img align="middle"
       border="0"
       src="d7/lily-cebe02e7.png"
       alt="[image of music]">
 </a>
</p>




<a name="displaying-a-whole-grandstaff-system-if-only-one-of-its-staves-is-alive.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Displaying-a-whole-GrandStaff-system-if-only-one-of-its-staves-is-alive"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-defining-an-engraver-in-scheme_003a-ambitus-engraver" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Defining an engraver in Scheme: ambitus engraver&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-engravers-one_002dby_002done" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Engravers one-by-one &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-displaying-a-whole-grandstaff-system-if-only-one-of-its-staves-is-alive"></a>
<h2 class="unnumberedsec">Displaying a whole GrandStaff system if only one of its staves is alive</h2>


<p>In orchestral scores sometimes single or groups of instruments are
silent for a while and their staves can be removed for that time (with
<code>\removeEmptyStaves</code>).
</p>

<p>When they play again it is often preferred to show the staves of all
instruments of such a group. this can be done adding the
<code>Keep_alive_together_engraver</code> in the grouper (e.g. a GrandStaff
or a StaffGroup)
</p>

<p>In the example the violins are silent in the 2nd system and in the 3rd
system. Only the first violin plays the last measure but the staff of
the second violin is also displayed.
</p>

<pre class="verbatim">\score {
  &lt;&lt;
    \new StaffGroup = &quot;StaffGroup_woodwinds&quot;
    &lt;&lt;
      \new Staff = &quot;Staff_flute&quot; \with {
        instrumentName = &quot;Flute&quot;
        shortInstrumentName = &quot;Fl&quot;
      }
      \relative c' {
        \repeat unfold 3 { c'4 c c c | c c c c | c c c c | \break }
      }
    &gt;&gt;
    \new StaffGroup = &quot;StaffGroup_Strings&quot;
    &lt;&lt;
      \new GrandStaff = &quot;GrandStaff_violins&quot;
      &lt;&lt;
        \new Staff = &quot;StaffViolinI&quot; \with {
          instrumentName = &quot;Violin I&quot;
          shortInstrumentName = &quot;Vi I&quot;
        }
        \relative c'' {
          a1 \repeat unfold 7 { s1 } \repeat unfold 12 a16  a4
        }
        \new Staff = &quot;StaffViolinII&quot; \with {
          instrumentName = &quot;Violin II&quot;
          shortInstrumentName = &quot;Vi II&quot;
        }
        \relative c' { e1 \repeat unfold 8 { s1 } }
      &gt;&gt;
      \new Staff = &quot;Staff_cello&quot; \with {
        instrumentName = &quot;Cello&quot;
        shortInstrumentName = &quot;Ce&quot;
      }
      \relative c { \clef bass \repeat unfold 9 { c1 }}
    &gt;&gt;
  &gt;&gt;
}
\layout {
  indent = 3.0\cm
  short-indent = 1.5\cm
  \context {
    \GrandStaff
    \consists Keep_alive_together_engraver
  }
  \context {
    \Staff
    \RemoveEmptyStaves
  }
}
</pre><p>
 <a href="d3/lily-26d03d42.ly">
  <img align="middle"
       border="0"
       src="d3/lily-26d03d42.png"
       alt="[image of music]">
 </a>
</p>




<a name="engravers-one-by-one.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Engravers-one_002dby_002done"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-displaying-a-whole-grandstaff-system-if-only-one-of-its-staves-is-alive" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Displaying a whole GrandStaff system if only one of its staves is alive&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Mensurstriche layout (bar lines between the staves) &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-engravers-one_002dby_002done"></a>
<h2 class="unnumberedsec">Engravers one-by-one</h2>


<p>The notation problem, creating a certain symbol, is handled by plugins.
 Each plugin is called an Engraver. In this example, engravers are
switched on one by one, in the following order:
</p>
<p>- note heads,
</p>

<p>- staff symbol,
</p>

<p>- clef,
</p>

<p>- stem,
</p>

<p>- beams, slurs, accents,
</p>

<p>- accidentals, bar lines, time signature and key signature.
</p>


<p>Engravers are grouped. For example, note heads, slurs, beams etc. form
a <code>Voice</code> context. Engravers for key signature, accidentals, bar
line, etc. form a <code>Staff</code> context.
</p>

<pre class="verbatim">%% sample music
topVoice = \relative c' {
  \key d \major
  es8([ g] a[ fis])
  b4
  b16[-. b-. b-. cis-.]
  d4-&gt;
}

botVoice = \relative c' {
  \key d \major
  c8[( f] b[ a)]
  es4
  es16[-. es-. es-. fis-.]
  b4-&gt;
}

hoom = \relative c {
  \key d \major
  \clef bass
  g8-. r
  r4
  fis8-.
  r8
  r4
  b'4-&gt;
}

pah = \relative c' {
  r8 b-.
  r4
  r8 g8-.
  r16 g-. r8
  \clef treble
  fis'4-&gt;
}

%
% setup for Request-&gt;Element conversion. Guru-only
%

MyStaff = \context {
  \type &quot;Engraver_group&quot;
  \name Staff

  \description &quot;Handles clefs, bar lines, keys, accidentals.  It can contain
@code{Voice} contexts.&quot;

  \consists &quot;Font_size_engraver&quot;

  \consists &quot;Volta_engraver&quot;
  \consists &quot;Separating_line_group_engraver&quot;
  \consists &quot;Dot_column_engraver&quot;

  \consists &quot;Ottava_spanner_engraver&quot;
  \consists &quot;Rest_collision_engraver&quot;
  \consists &quot;Piano_pedal_engraver&quot;
  \consists &quot;Piano_pedal_align_engraver&quot;
  \consists &quot;Instrument_name_engraver&quot;
  \consists &quot;Grob_pq_engraver&quot;
  \consists &quot;Forbid_line_break_engraver&quot;
  \consists &quot;Axis_group_engraver&quot;

  \consists &quot;Pitch_squash_engraver&quot;

  localAlterations = #'()

  % explicitly set instrumentName, so we don't get
  % weird effects when doing instrument names for
  % piano staves

  instrumentName = #'()
  shortInstrumentName = #'()

  \accepts &quot;Voice&quot;
  \defaultchild &quot;Voice&quot;
}


MyVoice = \context {
  \type &quot;Engraver_group&quot;
  \name Voice

  \description &quot;
    Corresponds to a voice on a staff.  This context handles the
    conversion of dynamic signs, stems, beams, super- and subscripts,
    slurs, ties, and rests.

    You have to instantiate this explicitly if you want to have
    multiple voices on the same staff.&quot;

  localAlterations = #'()
  \consists &quot;Font_size_engraver&quot;

  % must come before all
  \consists &quot;Arpeggio_engraver&quot;
  \consists &quot;Multi_measure_rest_engraver&quot;
  \consists &quot;Text_spanner_engraver&quot;
  \consists &quot;Grob_pq_engraver&quot;
  \consists &quot;Note_head_line_engraver&quot;
  \consists &quot;Glissando_engraver&quot;
  \consists &quot;Ligature_bracket_engraver&quot;
  \consists &quot;Breathing_sign_engraver&quot;
  % \consists &quot;Rest_engraver&quot;
  \consists &quot;Grace_beam_engraver&quot;
  \consists &quot;New_fingering_engraver&quot;
  \consists &quot;Chord_tremolo_engraver&quot;
  \consists &quot;Percent_repeat_engraver&quot;
  \consists &quot;Slash_repeat_engraver&quot;

  %{
    Must come before text_engraver, but after note_column engraver.
  %}
  \consists &quot;Text_engraver&quot;
  \consists &quot;Dynamic_engraver&quot;
  \consists &quot;Dynamic_align_engraver&quot;
  \consists &quot;Fingering_engraver&quot;

  \consists &quot;Script_column_engraver&quot;
  \consists &quot;Rhythmic_column_engraver&quot;
  \consists &quot;Cluster_spanner_engraver&quot;
  \consists &quot;Tie_engraver&quot;
  \consists &quot;Tie_engraver&quot;
  \consists &quot;Tuplet_engraver&quot;
  \consists &quot;Note_heads_engraver&quot;
  \consists &quot;Rest_engraver&quot;
}


\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}


MyStaff = \context {
  \MyStaff
  \consists &quot;Staff_symbol_engraver&quot;
}

\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}

MyStaff = \context {
  \MyStaff
  \consists &quot;Clef_engraver&quot;
  \remove &quot;Pitch_squash_engraver&quot;
}

\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}

MyVoice = \context {
  \MyVoice
  \consists &quot;Stem_engraver&quot;
}

\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}

MyVoice = \context {
  \MyVoice
  \consists &quot;Beam_engraver&quot;
}

\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}

MyVoice = \context {
  \MyVoice
  \consists &quot;Phrasing_slur_engraver&quot;
  \consists &quot;Slur_engraver&quot;
  \consists &quot;Script_engraver&quot;
}


\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}

MyStaff = \context {
  \MyStaff
  \consists &quot;Bar_engraver&quot;
  \consists &quot;Time_signature_engraver&quot;
}

\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}

MyStaff = \context {
  \MyStaff
  \consists &quot;Accidental_engraver&quot;
  \consists &quot;Key_engraver&quot;
}
\score {
  \topVoice
  \layout {
    \context { \MyStaff }
    \context { \MyVoice }
  }
}
</pre><p>
 <a href="7c/lily-53d35804.ly">
  <img align="middle"
       border="0"
       src="7c/lily-53d35804.png"
       alt="[image of music]">
 </a>
</p>




<a name="mensurstriche-layout-bar-lines-between-the-staves.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-engravers-one_002dby_002done" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Engravers one-by-one&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-nesting-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Nesting staves &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<h2 class="unnumberedsec">Mensurstriche layout (bar lines between the staves)</h2>


<p>The mensurstriche-layout where the bar lines do not show on the staves
but between staves can be achieved with a <code>StaffGroup</code> instead of
a <code>ChoirStaff</code>.  The bar line on staves is blanked out using
<code>\hide</code>.
</p>

<pre class="verbatim">global = {
  \hide Staff.BarLine
  s1 s
  % the final bar line is not interrupted
  \undo \hide Staff.BarLine
  \bar &quot;|.&quot;
}

\new StaffGroup \relative c'' {
  &lt;&lt;
    \new Staff { &lt;&lt; \global { c1 c } &gt;&gt; }
    \new Staff { &lt;&lt; \global { c c } &gt;&gt; }
  &gt;&gt;
}
</pre><p>
 <a href="a8/lily-6697829e.ly">
  <img align="middle"
       border="0"
       src="a8/lily-6697829e.png"
       alt="[image of music]">
 </a>
</p>




<a name="nesting-staves.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Nesting-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Mensurstriche layout (bar lines between the staves)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-numbering-groups-of-measures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Numbering groups of measures &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-nesting-staves"></a>
<h2 class="unnumberedsec">Nesting staves</h2>


<p>The property <code>systemStartDelimiterHierarchy</code> can be used to make
more complex nested staff groups. The command <code>\set
StaffGroup.systemStartDelimiterHierarchy</code> takes an alphabetical list of
the number of staves produced. Before each staff a system start
delimiter can be given. It has to be enclosed in brackets and takes as
much staves as the brackets enclose. Elements in the list can be
omitted, but the first bracket takes always the complete number of
staves. The possibilities are <code>SystemStartBar</code>,
<code>SystemStartBracket</code>, <code>SystemStartBrace</code>, and
<code>SystemStartSquare</code>.
</p>

<pre class="verbatim">\new StaffGroup
\relative c'' &lt;&lt;
  \set StaffGroup.systemStartDelimiterHierarchy
    = #'(SystemStartSquare (SystemStartBrace (SystemStartBracket a
                             (SystemStartSquare b)  ) c ) d)
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
&gt;&gt;
</pre><p>
 <a href="35/lily-565e641a.ly">
  <img align="middle"
       border="0"
       src="35/lily-565e641a.png"
       alt="[image of music]">
 </a>
</p>




<a name="numbering-groups-of-measures.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Numbering-groups-of-measures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-nesting-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Nesting staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-removing-bar-numbers-from-a-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Removing bar numbers from a score &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-numbering-groups-of-measures"></a>
<h2 class="unnumberedsec">Numbering groups of measures</h2>


<p>This snippet demonstrates the use of the
<code>Measure_counter_engraver</code> to number groups of successive
measures.  Any stretch of measures may be numbered, whether consisting
of repetitions or not.
</p>

<p>The engraver must be added to the appropriate context.  Here, a
<code>Staff</code> context is used; another possibility is a <code>Dynamics</code>
context.
</p>

<p>The counter is begun with <code>\startMeasureCount</code> and ended with
<code>\stopMeasureCount</code>.  Numbering will start by default with
<code>1</code>, but this behavior may be modified by overriding the
<code>count-from</code> property.
</p>

<p>When a measure extends across a line break, the number will appear
twice, the second time in parentheses.
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff
    \consists #Measure_counter_engraver
  }
}

\new Staff {
  \startMeasureCount
  \repeat unfold 7 {
    c'4 d' e' f'
  }
  \stopMeasureCount
  \bar &quot;||&quot;
  g'4 f' e' d'
  \override Staff.MeasureCounter.count-from = #2
  \startMeasureCount
  \repeat unfold 5 {
    g'4 f' e' d'
  }
  g'4 f'
  \bar &quot;&quot;
  \break
  e'4 d'
  \repeat unfold 7 {
    g'4 f' e' d'
  }
  \stopMeasureCount
}
</pre><p>
 <a href="a0/lily-b9cb1f5a.ly">
  <img align="middle"
       border="0"
       src="a0/lily-b9cb1f5a.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-bar-numbers-from-a-score.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Removing-bar-numbers-from-a-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-numbering-groups-of-measures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Numbering groups of measures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-use-square-bracket-at-the-start-of-a-staff-group" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Use square bracket at the start of a staff group &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-removing-bar-numbers-from-a-score"></a>
<h2 class="unnumberedsec">Removing bar numbers from a score</h2>


<p>Bar numbers can be removed entirely by removing the
<code>Bar_number_engraver</code> from the <code>Score</code> context.
</p>

<pre class="verbatim">\layout {
  \context {
    \Score
    \omit BarNumber
    % or:
    %\remove &quot;Bar_number_engraver&quot;
  }
}

\relative c'' {
  c4 c c c \break
  c4 c c c
}
</pre><p>
 <a href="17/lily-62ad2844.ly">
  <img align="middle"
       border="0"
       src="17/lily-62ad2844.png"
       alt="[image of music]">
 </a>
</p>




<a name="use-square-bracket-at-the-start-of-a-staff-group.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Use-square-bracket-at-the-start-of-a-staff-group"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-removing-bar-numbers-from-a-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Removing bar numbers from a score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-using-marklines-in-a-frenched-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Using marklines in a Frenched score &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-use-square-bracket-at-the-start-of-a-staff-group"></a>
<h2 class="unnumberedsec">Use square bracket at the start of a staff group</h2>


<p>The system start delimiter <code>SystemStartSquare</code> can be used by
setting it explicitly in a <code>StaffGroup</code> or <code>ChoirStaff</code>
context.
</p>

<pre class="verbatim">\score {
  \new StaffGroup { &lt;&lt;
  \set StaffGroup.systemStartDelimiter = #'SystemStartSquare
    \new Staff { c'4 d' e' f' }
    \new Staff { c'4 d' e' f' }
  &gt;&gt; }
}
</pre><p>
 <a href="7d/lily-5a3fd2a9.ly">
  <img align="middle"
       border="0"
       src="7d/lily-5a3fd2a9.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-marklines-in-a-frenched-score.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Using-marklines-in-a-Frenched-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-use-square-bracket-at-the-start-of-a-staff-group" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Use square bracket at the start of a staff group&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Vocal ensemble template with lyrics aligned below and above the staves &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-using-marklines-in-a-frenched-score"></a>
<h2 class="unnumberedsec">Using marklines in a Frenched score</h2>


<p>Using <code>MarkLine</code> contexts (such as in
<a href="http://lsr.di.unimi.it/LSR/Item?id=1010">LSR1010</a>) in a
Frenched score can be problematic if all the staves between two
<code>MarkLine</code>s are removed in one system. The
<code>Keep_alive_together_engraver</code> can be used within each
<code>StaffGroup</code> to keep the <code>MarkLine</code> alive only as long
as the other staves in the group stay alive.
</p>
<pre class="verbatim">bars = {
  \tempo &quot;Allegro&quot; 4=120
  s1*2
  \repeat unfold 5 { \mark \default s1*2 }
  \bar &quot;||&quot;
  \tempo &quot;Adagio&quot; 4=40
  s1*2
  \repeat unfold 8 { \mark \default s1*2 }
  \bar &quot;|.&quot;
}
winds = \repeat unfold 120 { c''4 }
trumpet = { \repeat unfold 8 g'2 R1*16 \repeat unfold 4 g'2 R1*8 }
trombone = { \repeat unfold 4 c'1 R1*8 d'1 R1*17 }
strings = \repeat unfold 240 { c''8 }

#(set-global-staff-size 16)
\paper {
  systems-per-page = 5
  ragged-last-bottom = ##f
}

\layout {
  indent = 15\mm
  short-indent = 5\mm
  \context {
    \name MarkLine
    \type Engraver_group
    \consists Output_property_engraver
    \consists Axis_group_engraver
    \consists Mark_engraver
    \consists Metronome_mark_engraver
    \override VerticalAxisGroup.remove-empty = ##t
    \override VerticalAxisGroup.remove-layer = #'any
    \override VerticalAxisGroup.staff-affinity = #DOWN
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing.basic-distance = 1
    keepAliveInterfaces = #'()
  }
  \context {
    \Staff
    \override VerticalAxisGroup.remove-empty = ##t
    \override VerticalAxisGroup.remove-layer = ##f
  }
  \context {
    \StaffGroup
    \accepts MarkLine
    \consists Keep_alive_together_engraver
  }
  \context {
    \Score
    \remove Mark_engraver
    \remove Metronome_mark_engraver
  }
}

\score {
  &lt;&lt;
    \new StaffGroup = &quot;winds&quot; \with {
      instrumentName = &quot;Winds&quot;
      shortInstrumentName = &quot;Winds&quot;
    } &lt;&lt;
      \new MarkLine \bars
      \new Staff \winds
    &gt;&gt;
    \new StaffGroup = &quot;brass&quot; &lt;&lt;
      \new MarkLine \bars
      \new Staff = &quot;trumpet&quot; \with {
        instrumentName = &quot;Trumpet&quot;
        shortInstrumentName = &quot;Tpt&quot;
      } \trumpet
      \new Staff = &quot;trombone&quot; \with {
        instrumentName = &quot;Trombone&quot;
        shortInstrumentName = &quot;Tbn&quot;
      } \trombone
    &gt;&gt;
    \new StaffGroup = &quot;strings&quot; \with {
      instrumentName = &quot;Strings&quot;
      shortInstrumentName = &quot;Strings&quot;
    } &lt;&lt;
      \new MarkLine \bars
      \new Staff = &quot;strings&quot; { \strings }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="0c/lily-9a658998.ly">
  <img align="middle"
       border="0"
       src="0c/lily-9a658998.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-using-marklines-in-a-frenched-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Using marklines in a Frenched score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-and-engravers-vocal-ensemble-template-with-verse-and-refrain" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers: Vocal ensemble template with verse and refrain &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<h2 class="unnumberedsec">Vocal ensemble template with lyrics aligned below and above the staves</h2>


<p>This template is basically the same as the simple &ldquo;Vocal ensemble&rdquo;
template, with the exception that here all the lyrics lines are placed
using <code>alignAboveContext</code> and <code>alignBelowContext</code>.
</p>

<pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff = &quot;women&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
      \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;women&quot; }
      \lyricsto &quot;sopranos&quot; \sopWords
    \new Lyrics \with { alignBelowContext = #&quot;women&quot; }
      \lyricsto &quot;altos&quot; \altoWords
    % we could remove the line about this with the line below, since
    % we want the alto lyrics to be below the alto Voice anyway.
    % \new Lyrics \lyricsto &quot;altos&quot; \altoWords

    \new Staff = &quot;men&quot; &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
      \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;men&quot; }
      \lyricsto &quot;tenors&quot; \tenorWords
    \new Lyrics \with { alignBelowContext = #&quot;men&quot; }
      \lyricsto &quot;basses&quot; \bassWords
    % again, we could replace the line above this with the line below.
    % \new Lyrics \lyricsto &quot;basses&quot; \bassWords
  &gt;&gt;
}
</pre><p>
 <a href="8b/lily-01f33d94.ly">
  <img align="middle"
       border="0"
       src="8b/lily-01f33d94.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-verse-and-refrain.ly"></a>

<hr size="6">
<a name="Contexts-and-engravers_003a-Vocal-ensemble-template-with-verse-and-refrain"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#tweaks-and-overrides" title="Next chapter">&nbsp;Tweaks and overrides &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Vocal ensemble template with lyrics aligned below and above the staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides &gt; </a>]</td></tr></table>
<a name="contexts-and-engravers-vocal-ensemble-template-with-verse-and-refrain"></a>
<h2 class="unnumberedsec">Vocal ensemble template with verse and refrain</h2>


<p>This template creates a score which starts with a solo verse and
continues into a refrain for two voices.  It also demonstrates the use
of spacer rests within the <code>\global</code> variable to define meter
changes (and other elements common to all parts) throughout the entire
score.
</p>

<pre class="verbatim">global = {
  \key g \major

  % verse
  \time 3/4
  s2.*2
  \break

  % refrain
  \time 2/4
  s2*2
  \bar &quot;|.&quot;
}

SoloNotes = \relative g' {
  \clef &quot;treble&quot;

  % verse
  g4 g g |
  b4 b b |

  % refrain
  R2*2 |
}

SoloLyrics = \lyricmode {
  One two three |
  four five six |
}

SopranoNotes = \relative c'' {
  \clef &quot;treble&quot;

  % verse
  R2.*2 |

  % refrain
  c4 c |
  g4 g |
}

SopranoLyrics = \lyricmode {
  la la |
  la la |
}

BassNotes = \relative c {
  \clef &quot;bass&quot;

  % verse
  R2.*2 |

  % refrain
  c4 e |
  d4 d |
}

BassLyrics = \lyricmode {
  dum dum |
  dum dum |
}

\score {
  &lt;&lt;
    \new Voice = &quot;SoloVoice&quot; &lt;&lt; \global \SoloNotes &gt;&gt;
    \new Lyrics \lyricsto &quot;SoloVoice&quot; \SoloLyrics

    \new ChoirStaff &lt;&lt;
      \new Voice = &quot;SopranoVoice&quot; &lt;&lt; \global \SopranoNotes &gt;&gt;
      \new Lyrics \lyricsto &quot;SopranoVoice&quot; \SopranoLyrics

      \new Voice = &quot;BassVoice&quot; &lt;&lt; \global \BassNotes &gt;&gt;
      \new Lyrics \lyricsto &quot;BassVoice&quot; \BassLyrics
    &gt;&gt;
  &gt;&gt;
  \layout {
    ragged-right = ##t
    \context { \Staff
      % these lines prevent empty staves from being printed
      \RemoveEmptyStaves
      \override VerticalAxisGroup.remove-first = ##t
    }
  }
}
</pre><p>
 <a href="80/lily-f3131e82.ly">
  <img align="middle"
       border="0"
       src="80/lily-f3131e82.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Tweaks-and-overrides"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#contexts-and-engravers" title="Beginning of this chapter or previous chapter"> &lt;&lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-and-engravers-vocal-ensemble-template-with-verse-and-refrain" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers: Vocal ensemble template with verse and refrain&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-adding-an-ottava-marking-to-a-single-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Adding an ottava marking to a single voice &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides"></a>
<h1 class="unnumbered">Tweaks and overrides</h1>

<a name="index-Changing-defaults-1"></a>
<p><a href="notation-big-page.html#changing-defaults">Changing defaults</a>
</p>
<a name="index-Tweaking-output"></a>
<p><a href="learning-big-page.html#tweaking-output">Tweaking output</a>
</p>

<a name="adding-an-ottava-marking-to-a-single-voice.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Adding-an-ottava-marking-to-a-single-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-adding-links-to-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Adding links to objects &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-adding-an-ottava-marking-to-a-single-voice"></a>
<h2 class="unnumberedsec">Adding an ottava marking to a single voice</h2>


<p>If you have more than one voice on the staff, setting octavation in one
voice will transpose the position of notes in all voices for the
duration of the ottava bracket. If the ottavation is only intended to
apply to one voice, the middleCPosition and ottava bracket may be set
explicitly.  In this snippet, the bass clef usually has middleCPosition
set to 6, six positions above the center  line, so in the 8va portion
middleCPosition is 7 positions (one octave) higher still.
</p>

<pre class="verbatim">{
  \clef bass
  &lt;&lt; { &lt;g d'&gt;1~ q2 &lt;c' e'&gt; }
  \\
    {
      r2.
      \set Staff.ottavation = #&quot;8vb&quot;
      \once \override Staff.OttavaBracket.direction = #DOWN
      \set Voice.middleCPosition = #(+ 6 7)
      &lt;b,,, b,,&gt;4 ~ |
      q2
      \unset Staff.ottavation
      \unset Voice.middleCPosition
      &lt;c e&gt;2
    }
  &gt;&gt;
}
</pre><p>
 <a href="5c/lily-e5006f5e.ly">
  <img align="middle"
       border="0"
       src="5c/lily-e5006f5e.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-links-to-objects.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Adding-links-to-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-adding-an-ottava-marking-to-a-single-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Adding an ottava marking to a single voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-adding-markups-in-a-tablature" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Adding markups in a tablature &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-adding-links-to-objects"></a>
<h2 class="unnumberedsec">Adding links to objects</h2>


<p>To add a link to a grob-stencil you could use <code>add-link</code> as
defined here. Works with <code>\override</code> and <code>\tweak</code>.
Drawback: <code>point-and-click</code> will be disturbed for the linked grobs.
</p>
<p>Limitation: Works for PDF only.
</p>
<p>The linked objects are colored with a separate command.
</p>

<pre class="verbatim">#(define (add-link url-strg)
  (lambda (grob)
    (let* ((stil (ly:grob-property grob 'stencil)))
      (if (ly:stencil? stil)
        (begin
          (let* (
             (x-ext (ly:stencil-extent stil X))
             (y-ext (ly:stencil-extent stil Y))
             (url-expr (list 'url-link url-strg `(quote ,x-ext) `(quote ,y-ext)))
             (new-stil (ly:stencil-add
                 (ly:make-stencil url-expr x-ext y-ext) stil)))
          (ly:grob-set-property! grob 'stencil new-stil)))
        #f))))

%%%% test

urlI =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/writing-pitches&quot;

urlII =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/rhythms&quot;

urlIII =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/note-heads&quot;

urlIV =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/beams&quot;

urlV =
&quot;http://lilypond.org/doc/v2.14/Documentation/notation/note-head-styles&quot;

\relative c' {
  \key cis \minor

  \once \override Staff.Clef.color = #green
  \once \override Staff.Clef.after-line-breaking =
    #(add-link urlI)

  \once \override Staff.TimeSignature.color = #green
  \once \override Staff.TimeSignature.after-line-breaking =
    #(add-link urlII)

  \once \override NoteHead.color = #green
  \once \override NoteHead.after-line-breaking =
    #(add-link urlIII)

  cis'1
  \once \override Beam.color = #green
  \once \override Beam.after-line-breaking =
    #(add-link urlIV)
  cis8 dis e fis gis2
  &lt;gis,
   % With 2.17.9 you could use the command below to address the Accidental.
   % \tweak Accidental.before-line-breaking #(add-link url)
   \tweak color #green
   \tweak after-line-breaking #(add-link urlV)
   \tweak style #'harmonic
   bis
   dis
   fis
  &gt;1
  &lt;cis, cis' e&gt;
}
</pre><p>
 <a href="9b/lily-294ea220.ly">
  <img align="middle"
       border="0"
       src="9b/lily-294ea220.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-markups-in-a-tablature.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Adding-markups-in-a-tablature"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-adding-links-to-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Adding links to objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-adding-timing-marks-to-long-glissandi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Adding timing marks to long glissandi &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-adding-markups-in-a-tablature"></a>
<h2 class="unnumberedsec">Adding markups in a tablature</h2>


<p>By default markups does not show in a tablature. To make them appear,
simply use the command <code>\revert TabStaff.TextScript.stencil</code>
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=919
% by P.P.Schneider on June 2014

high  = { r4 r8 &lt;g c'&gt; q r8 r4 }

low = { c4 r4 c8 r8 g,8 b, }

pulse = { s8^&quot;1&quot; s^&quot;&amp;&quot; s^&quot;2&quot; s^&quot;&amp;&quot; s^&quot;3&quot; s^&quot;&amp;&quot; s^&quot;4&quot; s^&quot;&amp;&quot; }

\score {
 \new TabStaff {
   \repeat unfold 2 &lt;&lt; \high \\ \low \\ \pulse &gt;&gt;
  }
  \layout {
    \context {
      \TabStaff
      \clef moderntab
      \revert TextScript.stencil
      \override TextScript.font-series = #'bold
      \override TextScript.font-size = #-2
      \override TextScript.color = #red

    }
    \context {
      \Score
      proportionalNotationDuration = #(ly:make-moment 1/8)
    }
  }
}
</pre><p>
 <a href="28/lily-a4ac69a4.ly">
  <img align="middle"
       border="0"
       src="28/lily-a4ac69a4.png"
       alt="[image of music]">
 </a>
</p>




<a name="adding-timing-marks-to-long-glissandi.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Adding-timing-marks-to-long-glissandi"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-adding-markups-in-a-tablature" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Adding markups in a tablature&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-adjusting-grace-note-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Adjusting grace note spacing &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-adding-timing-marks-to-long-glissandi"></a>
<h2 class="unnumberedsec">Adding timing marks to long glissandi</h2>


<p>Skipped beats in very long glissandi are sometimes indicated by timing
marks, often consisting of stems without noteheads.  Such stems can
also be used to carry intermediate expression markings.
</p>
<p>If the stems do not align well with the glissando, they may need to be
repositioned slightly.
</p>

<pre class="verbatim">glissandoSkipOn = {
  \override NoteColumn.glissando-skip = ##t
  \hide NoteHead
  \override NoteHead.no-ledgers = ##t
}

glissandoSkipOff = {
  \revert NoteColumn.glissando-skip
  \undo \hide NoteHead
  \revert NoteHead.no-ledgers
}

\relative c'' {
  r8 f8\glissando
  \glissandoSkipOn
  f4 g a a8\noBeam
  \glissandoSkipOff
  a8

  r8 f8\glissando
  \glissandoSkipOn
  g4 a8
  \glissandoSkipOff
  a8 |

  r4 f\glissando \&lt;
  \glissandoSkipOn
  a4\f \&gt;
  \glissandoSkipOff
  b8\! r |
}
</pre><p>
 <a href="15/lily-58d81ccc.ly">
  <img align="middle"
       border="0"
       src="15/lily-58d81ccc.png"
       alt="[image of music]">
 </a>
</p>




<a name="adjusting-grace-note-spacing.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Adjusting-grace-note-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-adding-timing-marks-to-long-glissandi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Adding timing marks to long glissandi&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-adjusting-lyrics-vertical-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Adjusting lyrics vertical spacing &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-adjusting-grace-note-spacing"></a>
<h2 class="unnumberedsec">Adjusting grace note spacing</h2>


<p>The space given to grace notes can be adjusted using the
<code>spacing-increment</code> property of <code>Score.GraceSpacing</code>.
</p>

<pre class="verbatim">graceNotes = {
  \grace { c4 c8 c16 c32 }
  c8
}

\relative c'' {
  c8
  \graceNotes
  \override Score.GraceSpacing.spacing-increment = #2.0
  \graceNotes
  \revert Score.GraceSpacing.spacing-increment
  \graceNotes
}
</pre><p>
 <a href="e5/lily-7a764d96.ly">
  <img align="middle"
       border="0"
       src="e5/lily-7a764d96.png"
       alt="[image of music]">
 </a>
</p>




<a name="adjusting-lyrics-vertical-spacing.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Adjusting-lyrics-vertical-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-adjusting-grace-note-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Adjusting grace note spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-altering-the-length-of-beamed-stems" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Altering the length of beamed stems &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-adjusting-lyrics-vertical-spacing"></a>
<h2 class="unnumberedsec">Adjusting lyrics vertical spacing</h2>


<p>This snippet shows how to bring the lyrics line closer to the staff.
</p>

<pre class="verbatim">% Default layout:
&lt;&lt;
  \new Staff \new Voice = melody \relative c' {
    c4 d e f
    g4 f e d
    c1
  }
  \new Lyrics \lyricsto melody { aa aa aa aa aa aa aa aa aa }

  \new Staff {
    \new Voice = melody \relative c' {
      c4 d e f
      g4 f e d
      c1
    }
  }
  % Reducing the minimum space below the staff and above the lyrics:
  \new Lyrics \with {
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing =
      #'((basic-distance . 1))
  }
  \lyricsto melody { aa aa aa aa aa aa aa aa aa }
&gt;&gt;
</pre><p>
 <a href="8e/lily-6a2f611e.ly">
  <img align="middle"
       border="0"
       src="8e/lily-6a2f611e.png"
       alt="[image of music]">
 </a>
</p>




<a name="altering-the-length-of-beamed-stems.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Altering-the-length-of-beamed-stems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-adjusting-lyrics-vertical-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Adjusting lyrics vertical spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-alternative-bar-numbering" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Alternative bar numbering &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-altering-the-length-of-beamed-stems"></a>
<h2 class="unnumberedsec">Altering the length of beamed stems</h2>


<p>Stem lengths on beamed notes can be varied by overriding the
<code>beamed-lengths</code> property of the <code>details</code> of the
<code>Stem</code>.  If a single value is used as an argument, the length
applies to all stems.  When multiple arguments are used, the first
applies to eighth notes, the second to sixteenth notes and so on.  The
final argument also applies to all notes shorter than the note length
of the final argument.  Non-integer arguments may also be used.
</p>

<pre class="verbatim">\relative c'' {
  \override Stem.details.beamed-lengths = #'(2)
  a8[ a] a16[ a] a32[ a]
  \override Stem.details.beamed-lengths = #'(8 10 12)
  a8[ a] a16[ a] a32[ a] r8
  \override Stem.details.beamed-lengths = #'(8)
  a8[ a]
  \override Stem.details.beamed-lengths = #'(8.5)
  a8[ a]
  \revert Stem.details
  a8[ a] a16[ a] a32[ a] r16
}
</pre><p>
 <a href="08/lily-87c42240.ly">
  <img align="middle"
       border="0"
       src="08/lily-87c42240.png"
       alt="[image of music]">
 </a>
</p>




<a name="alternative-bar-numbering.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Alternative-bar-numbering"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-altering-the-length-of-beamed-stems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Altering the length of beamed stems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-analysis-brackets-above-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Analysis brackets above the staff &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-alternative-bar-numbering"></a>
<h2 class="unnumberedsec">Alternative bar numbering</h2>


<p>Two alternative methods for bar numbering can be set, especially for
when using repeated music.
</p>

<pre class="verbatim">\relative c'{
  \set Score.alternativeNumberingStyle = #'numbers
  \repeat volta 3 { c4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1 \break
  \set Score.alternativeNumberingStyle = #'numbers-with-letters
  \repeat volta 3 { c,4 d e f | }
    \alternative {
      { c4 d e f | c2 d \break }
      { f4 g a b | f4 g a b | f2 a | \break }
      { c4 d e f | c2 d }
    }
  c1
}
</pre><p>
 <a href="6c/lily-d3871fdb.ly">
  <img align="middle"
       border="0"
       src="6c/lily-d3871fdb.png"
       alt="[image of music]">
 </a>
</p>




<a name="analysis-brackets-above-the-staff.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Analysis-brackets-above-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-alternative-bar-numbering" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Alternative bar numbering&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-analysis-brackets-with-labels" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Analysis brackets with labels &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-analysis-brackets-above-the-staff"></a>
<h2 class="unnumberedsec">Analysis brackets above the staff</h2>


<p>Simple horizontal analysis brackets are added below the staff by
default. The following example shows a way to place them above the
staff instead.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Horizontal_bracket_engraver&quot;
  }
}

\relative c'' {
  \once \override HorizontalBracket.direction = #UP
  c2\startGroup
  d2\stopGroup
}
</pre><p>
 <a href="e2/lily-cd751e55.ly">
  <img align="middle"
       border="0"
       src="e2/lily-cd751e55.png"
       alt="[image of music]">
 </a>
</p>




<a name="analysis-brackets-with-labels.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Analysis-brackets-with-labels"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-analysis-brackets-above-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Analysis brackets above the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-asymmetric-slurs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Asymmetric slurs &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-analysis-brackets-with-labels"></a>
<h2 class="unnumberedsec">Analysis brackets with labels</h2>


<p>Text may be added to analysis brackets through the <code>text</code> property
of the <code>HorizontalBracketText</code> grob.  Adding different texts to
brackets beginning at the same time requires the <code>\tweak</code> command.
Bracket text will be parenthesized after a line break.
</p>

<pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Horizontal_bracket_engraver&quot;
    \override HorizontalBracket.direction = #UP
  }
}

{
  \once\override HorizontalBracketText.text = &quot;a&quot;
  c''\startGroup d''\stopGroup
  \once\override HorizontalBracketText.text = &quot;a'&quot;
  e''\startGroup d''\stopGroup
  c''
  -\tweak HorizontalBracketText.text \markup \bold \huge &quot;b&quot; \startGroup
  -\tweak HorizontalBracketText.text &quot;a&quot; \startGroup
  d''\stopGroup
  e''-\tweak HorizontalBracketText.text &quot;a'&quot; \startGroup
  d''\stopGroup\stopGroup
  c''-\tweak HorizontalBracketText.text foo \startGroup d'' e'' f''
  \break
  g'' a'' b'' c'''\stopGroup
}
</pre><p>
 <a href="d4/lily-9aa2cd07.ly">
  <img align="middle"
       border="0"
       src="d4/lily-9aa2cd07.png"
       alt="[image of music]">
 </a>
</p>




<a name="asymmetric-slurs.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Asymmetric-slurs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-analysis-brackets-with-labels" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Analysis brackets with labels&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-avoiding-collisions-with-chord-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Avoiding collisions with chord fingerings &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-asymmetric-slurs"></a>
<h2 class="unnumberedsec">Asymmetric slurs</h2>


<p>Slurs can be made asymmetric to match an asymmetric pattern of notes
better.
</p>

<pre class="verbatim">slurNotes = { d,8( a' d f a f' d, a) }

\relative c' {
  \stemDown
  \slurUp
  \slurNotes
  \once \override Slur.eccentricity = #3.0
  \slurNotes
}
</pre><p>
 <a href="13/lily-0b483868.ly">
  <img align="middle"
       border="0"
       src="13/lily-0b483868.png"
       alt="[image of music]">
 </a>
</p>




<a name="avoiding-collisions-with-chord-fingerings.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Avoiding-collisions-with-chord-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-asymmetric-slurs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Asymmetric slurs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-caesura-_0028_0022railtracks_0022_0029-with-fermata" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Caesura (&quot;railtracks&quot;) with fermata &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-avoiding-collisions-with-chord-fingerings"></a>
<h2 class="unnumberedsec">Avoiding collisions with chord fingerings</h2>


<p>Fingerings and string numbers applied to individual notes will
automatically avoid beams and stems, but this is not true by default
for fingerings and string numbers applied to the individual notes of
chords.  The following example shows how this default behavior can be
overridden.
</p>

<pre class="verbatim">\relative c' {
  \set fingeringOrientations = #'(up)
  \set stringNumberOrientations = #'(up)
  \set strokeFingerOrientations = #'(up)

  % Default behavior
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
  &lt;f c'-\rightHandFinger #2 &gt;8

  % No tweak needed
  r8
  &lt;f c'-5&gt;8
  &lt;f c'\5&gt;8
   % Corrected to avoid collisions
  \override StrokeFinger.add-stem-support = ##t
  &lt;f c'-\rightHandFinger #2 &gt;8
}
</pre><p>
 <a href="6d/lily-465697fc.ly">
  <img align="middle"
       border="0"
       src="6d/lily-465697fc.png"
       alt="[image of music]">
 </a>
</p>




<a name="caesura-railtracks-with-fermata.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Caesura-_0028_0022railtracks_0022_0029-with-fermata"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-avoiding-collisions-with-chord-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Avoiding collisions with chord fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-a-single-note_0027s-size-in-a-chord" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing a single note's size in a chord &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-caesura-_0028_0022railtracks_0022_0029-with-fermata"></a>
<h2 class="unnumberedsec">Caesura (&quot;railtracks&quot;) with fermata</h2>


<p>A caesura is sometimes denoted by a double &ldquo;railtracks&rdquo; breath mark
with a fermata sign positioned above. This snippet shows an optically
pleasing combination of railtracks and fermata.
</p>

<pre class="verbatim">\relative c'' {
  c2.
  % construct the symbol
  \override BreathingSign.text = \markup {
    \override #'(direction . 1)
    \override #'(baseline-skip . 1.8)
    \dir-column {
      \translate #'(0.155 . 0)
        \center-align \musicglyph #&quot;scripts.caesura.curved&quot;
      \center-align \musicglyph #&quot;scripts.ufermata&quot;
    }
  }
  \breathe c4
  % set the breathe mark back to normal
  \revert BreathingSign.text
  c2. \breathe c4
  \bar &quot;|.&quot;
}
</pre><p>
 <a href="e5/lily-4ee7d1c1.ly">
  <img align="middle"
       border="0"
       src="e5/lily-4ee7d1c1.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-a-single-notes-size-in-a-chord.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-a-single-note_0027s-size-in-a-chord"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-caesura-_0028_0022railtracks_0022_0029-with-fermata" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Caesura (&quot;railtracks&quot;) with fermata&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-beam-thickness-and-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing beam thickness and spacing &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-a-single-note_0027s-size-in-a-chord"></a>
<h2 class="unnumberedsec">Changing a single note&rsquo;s size in a chord</h2>


<p>Individual note heads in a chord can be modified with the
<code>\tweak</code> command inside a chord, by altering the <code>font-size</code>
property.
</p>

<p>Inside the chord (within the brackets <code>&lt; &gt;</code>), before the note to
be altered, place the <code>\tweak</code> command, followed by
<code>#'font-size</code> and define the proper size like <code>#-2</code> (a tiny
note head).
</p>



<pre class="verbatim">\relative c' {
  &lt;\tweak font-size #+2 c e g c
   \tweak font-size #-2 e&gt;1
   ^\markup { A tiny e }_\markup { A big c }
}
</pre><p>
 <a href="ad/lily-137d8831.ly">
  <img align="middle"
       border="0"
       src="ad/lily-137d8831.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-beam-thickness-and-spacing.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-beam-thickness-and-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-a-single-note_0027s-size-in-a-chord" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing a single note's size in a chord&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-form-of-multi_002dmeasure-rests" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing form of multi-measure rests &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-beam-thickness-and-spacing"></a>
<h2 class="unnumberedsec">Changing beam thickness and spacing</h2>


<p>To make beams thicker or thinner alter the <code>Beam.beam-thickness</code>
property.  To adjust the spacing between beams alter the
<code>Beam.length-fraction</code> property.
</p>

<pre class="verbatim">\relative f' {
  \time 1/8
  \override Beam.beam-thickness = #0.4
  \override Beam.length-fraction = #0.8
  c32 c c c
  \revert Beam.beam-thickness  % 0.48 is default thickness
  \revert Beam.length-fraction  % 1.0 is default spacing
  c32 c c c
  \override Beam.beam-thickness = #0.6
  \override Beam.length-fraction = #1.3
  c32 c c c
}
</pre><p>
 <a href="b6/lily-70a694ad.ly">
  <img align="middle"
       border="0"
       src="b6/lily-70a694ad.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-form-of-multi-measure-rests.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-form-of-multi_002dmeasure-rests"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-beam-thickness-and-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing beam thickness and spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-properties-for-individual-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing properties for individual grobs &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-form-of-multi_002dmeasure-rests"></a>
<h2 class="unnumberedsec">Changing form of multi-measure rests</h2>


<p>If there are ten or fewer measures of rests, a series of longa and
breve rests (called in German &ldquo;Kirchenpausen&rdquo; - church rests) is
printed within the staff; otherwise a simple line is shown. This
default number of ten may be changed by overriding the
<code>expand-limit</code> property.
</p>

<pre class="verbatim">\relative c'' {
  \compressMMRests {
    R1*2 | R1*5 | R1*9
    \override MultiMeasureRest.expand-limit = #3
    R1*2 | R1*5 | R1*9
  }
}
</pre><p>
 <a href="b0/lily-db2953f8.ly">
  <img align="middle"
       border="0"
       src="b0/lily-db2953f8.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-properties-for-individual-grobs.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-properties-for-individual-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-form-of-multi_002dmeasure-rests" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing form of multi-measure rests&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-text-and-spanner-styles-for-text-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing text and spanner styles for text dynamics &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-properties-for-individual-grobs"></a>
<h2 class="unnumberedsec">Changing properties for individual grobs</h2>


<p>The <code>\applyOutput</code> command allows the tuning of any layout
object, in any context. It requires a Scheme function with three
arguments.
</p>

<pre class="verbatim">#(define (mc-squared grob grob-origin context)
   (let ((sp (ly:grob-property grob 'staff-position)))
     (ly:grob-set-property!
      grob 'stencil
      (grob-interpret-markup grob
			     #{ \markup \lower #0.5
				#(case sp
				   ((-5) &quot;m&quot;)
				   ((-3) &quot;c &quot;)
				   ((-2) #{ \markup \teeny \bold 2 #})
				   (else &quot;bla&quot;)) #}))))

\relative c' {
  &lt;d f g b&gt;2
  \applyOutput Voice.NoteHead #mc-squared
  &lt;d f g b&gt;2
}
</pre><p>
 <a href="a2/lily-346a788f.ly">
  <img align="middle"
       border="0"
       src="a2/lily-346a788f.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-text-and-spanner-styles-for-text-dynamics.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-text-and-spanner-styles-for-text-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-properties-for-individual-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing properties for individual grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-the-default-text-font-family" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing the default text font family &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-text-and-spanner-styles-for-text-dynamics"></a>
<h2 class="unnumberedsec">Changing text and spanner styles for text dynamics</h2>


<p>The text used for crescendos and decrescendos can be changed by
modifying the context properties <code>crescendoText</code> and
<code>decrescendoText</code>.
</p>
<p>The style of the spanner line can be changed by modifying the
<code>'style</code> property of <code>DynamicTextSpanner</code>.  The default value
is <code>'dashed-line</code>, and other possible values include <code>'line</code>,
<code>'dotted-line</code> and <code>'none</code>.
</p>

<pre class="verbatim">\relative c'' {
  \set crescendoText = \markup { \italic { cresc. poco } }
  \set crescendoSpanner = #'text
  \override DynamicTextSpanner.style = #'dotted-line
  a2\&lt; a
  a2 a
  a2 a
  a2 a\mf
}
</pre><p>
 <a href="ba/lily-cc7a7fde.ly">
  <img align="middle"
       border="0"
       src="ba/lily-cc7a7fde.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-default-text-font-family.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-the-default-text-font-family"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-text-and-spanner-styles-for-text-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing text and spanner styles for text dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-the-staff-size" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing the staff size &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-the-default-text-font-family"></a>
<h2 class="unnumberedsec">Changing the default text font family</h2>


<p>The default font families for text can be overridden with
<code>make-pango-font-tree</code>.
</p>

<pre class="verbatim">\paper {
  % change for other default global staff size.
  myStaffSize = #20
  %{
     run
         lilypond -dshow-available-fonts blabla
     to show all fonts available in the process log.
  %}

  #(define fonts
    (make-pango-font-tree &quot;Times New Roman&quot;
                          &quot;Nimbus Sans,Nimbus Sans L&quot;
                          &quot;Luxi Mono&quot;
;;                        &quot;Helvetica&quot;
;;                        &quot;Courier&quot;
     (/ myStaffSize 20)))
}

\relative c'' {
  c4^\markup {
    roman: foo \bold bla \italic bar \italic \bold baz
  }
  c'4_\markup {
    \override #'(font-family . sans)
    {
      sans: foo \bold bla \italic bar \italic \bold baz
    }
  }
  c'2^\markup {
    \override #'(font-family . typewriter)
    {
      mono: foo \bold bla \italic bar \italic \bold baz
    }
  }
}
</pre><p>
 <a href="be/lily-0064cb0d.ly">
  <img align="middle"
       border="0"
       src="be/lily-0064cb0d.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-staff-size.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-the-staff-size"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-the-default-text-font-family" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing the default text font family&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-the-tempo-without-a-metronome-mark" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing the tempo without a metronome mark &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-the-staff-size"></a>
<h2 class="unnumberedsec">Changing the staff size</h2>


<p>Though the simplest way to resize staves is to use
<code>#(set-global-staff-size xx)</code>, an individual staff&rsquo;s size can be
changed by scaling the properties <code>'staff-space</code> and
<code>fontSize</code>.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff {
    \relative c'' {
      \dynamicDown
      c8\ff c c c c c c c
    }
  }
  \new Staff \with {
    fontSize = #-3
    \override StaffSymbol.staff-space = #(magstep -3)
  } {
    \clef bass
    c8 c c c c\f c c c
  }
&gt;&gt;
</pre><p>
 <a href="28/lily-bdd5f2f9.ly">
  <img align="middle"
       border="0"
       src="28/lily-bdd5f2f9.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-tempo-without-a-metronome-mark.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-the-tempo-without-a-metronome-mark"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-the-staff-size" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing the staff size&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-changing-the-text-for-sustain-markings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Changing the text for sustain markings &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-the-tempo-without-a-metronome-mark"></a>
<h2 class="unnumberedsec">Changing the tempo without a metronome mark</h2>


<p>To change the tempo in MIDI output without printing anything, make the
metronome mark invisible.
</p>

<pre class="verbatim">\score {
  \new Staff \relative c' {
    \tempo 4 = 160
    c4 e g b
    c4 b d c
    \set Score.tempoHideNote = ##t
    \tempo 4 = 96
    d,4 fis a cis
    d4 cis e d
  }
  \layout { }
  \midi { }
}
</pre><p>
 <a href="87/lily-510c90fa.ly">
  <img align="middle"
       border="0"
       src="87/lily-510c90fa.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-text-for-sustain-markings.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Changing-the-text-for-sustain-markings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-the-tempo-without-a-metronome-mark" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing the tempo without a metronome mark&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-controlling-spanner-visibility-after-a-line-break" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Controlling spanner visibility after a line break &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-changing-the-text-for-sustain-markings"></a>
<h2 class="unnumberedsec">Changing the text for sustain markings</h2>


<p><code>Staff.pedalSustainStrings</code> can be used to set the text used for
pedal down and up.  Note that the only valid strings are those found in
the list of pedal glyphs - the values used this snippet constitute an
exhaustive list.
</p>

<pre class="verbatim">sustainNotes = { c4\sustainOn d e\sustainOff\sustainOn f\sustainOff }

\relative c' {
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;P&quot; &quot;P-&quot; &quot;-&quot;)
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;d&quot; &quot;de&quot; &quot;e&quot;)
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;M&quot; &quot;M-&quot; &quot;-&quot;)
  \sustainNotes
  \set Staff.pedalSustainStrings = #'(&quot;Ped&quot; &quot;*Ped&quot; &quot;*&quot;)
  \sustainNotes
}
</pre><p>
 <a href="91/lily-7704e9e8.ly">
  <img align="middle"
       border="0"
       src="91/lily-7704e9e8.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-spanner-visibility-after-a-line-break.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Controlling-spanner-visibility-after-a-line-break"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-changing-the-text-for-sustain-markings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Changing the text for sustain markings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-controlling-the-vertical-ordering-of-scripts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Controlling the vertical ordering of scripts &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-controlling-spanner-visibility-after-a-line-break"></a>
<h2 class="unnumberedsec">Controlling spanner visibility after a line break</h2>


<p>The visibility of spanners which end on the first note following a line
break is controlled by the <code>after-line-breaking</code> callback
<code>ly:spanner::kill-zero-spanned-time</code>.
</p>
<p>For objects such as glissandos and hairpins, the default behaviour is
to hide the spanner after a break; disabling the callback will allow
the left-broken span to be shown.
</p>
<p>Conversely, spanners which are usually visible, such as text spans, can
be hidden by enabling the callback.
</p>

<pre class="verbatim">\paper { ragged-right = ##t }

\relative c'' {
  \override Hairpin.to-barline = ##f
  \override Glissando.breakable = ##t
  % show hairpin
  \override Hairpin.after-line-breaking = ##t
  % hide text span
  \override TextSpanner.after-line-breaking =
    #ly:spanner::kill-zero-spanned-time
  e2\&lt;\startTextSpan
  % show glissando
  \override Glissando.after-line-breaking = ##t
  f2\glissando
  \break
  f,1\!\stopTextSpan
}
</pre><p>
 <a href="eb/lily-37d11b27.ly">
  <img align="middle"
       border="0"
       src="eb/lily-37d11b27.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-the-vertical-ordering-of-scripts.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Controlling-the-vertical-ordering-of-scripts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-controlling-spanner-visibility-after-a-line-break" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Controlling spanner visibility after a line break&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-controlling-tuplet-bracket-visibility" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Controlling tuplet bracket visibility &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-controlling-the-vertical-ordering-of-scripts"></a>
<h2 class="unnumberedsec">Controlling the vertical ordering of scripts</h2>


<p>The vertical ordering of scripts is controlled with the
<code>'script-priority</code> property. The lower this number, the closer it
will be put to the note. In this example, the <code>TextScript</code> (the
sharp symbol) first has the lowest priority, so it is put lowest in the
first example. In the second, the prall trill (the <code>Script</code>) has
the lowest, so it is on the inside. When two objects have the same
priority, the order in which they are entered determines which one
comes first.
</p>

<pre class="verbatim">\relative c''' {
  \once \override TextScript.script-priority = #-100
  a2^\prall^\markup { \sharp }

  \once \override Script.script-priority = #-100
  a2^\prall^\markup { \sharp }
}
</pre><p>
 <a href="e8/lily-7e01441c.ly">
  <img align="middle"
       border="0"
       src="e8/lily-7e01441c.png"
       alt="[image of music]">
 </a>
</p>




<a name="controlling-tuplet-bracket-visibility.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Controlling-tuplet-bracket-visibility"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-controlling-the-vertical-ordering-of-scripts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Controlling the vertical ordering of scripts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-creating-a-delayed-turn" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Creating a delayed turn &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-controlling-tuplet-bracket-visibility"></a>
<h2 class="unnumberedsec">Controlling tuplet bracket visibility</h2>


<p>The default behavior of tuplet-bracket visibility is to print a bracket
unless there is a beam of the same length as the tuplet. To control the
visibility of tuplet brackets, set the property
<code>'bracket-visibility</code> to either <code>#t</code> (always print a
bracket), <code>#f</code> (never print a bracket) or <code>#'if-no-beam</code>
(only print a bracket if there is no beam).
</p>

<pre class="verbatim">music = \relative c'' {
  \tuplet 3/2 { c16[ d e } f8]
  \tuplet 3/2 { c8 d e }
  \tuplet 3/2 { c4 d e }
}

\new Voice {
  \relative c' {
    &lt;&lt; \music s4^&quot;default&quot; &gt;&gt;
    \override TupletBracket.bracket-visibility = #'if-no-beam
    &lt;&lt; \music s4^&quot;'if-no-beam&quot; &gt;&gt;
    \override TupletBracket.bracket-visibility = ##t
    &lt;&lt; \music s4^&quot;#t&quot; &gt;&gt;
    \override TupletBracket.bracket-visibility = ##f
    &lt;&lt; \music s4^&quot;#f&quot; &gt;&gt;
    %% v2.18 :
    \omit TupletBracket
    &lt;&lt; \music s4^&quot;omit&quot; &gt;&gt;
  }
}
</pre><p>
 <a href="5c/lily-0cebca2f.ly">
  <img align="middle"
       border="0"
       src="5c/lily-0cebca2f.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-a-delayed-turn.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Creating-a-delayed-turn"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-controlling-tuplet-bracket-visibility" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Controlling tuplet bracket visibility&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-creating-custom-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Creating custom key signatures &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-creating-a-delayed-turn"></a>
<h2 class="unnumberedsec">Creating a delayed turn</h2>


<p>Creating a delayed turn, where the lower note of the turn uses the
accidental, requires several overrides.  The
<code>outside-staff-priority</code> property must be set to <code>#f</code>, as
otherwise this would take precedence over the <code>avoid-slur
property</code>.  Changing the fractions <code>2/3</code> and <code>1/3</code> adjusts
the horizontal position.
</p>

<pre class="verbatim">\relative c'' {
  c2*2/3 ( s2*1/3\turn d4) r
  &lt;&lt;
    { c4.( d8) }
    { s4 s\turn }
  &gt;&gt;
  \transpose c d \relative c'' &lt;&lt;
    { c4.( d8) }
    {
      s4
      \once \set suggestAccidentals = ##t
      \once \override AccidentalSuggestion.outside-staff-priority = ##f
      \once \override AccidentalSuggestion.avoid-slur = #'inside
      \once \override AccidentalSuggestion.font-size = -3
      \once \override AccidentalSuggestion.script-priority = -1
      \single \hideNotes
      b8-\turn \noBeam
      s8
    }
  &gt;&gt;
}
</pre><p>
 <a href="9e/lily-e623a356.ly">
  <img align="middle"
       border="0"
       src="9e/lily-e623a356.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-custom-key-signatures.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Creating-custom-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-creating-a-delayed-turn" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Creating a delayed turn&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-creating-double_002ddigit-fingerings" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Creating double-digit fingerings &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-creating-custom-key-signatures"></a>
<h2 class="unnumberedsec">Creating custom key signatures</h2>


<p>LilyPond supports custom key signatures.  In this example, print for D
minor with an extended range of printed flats.
</p>

<pre class="verbatim">\new Staff \with {
  \override StaffSymbol.line-count = #8
  \override KeySignature.flat-positions = #'((-7 . 6))
  \override KeyCancellation.flat-positions = #'((-7 . 6))
  % presumably sharps are also printed in both octaves
  \override KeySignature.sharp-positions = #'((-6 . 7))
  \override KeyCancellation.sharp-positions = #'((-6 . 7))

  \override Clef.stencil = #
  (lambda (grob)(grob-interpret-markup grob
  #{ \markup\combine
    \musicglyph #&quot;clefs.C&quot;
    \translate #'(-3 . -2)
    \musicglyph #&quot;clefs.F&quot;
   #}))
    clefPosition = #3
    middleCPosition = #3
    middleCClefPosition = #3
}

{
  \key d\minor
  f bes, f bes,
}
</pre><p>
 <a href="e7/lily-35b90923.ly">
  <img align="middle"
       border="0"
       src="e7/lily-35b90923.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-double-digit-fingerings.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Creating-double_002ddigit-fingerings"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-creating-custom-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Creating custom key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-creating-simultaneous-rehearsal-marks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Creating simultaneous rehearsal marks &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-creating-double_002ddigit-fingerings"></a>
<h2 class="unnumberedsec">Creating double-digit fingerings</h2>


<p>Creating fingerings larger than 5 is possible.
</p>

<pre class="verbatim">\relative c' {
  c1-10
  c1-50
  c1-36
  c1-29
}
</pre><p>
 <a href="53/lily-413a6723.ly">
  <img align="middle"
       border="0"
       src="53/lily-413a6723.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-simultaneous-rehearsal-marks.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Creating-simultaneous-rehearsal-marks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-creating-double_002ddigit-fingerings" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Creating double-digit fingerings&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-creating-text-spanners" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Creating text spanners &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-creating-simultaneous-rehearsal-marks"></a>
<h2 class="unnumberedsec">Creating simultaneous rehearsal marks</h2>


<p>Unlike text scripts, rehearsal marks cannot be stacked at a particular
point in a score: only one <code>RehearsalMark</code> object is created.
Using an invisible measure and bar line, an extra rehearsal mark can be
added, giving the appearance of two marks in the same column. This
method may also prove useful for placing rehearsal marks at both the
end of one system and the start of the following system.
</p>

<pre class="verbatim">{
  \key a \major
  \set Score.markFormatter = #format-mark-box-letters
  \once \override Score.RehearsalMark.outside-staff-priority = #5000
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \once \override Score.RehearsalMark.break-align-symbols = #'(key-signature)
  \mark \markup { \bold { Senza denti } }

  % the hidden measure and bar line
  % \cadenzaOn turns off automatic calculation of bar numbers
  \cadenzaOn
  \once \override Score.TimeSignature.stencil = ##f
  \time 1/16
  s16 \bar &quot;&quot;
  \cadenzaOff

  \time 4/4
  \once \override Score.RehearsalMark.self-alignment-X = #LEFT
  \mark \markup { \box \bold Intro }
  d'1
  \mark \default
  d'1
}
</pre><p>
 <a href="e4/lily-94c094d5.ly">
  <img align="middle"
       border="0"
       src="e4/lily-94c094d5.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-text-spanners.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Creating-text-spanners"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-creating-simultaneous-rehearsal-marks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Creating simultaneous rehearsal marks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-cross_002dstaff-chords-_002d-beaming-problems-workaround" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Cross-staff chords - beaming problems workaround &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-creating-text-spanners"></a>
<h2 class="unnumberedsec">Creating text spanners</h2>


<p>The <code>\startTextSpan</code> and <code>\stopTextSpan</code> commands allow the
creation of text spanners as easily as pedal indications or
octavations. Override some properties of the <code>TextSpanner</code> object
to modify its output.
</p>

<pre class="verbatim">\paper { ragged-right = ##f }

\relative c'' {
  \override TextSpanner.bound-details.left.text = #&quot;bla&quot;
  \override TextSpanner.bound-details.right.text = #&quot;blu&quot;
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \override TextSpanner.style = #'line
  \once \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \override TextSpanner.style = #'dashed-line
  \override TextSpanner.bound-details.left.text =
    \markup { \draw-line #'(0 . 1) }
  \override TextSpanner.bound-details.right.text =
    \markup { \draw-line #'(0 . -2) }
  \once \override TextSpanner.bound-details.right.padding = #-2

  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan

  \set Staff.middleCPosition = #-13
  \override TextSpanner.dash-period = #10
  \override TextSpanner.dash-fraction = #0.5
  \override TextSpanner.thickness = #10
  a4 \startTextSpan
  b4 c
  a4 \stopTextSpan
}
</pre><p>
 <a href="96/lily-3ca49b8e.ly">
  <img align="middle"
       border="0"
       src="96/lily-3ca49b8e.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-chords---beaming-problems-workaround.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Cross_002dstaff-chords-_002d-beaming-problems-workaround"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-creating-text-spanners" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Creating text spanners&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-cross-staff-stems" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Cross staff stems &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-cross_002dstaff-chords-_002d-beaming-problems-workaround"></a>
<h2 class="unnumberedsec">Cross-staff chords - beaming problems workaround</h2>


<p>Sometimes it is better to use stems from the upper staff for creating
cross-staff chords, because no problems with automatic beam collision
avoidance then arise.  If the stems from the lower staff were used in
the following example, it would be necessary to change the automatic
beam collision avoidance settings so that it doesn&rsquo;t detect collisions
between staves using <code>\override Staff.Beam.collision-voice-only =
##t</code>
</p>

<pre class="verbatim">\new PianoStaff &lt;&lt;
  \new Staff = up
    \relative c' {
      &lt;&lt;
        { r4
          \override Stem.cross-staff = ##t
          \override Stem.length = #19 % this is in half-spaces,
              % so it makes stems 9.5 staffspaces long
          \override Stem.Y-offset = #-6 % stems are normally lengthened
              % upwards, so here we must lower the stem by the amount
              % equal to the lengthening - in this case (19 - 7) / 2
              % (7 is default stem length)
          e e e }
        { s4
          \change Staff = &quot;bottom&quot;
          \override NoteColumn.ignore-collision = ##t
          c, c c
        }
      &gt;&gt;
    }
  \new Staff = bottom
    \relative c' {
      \clef bass
      \voiceOne
      g8 a g a g a g a
    }
&gt;&gt;
</pre><p>
 <a href="40/lily-ecd2f53a.ly">
  <img align="middle"
       border="0"
       src="40/lily-ecd2f53a.png"
       alt="[image of music]">
 </a>
</p>




<a name="cross-staff-stems.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Cross-staff-stems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-cross_002dstaff-chords-_002d-beaming-problems-workaround" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Cross-staff chords - beaming problems workaround&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-custodes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Custodes &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-cross-staff-stems"></a>
<h2 class="unnumberedsec">Cross staff stems</h2>


<p>This snippet shows the use of the <code>Span_stem_engraver</code> and
<code>\crossStaff</code> to connect stems across staves automatically.
</p>
<p>The stem length need not be specified, as the variable distance between
noteheads and staves is calculated automatically.
</p>

<pre class="verbatim">\layout {
  \context {
    \PianoStaff
    \consists #Span_stem_engraver
  }
}

{
  \new PianoStaff &lt;&lt;
    \new Staff {
      &lt;b d'&gt;4 r d'16\&gt; e'8. g8 r\!
      e'8 f' g'4 e'2
    }
    \new Staff {
      \clef bass
      \voiceOne
      \autoBeamOff
      \crossStaff { &lt;e g&gt;4 e, g16 a8. c8} d
      \autoBeamOn
      g8 f g4 c2
    }
  &gt;&gt;
}
</pre><p>
 <a href="f6/lily-cc31242f.ly">
  <img align="middle"
       border="0"
       src="f6/lily-cc31242f.png"
       alt="[image of music]">
 </a>
</p>




<a name="custodes.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Custodes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-cross-staff-stems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Cross staff stems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-customizing-fretboard-fret-diagrams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Customizing fretboard fret diagrams &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-custodes"></a>
<h2 class="unnumberedsec">Custodes</h2>


<p>Custodes may be engraved in various styles.
</p>

<pre class="verbatim">\layout { ragged-right = ##t }

\new Staff \with { \consists &quot;Custos_engraver&quot; } \relative c' {
  \override Staff.Custos.neutral-position = #4

  \override Staff.Custos.style = #'hufnagel
  c1^&quot;hufnagel&quot; \break
  &lt;d a' f'&gt;1

  \override Staff.Custos.style = #'medicaea
  c1^&quot;medicaea&quot; \break
  &lt;d a' f'&gt;1

  \override Staff.Custos.style = #'vaticana
  c1^&quot;vaticana&quot; \break
  &lt;d a' f'&gt;1

  \override Staff.Custos.style = #'mensural
  c1^&quot;mensural&quot; \break
  &lt;d a' f'&gt;1
}
</pre><p>
 <a href="a5/lily-7ceec8af.ly">
  <img align="middle"
       border="0"
       src="a5/lily-7ceec8af.png"
       alt="[image of music]">
 </a>
</p>




<a name="customizing-fretboard-fret-diagrams.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Customizing-fretboard-fret-diagrams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-custodes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Custodes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-customizing-markup-fret-diagrams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Customizing markup fret diagrams &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-customizing-fretboard-fret-diagrams"></a>
<h2 class="unnumberedsec">Customizing fretboard fret diagrams</h2>


<p>Fret diagram properties can be set through
<code>'fret-diagram-details</code>.  For FretBoard fret diagrams, overrides
are applied to the <code>FretBoards.FretBoard</code> object. Like
<code>Voice</code>, <code>FretBoards</code> is a bottom level context, therefore
can be omitted in property overrides.
</p>

<pre class="verbatim">\include &quot;predefined-guitar-fretboards.ly&quot;
\storePredefinedDiagram #default-fret-table \chordmode { c' }
                        #guitar-tuning
                        #&quot;x;1-1-(;3-2;3-3;3-4;1-1-);&quot;
&lt;&lt;
  \new ChordNames {
    \chordmode { c1 | c | c | d }
  }
  \new FretBoards {
    % Set global properties of fret diagram
    \override FretBoards.FretBoard.size = #'1.2
    \override FretBoard.fret-diagram-details.finger-code = #'in-dot
    \override FretBoard.fret-diagram-details.dot-color = #'white
    \chordmode {
      c
      \once \override FretBoard.size = #'1.0
      \once \override FretBoard.fret-diagram-details.barre-type = #'straight
      \once \override FretBoard.fret-diagram-details.dot-color = #'black
      \once \override FretBoard.fret-diagram-details.finger-code = #'below-string
      c'
      \once \override FretBoard.fret-diagram-details.barre-type = #'none
      \once \override FretBoard.fret-diagram-details.number-type = #'arabic
      \once \override FretBoard.fret-diagram-details.orientation = #'landscape
      \once \override FretBoard.fret-diagram-details.mute-string = #&quot;M&quot;
      \once \override FretBoard.fret-diagram-details.label-dir = #LEFT
      \once \override FretBoard.fret-diagram-details.dot-color = #'black
      c'
      \once \override FretBoard.fret-diagram-details.finger-code = #'below-string
      \once \override FretBoard.fret-diagram-details.dot-radius = #0.35
      \once \override FretBoard.fret-diagram-details.dot-position = #0.5
      \once \override FretBoard.fret-diagram-details.fret-count = #3
      d
    }
  }
  \new Voice {
    c'1 | c' | c' | d'
  }
&gt;&gt;
</pre><p>
 <a href="c6/lily-2ebd583d.ly">
  <img align="middle"
       border="0"
       src="c6/lily-2ebd583d.png"
       alt="[image of music]">
 </a>
</p>




<a name="customizing-markup-fret-diagrams.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Customizing-markup-fret-diagrams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-customizing-fretboard-fret-diagrams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Customizing fretboard fret diagrams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-display-bracket-with-only-one-staff-in-a-system" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Display bracket with only one staff in a system &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-customizing-markup-fret-diagrams"></a>
<h2 class="unnumberedsec">Customizing markup fret diagrams</h2>


<p>Fret diagram properties can be set through
<code>'fret-diagram-details</code>.  For markup fret diagrams, overrides can
be applied to the <code>Voice.TextScript</code> object or directly to the
markup.
</p>

<pre class="verbatim">&lt;&lt;
  \chords { c1 | c | c | d }

  \new Voice = &quot;mel&quot; {
    \textLengthOn
    % Set global properties of fret diagram
    \override TextScript.size = #'1.2
    \override TextScript.fret-diagram-details.finger-code = #'in-dot
    \override TextScript.fret-diagram-details.dot-color = #'white

    %% C major for guitar, no barre, using defaults
       % terse style
    c'1^\markup { \fret-diagram-terse #&quot;x;3-3;2-2;o;1-1;o;&quot; }

    %% C major for guitar, barred on third fret
       % verbose style
       % size 1.0
       % roman fret label, finger labels below string, straight barre
    c'1^\markup {
      % standard size
      \override #'(size . 1.0) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . in-dot)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
       % verbose style
       % landscape orientation, arabic numbers, M for mute string
       % no barre, fret label down or left, small mute label font
    c'1^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (number-type . arabic)
                   (label-dir . -1)
                   (mute-string . &quot;M&quot;)
                   (orientation . landscape)
                   (barre-type . none)
                   (xo-font-magnification . 0.4)
                   (xo-padding . 0.3))) {
        \fret-diagram-verbose #'((mute 6)
                                 (place-fret 5 3 1)
                                 (place-fret 4 5 2)
                                 (place-fret 3 5 3)
                                 (place-fret 2 5 4)
                                 (place-fret 1 3 1)
                                 (barre 5 1 3))
      }
    }

    %% simple D chord
       % terse style
       % larger dots, centered dots, fewer frets
       % label below string
    d'1^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }
  }
&gt;&gt;
</pre><p>
 <a href="87/lily-6ed1c5d9.ly">
  <img align="middle"
       border="0"
       src="87/lily-6ed1c5d9.png"
       alt="[image of music]">
 </a>
</p>




<a name="display-bracket-with-only-one-staff-in-a-system.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Display-bracket-with-only-one-staff-in-a-system"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-customizing-markup-fret-diagrams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Customizing markup fret diagrams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-displaying-grob-ancestry" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Displaying grob ancestry &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-display-bracket-with-only-one-staff-in-a-system"></a>
<h2 class="unnumberedsec">Display bracket with only one staff in a system</h2>


<p>If there is only one staff in one of the staff types <code>ChoirStaff</code>
or <code>StaffGroup</code>, by default the bracket and the starting bar line
will not be displayed.  This can be changed by overriding
<code>collapse-height</code> to set its value to be less than the number of
staff lines in the staff.
</p>
<p>Note that in contexts such as <code>PianoStaff</code> and <code>GrandStaff</code>
where the systems begin with a brace instead of a bracket, another
property has to be set, as shown on the second system in the example.
</p>

<pre class="verbatim">\score {
  \new StaffGroup &lt;&lt;
    % Must be lower than the actual number of staff lines
    \override StaffGroup.SystemStartBracket.collapse-height = #4
    \override Score.SystemStartBar.collapse-height = #4
    \new Staff {
      c'1
    }
  &gt;&gt;
}
\score {
  \new PianoStaff &lt;&lt;
    \override PianoStaff.SystemStartBrace.collapse-height = #4
    \override Score.SystemStartBar.collapse-height = #4
    \new Staff {
      c'1
    }
  &gt;&gt;
}
</pre><p>
 <a href="74/lily-711aa227.ly">
  <img align="middle"
       border="0"
       src="74/lily-711aa227.png"
       alt="[image of music]">
 </a>
</p>




<a name="displaying-grob-ancestry.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Displaying-grob-ancestry"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-display-bracket-with-only-one-staff-in-a-system" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Display bracket with only one staff in a system&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-dotted-harmonics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Dotted harmonics &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-displaying-grob-ancestry"></a>
<h2 class="unnumberedsec">Displaying grob ancestry</h2>


<p>When working with grob callbacks, it can be helpful to understand a
grob’s ancestry. Most grobs have parents which influence the
positioning of the grob. X- and Y-parents influence the horizontal and
vertical positions for the grob, respectively. Additionally, each
parent may have parents of its own.
</p>

<p>Unfortunately, there are several aspects of a grob’s ancestry that can
lead to confusion:
</p>

<p>* The types of parents a grob has may depend on context.
</p>
<p>* For some grobs, the X- and Y-parents are the same.
</p>
<p>* A particular “ancestor” may be related to a grob in multiple ways.
</p>
<p>* The concept of “generations” is misleading.
</p>

<p>For example, the <code>System</code> grob can be both parent (on the Y-side)
and grandparent (twice on the X-side) to a <code>VerticalAlignment</code>
grob.
</p>

<p>This macro prints (to the console) a textual representation of a grob’s
ancestry.
</p>
<p>When called this way:
</p>
<p><code>{ \once \override NoteHead.before-line-breaking =
#display-ancestry c }</code>
</p>
<p>The following output is generated:
</p>

<p><code>NoteHead X,Y: NoteColumn
     X: PaperColumn
        X,Y: System
     Y: VerticalAxisGroup
        X: NonMusicalPaperColumn
           X,Y: System
        Y: VerticalAlignment
           X: NonMusicalPaperColumn
              X,Y: System
           Y: System</code>
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=622
%% see also http://www.lilypond.org/doc/v2.18/Documentation/snippets/tweaks-and-overrides#tweaks-and-overrides-displaying-grob-ancestry

%% Remark:
%% grob::name is in the source since 2.19.x could be deleted during next LSR-upgrade
#(define (grob::name grob)
  (assq-ref (ly:grob-property grob 'meta) 'name))

#(define (get-ancestry grob)
  (if (not (null? (ly:grob-parent grob X)))
      (list (grob::name grob)
            (get-ancestry (ly:grob-parent grob X))
            (get-ancestry (ly:grob-parent grob Y)))
      (grob::name grob)))

#(define (format-ancestry lst padding)
   (string-append
    (symbol-&gt;string (car lst))
    &quot;\n&quot;
    (let ((X-ancestry
           (if (list? (cadr lst))
               (format-ancestry (cadr lst) (+ padding 3))
               (symbol-&gt;string (cadr lst))))
          (Y-ancestry
           (if (list? (caddr lst))
               (format-ancestry (caddr lst) (+ padding 3))
               (symbol-&gt;string (caddr lst)))))
      (if (equal? X-ancestry Y-ancestry)
          (string-append
           (format #f &quot;~&amp;&quot;)
           (make-string padding #\space)
           &quot;X,Y: &quot;
           (if (list? (cadr lst))
               (format-ancestry (cadr lst) (+ padding 5))
               (symbol-&gt;string (cadr lst))))
          (string-append
           (format #f &quot;~&amp;&quot;)
           (make-string padding #\space)
           &quot;X: &quot; X-ancestry
           &quot;\n&quot;
           (make-string padding #\space)
           &quot;Y: &quot; Y-ancestry
           (format #f &quot;~&amp;&quot;))))
    (format #f &quot;~&amp;&quot;)))

#(define (display-ancestry grob)
   (format (current-error-port)
      &quot;~3&amp;~a~2%~a~&amp;&quot;
      (make-string 36 #\-)
      (if (ly:grob? grob)
          (format-ancestry (get-ancestry grob) 0)
          (format #f &quot;~a is not a grob&quot; grob))))

\relative c' {
  \once \override NoteHead.before-line-breaking = #display-ancestry
  f4
  \once \override Accidental.before-line-breaking = #display-ancestry
  \once \override Arpeggio.before-line-breaking = #display-ancestry
  &lt;f as c&gt;4\arpeggio
}
</pre><p>
 <a href="29/lily-f52ec2a8.ly">
  <img align="middle"
       border="0"
       src="29/lily-f52ec2a8.png"
       alt="[image of music]">
 </a>
</p>




<a name="dotted-harmonics.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Dotted-harmonics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-displaying-grob-ancestry" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Displaying grob ancestry&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-drawing-boxes-around-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Drawing boxes around grobs &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-dotted-harmonics"></a>
<h2 class="unnumberedsec">Dotted harmonics</h2>


<p>Artificial harmonics using <code>\harmonic</code> do not show dots.  To
override this behavior, set the context property <code>harmonicDots</code>.
</p>

<pre class="verbatim">\relative c''' {
  \time 3/4
  \key f \major
  \set harmonicDots = ##t
  &lt;bes f'\harmonic&gt;2. ~
  &lt;bes f'\harmonic&gt;4. &lt;a e'\harmonic&gt;8( &lt;gis dis'\harmonic&gt; &lt;g d'\harmonic&gt;)
  &lt;fis cis'\harmonic&gt;2.
  &lt;bes f'\harmonic&gt;2.
}
</pre><p>
 <a href="5c/lily-45a21625.ly">
  <img align="middle"
       border="0"
       src="5c/lily-45a21625.png"
       alt="[image of music]">
 </a>
</p>




<a name="drawing-boxes-around-grobs.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Drawing-boxes-around-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-dotted-harmonics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Dotted harmonics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-drawing-circles-around-various-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Drawing circles around various objects &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-drawing-boxes-around-grobs"></a>
<h2 class="unnumberedsec">Drawing boxes around grobs</h2>


<p>The <code>print-function</code> can be overridden to draw a box around an
arbitrary grob.
</p>

<pre class="verbatim">\relative c'' {
  \override TextScript.stencil =
    #(make-stencil-boxer 0.1 0.3 ly:text-interface::print)
  c'4^&quot;foo&quot;

  \override Stem.stencil =
    #(make-stencil-boxer 0.05 0.25 ly:stem::print)
  \override Score.RehearsalMark.stencil =
    #(make-stencil-boxer 0.15 0.3 ly:text-interface::print)
  b8

  \revert Stem.stencil
  \revert Flag.stencil
  c4. c4
  \mark &quot;F&quot;
  c1
}
</pre><p>
 <a href="f5/lily-b4e35338.ly">
  <img align="middle"
       border="0"
       src="f5/lily-b4e35338.png"
       alt="[image of music]">
 </a>
</p>




<a name="drawing-circles-around-various-objects.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Drawing-circles-around-various-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-drawing-boxes-around-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Drawing boxes around grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-dynamics-custom-text-spanner-postfix" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Dynamics custom text spanner postfix &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-drawing-circles-around-various-objects"></a>
<h2 class="unnumberedsec">Drawing circles around various objects</h2>


<p>The <code>\circle</code> markup command draws circles around various
objects, for example fingering indications.  For other objects,
specific tweaks may be required: this example demonstrates two
strategies for rehearsal marks and measure numbers.
</p>

<pre class="verbatim">\relative c' {
  c1
  \set Score.markFormatter =
    #(lambda (mark context)
             (make-circle-markup (format-mark-numbers mark context)))
  \mark \default

  c2 d^\markup {
    \override #'(thickness . 3) {
      \circle \finger 2
    }
  }
  \override Score.BarNumber.break-visibility = #all-visible
  \override Score.BarNumber.stencil =
    #(make-stencil-circler 0.1 0.25 ly:text-interface::print)
}
</pre><p>
 <a href="05/lily-07f9abf0.ly">
  <img align="middle"
       border="0"
       src="05/lily-07f9abf0.png"
       alt="[image of music]">
 </a>
</p>




<a name="dynamics-custom-text-spanner-postfix.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Dynamics-custom-text-spanner-postfix"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-drawing-circles-around-various-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Drawing circles around various objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-dynamics-text-spanner-postfix" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Dynamics text spanner postfix &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-dynamics-custom-text-spanner-postfix"></a>
<h2 class="unnumberedsec">Dynamics custom text spanner postfix</h2>


<p>Postfix functions for custom crescendo text spanners.  The spanners
should start on the first note of the measure.  One has to use
-\mycresc, otherwise the spanner start will rather be assigned to the
next note.
</p>

<pre class="verbatim">% Two functions for (de)crescendo spanners where you can explicitly give the
% spanner text.
mycresc =
#(define-music-function (mymarkup) (markup?)
   (make-music 'CrescendoEvent
               'span-direction START
               'span-type 'text
               'span-text mymarkup))
mydecresc =
#(define-music-function (mymarkup) (markup?)
   (make-music 'DecrescendoEvent
               'span-direction START
               'span-type 'text
               'span-text mymarkup))

\relative c' {
  c4-\mycresc &quot;custom cresc&quot; c4 c4 c4 |
  c4 c4 c4 c4 |
  c4-\mydecresc &quot;custom decresc&quot; c4 c4 c4 |
  c4 c4\! c4 c4
}
</pre><p>
 <a href="b4/lily-cd5cd662.ly">
  <img align="middle"
       border="0"
       src="b4/lily-cd5cd662.png"
       alt="[image of music]">
 </a>
</p>




<a name="dynamics-text-spanner-postfix.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Dynamics-text-spanner-postfix"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-dynamics-custom-text-spanner-postfix" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Dynamics custom text spanner postfix&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-extending-a-trillspanner" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Extending a TrillSpanner &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-dynamics-text-spanner-postfix"></a>
<h2 class="unnumberedsec">Dynamics text spanner postfix</h2>


<p>Custom text spanners can be defined and used with hairpin and text
crescendos.  <code>\&lt;</code> and <code>\&gt;</code> produce hairpins by default,
<code>\cresc</code> etc. produce text spanners by default.
</p>

<pre class="verbatim">% Some sample text dynamic spanners, to be used as postfix operators
crpoco =
#(make-music 'CrescendoEvent
             'span-direction START
             'span-type 'text
             'span-text &quot;cresc. poco a poco&quot;)

\relative c' {
  c4\cresc d4 e4 f4 |
  g4 a4\! b4\crpoco c4 |
  c4 d4 e4 f4 |
  g4 a4\! b4\&lt; c4 |
  g4\dim a4 b4\decresc c4\!
}
</pre><p>
 <a href="bf/lily-8c70fd64.ly">
  <img align="middle"
       border="0"
       src="bf/lily-8c70fd64.png"
       alt="[image of music]">
 </a>
</p>




<a name="extending-a-trillspanner.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Extending-a-TrillSpanner"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-dynamics-text-spanner-postfix" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Dynamics text spanner postfix&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-extending-glissandi-across-repeats" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Extending glissandi across repeats &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-extending-a-trillspanner"></a>
<h2 class="unnumberedsec">Extending a TrillSpanner</h2>


<p>For <code>TrillSpanner</code>, the <code>minimum-length</code> property becomes
effective only if the <code>set-spacing-rods</code> procedure is called
explicitly.  To do this, the <code>springs-and-rods</code> property should be
set to <code>ly:spanner::set-spacing-rods</code>.
</p>

<pre class="verbatim">\relative c' {
\key c\minor
  \time 2/4
  c16( as') c,-. des-.
  \once\override TrillSpanner.minimum-length = #15
  \once\override TrillSpanner.springs-and-rods = #ly:spanner::set-spacing-rods
  \afterGrace es4
  \startTrillSpan { d16[( \stopTrillSpan es)] }
  c( c' g es c g' es d
  \hideNotes
  c8)
}
</pre><p>
 <a href="c1/lily-51f8417a.ly">
  <img align="middle"
       border="0"
       src="c1/lily-51f8417a.png"
       alt="[image of music]">
 </a>
</p>




<a name="extending-glissandi-across-repeats.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Extending-glissandi-across-repeats"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-extending-a-trillspanner" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Extending a TrillSpanner&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-fine_002dtuning-pedal-brackets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Fine-tuning pedal brackets &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-extending-glissandi-across-repeats"></a>
<h2 class="unnumberedsec">Extending glissandi across repeats</h2>


<p>A glissando which extends into several <code>\alternative</code> blocks can
be simulated by adding a hidden grace note with a glissando at the
start of each <code>\alternative</code> block.  The grace note should be at
the same pitch as the note which starts the initial glissando.  This is
implemented here with a music function which takes the pitch of the
grace note as its argument.
</p>
<p>Note that in polyphonic music the grace note must be matched with
corresponding grace notes in all other voices.
</p>

<pre class="verbatim">repeatGliss = #(define-music-function (grace)
  (ly:pitch?)
  #{
    % the next two lines ensure the glissando is long enough
    % to be visible
    \once \override Glissando.springs-and-rods
      = #ly:spanner::set-spacing-rods
    \once \override Glissando.minimum-length = #3.5
    \once \hideNotes
    \grace $grace \glissando
  #})

\score {
  \relative c'' {
    \repeat volta 3 { c4 d e f\glissando }
    \alternative {
      { g2 d }
      { \repeatGliss f g2 e }
      { \repeatGliss f e2 d }
    }
  }
}

music =  \relative c' {
  \voiceOne
  \repeat volta 2 {
    g a b c\glissando
  }
  \alternative {
    { d1 }
    { \repeatGliss c \once \omit StringNumber e1\2 }
  }
}

\score {
  \new StaffGroup &lt;&lt;
    \new Staff &lt;&lt;
      \context Voice { \clef &quot;G_8&quot; \music }
    &gt;&gt;
    \new TabStaff  &lt;&lt;
      \context TabVoice { \clef &quot;moderntab&quot; \music }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="be/lily-4cbc0ad0.ly">
  <img align="middle"
       border="0"
       src="be/lily-4cbc0ad0.png"
       alt="[image of music]">
 </a>
</p>




<a name="fine-tuning-pedal-brackets.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Fine_002dtuning-pedal-brackets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-extending-glissandi-across-repeats" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Extending glissandi across repeats&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-flat-ties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Flat Ties &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-fine_002dtuning-pedal-brackets"></a>
<h2 class="unnumberedsec">Fine-tuning pedal brackets</h2>


<p>The appearance of pedal brackets may be altered in different ways.
</p>

<pre class="verbatim">\paper { ragged-right = ##f }
\relative c'' {
  c2\sostenutoOn c
  c2\sostenutoOff c
  \once \override Staff.PianoPedalBracket.shorten-pair = #'(-7 . -2)
  c2\sostenutoOn c
  c2\sostenutoOff c
  \once \override Staff.PianoPedalBracket.edge-height = #'(0 . 3)
  c2\sostenutoOn c
  c2\sostenutoOff c
}
</pre><p>
 <a href="02/lily-59b6eb39.ly">
  <img align="middle"
       border="0"
       src="02/lily-59b6eb39.png"
       alt="[image of music]">
 </a>
</p>




<a name="flat-ties.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Flat-Ties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-fine_002dtuning-pedal-brackets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Fine-tuning pedal brackets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-forcing-horizontal-shift-of-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Forcing horizontal shift of notes &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-flat-ties"></a>
<h2 class="unnumberedsec">Flat Ties</h2>


<p>The function takes the default <code>Tie.stencil</code> as an argument,
calculating the result relying on the extents of this default. Further
tweaking is possible by overriding <code>Tie.details.height-limit</code> or
with <code>\shape</code>. It&rsquo;s also possible to change the custom-definition
on the fly.
</p>

<pre class="verbatim">%% http://lsr.di.unimi.it/LSR/Item?id=1031

#(define ((flared-tie coords) grob)

  (define (pair-to-list pair)
     (list (car pair) (cdr pair)))

  (define (normalize-coords goods x y dir)
    (map
      (lambda (coord)
        ;(coord-scale coord (cons x (* y dir)))
        (cons (* x (car coord)) (* y dir (cdr coord))))
      goods))

  (define (my-c-p-s points thick)
    (make-connected-path-stencil
      points
      thick
      1.0
      1.0
      #f
      #f))

  ;; outer let to trigger suicide
  (let ((sten (ly:tie::print grob)))
    (if (grob::is-live? grob)
        (let* ((layout (ly:grob-layout grob))
               (line-thickness (ly:output-def-lookup layout 'line-thickness))
               (thickness (ly:grob-property grob 'thickness 0.1))
               (used-thick (* line-thickness thickness))
               (dir (ly:grob-property grob 'direction))
               (xex (ly:stencil-extent sten X))
               (yex (ly:stencil-extent sten Y))
               (lenx (interval-length xex))
               (leny (interval-length yex))
               (xtrans (car xex))
               (ytrans (if (&gt; dir 0)(car yex) (cdr yex)))
               (uplist
                 (map pair-to-list
                      (normalize-coords coords lenx (* leny 2) dir))))

   (ly:stencil-translate
       (my-c-p-s uplist used-thick)
     (cons xtrans ytrans)))
   '())))

#(define flare-tie
  (flared-tie '((0 . 0)(0.1 . 0.2) (0.9 . 0.2) (1.0 . 0.0))))

\layout {
  \context {
    \Voice
    \override Tie.stencil = #flare-tie
  }
}

\paper { ragged-right = ##f }

\relative c' {
  a4~a
  \override Tie.height-limit = 4
  a'4~a
  a'4~a
  &lt;a,, c e a c e a c e&gt;~ q

  \break

  a'4~a
  \once \override Tie.details.height-limit = 14
  a4~a

  \break

  a4~a
  \once \override Tie.details.height-limit = 0.5
  a4~a

  \break

  a4~a
  \shape #'((0 . 0) (0 . 0.4) (0 . 0.4) (0 . 0)) Tie
  a4~a

  \break

  a4~a
  \once \override Tie.stencil =
    #(flared-tie '((0 . 0)(0.1 . 0.4) (0.9 . 0.4) (1.0 . 0.0)))
  a4~a

  a4~a
  \once \override Tie.stencil =
    #(flared-tie '((0 . 0)(0.06 . 0.1) (0.94 . 0.1) (1.0 . 0.0)))
  a4~a
}
</pre><p>
 <a href="d0/lily-0e8ba0eb.ly">
  <img align="middle"
       border="0"
       src="d0/lily-0e8ba0eb.png"
       alt="[image of music]">
 </a>
</p>




<a name="forcing-horizontal-shift-of-notes.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Forcing-horizontal-shift-of-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-flat-ties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Flat Ties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-fret-diagrams-explained-and-developed" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Fret diagrams explained and developed &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-forcing-horizontal-shift-of-notes"></a>
<h2 class="unnumberedsec">Forcing horizontal shift of notes</h2>


<p>When the typesetting engine cannot cope, the following syntax can be
used to override typesetting decisions. The units of measure used here
are staff spaces.
</p>

<pre class="verbatim">\relative c' &lt;&lt;
  {
    &lt;d g&gt;2 &lt;d g&gt;
  }
  \\
  {
    &lt;b f'&gt;2
    \once \override NoteColumn.force-hshift = #1.7
    &lt;b f'&gt;2
  }
&gt;&gt;
</pre><p>
 <a href="8b/lily-6f0e31be.ly">
  <img align="middle"
       border="0"
       src="8b/lily-6f0e31be.png"
       alt="[image of music]">
 </a>
</p>




<a name="fret-diagrams-explained-and-developed.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Fret-diagrams-explained-and-developed"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-forcing-horizontal-shift-of-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Forcing horizontal shift of notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-generating-custom-flags" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Generating custom flags &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-fret-diagrams-explained-and-developed"></a>
<h2 class="unnumberedsec">Fret diagrams explained and developed</h2>


<p>This snippet shows many possibilities for obtaining and tweaking fret
diagrams.
</p>

<pre class="verbatim">&lt;&lt;
  \chords {
    a2 a
    \repeat unfold 3 {
      c c c d d
    }
  }

  \new Voice = &quot;mel&quot; {
    \textLengthOn
    % Set global properties of fret diagram
    \override TextScript.size = #1.2
    \override TextScript.fret-diagram-details.finger-code = #'below-string
    \override TextScript.fret-diagram-details.dot-color = #'black

    %% A chord for ukulele
    a'2^\markup {
      \override #'(fret-diagram-details . (
                   (string-count . 4)
                   (dot-color . white)
                   (finger-code . in-dot))) {
        \fret-diagram #&quot;4-2-2;3-1-1;2-o;1-o;&quot;
      }
    }

    %% A chord for ukulele, with formatting defined in definition string
    %  1.2 * size, 4 strings, 4 frets, fingerings below string
    %  dot radius .35 of fret spacing, dot position 0.55 of fret spacing
    a'2^\markup {
      \override #'(fret-diagram-details . (
                   (dot-color . white)
                   (open-string . &quot;o&quot;))) {
        \fret-diagram #&quot;s:1.2;w:4;h:3;f:2;d:0.35;p:0.55;4-2-2;3-1-1;2-o;1-o;&quot;
      }
    }

      %% These chords will be in normal orientation

    %% C major for guitar, barred on third fret
    %  verbose style
    %  roman fret label, finger labels below string, straight barre
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . below-string)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
    %% Double barre used to test barre function
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . arabic)
                     (dot-label-font-mag . 0.9)
                     (finger-code . in-dot)
                     (fret-label-font-mag . 0.6)
                     (fret-label-vertical-offset . 0)
                     (label-dir . -1)
                     (mute-string . &quot;M&quot;)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 4 2 5)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, with capo on third fret
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-upper)
                     (dot-label-font-mag . 0.9)
                     (finger-code . none)
                     (fret-label-vertical-offset . 0.5)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (capo 3)
                                   (open 5)
                                   (place-fret 4 5 1)
                                   (place-fret 3 5 2)
                                   (place-fret 2 5 3)
                                   (open 1))
        }
      }
    }

    %% simple D chord
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (string-thickness-factor . 0.3)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

    %% simple D chord, large top fret thickness
    d'2^\markup  {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (top-fret-thickness . 7)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

      % These chords will be in landscape orientation
    \override TextScript.fret-diagram-details.orientation = #'landscape

    %% C major for guitar, barred on third fret
    %  verbose style
    %  roman fret label, finger labels below string, straight barre
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . below-string)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
    %% Double barre used to test barre function
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . arabic)
                     (dot-label-font-mag . 0.9)
                     (finger-code . in-dot)
                     (fret-label-font-mag . 0.6)
                     (fret-label-vertical-offset . 0)
                     (label-dir . -1)
                     (mute-string . &quot;M&quot;)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 4 2 5)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, with capo on third fret
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-upper)
                     (dot-label-font-mag . 0.9)
                     (finger-code . none)
                     (fret-label-vertical-offset . 0.5)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (capo 3)
                                   (open 5)
                                   (place-fret 4 5 1)
                                   (place-fret 3 5 2)
                                   (place-fret 2 5 3)
                                   (open 1))
        }
      }
    }

    %% simple D chord
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

    %% simple D chord, large top fret thickness
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (top-fret-thickness . 7)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

      % These chords will be in opposing-landscape orientation
    \override TextScript.fret-diagram-details.orientation = #'opposing-landscape

    %% C major for guitar, barred on third fret
    %  verbose style
    %  roman fret label, finger labels below string, straight barre
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-lower)
                     (finger-code . below-string)
                     (barre-type . straight))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, barred on third fret
    %% Double barre used to test barre function
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . arabic)
                     (dot-label-font-mag . 0.9)
                     (finger-code . in-dot)
                     (fret-label-font-mag . 0.6)
                     (fret-label-vertical-offset . 0)
                     (label-dir . -1)
                     (mute-string . &quot;M&quot;)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (place-fret 5 3 1)
                                   (place-fret 4 5 2)
                                   (place-fret 3 5 3)
                                   (place-fret 2 5 4)
                                   (place-fret 1 3 1)
                                   (barre 4 2 5)
                                   (barre 5 1 3))
        }
      }
    }

    %% C major for guitar, with capo on third fret
    %  verbose style
    c'2^\markup {
      % 110% of default size
      \override #'(size . 1.1) {
        \override #'(fret-diagram-details . (
                     (number-type . roman-upper)
                     (dot-label-font-mag . 0.9)
                     (finger-code . none)
                     (fret-label-vertical-offset . 0.5)
                     (xo-font-magnification . 0.4)
                     (xo-padding . 0.3))) {
          \fret-diagram-verbose #'((mute 6)
                                   (capo 3)
                                   (open 5)
                                   (place-fret 4 5 1)
                                   (place-fret 3 5 2)
                                   (place-fret 2 5 3)
                                   (open 1))
        }
      }
    }

    %% simple D chord
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }

    %% simple D chord, large top fret thickness
    d'2^\markup {
      \override #'(fret-diagram-details . (
                   (finger-code . below-string)
                   (dot-radius . 0.35)
                   (dot-position . 0.5)
                   (top-fret-thickness . 7)
                   (fret-count . 3))) {
        \fret-diagram-terse #&quot;x;x;o;2-1;3-2;2-3;&quot;
      }
    }
  }
&gt;&gt;
</pre><p>
 <a href="ae/lily-b565578c.ly">
  <img align="middle"
       border="0"
       src="ae/lily-b565578c.png"
       alt="[image of music]">
 </a>
</p>




<a name="generating-custom-flags.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Generating-custom-flags"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-fret-diagrams-explained-and-developed" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Fret diagrams explained and developed&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-glissandi-can-skip-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Glissandi can skip grobs &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-generating-custom-flags"></a>
<h2 class="unnumberedsec">Generating custom flags</h2>


<p>The <code>stencil</code> property of the <code>Flag</code> grob can be set to a
custom scheme function to generate the glyph for the flag.
</p>

<pre class="verbatim">#(define-public (weight-flag grob)
   (let* ((stem-grob (ly:grob-parent grob X))
          (log (- (ly:grob-property stem-grob 'duration-log) 2))
          (is-up? (eqv? (ly:grob-property stem-grob 'direction) UP))
          (yext (if is-up? (cons (* log -0.8) 0) (cons 0 (* log 0.8))))
          (flag-stencil (make-filled-box-stencil '(-0.4 . 0.4) yext))
          (stroke-style (ly:grob-property grob 'stroke-style))
          (stroke-stencil (if (equal? stroke-style &quot;grace&quot;)
                              (make-line-stencil 0.2 -0.9 -0.4 0.9 -0.4)
                              empty-stencil)))
     (ly:stencil-add flag-stencil stroke-stencil)))


% Create a flag stencil by looking up the glyph from the font
#(define (inverted-flag grob)
   (let* ((stem-grob (ly:grob-parent grob X))
          (dir (if (eqv? (ly:grob-property stem-grob 'direction) UP) &quot;d&quot; &quot;u&quot;))
          (flag (retrieve-glyph-flag &quot;&quot; dir &quot;&quot; grob))
          (line-thickness (ly:staff-symbol-line-thickness grob))
          (stem-thickness (ly:grob-property stem-grob 'thickness))
          (stem-width (* line-thickness stem-thickness))
          (stroke-style (ly:grob-property grob 'stroke-style))
          (stencil (if (null? stroke-style)
                       flag
                       (add-stroke-glyph flag stem-grob dir stroke-style &quot;&quot;)))
          (rotated-flag (ly:stencil-rotate-absolute stencil 180 0 0)))
     (ly:stencil-translate rotated-flag (cons (- (/ stem-width 2)) 0))))

snippetexamplenotes =
{
  \autoBeamOff c'8 d'16 c'32 d'64 \acciaccatura {c'8} d'64
}

{
  \override Score.RehearsalMark.self-alignment-X = #LEFT
  \time 1/4
  \mark &quot;Normal flags&quot;
  \snippetexamplenotes

  \mark &quot;Custom flag: inverted&quot;
  \override Flag.stencil = #inverted-flag
  \snippetexamplenotes

  \mark &quot;Custom flag: weight&quot;
  \override Flag.stencil = #weight-flag
  \snippetexamplenotes

  \mark &quot;Revert to normal&quot;
  \revert Flag.stencil
  \snippetexamplenotes
}
</pre><p>
 <a href="7f/lily-609598b1.ly">
  <img align="middle"
       border="0"
       src="7f/lily-609598b1.png"
       alt="[image of music]">
 </a>
</p>




<a name="glissandi-can-skip-grobs.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Glissandi-can-skip-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-generating-custom-flags" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Generating custom flags&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-hairpins-with-different-line-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Hairpins with different line styles &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-glissandi-can-skip-grobs"></a>
<h2 class="unnumberedsec">Glissandi can skip grobs</h2>


<p><code>NoteColumn</code> grobs can be skipped over by glissandi.
</p>

<pre class="verbatim">\relative c' {
  a2 \glissando
  \once \override NoteColumn.glissando-skip = ##t
  f''4 d,
}
</pre><p>
 <a href="e4/lily-30f2f92d.ly">
  <img align="middle"
       border="0"
       src="e4/lily-30f2f92d.png"
       alt="[image of music]">
 </a>
</p>




<a name="hairpins-with-different-line-styles.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Hairpins-with-different-line-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-glissandi-can-skip-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Glissandi can skip grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;) &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-hairpins-with-different-line-styles"></a>
<h2 class="unnumberedsec">Hairpins with different line styles</h2>


<p>Hairpins can take any style from <code>line-interface</code> - dashed-line,
dotted-line, line, trill or zigzag.
</p>

<pre class="verbatim">\relative c' {
  c2\&lt; c\!
  \override Hairpin.style = #'dashed-line
  c2\&lt; c\!
  \override Hairpin.style = #'dotted-line
  c2\&lt; c\!
  \override Hairpin.style = #'line
  c2\&lt; c\!
  \override Hairpin.style = #'trill
  c2\&lt; c\!
  \override Hairpin.style = #'zigzag
  c2\&lt; c\!
  \revert Hairpin.style
  c2\&lt; c\!
}
</pre><p>
 <a href="cd/lily-14fc0a1f.ly">
  <img align="middle"
       border="0"
       src="cd/lily-14fc0a1f.png"
       alt="[image of music]">
 </a>
</p>




<a name="horizontally-aligning-custom-dynamics-e.g.-sempre-pp,-piu-f,-subito-p.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-hairpins-with-different-line-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Hairpins with different line styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-how-to-change-fret-diagram-position" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: How to change fret diagram position &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029"></a>
<h2 class="unnumberedsec">Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)</h2>


<p>Some dynamic expressions involve additional text, like &ldquo;sempre pp&rdquo;.
Since dynamics are usually centered under the note, the \pp would be
displayed way after the note it applies to.
</p>
<p>To correctly align the &ldquo;sempre pp&rdquo; horizontally, so that it is
aligned as if it were only the \pp, there are several approaches:
</p>
<p>* Simply use <code>\once\override DynamicText.X-offset = #-9.2</code>
before the note with the dynamics to manually shift it to the correct
position. Drawback: This has to be done manually each time you use that
dynamic markup...
</p>
<p>* Add some padding (<code>#:hspace 7.1</code>) into the definition of your
custom dynamic mark, so that after lilypond center-aligns it, it is
already correctly aligned. Drawback: The padding really takes up that
space and does not allow any other markup or dynamics to be shown in
that position.
</p>
<p>* Shift the dynamic script <code>\once\override ... .X-offset = ..</code>.
Drawback: <code>\once\override</code> is needed for every invocation!
</p>
<p>* Set the dimensions of the additional text to 0 (using
<code>#:with-dimensions '(0 . 0) '(0 . 0)</code>). Drawback: To LilyPond
&ldquo;sempre&rdquo; has no extent, so it might put other stuff there and create
collisions (which are not detected by the collision detection!). Also,
there seems to be some spacing, so it&rsquo;s not exactly the same alignment
as without the additional text
</p>
<p>* Add an explicit shifting directly inside the scheme function for the
dynamic-script.
</p>
<p>* Set an explicit alignment inside the dynamic-script. By default, this
won&rsquo;t have any effect, only if one sets X-offset! Drawback: One needs
to set <code>DynamicText.X-offset</code>, which will apply to all dynamic
texts! Also, it is aligned at the right edge of the additional text,
not at the center of pp.
</p>




<pre class="verbatim">% Solution 1: Using a simple markup with a particular halign value
% Drawback: It's a markup, not a dynamic command, so \dynamicDown
%           etc. will have no effect
semppMarkup = \markup { \halign #1.4 \italic &quot;sempre&quot; \dynamic &quot;pp&quot; }

% Solution 2: Using a dynamic script &amp; shifting with
%             \once \override ...X-offset = ..
% Drawback: \once \override needed for every invocation
semppK =
#(make-dynamic-script
  (markup #:line
          (#:normal-text
           #:italic &quot;sempre&quot;
           #:dynamic &quot;pp&quot;)))

% Solution 3: Padding the dynamic script so the center-alignment
%             puts it at the correct position
% Drawback: the padding really reserves the space, nothing else can be there
semppT =
#(make-dynamic-script
  (markup #:line
          (#:normal-text
           #:italic &quot;sempre&quot;
           #:dynamic &quot;pp&quot;
           #:hspace 7.1)))

% Solution 4: Dynamic, setting the dimensions of the additional text to 0
% Drawback: To lilypond &quot;sempre&quot; has no extent, so it might put
%           other stuff there =&gt; collisions
% Drawback: Also, there seems to be some spacing, so it's not exactly the
%           same alignment as without the additional text
semppM =
#(make-dynamic-script
  (markup #:line
          (#:with-dimensions '(0 . 0) '(0 . 0)
                             #:right-align
                             #:normal-text
                             #:italic &quot;sempre&quot;
                             #:dynamic &quot;pp&quot;)))

% Solution 5: Dynamic with explicit shifting inside the scheme function
semppG =
#(make-dynamic-script
  (markup #:hspace 0
          #:translate '(-18.85 . 0)
          #:line (#:normal-text
                  #:italic &quot;sempre&quot;
                  #:dynamic &quot;pp&quot;)))

% Solution 6: Dynamic with explicit alignment. This has only effect
%             if one sets X-offset!
% Drawback: One needs to set DynamicText.X-offset!
% Drawback: Aligned at the right edge of the additional text,
%           not at the center of pp
semppMII =
#(make-dynamic-script
  (markup #:line (#:right-align
                  #:normal-text
                  #:italic &quot;sempre&quot;
                  #:dynamic &quot;pp&quot;)))

\new StaffGroup &lt;&lt;
  \new Staff = &quot;s&quot; \with { instrumentName = \markup \column { Normal } }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\pp c\p c c | c\ff c c\pp c
    }
  &gt;&gt;
  \new Staff = &quot;sMarkup&quot; \with {
    instrumentName = \markup \column { Normal markup }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4-\semppMarkup c\p c c | c\ff c c-\semppMarkup c
    }
  &gt;&gt;
  \new Staff = &quot;sK&quot; \with {
    instrumentName = \markup \column { Explicit shifting }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      \once \override DynamicText.X-offset = #-9.2
      c4\semppK c\p c c
      c4\ff c
      \once \override DynamicText.X-offset = #-9.2
      c4\semppK c
    }
  &gt;&gt;
  \new Staff = &quot;sT&quot; \with {
    instrumentName = \markup \column { Right padding }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\semppT c\p c c | c\ff c c\semppT c
    }
  &gt;&gt;
  \new Staff = &quot;sM&quot; \with {
    instrumentName = \markup \column { Set dimension &quot;to zero&quot; }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\semppM c\p c c | c\ff c c\semppM c
    }
  &gt;&gt;
  \new Staff = &quot;sG&quot; \with {
    instrumentName = \markup \column { Shift inside dynamics}
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      c4\semppG c\p c c | c\ff c c\semppG c
    }
  &gt;&gt;
  \new Staff = &quot;sMII&quot; \with {
    instrumentName = \markup \column { Alignment inside dynamics }
  }
  &lt;&lt;
    \relative c'' {
      \key es \major
      % Setting to ##f (false) gives the same result
      \override DynamicText.X-offset = #0
      c4\semppMII c\p c c | c\ff c c\semppMII c
    }
  &gt;&gt;
&gt;&gt;

\layout { \override Staff.InstrumentName.self-alignment-X = #LEFT }
</pre><p>
 <a href="5c/lily-1724bbd9.ly">
  <img align="middle"
       border="0"
       src="5c/lily-1724bbd9.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-change-fret-diagram-position.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-How-to-change-fret-diagram-position"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: How to print two rehearsal marks above and below the same barline (method 1) &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-how-to-change-fret-diagram-position"></a>
<h2 class="unnumberedsec">How to change fret diagram position</h2>


<p>If you want to move the position of a fret diagram, for example, to
avoid collision, or to place it between two notes, you have various
possibilities:
</p>
<p>1) modify #&rsquo;padding or #&rsquo;extra-offset values (as shown in the first
snippet)
</p>
<p>2) you can add an invisible voice and attach the fret diagrams to the
invisible notes in that voice (as shown in the second example).
</p>
<p> If you need to move the fret according with a rythmic position inside
the bar (in the example, the third beat of the measure) the second
example is better, because the fret is aligned with the third beat
itself.
</p>

<pre class="verbatim">harmonies = \chordmode
{
  a8:13
% THE FOLLOWING IS THE COMMAND TO MOVE THE CHORD NAME
  \once \override ChordNames.ChordName.extra-offset = #'(10 . 0)
  b8:13 s2.
% THIS LINE IS THE SECOND METHOD
    s4 s4  b4:13
}

\score
{
  &lt;&lt;
    \new ChordNames \harmonies
    \new Staff
    {a8^\markup { \fret-diagram  #&quot;6-x;5-0;4-2;3-0;2-0;1-2;&quot;  }
% THE FOLLOWING IS THE COMMAND TO MOVE THE FRET DIAGRAM
     \once \override TextScript.extra-offset = #'(10 . 0)
     b4.~^\markup { \fret-diagram  #&quot;6-x;5-2;4-4;3-2;2-2;1-4;&quot;  } b4. a8\break
% HERE IS THE SECOND METHOD
     &lt;&lt;
       { a8 b4.~ b4. a8}
       { s4 s4 s4^\markup { \fret-diagram  #&quot;6-x;5-2;4-4;3-2;2-2;1-4;&quot;  }
       }
     &gt;&gt;
   }
  &gt;&gt;
}
</pre><p>
 <a href="fd/lily-899855ab.ly">
  <img align="middle"
       border="0"
       src="fd/lily-899855ab.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-1.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-how-to-change-fret-diagram-position" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: How to change fret diagram position&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: How to print two rehearsal marks above and below the same barline (method 2) &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 1)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo;, one on top of the other. It
shifts the lower rehearsal mark below the staff and then adds padding
above it in order to place the upper rehearsal mark above the staff.
</p>
<p>By adjusting the extra-offset and baseline-skip values you can increase
or decrease the overall space between the rehearsal mark and the staff.
</p>
<p>Because nearly every type of glyph or string can be made to behave like
a rehearsal mark it is possible to centre those above and below a bar
line.
</p>
<p>Adding the appropriate &rsquo;break visibility&rsquo; as shown in snippet 1 will
allow you to position two marks at the end of a line as well.
</p>
<p>Note: Method 1 is less complex than Method 2 but does not really allow
for fine tuning of placement of one of the rehearsal marks without
affecting the other.  It may also give some problems with vertical
spacing, since using <code>extra-offset</code> does not change the bounding
box of the mark from its original value.
</p>

<pre class="verbatim">\relative c'{
  c d e f |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \circle 1 \box A }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \mark \markup \center-column { \flat { \bold \small \italic Fine. } }
  g f e d |
  \once \override Score.RehearsalMark.extra-offset = #'(0 . -8.5)
  \once \override Score.RehearsalMark.baseline-skip = #9
  \override Score.RehearsalMark.break-visibility = #begin-of-line-invisible
  \mark \markup \center-column { \fermata \box z }
}
</pre><p>
 <a href="07/lily-41bbeb51.ly">
  <img align="middle"
       border="0"
       src="07/lily-41bbeb51.png"
       alt="[image of music]">
 </a>
</p>




<a name="how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-method-2.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: How to print two rehearsal marks above and below the same barline (method 1)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-inserting-a-caesura" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Inserting a caesura &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029"></a>
<h2 class="unnumberedsec">How to print two rehearsal marks above and below the same barline (method 2)</h2>


<p>This method prints two &rsquo;rehearsal marks&rsquo; - one above the stave and one
below, by creating two voices, adding the Rehearsal Mark engraver to
each voice - without this no rehearsal mark is printed - and then
placing each rehearsal mark UP and DOWN in each voice respectively.
</p>
<p>This method (as opposed to method 1) is more complex, but allows for
more flexibility, should it be needed to tweak each rehearsal mark
independently of the other.
</p>

<pre class="verbatim">\score {
  \relative c'
  &lt;&lt;
    \new Staff {
      &lt;&lt;
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
        }
        { c4 d e f
          \mark \markup { \box A }
          c4 d e f
        }
        \new Voice \with {
          \consists Mark_engraver
          \consists &quot;Staff_collecting_engraver&quot;
          \override RehearsalMark.direction = #DOWN
        }
        { s4 s s s
          \mark \markup { \circle 1 }
          s4 s s s
        }
      &gt;&gt;
    }
  &gt;&gt;
  \layout {
    \context {
      \Score
      \remove &quot;Mark_engraver&quot;
      \remove &quot;Staff_collecting_engraver&quot;
    }
  }
}
</pre><p>
 <a href="99/lily-c497ffda.ly">
  <img align="middle"
       border="0"
       src="99/lily-c497ffda.png"
       alt="[image of music]">
 </a>
</p>




<a name="inserting-a-caesura.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Inserting-a-caesura"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: How to print two rehearsal marks above and below the same barline (method 2)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-keep-change-clefs-full-sized" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Keep change clefs full sized &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-inserting-a-caesura"></a>
<h2 class="unnumberedsec">Inserting a caesura</h2>


<p>Caesura marks can be created by overriding the <code>'text</code> property of
the <code>BreathingSign</code> object. A curved caesura mark is also
available.
</p>

<pre class="verbatim">\relative c'' {
  \override BreathingSign.text = \markup {
    \musicglyph #&quot;scripts.caesura.straight&quot;
  }
  c8 e4. \breathe g8. e16 c4

  \override BreathingSign.text = \markup {
    \musicglyph #&quot;scripts.caesura.curved&quot;
  }
  g8 e'4. \breathe g8. e16 c4
}
</pre><p>
 <a href="a7/lily-8c7a8f65.ly">
  <img align="middle"
       border="0"
       src="a7/lily-8c7a8f65.png"
       alt="[image of music]">
 </a>
</p>




<a name="keep-change-clefs-full-sized.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Keep-change-clefs-full-sized"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-inserting-a-caesura" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Inserting a caesura&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-line-arrows" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Line arrows &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-keep-change-clefs-full-sized"></a>
<h2 class="unnumberedsec">Keep change clefs full sized</h2>


<p>When a clef is changed, the clef sign displayed is smaller than the
initial clef.  This can be overridden with <code>full-size-change</code>.
</p>

<pre class="verbatim">\relative c' {
  \clef &quot;treble&quot;
  c1
  \clef &quot;bass&quot;
  c1
  \clef &quot;treble&quot;
  c1
  \override Staff.Clef.full-size-change = ##t
  \clef &quot;bass&quot;
  c1
  \clef &quot;treble&quot;
  c1
  \revert Staff.Clef.full-size-change
  \clef &quot;bass&quot;
  c1
  \clef &quot;treble&quot;
  c1
}
</pre><p>
 <a href="47/lily-ccfbe696.ly">
  <img align="middle"
       border="0"
       src="47/lily-ccfbe696.png"
       alt="[image of music]">
 </a>
</p>




<a name="line-arrows.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Line-arrows"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-keep-change-clefs-full-sized" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Keep change clefs full sized&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-making-an-object-invisible-with-the-_0027transparent-property" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Making an object invisible with the 'transparent property &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-line-arrows"></a>
<h2 class="unnumberedsec">Line arrows</h2>


<p>Arrows can be applied to text-spanners and line-spanners (such as the
Glissando).
</p>

<pre class="verbatim">\relative c'' {
  \override TextSpanner.bound-padding = #1.0
  \override TextSpanner.style = #'line
  \override TextSpanner.bound-details.right.arrow = ##t
  \override TextSpanner.bound-details.left.text = #&quot;fof&quot;
  \override TextSpanner.bound-details.right.text = #&quot;gag&quot;
  \override TextSpanner.bound-details.right.padding = #0.6

  \override TextSpanner.bound-details.right.stencil-align-dir-y = #CENTER
  \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER

  \override Glissando.bound-details.right.arrow = ##t
  \override Glissando.arrow-length = #0.5
  \override Glissando.arrow-width = #0.25

  a8\startTextSpan gis a4 b\glissando b,
  g'4 c\stopTextSpan c2
}
</pre><p>
 <a href="05/lily-f557dad5.ly">
  <img align="middle"
       border="0"
       src="05/lily-f557dad5.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-an-object-invisible-with-the-transparent-property.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Making-an-object-invisible-with-the-_0027transparent-property"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-line-arrows" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Line arrows&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-making-glissandi-breakable" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Making glissandi breakable &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-making-an-object-invisible-with-the-_0027transparent-property"></a>
<h2 class="unnumberedsec">Making an object invisible with the &rsquo;transparent property</h2>


<p>Setting the <code>transparent</code> property will cause an object to be
printed in &ldquo;invisible ink&rdquo;: the object is not printed, but all its
other behavior is retained.  The object still takes up space, it takes
part in collisions, and slurs, ties and beams can be attached to it.
</p>

<p>This snippet demonstrates how to connect different voices using ties.
Normally, ties only connect two notes in the same voice.  By
introducing a tie in a different voice, and blanking the first up-stem
in that voice, the tie appears to cross voices.
</p>

<pre class="verbatim">\relative {
  \time 2/4
  &lt;&lt;
    {
      \once \hide Stem
      \once \override Stem.length = #8
      b'8 ~ 8\noBeam
      \once \hide Stem
      \once \override Stem.length = #8
      g8 ~ 8\noBeam
    }
    \\
    {
      b8 g g e
    }
  &gt;&gt;
}
</pre><p>
 <a href="dc/lily-8e5a911e.ly">
  <img align="middle"
       border="0"
       src="dc/lily-8e5a911e.png"
       alt="[image of music]">
 </a>
</p>




<a name="making-glissandi-breakable.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Making-glissandi-breakable"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-making-an-object-invisible-with-the-_0027transparent-property" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Making an object invisible with the 'transparent property&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-manually-controlling-beam-positions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Manually controlling beam positions &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-making-glissandi-breakable"></a>
<h2 class="unnumberedsec">Making glissandi breakable</h2>


<p>Setting the <code>breakable</code> property to <code>#t</code> in combination with
<code>after-line-breaking</code> allows a glissando to break if it occurs at
a line break:
</p>

<pre class="verbatim">glissandoSkipOn = {
  \override NoteColumn.glissando-skip = ##t
  \hide NoteHead
  \override NoteHead.no-ledgers = ##t
}

\relative c'' {
  \override Glissando.breakable = ##t
  \override Glissando.after-line-breaking = ##t
  f1\glissando |
  \break
  a4 r2. |
  f1\glissando
  \once \glissandoSkipOn
  \break
  a2 a4 r4 |
}
</pre><p>
 <a href="d0/lily-0ef56938.ly">
  <img align="middle"
       border="0"
       src="d0/lily-0ef56938.png"
       alt="[image of music]">
 </a>
</p>




<a name="manually-controlling-beam-positions.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Manually-controlling-beam-positions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-making-glissandi-breakable" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Making glissandi breakable&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Mensurstriche layout (bar lines between the staves) &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-manually-controlling-beam-positions"></a>
<h2 class="unnumberedsec">Manually controlling beam positions</h2>


<p>Beam positions may be controlled manually, by overriding the
<code>positions</code> setting of the <code>Beam</code> grob.
</p>




<pre class="verbatim">\relative c' {
  \time 2/4
  % from upper staff-line (position 2) to center (position 0)
  \override Beam.positions = #'(2 . 0)
  c8 c
  % from center to one above center (position 1)
  \override Beam.positions = #'(0 . 1)
  c8 c
}
</pre><p>
 <a href="bb/lily-91289216.ly">
  <img align="middle"
       border="0"
       src="bb/lily-91289216.png"
       alt="[image of music]">
 </a>
</p>




<a name="mensurstriche-layout-bar-lines-between-the-staves.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-manually-controlling-beam-positions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Manually controlling beam positions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-modifying-the-ottava-spanner-slope" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Modifying the Ottava spanner slope &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-mensurstriche-layout-_0028bar-lines-between-the-staves_0029"></a>
<h2 class="unnumberedsec">Mensurstriche layout (bar lines between the staves)</h2>


<p>The mensurstriche-layout where the bar lines do not show on the staves
but between staves can be achieved with a <code>StaffGroup</code> instead of
a <code>ChoirStaff</code>.  The bar line on staves is blanked out using
<code>\hide</code>.
</p>

<pre class="verbatim">global = {
  \hide Staff.BarLine
  s1 s
  % the final bar line is not interrupted
  \undo \hide Staff.BarLine
  \bar &quot;|.&quot;
}

\new StaffGroup \relative c'' {
  &lt;&lt;
    \new Staff { &lt;&lt; \global { c1 c } &gt;&gt; }
    \new Staff { &lt;&lt; \global { c c } &gt;&gt; }
  &gt;&gt;
}
</pre><p>
 <a href="a8/lily-6697829e.ly">
  <img align="middle"
       border="0"
       src="a8/lily-6697829e.png"
       alt="[image of music]">
 </a>
</p>




<a name="modifying-the-ottava-spanner-slope.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Modifying-the-Ottava-spanner-slope"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-mensurstriche-layout-_0028bar-lines-between-the-staves_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Mensurstriche layout (bar lines between the staves)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-moving-dotted-notes-in-polyphony" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Moving dotted notes in polyphony &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-modifying-the-ottava-spanner-slope"></a>
<h2 class="unnumberedsec">Modifying the Ottava spanner slope</h2>


<p>It is possible to change the slope of the Ottava spanner.
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.OttavaBracket.stencil = #ly:line-spanner::print
  \override Staff.OttavaBracket.bound-details =
    #`((left . ((Y . 0) ; Change the integer here
                (attach-dir . ,LEFT)
                (padding . 0)
                (stencil-align-dir-y . ,CENTER)))
       (right . ((Y . 5) ; Change the integer here
                 (padding . 0)
                 (attach-dir . ,RIGHT)
                 (text . ,(make-draw-dashed-line-markup (cons 0 -1.2))))))
  \override Staff.OttavaBracket.left-bound-info =
     #ly:line-spanner::calc-left-bound-info-and-text
  \override Staff.OttavaBracket.right-bound-info =
     #ly:line-spanner::calc-right-bound-info
  \ottava #1
  c1
  c'''1
}
</pre><p>
 <a href="7f/lily-1df7a0af.ly">
  <img align="middle"
       border="0"
       src="7f/lily-1df7a0af.png"
       alt="[image of music]">
 </a>
</p>




<a name="moving-dotted-notes-in-polyphony.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Moving-dotted-notes-in-polyphony"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-modifying-the-ottava-spanner-slope" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Modifying the Ottava spanner slope&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-moving-slur-positions-vertically" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Moving slur positions vertically &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-moving-dotted-notes-in-polyphony"></a>
<h2 class="unnumberedsec">Moving dotted notes in polyphony</h2>


<p>When a dotted note in the upper voice is moved to avoid a collision
with a note in another voice, the default is to move the upper note to
the right.  This behaviour can be over-ridden by using the
<code>prefer-dotted-right</code> property of <code>NoteCollision</code>.
</p>

<pre class="verbatim">\new Staff \relative c' &lt;&lt;
  {
    f2. f4
    \override Staff.NoteCollision.prefer-dotted-right = ##f
    f2. f4
    \override Staff.NoteCollision.prefer-dotted-right = ##t
    f2. f4
  }
  \\
  { e4 e e e e e e e e e e e }
&gt;&gt;
</pre><p>
 <a href="3b/lily-e1850258.ly">
  <img align="middle"
       border="0"
       src="3b/lily-e1850258.png"
       alt="[image of music]">
 </a>
</p>




<a name="moving-slur-positions-vertically.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Moving-slur-positions-vertically"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-moving-dotted-notes-in-polyphony" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Moving dotted notes in polyphony&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-nesting-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Nesting staves &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-moving-slur-positions-vertically"></a>
<h2 class="unnumberedsec">Moving slur positions vertically</h2>


<p>The vertical position of a slur can be adjusted using the
<code>positions</code> property of <code>Slur</code>.  The property has 2
parameters, the first referring to the left end of the slur and the
second to the right.  The values of the parameters are not used by
LilyPond to make an exact movement of the slur - instead it selects
what placement of the slur looks best, taking into account the
parameter values.  Positive values move the slur up, and are
appropriate for notes with stems down.  Negative values move downward
slurs further down.
</p>

<pre class="verbatim">\relative c' {
  \stemDown
  e4( a)
  \override Slur.positions = #'(1 . 1)
  e4( a)
  \override Slur.positions = #'(2 . 2)
  e4( a)
  \override Slur.positions = #'(3 . 3)
  e4( a)
  \override Slur.positions = #'(4 . 4)
  e4( a)
  \override Slur.positions = #'(5 . 5)
  e4( a)
  \override Slur.positions = #'(0 . 5)
  e4( a)
  \override Slur.positions = #'(5 . 0)
  e4( a)
  \stemUp
  \override Slur.positions = #'(-5 . -5)
  e4( a)
  \stemDown
  \revert Slur.positions
  e4( a)
}
</pre><p>
 <a href="14/lily-ab1097d7.ly">
  <img align="middle"
       border="0"
       src="14/lily-ab1097d7.png"
       alt="[image of music]">
 </a>
</p>




<a name="nesting-staves.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Nesting-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-moving-slur-positions-vertically" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Moving slur positions vertically&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-overriding-articulations-of-destinct-type" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Overriding articulations of destinct type &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-nesting-staves"></a>
<h2 class="unnumberedsec">Nesting staves</h2>


<p>The property <code>systemStartDelimiterHierarchy</code> can be used to make
more complex nested staff groups. The command <code>\set
StaffGroup.systemStartDelimiterHierarchy</code> takes an alphabetical list of
the number of staves produced. Before each staff a system start
delimiter can be given. It has to be enclosed in brackets and takes as
much staves as the brackets enclose. Elements in the list can be
omitted, but the first bracket takes always the complete number of
staves. The possibilities are <code>SystemStartBar</code>,
<code>SystemStartBracket</code>, <code>SystemStartBrace</code>, and
<code>SystemStartSquare</code>.
</p>

<pre class="verbatim">\new StaffGroup
\relative c'' &lt;&lt;
  \set StaffGroup.systemStartDelimiterHierarchy
    = #'(SystemStartSquare (SystemStartBrace (SystemStartBracket a
                             (SystemStartSquare b)  ) c ) d)
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
&gt;&gt;
</pre><p>
 <a href="35/lily-565e641a.ly">
  <img align="middle"
       border="0"
       src="35/lily-565e641a.png"
       alt="[image of music]">
 </a>
</p>




<a name="overriding-articulations-of-destinct-type.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Overriding-articulations-of-destinct-type"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-nesting-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Nesting staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-percent-repeat-count-visibility" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Percent repeat count visibility &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-overriding-articulations-of-destinct-type"></a>
<h2 class="unnumberedsec">Overriding articulations of destinct type</h2>


<p>Sometimes you may want to affect a single articulation-type. Although
it is always possible to use <code>\tweak</code>, it might become tedious to
do so for every single sign of a whole score. The following shows how
to tweak articulations with a list of custom-settings. One use-case
might be to create a style-sheet.
</p>
<p>With 2.16.2 it is possible to put the proposed function,
<code>\customScripts</code>, into a <code>\layout</code>-block.
</p>

<pre class="verbatim">% Code by David Nalesnik and Thomas Morley

#(define (custom-script-tweaks ls)
  (lambda (grob)
    (let* ((type (ly:prob-property
                    (assoc-ref (ly:grob-properties grob) 'cause)
                    'articulation-type))
           (tweaks (assoc-ref ls type)))
      (if tweaks
          (for-each
            (lambda (x) (ly:grob-set-property! grob (car x) (cdr x)))
            tweaks)))))

customScripts =
#(define-music-function (settings)(list?)
#{
  \override Script.before-line-breaking =
    #(custom-script-tweaks settings)
#})

revertCustomScripts = { \revert Script.before-line-breaking }

%%%%%%%%%%%%%
% Example:
%%%%%%%%%%%%%

% Predefine a list of desired tweaks.
#(define my-settings-1
  '(
    (&quot;staccato&quot; . ((color . (1 0 0))(padding . 0.5)))
    (&quot;accent&quot; . ((font-size . 0)(color . (1 0 0))))
    (&quot;tenuto&quot; . ((rotation . (45 0 0)) (padding . 2)(font-size . 10)))
    (&quot;staccatissimo&quot; . ((padding . 1) (color . (1 0 0))))
    (&quot;segno&quot; . ((font-size . 0)(color . (1 0 0))))
    ))

#(define my-settings-2
  '(
    (&quot;staccato&quot; . ((color . (0 1 0))))
    (&quot;accent&quot; . ((font-size . 4)(color . (0 1 0))(padding . 1.5)))
    (&quot;tenuto&quot; . ((font-size . 10)))
    (&quot;staccatissimo&quot; . ((padding . 2) (color . (0 1 0))))
    (&quot;coda&quot; . ((color . (0 1 0)) (padding . 1)))
    ))

one =
\relative c'' {
  f1--
  \customScripts #my-settings-1
  f-. f-! f-&gt; f-- f-!\segno
  \revertCustomScripts
  f-&gt; f-.
}

two =
\relative c' {
  f1--
  \customScripts #my-settings-2
  f-. f-! f-&gt; f---&gt; f-!
  f-&gt; f-.\coda
}

\new Staff &lt;&lt;
   \new Voice { \voiceOne \one }
   \new Voice { \voiceTwo \two }
   &gt;&gt;
</pre><p>
 <a href="b6/lily-92c5326a.ly">
  <img align="middle"
       border="0"
       src="b6/lily-92c5326a.png"
       alt="[image of music]">
 </a>
</p>




<a name="percent-repeat-count-visibility.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Percent-repeat-count-visibility"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-overriding-articulations-of-destinct-type" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Overriding articulations of destinct type&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-positioning-arpeggios" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Positioning arpeggios &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-percent-repeat-count-visibility"></a>
<h2 class="unnumberedsec">Percent repeat count visibility</h2>


<p>Percent repeat counters can be shown at regular intervals by setting
the context property <code>repeatCountVisibility</code>.
</p>

<pre class="verbatim">\relative c'' {
  \set countPercentRepeats = ##t
  \set repeatCountVisibility = #(every-nth-repeat-count-visible 5)
  \repeat percent 10 { c1 } \break
  \set repeatCountVisibility = #(every-nth-repeat-count-visible 2)
  \repeat percent 6 { c1 d1 }
}
</pre><p>
 <a href="fa/lily-46ea40c3.ly">
  <img align="middle"
       border="0"
       src="fa/lily-46ea40c3.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-arpeggios.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Positioning-arpeggios"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-percent-repeat-count-visibility" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Percent repeat count visibility&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-positioning-multi_002dmeasure-rests" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Positioning multi-measure rests &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-positioning-arpeggios"></a>
<h2 class="unnumberedsec">Positioning arpeggios</h2>


<p>If you need to extend or shorten an arpeggio, you can modify the upper
and lower start positions independently.
</p>

<pre class="verbatim">\relative c' {
  &lt;c e g b&gt;1\arpeggio
  \once \override Arpeggio.positions = #'(-5 . 0)
  &lt;c e g b&gt;1\arpeggio
  \once \override Arpeggio.positions = #'(0 . 5)
  &lt;c e g b&gt;1\arpeggio
  \once \override Arpeggio.positions = #'(-5 . 5)
  &lt;c e g b&gt;1\arpeggio
}
</pre><p>
 <a href="95/lily-a6ce2810.ly">
  <img align="middle"
       border="0"
       src="95/lily-a6ce2810.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-multi-measure-rests.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Positioning-multi_002dmeasure-rests"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-positioning-arpeggios" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Positioning arpeggios&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-positioning-text-markups-inside-slurs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Positioning text markups inside slurs &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-positioning-multi_002dmeasure-rests"></a>
<h2 class="unnumberedsec">Positioning multi-measure rests</h2>


<p>Unlike ordinary rests, there is no predefined command to change the
staff position of a multi-measure rest symbol of either form by
attaching it to a note.  However, in polyphonic music multi-measure
rests in odd-numbered and even-numbered voices are vertically
separated. The positioning of multi-measure rests can be controlled as
follows:
</p>

<pre class="verbatim">\relative c'' {
  % Multi-measure rests by default are set under the fourth line
  R1
  % They can be moved using an override
  \override MultiMeasureRest.staff-position = #-2
  R1
  \override MultiMeasureRest.staff-position = #0
  R1
  \override MultiMeasureRest.staff-position = #2
  R1
  \override MultiMeasureRest.staff-position = #3
  R1
  \override MultiMeasureRest.staff-position = #6
  R1
  \revert MultiMeasureRest.staff-position
  \break

  % In two Voices, odd-numbered voices are under the top line
  &lt;&lt; { R1 } \\ { a1 } &gt;&gt;
  % Even-numbered voices are under the bottom line
  &lt;&lt; { a1 } \\ { R1 } &gt;&gt;
  % Multi-measure rests in both voices remain separate
  &lt;&lt; { R1 } \\ { R1 } &gt;&gt;

  % Separating multi-measure rests in more than two voices
  % requires an override
  &lt;&lt; { R1 } \\ { R1 } \\
     \once \override MultiMeasureRest.staff-position = #0
     { R1 }
  &gt;&gt;

  % Using compressed bars in multiple voices requires another override
  % in all voices to avoid multiple instances being printed
  \compressMMRests
  &lt;&lt;
   \revert MultiMeasureRest.direction
    { R1*3 }
    \\
   \revert MultiMeasureRest.direction
    { R1*3 }
  &gt;&gt;
}
</pre><p>
 <a href="fe/lily-15ff52a7.ly">
  <img align="middle"
       border="0"
       src="fe/lily-15ff52a7.png"
       alt="[image of music]">
 </a>
</p>




<a name="positioning-text-markups-inside-slurs.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Positioning-text-markups-inside-slurs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-positioning-multi_002dmeasure-rests" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Positioning multi-measure rests&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-printing-bar-numbers-inside-boxes-or-circles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Printing bar numbers inside boxes or circles &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-positioning-text-markups-inside-slurs"></a>
<h2 class="unnumberedsec">Positioning text markups inside slurs</h2>


<p>Text markups need to have the <code>outside-staff-priority</code> property
set to false in order to be printed inside slurs.
</p>

<pre class="verbatim">\relative c'' {
  \override TextScript.avoid-slur = #'inside
  \override TextScript.outside-staff-priority = ##f
  c2(^\markup { \halign #-10 \natural } d4.) c8
}
</pre><p>
 <a href="7e/lily-e382e3e0.ly">
  <img align="middle"
       border="0"
       src="7e/lily-e382e3e0.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-bar-numbers-inside-boxes-or-circles.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Printing-bar-numbers-inside-boxes-or-circles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-positioning-text-markups-inside-slurs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Positioning text markups inside slurs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-printing-metronome-and-rehearsal-marks-below-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Printing metronome and rehearsal marks below the staff &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-printing-bar-numbers-inside-boxes-or-circles"></a>
<h2 class="unnumberedsec">Printing bar numbers inside boxes or circles</h2>


<p>Bar numbers can also be printed inside boxes or circles.
</p>

<pre class="verbatim">\relative c' {
  % Prevent bar numbers at the end of a line and permit them elsewhere
  \override Score.BarNumber.break-visibility = #end-of-line-invisible
  \set Score.barNumberVisibility = #(every-nth-bar-number-visible 4)

  % Increase the size of the bar number by 2
  \override Score.BarNumber.font-size = #2

  % Draw a box round the following bar number(s)
  \override Score.BarNumber.stencil
    = #(make-stencil-boxer 0.1 0.25 ly:text-interface::print)
  \repeat unfold 5 { c1 }

  % Draw a circle round the following bar number(s)
  \override Score.BarNumber.stencil
    = #(make-stencil-circler 0.1 0.25 ly:text-interface::print)
  \repeat unfold 4 { c1 } \bar &quot;|.&quot;
}
</pre><p>
 <a href="8d/lily-f40f0c36.ly">
  <img align="middle"
       border="0"
       src="8d/lily-f40f0c36.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-metronome-and-rehearsal-marks-below-the-staff.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Printing-metronome-and-rehearsal-marks-below-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-printing-bar-numbers-inside-boxes-or-circles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Printing bar numbers inside boxes or circles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-printing-note-names-with-and-without-an-octave-marker" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Printing note names with and without an octave marker &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-printing-metronome-and-rehearsal-marks-below-the-staff"></a>
<h2 class="unnumberedsec">Printing metronome and rehearsal marks below the staff</h2>


<p>By default, metronome and rehearsal marks are printed above the staff.
To place them below the staff simply set the <code>direction</code> property
of <code>MetronomeMark</code> or <code>RehearsalMark</code> appropriately.
</p>

<pre class="verbatim">\layout {
  indent = 0
  ragged-right = ##f
}

{
  % Metronome marks below the staff
  \override Score.MetronomeMark.direction = #DOWN
  \tempo 8. = 120
  c''1

  % Rehearsal marks below the staff
  \override Score.RehearsalMark.direction = #DOWN
  \mark \default
  c''1
}
</pre><p>
 <a href="03/lily-5f9ea4d2.ly">
  <img align="middle"
       border="0"
       src="03/lily-5f9ea4d2.png"
       alt="[image of music]">
 </a>
</p>




<a name="printing-note-names-with-and-without-an-octave-marker.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Printing-note-names-with-and-without-an-octave-marker"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-printing-metronome-and-rehearsal-marks-below-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Printing metronome and rehearsal marks below the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-proportional-strict-notespacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Proportional strict notespacing &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-printing-note-names-with-and-without-an-octave-marker"></a>
<h2 class="unnumberedsec">Printing note names with and without an octave marker</h2>


<p>The <code>NoteNames</code> context can be used to print the text value of
notes.  The <code>printOctaveNames</code> property turns on or off the
representation of the octave of the note.
</p>

<pre class="verbatim">scale = \relative c' {
  a4 b c d
  e4 f g a
}

\new Staff {
  &lt;&lt;
    \scale
    \context NoteNames {
      \set printOctaveNames = ##f
      \scale
    }
  &gt;&gt;
  R1
  &lt;&lt;
    \scale
    \context NoteNames {
      \set printOctaveNames = ##t
      \scale
    }
  &gt;&gt;
}
</pre><p>
 <a href="82/lily-91b4dcfd.ly">
  <img align="middle"
       border="0"
       src="82/lily-91b4dcfd.png"
       alt="[image of music]">
 </a>
</p>




<a name="proportional-strict-notespacing.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Proportional-strict-notespacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-printing-note-names-with-and-without-an-octave-marker" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Printing note names with and without an octave marker&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-removing-brace-on-first-line-of-piano-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Removing brace on first line of piano score &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-proportional-strict-notespacing"></a>
<h2 class="unnumberedsec">Proportional strict notespacing</h2>


<p>If <code>strict-note-spacing</code> is set spacing of notes is not influenced
by bars or clefs within a system. Rather, they are placed just before
the note that occurs at the same time. This may cause collisions.
</p>

<pre class="verbatim">\relative c'' &lt;&lt;
  \override Score.SpacingSpanner.strict-note-spacing = ##t
  \set Score.proportionalNotationDuration = #(ly:make-moment 1/16)
  \new Staff {
    c8[ c \clef alto c c \grace { d16 } c8 c] c4
    c2 \grace { c16[ c16] } c2
  }
  \new Staff {
    c2 \tuplet 3/2 { c8 \clef bass cis,, c } c4
    c1
  }
&gt;&gt;
</pre><p>
 <a href="39/lily-63aa6413.ly">
  <img align="middle"
       border="0"
       src="39/lily-63aa6413.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-brace-on-first-line-of-piano-score.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Removing-brace-on-first-line-of-piano-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-proportional-strict-notespacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Proportional strict notespacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-removing-brace-on-first-line-of-piano-score"></a>
<h2 class="unnumberedsec">Removing brace on first line of piano score</h2>


<p>This snippet removes the first brace from a <code>PianoStaff</code> or a
<code>GrandStaff</code>. It may be useful when cutting and pasting the
engraved image into existing music.
</p>
<p>It uses <code>\alterBroken</code>.
</p>

<pre class="verbatim">someMusic =  {
  \once \override Staff.Clef.stencil = ##f
  \once \override Staff.TimeSignature.stencil = ##f
  \repeat unfold 3 c1 \break
  \repeat unfold 5 c1 \break
  \repeat unfold 5 c1
}

\score {
  \new PianoStaff
  &lt;&lt;
    \new Staff = &quot;right&quot; \relative c'' \someMusic
    \new Staff = &quot;left&quot; \relative c' { \clef F \someMusic }
  &gt;&gt;
  \layout {
    indent=75
    \context {
      \PianoStaff
      \alterBroken transparent #'(#t) SystemStartBrace
    }
  }
}
</pre><p>
 <a href="54/lily-65276f1a.ly">
  <img align="middle"
       border="0"
       src="54/lily-65276f1a.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-connecting-bar-lines-on-staffgroup,-pianostaff,-or-grandstaff.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Removing-connecting-bar-lines-on-StaffGroup-PianoStaff-or-GrandStaff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-removing-brace-on-first-line-of-piano-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Removing brace on first line of piano score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-removing-the-first-empty-line" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Removing the first empty line &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff"></a>
<h2 class="unnumberedsec">Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff</h2>


<p>By default, bar lines in StaffGroup, PianoStaff, or GrandStaff groups
are connected between the staves.  This behaviour can be overridden on
a staff-by-staff basis.
</p>

<pre class="verbatim">\relative c' {
  \new StaffGroup &lt;&lt;
    \new Staff {
      e1 | e
      \once \override Staff.BarLine.allow-span-bar = ##f
      e1 | e | e
    }
    \new Staff {
      c1 | c | c
      \once \override Staff.BarLine.allow-span-bar = ##f
      c1 | c
    }
    \new Staff {
      a1 | a | a | a | a
    }
  &gt;&gt;
}
</pre><p>
 <a href="b0/lily-2da83b9c.ly">
  <img align="middle"
       border="0"
       src="b0/lily-2da83b9c.png"
       alt="[image of music]">
 </a>
</p>




<a name="removing-the-first-empty-line.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Removing-the-first-empty-line"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-rest-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Rest styles &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-removing-the-first-empty-line"></a>
<h2 class="unnumberedsec">Removing the first empty line</h2>


<p>The first empty staff can also be removed from the score by setting the
<code>VerticalAxisGroup</code> property <code>remove-first</code>. This can be done
globally inside the <code>\layout</code> block, or locally inside the
specific staff that should be removed.  In the latter case, you have to
specify the context (<code>Staff</code> applies only to the current staff) in
front of the property.
</p>
<p>The lower staff of the second staff group is not removed, because the
setting applies only to the specific staff inside of which it is
written.
</p>

<pre class="verbatim">\layout {
  \context {
    \Staff \RemoveEmptyStaves
    % To use the setting globally, uncomment the following line:
    % \override VerticalAxisGroup.remove-first = ##t
  }
}
\new StaffGroup &lt;&lt;
  \new Staff \relative c' {
    e4 f g a \break
    c1
  }
  \new Staff {
    % To use the setting globally, comment this line,
    % uncomment the line in the \layout block above
    \override Staff.VerticalAxisGroup.remove-first = ##t
    R1 \break
    R
  }
&gt;&gt;
\new StaffGroup &lt;&lt;
  \new Staff \relative c' {
    e4 f g a \break
    c1
  }
  \new Staff {
    R1 \break
    R
  }
&gt;&gt;
</pre><p>
 <a href="74/lily-41b71de7.ly">
  <img align="middle"
       border="0"
       src="74/lily-41b71de7.png"
       alt="[image of music]">
 </a>
</p>




<a name="rest-styles.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Rest-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-removing-the-first-empty-line" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Removing the first empty line&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-rhythmic-slashes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Rhythmic slashes &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-rest-styles"></a>
<h2 class="unnumberedsec">Rest styles</h2>


<p>Rests may be used in various styles.
</p>
<pre class="verbatim">\new Staff \relative c {
  \omit Score.TimeSignature
  \cadenzaOn

  \override Staff.Rest.style = #'mensural
  r\maxima^\markup \typewriter { mensural }
  r\longa r\breve r1 r2 r4 r8 r16 s32 s64 s128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'neomensural
  r\maxima^\markup \typewriter { neomensural }
  r\longa r\breve r1 r2 r4 r8 r16 s32 s64 s128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'classical
  r\maxima^\markup \typewriter { classical }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'z
  r\maxima^\markup \typewriter { z-style }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
  \bar &quot;&quot;
  \break

  \override Staff.Rest.style = #'default
  r\maxima^\markup \typewriter { default }
  r\longa r\breve r1 r2 r4 r8 r16 r32 r64 r128 s128
}
</pre><p>
 <a href="1c/lily-18b7709f.ly">
  <img align="middle"
       border="0"
       src="1c/lily-18b7709f.png"
       alt="[image of music]">
 </a>
</p>




<a name="rhythmic-slashes.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Rhythmic-slashes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-rest-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Rest styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-separating-key-cancellations-from-key-signature-changes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Separating key cancellations from key signature changes &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-rhythmic-slashes"></a>
<h2 class="unnumberedsec">Rhythmic slashes</h2>


<p>In &ldquo;simple&rdquo; lead-sheets, sometimes no actual notes are written,
instead only &ldquo;rhythmic patterns&rdquo; and chords above the measures are
notated giving the structure of a song. Such a feature is for example
useful while creating/transcribing the structure of a song and also
when sharing lead sheets with guitarists or jazz musicians. The
standard support for this using <code>\repeat percent</code> is unsuitable
here since the first beat has to be an ordinary note or rest. This
example shows two solutions to this problem, by redefining ordinary
rests to be printed as slashes. (If the duration of each beat is not a
quarter note, replace the <code>r4</code> in the definitions with a rest of
the appropriate duration).
</p>

<pre class="verbatim">% Macro to print single slash
rs = {
  \once \override Rest.stencil = #ly:percent-repeat-item-interface::beat-slash
  \once \override Rest.thickness = #0.48
  \once \override Rest.slope = #1.7
  r4
}

% Function to print a specified number of slashes
comp = #(define-music-function (count) (integer?)
  #{
    \override Rest.stencil = #ly:percent-repeat-item-interface::beat-slash
    \override Rest.thickness = #0.48
    \override Rest.slope = #1.7
    \repeat unfold $count { r4 }
    \revert Rest.stencil
  #}
)

\score {
  \relative c' {
    c4 d e f |
    \rs \rs \rs \rs |
    \comp #4 |
  }
}
</pre><p>
 <a href="84/lily-2e268c6a.ly">
  <img align="middle"
       border="0"
       src="84/lily-2e268c6a.png"
       alt="[image of music]">
 </a>
</p>




<a name="separating-key-cancellations-from-key-signature-changes.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Separating-key-cancellations-from-key-signature-changes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-rhythmic-slashes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Rhythmic slashes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-setting-hairpin-behavior-at-bar-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Setting hairpin behavior at bar lines &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-separating-key-cancellations-from-key-signature-changes"></a>
<h2 class="unnumberedsec">Separating key cancellations from key signature changes</h2>


<p>By default, the accidentals used for key cancellations are placed
adjacent to those for key signature changes.  This behavior can be
changed by overriding the <code>'break-align-orders</code> property of the
<code>BreakAlignment</code> grob.
</p>

<p>The value of <code>'break-align-orders</code> is a vector of length 3, with
quoted lists of breakable items as elements.  This example only
modifies the second list, moving <code>key-cancellation</code> before
<code>staff-bar</code>; by modifying the second list, break alignment
behavior only changes in the middle of a system, not at the beginning
or the end.
</p>

<pre class="verbatim">\new Staff {
  \override Score.BreakAlignment.break-align-orders =
    ##((left-edge ambitus breathing-sign clef staff-bar
                   key-cancellation key-signature time-signature custos)

        (left-edge ambitus breathing-sign clef key-cancellation
                   staff-bar key-signature time-signature custos)

        (left-edge ambitus breathing-sign clef key-cancellation
                   key-signature staff-bar time-signature custos))

  \key des \major
  c'1
  \bar &quot;||&quot;
  \key bes \major
  c'1
}
</pre><p>
 <a href="ad/lily-a28fa83e.ly">
  <img align="middle"
       border="0"
       src="ad/lily-a28fa83e.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-hairpin-behavior-at-bar-lines.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Setting-hairpin-behavior-at-bar-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-separating-key-cancellations-from-key-signature-changes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Separating key cancellations from key signature changes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-setting-system-separators" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Setting system separators &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-setting-hairpin-behavior-at-bar-lines"></a>
<h2 class="unnumberedsec">Setting hairpin behavior at bar lines</h2>


<p>If the note which ends a hairpin falls on a downbeat, the hairpin stops
at the bar line immediately preceding.  This behavior can be controlled
by overriding the <code>'to-barline</code> property.
</p>

<pre class="verbatim">\relative c'' {
  e4\&lt; e2.
  e1\!
  \override Hairpin.to-barline = ##f
  e4\&lt; e2.
  e1\!
}
</pre><p>
 <a href="33/lily-54187d22.ly">
  <img align="middle"
       border="0"
       src="33/lily-54187d22.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-system-separators.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Setting-system-separators"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-setting-hairpin-behavior-at-bar-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Setting hairpin behavior at bar lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-showing-the-same-articulation-above-and-below-a-note-or-chord" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Showing the same articulation above and below a note or chord &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-setting-system-separators"></a>
<h2 class="unnumberedsec">Setting system separators</h2>


<p>System separators can be inserted between systems.  Any markup can be
used, but <code>\slashSeparator</code> has been provided as a sensible
default.
</p>

<pre class="verbatim">\paper {
  system-separator-markup = \slashSeparator
  line-width = 120
}

notes = \relative c' {
  c1 | c \break
  c1 | c \break
  c1 | c
}

\book {
  \score {
    \new GrandStaff &lt;&lt;
      \new Staff \notes
      \new Staff \notes
    &gt;&gt;
  }
}
</pre><p>
 <a href="d5/lily-9e0995da.ly">
  <img align="middle"
       border="0"
       src="d5/lily-9e0995da.png"
       alt="[image of music]">
 </a>
</p>




<a name="showing-the-same-articulation-above-and-below-a-note-or-chord.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Showing-the-same-articulation-above-and-below-a-note-or-chord"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-setting-system-separators" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Setting system separators&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-string-number-extender-lines" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: String number extender lines &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-showing-the-same-articulation-above-and-below-a-note-or-chord"></a>
<h2 class="unnumberedsec">Showing the same articulation above and below a note or chord</h2>


<p>By default, LilyPond does not allow the same articulation (e.g., an
accent, a fermata, a flageolet, etc.) to be displayed above and below a
note. For example, c4_\fermata^\fermata will only show a fermata
below. The fermata above will simply be ignored. However, one can stick
scripts (just like fingerings) inside a chord, which means it is
possible to have as many articulations as desired. This approach has
the advantage that it ignores the stem and positions the articulation
relative to the note head. This can be seen in the case of the
flageolets in the snippet. To mimic the behaviour of scripts outside a
chord, &rsquo;add-stem-support would be required. So, the solution is to
write the note as a chord and add the articulations inside the &lt;...&gt;.
The direction will always be above, but one can tweak this via a
\tweak: <code>&lt;c-\tweak direction #DOWN-\fermata^\fermata&gt;</code>
</p>

<pre class="verbatim">% The same as \flageolet, just a little smaller
smallFlageolet =
#(let ((m (make-articulation &quot;flageolet&quot;)))
   (set! (ly:music-property m 'tweaks)
         (acons 'font-size -2
                (ly:music-property m 'tweaks)))
   m)

\relative c' {
  s4^&quot;Wrong:&quot;
  c4_\fermata^\fermata % The second fermata is ignored!
  &lt;e d'&gt;4^\smallFlageolet_\smallFlageolet

  s4^&quot;Works if written inside a chord:&quot;
  &lt;e_\smallFlageolet d'^\smallFlageolet&gt;4
  &lt;e_\flageolet d'^\flageolet&gt;4
  &lt;e_\smallFlageolet^\smallFlageolet&gt;4
  &lt;e_\fermata^\fermata&gt;4
}
</pre><p>
 <a href="52/lily-d84c6909.ly">
  <img align="middle"
       border="0"
       src="52/lily-d84c6909.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-number-extender-lines.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-String-number-extender-lines"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-showing-the-same-articulation-above-and-below-a-note-or-chord" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Showing the same articulation above and below a note or chord&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-suppressing-warnings-for-clashing-note-columns" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Suppressing warnings for clashing note columns &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-string-number-extender-lines"></a>
<h2 class="unnumberedsec">String number extender lines</h2>


<p>Make an extender line for string number indications, showing that a
series of notes is supposed to be played all on the same string.
</p>

<pre class="verbatim">stringNumberSpanner =
  #(define-music-function (StringNumber) (string?)
    #{
      \override TextSpanner.style = #'solid
      \override TextSpanner.font-size = #-5
      \override TextSpanner.bound-details.left.stencil-align-dir-y = #CENTER
      \override TextSpanner.bound-details.left.text =
        \markup { \circle \number $StringNumber }
    #})


\relative c {
  \clef &quot;treble_8&quot;
  \stringNumberSpanner &quot;5&quot;
  \textSpannerDown
  a8\startTextSpan
  b c d e f\stopTextSpan
  \stringNumberSpanner &quot;4&quot;
  g\startTextSpan a
  bes4 a g2\stopTextSpan
}
</pre><p>
 <a href="a5/lily-2fb3daf1.ly">
  <img align="middle"
       border="0"
       src="a5/lily-2fb3daf1.png"
       alt="[image of music]">
 </a>
</p>




<a name="suppressing-warnings-for-clashing-note-columns.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Suppressing-warnings-for-clashing-note-columns"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-string-number-extender-lines" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: String number extender lines&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-time-signature-in-parentheses-_002d-method-3" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Time signature in parentheses - method 3 &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-suppressing-warnings-for-clashing-note-columns"></a>
<h2 class="unnumberedsec">Suppressing warnings for clashing note columns</h2>


<p>If notes from two voices with stems in the same direction are placed at
the same position, and both voices have no shift or the same shift
specified, the error message &lsquo;<samp>warning: ignoring too many clashing
note columns</samp>&rsquo; will appear when compiling the LilyPond file.  This
message can be suppressed by setting the <code>'ignore-collision</code>
property of the <code>NoteColumn</code> object to <code>#t</code>. Please note that
this does not just suppress warnings  but stops LilyPond trying to
resolve collisions at all and so may have  unintended results unless
used with care.
</p>

<pre class="verbatim">ignore = \override NoteColumn.ignore-collision = ##t

\relative c' {
  \new Staff &lt;&lt;
    \new Voice{ \ignore \stemDown f2 g }
    \new Voice{ c2 \stemDown c, }
  &gt;&gt;
}
</pre><p>
 <a href="ba/lily-e957203d.ly">
  <img align="middle"
       border="0"
       src="ba/lily-e957203d.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-in-parentheses---method-3.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Time-signature-in-parentheses-_002d-method-3"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-suppressing-warnings-for-clashing-note-columns" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Suppressing warnings for clashing note columns&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-time-signature-in-parentheses" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Time signature in parentheses &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-time-signature-in-parentheses-_002d-method-3"></a>
<h2 class="unnumberedsec">Time signature in parentheses - method 3</h2>


<p>Another way to put the time signature in parenthesis
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.TimeSignature.stencil = #(lambda (grob)
    (parenthesize-stencil (ly:time-signature::print grob) 0.1 0.4 0.4 0.1 ))
  \time 2/4
  a4 b8 c
}
</pre><p>
 <a href="fb/lily-6736381b.ly">
  <img align="middle"
       border="0"
       src="fb/lily-6736381b.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-in-parentheses.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Time-signature-in-parentheses"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-time-signature-in-parentheses-_002d-method-3" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Time signature in parentheses - method 3&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Time signature printing only the numerator as a number (instead of the fraction) &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-time-signature-in-parentheses"></a>
<h2 class="unnumberedsec">Time signature in parentheses</h2>


<p>The time signature can be enclosed within parentheses.
</p>

<pre class="verbatim">\relative c'' {
  \override Staff.TimeSignature.stencil = #(lambda (grob)
    (bracketify-stencil (ly:time-signature::print grob) Y 0.1 0.2 0.1))
  \time 2/4
  a4 b8 c
}
</pre><p>
 <a href="61/lily-a9d006ff.ly">
  <img align="middle"
       border="0"
       src="61/lily-a9d006ff.png"
       alt="[image of music]">
 </a>
</p>




<a name="time-signature-printing-only-the-numerator-as-a-number-instead-of-the-fraction.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-time-signature-in-parentheses" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Time signature in parentheses&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-tuplet-bracket-and-change-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Tuplet bracket and change staff &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029"></a>
<h2 class="unnumberedsec">Time signature printing only the numerator as a number (instead of the fraction)</h2>


<p>Sometimes, a time signature should not print the whole fraction (e.g.
7/4), but only the numerator (7 in this case). This can be easily done
by using <code>\override Staff.TimeSignature.style = #'single-digit</code>
to change the style permanently. By using <code>\revert
Staff.TimeSignature.style</code>, this setting can be reversed. To apply the
single-digit style to only one time signature, use the
<code>\override</code> command and prefix it with a <code>\once</code>.
</p>

<pre class="verbatim">\relative c'' {
  \time 3/4
  c4 c c
  % Change the style permanently
  \override Staff.TimeSignature.style = #'single-digit
  \time 2/4
  c4 c
  \time 3/4
  c4 c c
  % Revert to default style:
  \revert Staff.TimeSignature.style
  \time 2/4
  c4 c
  % single-digit style only for the next time signature
  \once \override Staff.TimeSignature.style = #'single-digit
  \time 5/4
  c4 c c c c
  \time 2/4
  c4 c
}
</pre><p>
 <a href="d8/lily-7db0cfe7.ly">
  <img align="middle"
       border="0"
       src="d8/lily-7db0cfe7.png"
       alt="[image of music]">
 </a>
</p>




<a name="tuplet-bracket-and-change-staff.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Tuplet-bracket-and-change-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Time signature printing only the numerator as a number (instead of the fraction)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-tweaking-clef-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Tweaking clef properties &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-tuplet-bracket-and-change-staff"></a>
<h2 class="unnumberedsec">Tuplet bracket and change staff</h2>


<p>This snippet shows how to set a tuplet starting in a lower staff and
finishing in the upper one.
</p>

<pre class="verbatim">aigues = \relative c' {
  \time 6/8
  s4.
  \stemDown
  c16[ bes' e]
  \stemUp
  g c e
  \stemDown
  g8
}

basses = \relative c {
  \time 3/4
  \clef F
  \tweak positions #'(4.5 . 9.5)
  \tweak edge-height #'(1 . -1)
  \tuplet 7/6 {
    c16[ bes' e]
    \change Staff = md
    \stemUp
    g[ c e g]
  }
  s4.s8
}

\new PianoStaff
\with { \omit TimeSignature }
&lt;&lt;
  \new Staff = md \aigues
  \new Staff = mg \basses
&gt;&gt;
</pre><p>
 <a href="53/lily-d63543ed.ly">
  <img align="middle"
       border="0"
       src="53/lily-d63543ed.png"
       alt="[image of music]">
 </a>
</p>




<a name="tweaking-clef-properties.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Tweaking-clef-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-tuplet-bracket-and-change-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Tuplet bracket and change staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-tweaking-grace-layout-within-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Tweaking grace layout within music &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-tweaking-clef-properties"></a>
<h2 class="unnumberedsec">Tweaking clef properties</h2>


<p>Changing the Clef glyph, its position, or the ottavation does not
change the position of subsequent notes on the staff.  To get key
signatures on their correct staff lines <code>middleCClefPosition</code> must
also be specified, with positive or negative values moving <code>middle
C</code> up or down respectively, relative to the staff&rsquo;s center line.
</p>

<p>For example, <code>\clef &quot;treble_8&quot;</code> is equivalent to setting the
<code>clefGlyph</code>, <code>clefPosition</code> (the vertical position of the
clef itself on the staff), <code>middleCPosition</code> and
<code>clefTransposition</code>. Note that when any of these properties
(except <code>middleCPosition</code>) are changed a new clef symbol is
printed.
</p>

<p>The following examples show the possibilities when setting these
properties manually. On the first line, the manual changes preserve the
standard relative positioning of clefs and notes, whereas on the second
line, they do not.
</p>

<pre class="verbatim">{
  % The default treble clef
  \key f \major
  c'1
  % The standard bass clef
  \set Staff.clefGlyph = #&quot;clefs.F&quot;
  \set Staff.clefPosition = #2
  \set Staff.middleCPosition = #6
  \set Staff.middleCClefPosition = #6
  \key g \major
  c'1
  % The baritone clef
  \set Staff.clefGlyph = #&quot;clefs.C&quot;
  \set Staff.clefPosition = #4
  \set Staff.middleCPosition = #4
  \set Staff.middleCClefPosition = #4
  \key f \major
  c'1
  % The standard choral tenor clef
  \set Staff.clefGlyph = #&quot;clefs.G&quot;
  \set Staff.clefPosition = #-2
  \set Staff.clefTransposition = #-7
  \set Staff.middleCPosition = #1
  \set Staff.middleCClefPosition = #1
  \key f \major
  c'1
  % A non-standard clef
  \set Staff.clefPosition = #0
  \set Staff.clefTransposition = #0
  \set Staff.middleCPosition = #-4
  \set Staff.middleCClefPosition = #-4
  \key g \major
  c'1 \break

  % The following clef changes do not preserve
  % the normal relationship between notes, key signatures
  % and clefs:

  \set Staff.clefGlyph = #&quot;clefs.F&quot;
  \set Staff.clefPosition = #2
  c'1
  \set Staff.clefGlyph = #&quot;clefs.G&quot;
  c'1
  \set Staff.clefGlyph = #&quot;clefs.C&quot;
  c'1
  \set Staff.clefTransposition = #7
  c'1
  \set Staff.clefTransposition = #0
  \set Staff.clefPosition = #0
  c'1

  % Return to the normal clef:

  \set Staff.middleCPosition = #0
  c'1
}
</pre><p>
 <a href="ef/lily-e1ff70ae.ly">
  <img align="middle"
       border="0"
       src="ef/lily-e1ff70ae.png"
       alt="[image of music]">
 </a>
</p>




<a name="tweaking-grace-layout-within-music.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Tweaking-grace-layout-within-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-tweaking-clef-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Tweaking clef properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-using-alternative-flag-styles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Using alternative flag styles &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-tweaking-grace-layout-within-music"></a>
<h2 class="unnumberedsec">Tweaking grace layout within music</h2>


<p>The layout of grace expressions can be changed throughout the music
using the functions <code>add-grace-property</code> and
<code>remove-grace-property</code>. The following example undefines the
<code>Stem</code> direction for this grace, so that stems do not always point
up, and changes the default note heads to crosses.
</p>

<pre class="verbatim">\relative c'' {
  \new Staff {
    $(remove-grace-property 'Voice 'Stem 'direction)
    $(add-grace-property 'Voice 'NoteHead 'style 'cross)
    \new Voice {
       \acciaccatura { f16 } g4
       \grace { d16 e } f4
       \appoggiatura { f,32 g a } e2
    }
  }
}
</pre><p>
 <a href="a0/lily-6a9a4ac4.ly">
  <img align="middle"
       border="0"
       src="a0/lily-6a9a4ac4.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-alternative-flag-styles.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Using-alternative-flag-styles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-tweaking-grace-layout-within-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Tweaking grace layout within music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Using ly:grob-object to access grobs with \tweak &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-using-alternative-flag-styles"></a>
<h2 class="unnumberedsec">Using alternative flag styles</h2>


<p>Alternative styles of flag on eighth and shorter notes can be displayed
by overriding the <code>stencil</code> property of <code>Flag</code>.  Valid values
are <code>modern-straight-flag</code>, <code>old-straight-flag</code> and
<code>flat-flag</code>.
</p>

<pre class="verbatim">testnotes = {
  \autoBeamOff
  c8 d16 c32 d64 \acciaccatura { c8 } d64 r4
}

\score {
  \relative c' {
    \time 2/4
    \testnotes

    \override Flag.stencil = #modern-straight-flag
    \testnotes

    \override Flag.stencil = #old-straight-flag
    \testnotes

    \override Flag.stencil = #flat-flag
    \testnotes

    \revert Flag.stencil
    \testnotes
  }
  \layout {
    indent = 0
    \context {
      \Score
      \override NonMusicalPaperColumn.line-break-permission = ##f
    }
  }
}
</pre><p>
 <a href="d7/lily-cd18e176.ly">
  <img align="middle"
       border="0"
       src="d7/lily-cd18e176.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-ly-grob-object-to-access-grobs-with--tweak.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-using-alternative-flag-styles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Using alternative flag styles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-using-postscript-to-generate-special-note-head-shapes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Using PostScript to generate special note head shapes &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak"></a>
<h2 class="unnumberedsec">Using ly:grob-object to access grobs with \tweak</h2>


<p>Some grobs can be accessed “laterally” from within another grob’s
callback. These are usually listed as “layout objects” in the “Internal
properties” section of a grob-interface. The function ly:grob-object is
used to access these grobs.
</p>

<p>Demonstrated below are some ways of accessing grobs from within a
NoteHead callback, but the technique is not limited to NoteHeads.
However, the NoteHead callback is particularly important, since it is
the implicit callback used by the <code>\tweak</code> command.
</p>

<p>The example function defined below (&quot;display-grobs&quot;) is probably not
that useful, but it demonstrates that the grobs are indeed being
accessed.
</p>

<p>Example console output:
</p>

<p><code> #Grob Accidental () #Grob Stem</code>
</p>



<pre class="verbatim">#(define (notehead-get-accidental notehead)
   ;; notehead is grob
   (ly:grob-object notehead 'accidental-grob))

#(define (notehead-get-arpeggio notehead)
   ;; notehead is grob
   (let ((notecolumn (notehead-get-notecolumn notehead)))
     (ly:grob-object notecolumn 'arpeggio)))

#(define (notehead-get-notecolumn notehead)
   ;; notehead is grob
   (ly:grob-parent notehead X))

#(define (notehead-get-stem notehead)
   ;; notehead is grob
   (let ((notecolumn (notehead-get-notecolumn notehead)))
     (ly:grob-object notecolumn 'stem)))

#(define (display-grobs notehead)
   ;; notehead is grob
   (let ((accidental (notehead-get-accidental notehead))
         (arpeggio (notehead-get-arpeggio notehead))
         (stem (notehead-get-stem notehead)))
     (format (current-error-port) &quot;~2&amp;~a\n&quot; (make-string 20 #\-))
     (for-each
      (lambda (x) (format (current-error-port) &quot;~a\n&quot; x))
      (list accidental arpeggio stem))))

\relative c' {
  %% display grobs for each note head:
  %\override NoteHead.before-line-breaking = #display-grobs
  &lt;c
  %% or just for one:
  \tweak before-line-breaking #display-grobs
  es
  g&gt;1\arpeggio
}
</pre><p>
 <a href="6d/lily-e99e057e.ly">
  <img align="middle"
       border="0"
       src="6d/lily-e99e057e.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-postscript-to-generate-special-note-head-shapes.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Using-PostScript-to-generate-special-note-head-shapes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Using ly:grob-object to access grobs with \tweak&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-using-the-_005ctweak-command-to-tweak-individual-grobs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Using the \tweak command to tweak individual grobs &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-using-postscript-to-generate-special-note-head-shapes"></a>
<h2 class="unnumberedsec">Using PostScript to generate special note head shapes</h2>


<p>When a note head with a special shape cannot easily be generated with
graphic markup, PostScript code can be used to generate the shape.
This example shows how a parallelogram-shaped note head is generated.
</p>

<pre class="verbatim">parallelogram =
  #(ly:make-stencil (list 'embedded-ps
    &quot;gsave
      currentpoint translate
      newpath
      0 0.25 moveto
      1.3125 0.75 lineto
      1.3125 -0.25 lineto
      0 -0.75 lineto
      closepath
      fill
      grestore&quot; )
    (cons 0 1.3125)
    (cons -.75 .75))

myNoteHeads = \override NoteHead.stencil = \parallelogram
normalNoteHeads = \revert NoteHead.stencil

\relative c'' {
  \myNoteHeads
  g4 d'
  \normalNoteHeads
  &lt;f, \tweak stencil \parallelogram b e&gt;4 d
}
</pre><p>
 <a href="1e/lily-362946f3.ly">
  <img align="middle"
       border="0"
       src="1e/lily-362946f3.png"
       alt="[image of music]">
 </a>
</p>




<a name="using-the--tweak-command-to-tweak-individual-grobs.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Using-the-_005ctweak-command-to-tweak-individual-grobs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-using-postscript-to-generate-special-note-head-shapes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Using PostScript to generate special note head shapes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-vertically-aligned-dynamics-and-textscripts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Vertically aligned dynamics and textscripts &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-using-the-_005ctweak-command-to-tweak-individual-grobs"></a>
<h2 class="unnumberedsec">Using the \tweak command to tweak individual grobs</h2>


<p>With the <code>\tweak</code> command, every grob can be tuned directly.
Here are some examples of available tweaks.
</p>

<pre class="verbatim">\relative c' {
  \time 2/4
  \set fingeringOrientations = #'(right)
  &lt;
    \tweak font-size #3 c
    \tweak color #red d-\tweak font-size #8 -4
    \tweak style #'cross g
    \tweak duration-log #2 a
  &gt;2
}
</pre><p>
 <a href="dd/lily-9ca94e6c.ly">
  <img align="middle"
       border="0"
       src="dd/lily-9ca94e6c.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-aligned-dynamics-and-textscripts.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Vertically-aligned-dynamics-and-textscripts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-using-the-_005ctweak-command-to-tweak-individual-grobs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Using the \tweak command to tweak individual grobs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-vertically-aligning-ossias-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Vertically aligning ossias and lyrics &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-vertically-aligned-dynamics-and-textscripts"></a>
<h2 class="unnumberedsec">Vertically aligned dynamics and textscripts</h2>


<p>All <code>DynamicLineSpanner</code> objects (hairpins and dynamic texts) are
placed with their reference line at least <code>'staff-padding</code> from
the staff, unless other notation forces them to be farther. Setting
<code>'staff-padding</code> to a sufficiently large value aligns the dynamics.
</p>
<p>The same idea, together with <code>\textLengthOn</code>, is used to align
the text scripts along their baseline.
</p>

<pre class="verbatim">music = \relative c' {
  a'2\p b\f
  e4\p f\f\&gt; g, b\p
  c2^\markup { \huge gorgeous } c^\markup { \huge fantastic }
}

{
  \music
  \break
  \override DynamicLineSpanner.staff-padding = #3
  \textLengthOn
  \override TextScript.staff-padding = #1
  \music
}
</pre><p>
 <a href="f8/lily-e40ec56a.ly">
  <img align="middle"
       border="0"
       src="f8/lily-e40ec56a.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-aligning-ossias-and-lyrics.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Vertically-aligning-ossias-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-vertically-aligned-dynamics-and-textscripts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Vertically aligned dynamics and textscripts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#tweaks-and-overrides-vertically-centering-paired-figured-bass-extenders" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaks and overrides: Vertically centering paired figured bass extenders &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-vertically-aligning-ossias-and-lyrics"></a>
<h2 class="unnumberedsec">Vertically aligning ossias and lyrics</h2>


<p>This snippet demonstrates the use of the context properties
<code>alignBelowContext</code> and <code>alignAboveContext</code> to control the
positioning of lyrics and ossias.
</p>

<pre class="verbatim">\paper {
  ragged-right = ##t
}

\relative c' &lt;&lt;
  \new Staff = &quot;1&quot; { c4 c s2 }
  \new Staff = &quot;2&quot; { c4 c s2 }
  \new Staff = &quot;3&quot; { c4 c s2 }
  { \skip 2
    &lt;&lt;
      \lyrics {
        \set alignBelowContext = #&quot;1&quot;
        lyrics4 below
      }
      \new Staff \with {
        alignAboveContext = #&quot;3&quot;
        fontSize = #-2
        \override StaffSymbol.staff-space = #(magstep -2)
        \remove &quot;Time_signature_engraver&quot;
      } {
        \tuplet 6/4 {
          \override TextScript.padding = #3
          c8[^&quot;ossia above&quot; d e d e f]
        }
      }
    &gt;&gt;
  }
&gt;&gt;
</pre><p>
 <a href="c9/lily-f55b8b69.ly">
  <img align="middle"
       border="0"
       src="c9/lily-f55b8b69.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-centering-paired-figured-bass-extenders.ly"></a>

<hr size="6">
<a name="Tweaks-and-overrides_003a-Vertically-centering-paired-figured-bass-extenders"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#paper-and-layout" title="Next chapter">&nbsp;Paper and layout &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-vertically-aligning-ossias-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Vertically aligning ossias and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#tweaks-and-overrides" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout &gt; </a>]</td></tr></table>
<a name="tweaks-and-overrides-vertically-centering-paired-figured-bass-extenders"></a>
<h2 class="unnumberedsec">Vertically centering paired figured bass extenders</h2>


<p>Where figured bass extender lines are being used by setting
<code>useBassFigureExtenders</code> to true, pairs of congruent figured bass
extender lines are vertically centered if
<code>figuredBassCenterContinuations</code> is set to true.
</p>

<pre class="verbatim">&lt;&lt;
  \relative c' {
    c8 c b b a a c16 c b b
    c8 c b b a a c16 c b b
    c8 c b b a a c c b b
  }
  \figures {
    \set useBassFigureExtenders = ##t
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 r
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 &lt;4 3+&gt;16 r
    \set figuredBassCenterContinuations = ##t
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 r
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 &lt;4 3+&gt;16 r
    \set figuredBassCenterContinuations = ##f
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 r
    &lt;6+ 4 3&gt;4 &lt;6 4 3&gt;8 &lt;4 3+&gt;8
  }
&gt;&gt;
</pre><p>
 <a href="9f/lily-79d0e669.ly">
  <img align="middle"
       border="0"
       src="9f/lily-79d0e669.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Paper-and-layout"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#tweaks-and-overrides" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaks and overrides&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#tweaks-and-overrides-vertically-centering-paired-figured-bass-extenders" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaks and overrides: Vertically centering paired figured bass extenders&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-aligning-and-centering-instrument-names" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Aligning and centering instrument names &gt; </a>]</td></tr></table>
<a name="paper-and-layout"></a>
<h1 class="unnumbered">Paper and layout</h1>

<a name="index-Spacing-issues"></a>
<p><a href="notation-big-page.html#spacing-issues">Spacing issues</a>
</p>

<a name="aligning-and-centering-instrument-names.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Aligning-and-centering-instrument-names"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-arranging-separate-lyrics-on-a-single-line" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Arranging separate lyrics on a single line &gt; </a>]</td></tr></table>
<a name="paper-and-layout-aligning-and-centering-instrument-names"></a>
<h2 class="unnumberedsec">Aligning and centering instrument names</h2>


<p>The horizontal alignment of instrument names is tweaked by changing the
<code>Staff.InstrumentName #'self-alignment-X</code> property. The
<code>\layout</code> variables <code>indent</code> and <code>short-indent</code> define
the space in which the instrument names are aligned before the first
and the following systems, respectively.
</p>

<pre class="verbatim">\score {
  \new StaffGroup &lt;&lt;

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #LEFT
      instrumentName = \markup \left-column {
        &quot;Left aligned&quot;
        &quot;instrument name&quot;
        }
        shortInstrumentName = &quot;Left&quot;
      }

      {  c''1 \break c''1 }

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #CENTER
      instrumentName = \markup \center-column {
        Centered
        &quot;instrument name&quot;
        }
      shortInstrumentName = &quot;Centered&quot;
    }

    { g'1 g'1}

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #RIGHT
      instrumentName = \markup \right-column {
        &quot;Right aligned&quot;
        &quot;instrument name&quot;
      }
      shortInstrumentName = &quot;Right&quot;
    }

    { e'1 e'1 }

  &gt;&gt;

  \layout {
    ragged-right = ##t
    indent = 4\cm
    short-indent = 2\cm
  }
}
</pre><p>
 <a href="16/lily-2e2f869f.ly">
  <img align="middle"
       border="0"
       src="16/lily-2e2f869f.png"
       alt="[image of music]">
 </a>
</p>




<a name="arranging-separate-lyrics-on-a-single-line.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Arranging-separate-lyrics-on-a-single-line"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-aligning-and-centering-instrument-names" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Aligning and centering instrument names&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-book-parts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Book parts &gt; </a>]</td></tr></table>
<a name="paper-and-layout-arranging-separate-lyrics-on-a-single-line"></a>
<h2 class="unnumberedsec">Arranging separate lyrics on a single line</h2>


<p>Sometimes you may want to put lyrics for different performers on a
single line: where there is rapidly alternating text, for example.
This snippet shows how this can be done with <code>\override
VerticalAxisGroup.nonstaff-nonstaff-spacing.minimum-distance = ##f</code>.
</p>

<pre class="verbatim">\layout {
  \context {
    \Lyrics
    \override VerticalAxisGroup.nonstaff-nonstaff-spacing.minimum-distance = ##f
  }
}

aliceSings = \markup { \smallCaps &quot;Alice&quot; }
eveSings = \markup { \smallCaps &quot;Eve&quot; }

&lt;&lt;
  \new Staff &lt;&lt;
    \new Voice = &quot;alice&quot; {
      f'4^\aliceSings g' r2 |
      s1 |
      f'4^\aliceSings g' r2 |
      s1 | \break
      % ...

      \voiceOne
      s2 a'8^\aliceSings a' b'4 |
      \oneVoice
      g'1
    }
    \new Voice = &quot;eve&quot; {
      s1 |
      a'2^\eveSings g' |
      s1 |
      a'2^\eveSings g'
      % ...

      \voiceTwo
      f'4^\eveSings a'8 g' f'4 e' |
      \oneVoice
      s1
    }
  &gt;&gt;
  \new Lyrics \lyricsto &quot;alice&quot; {
    may -- be
    sec -- ond
    % ...
    Shut up, you fool!
  }
  \new Lyrics \lyricsto &quot;eve&quot; {
    that the
    words are
    % ...
    …and then I was like–
  }
&gt;&gt;
</pre><p>
 <a href="e7/lily-58e32d9c.ly">
  <img align="middle"
       border="0"
       src="e7/lily-58e32d9c.png"
       alt="[image of music]">
 </a>
</p>




<a name="book-parts.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Book-parts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-arranging-separate-lyrics-on-a-single-line" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Arranging separate lyrics on a single line&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-changing-the-staff-size" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Changing the staff size &gt; </a>]</td></tr></table>
<a name="paper-and-layout-book-parts"></a>
<h2 class="unnumberedsec">Book parts</h2>


<p><code>\bookpart</code> can be used to split a book into several parts. Each
part last page can be affected by <code>ragged-last-bottom</code>. Header and
footer markups can detect a part last page, and make the difference
with the book last page.
</p>

<pre class="verbatim">#(set-default-paper-size &quot;a6&quot;)

\book {
  %% book paper, which is inherited by all children bookparts
  \paper {
    ragged-last-bottom = ##t
    %% Page footer: add a different part-tagline at part last page
    oddFooterMarkup = \markup {
      \column {
        \fill-line {
          %% Copyright header field only on book first page.
          \on-the-fly #first-page \fromproperty #'header:copyright
        }
        \fill-line {
          %% Part tagline header field only on each part last page.
          \on-the-fly #part-last-page \fromproperty #'header:parttagline
        }
        \fill-line {
          %% Tagline header field only on book last page.
          \on-the-fly #last-page \fromproperty #'header:tagline
        }
      }
    }
  }

  %% book header, which is inherited by the first bookpart
  \header {
    title = &quot;Book title&quot;
    copyright = &quot;Copyright line on book first page&quot;
    parttagline = &quot;Part tagline&quot;
    tagline = &quot;Book tagline&quot;
  }

  \bookpart {
    %% a different page breaking function may be used on each part
    \paper { page-breaking = #ly:minimal-breaking }
    \header { subtitle = &quot;First part&quot; }
    \markup { The first book part }
    \markup { a page break }
    \pageBreak
    \markup { first part last page }
    \markup \wordwrap { with ragged-last-bottom (see the space below this text) }
  }

  \bookpart {
    \header { subtitle = &quot;Second part&quot; }
    { c'4 }
  }

}
</pre><p>
 <a href="68/lily-9f5ff26f.ly">
  <img align="middle"
       border="0"
       src="68/lily-9f5ff26f.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-staff-size.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Changing-the-staff-size"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-book-parts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Book parts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-clip-systems" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Clip systems &gt; </a>]</td></tr></table>
<a name="paper-and-layout-changing-the-staff-size"></a>
<h2 class="unnumberedsec">Changing the staff size</h2>


<p>Though the simplest way to resize staves is to use
<code>#(set-global-staff-size xx)</code>, an individual staff&rsquo;s size can be
changed by scaling the properties <code>'staff-space</code> and
<code>fontSize</code>.
</p>

<pre class="verbatim">&lt;&lt;
  \new Staff {
    \relative c'' {
      \dynamicDown
      c8\ff c c c c c c c
    }
  }
  \new Staff \with {
    fontSize = #-3
    \override StaffSymbol.staff-space = #(magstep -3)
  } {
    \clef bass
    c8 c c c c\f c c c
  }
&gt;&gt;
</pre><p>
 <a href="28/lily-bdd5f2f9.ly">
  <img align="middle"
       border="0"
       src="28/lily-bdd5f2f9.png"
       alt="[image of music]">
 </a>
</p>




<a name="clip-systems.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Clip-systems"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-changing-the-staff-size" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Changing the staff size&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-creating-blank-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Creating blank staves &gt; </a>]</td></tr></table>
<a name="paper-and-layout-clip-systems"></a>
<h2 class="unnumberedsec">Clip systems</h2>


<p>This code shows how to clip (extract) snippets from a full score.
</p>
<p>This file needs to be run separately with <code>-dclip-systems</code>; the
snippets page may not adequately show the results.
</p>
<p>The result will be files named
&lsquo;<samp>base-from-start-to-end[-count].eps</samp>&rsquo;.
</p>

<p>If system starts and ends are included, they include extents of the
System grob, e.g., instrument names.
</p>

<p>Grace notes at the end point of the region are not included.
</p>

<p>Regions can span multiple systems.  In this case, multiple EPS files
are generated.
</p>

<pre class="verbatim">    c1
    d1
    \grace c16 e1
    \key d \major
    f1 \break
    \clef bass
    g,1
    fis1
  }
}

\book {
  \score {
    \origScore
    \layout {
      % Each clip-region is a (START . END) pair
      % where both are rhythmic-locations.

      % (make-rhythmic-locations BAR-NUMBER NUM DEN)
      % means NUM/DEN whole-notes into bar numbered BAR-NUMBER

      clip-regions = #(list
      (cons
       (make-rhythmic-location 2 0 1)
       (make-rhythmic-location 4 0 1))

      (cons
       (make-rhythmic-location 0 0 1)
       (make-rhythmic-location 4 0 1))

      (cons
       (make-rhythmic-location 0 0 1)
       (make-rhythmic-location 6 0 1))
      )
    }
  }
}

#(ly:set-option 'clip-systems #f)
#(define output-suffix #f)

\book {
  \score { \origScore }
  \markup { \bold \fontsize #6 clips }
  \score {
    \lyrics {
      \markup { from-2.0.1-to-4.0.1-clip.eps }
      \markup {
        \epsfile #X #30.0 #(format #f &quot;~a-1-from-2.0.1-to-4.0.1-clip.eps&quot;
                            (ly:parser-output-name)) }
    }
  }
}
</pre><p>
 <a href="f3/lily-a17685c0.ly">
  <img align="middle"
       border="0"
       src="f3/lily-a17685c0.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-blank-staves.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Creating-blank-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-clip-systems" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Clip systems&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-demonstrating-all-headers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Demonstrating all headers &gt; </a>]</td></tr></table>
<a name="paper-and-layout-creating-blank-staves"></a>
<h2 class="unnumberedsec">Creating blank staves</h2>


<p>To create blank staves, generate empty measures then remove the
<code>Bar_number_engraver</code> from the <code>Score</code> context, and the
<code>Time_signature_engraver</code>, <code>Clef_engraver</code> and
<code>Bar_engraver</code> from the <code>Staff</code> context.
</p>

<pre class="verbatim">#(set-global-staff-size 20)

\score {
  {
    \repeat unfold 12 { s1 \break }
  }
  \layout {
    indent = 0\in
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Clef_engraver&quot;
      \remove &quot;Bar_engraver&quot;
    }
    \context {
      \Score
      \remove &quot;Bar_number_engraver&quot;
    }
  }
}

% uncomment these lines for &quot;letter&quot; size
%{
\paper {
  #(set-paper-size &quot;letter&quot;)
  ragged-last-bottom = ##f
  line-width = 7.5\in
  left-margin = 0.5\in
  bottom-margin = 0.25\in
  top-margin = 0.25\in
}
%}

% uncomment these lines for &quot;A4&quot; size
%{
\paper {
  #(set-paper-size &quot;a4&quot;)
  ragged-last-bottom = ##f
  line-width = 180
  left-margin = 15
  bottom-margin = 10
  top-margin = 10
}
%}
</pre><p>
 <a href="85/lily-d5d70a45.ly">
  <img align="middle"
       border="0"
       src="85/lily-d5d70a45.png"
       alt="[image of music]">
 </a>
</p>




<a name="demonstrating-all-headers.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Demonstrating-all-headers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-creating-blank-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Creating blank staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-setting-system-separators" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Setting system separators &gt; </a>]</td></tr></table>
<a name="paper-and-layout-demonstrating-all-headers"></a>
<h2 class="unnumberedsec">Demonstrating all headers</h2>

<p>All header fields with special meanings.
</p><pre class="verbatim">\header {
  copyright = &quot;copyright&quot;
  title = &quot;title&quot;
  subtitle = &quot;subtitle&quot;
  composer = &quot;composer&quot;
  arranger = &quot;arranger&quot;
  instrument = &quot;instrument&quot;
  metre = &quot;metre&quot;
  opus = &quot;opus&quot;
  piece = &quot;piece&quot;
  poet = &quot;poet&quot;
  texidoc = &quot;All header fields with special meanings.&quot;
  copyright = &quot;public domain&quot;
  enteredby = &quot;jcn&quot;
  source = &quot;urtext&quot;
}

\layout {
  ragged-right = ##f
}

\score {
  \relative c'' { c1 | c | c | c }
}

\score {
   \relative c'' { c1 | c | c | c }
   \header {
     title = &quot;localtitle&quot;
     subtitle = &quot;localsubtitle&quot;
     composer = &quot;localcomposer&quot;
     arranger = &quot;localarranger&quot;
     instrument = &quot;localinstrument&quot;
     metre = &quot;localmetre&quot;
     opus = &quot;localopus&quot;
     piece = &quot;localpiece&quot;
     poet = &quot;localpoet&quot;
     copyright = &quot;localcopyright&quot;
   }
}
</pre><p>
 <a href="0f/lily-530031e4.ly">
  <img align="middle"
       border="0"
       src="0f/lily-530031e4.png"
       alt="[image of music]">
 </a>
</p>




<a name="setting-system-separators.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Setting-system-separators"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-demonstrating-all-headers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Demonstrating all headers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-table-of-contents" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Table of contents &gt; </a>]</td></tr></table>
<a name="paper-and-layout-setting-system-separators"></a>
<h2 class="unnumberedsec">Setting system separators</h2>


<p>System separators can be inserted between systems.  Any markup can be
used, but <code>\slashSeparator</code> has been provided as a sensible
default.
</p>

<pre class="verbatim">\paper {
  system-separator-markup = \slashSeparator
  line-width = 120
}

notes = \relative c' {
  c1 | c \break
  c1 | c \break
  c1 | c
}

\book {
  \score {
    \new GrandStaff &lt;&lt;
      \new Staff \notes
      \new Staff \notes
    &gt;&gt;
  }
}
</pre><p>
 <a href="d5/lily-9e0995da.ly">
  <img align="middle"
       border="0"
       src="d5/lily-9e0995da.png"
       alt="[image of music]">
 </a>
</p>




<a name="table-of-contents.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Table-of-contents"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-setting-system-separators" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Setting system separators&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#paper-and-layout-vertical-aligned-staffgroups-without-connecting-systemstartbar" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Paper and layout: Vertical aligned StaffGroups without connecting SystemStartBar &gt; </a>]</td></tr></table>
<a name="paper-and-layout-table-of-contents"></a>
<h2 class="unnumberedsec">Table of contents</h2>


<p>A table of contents is included using <code>\markuplines
\table-of-contents</code>.  The TOC items are added with the
<code>\tocItem</code> command.
</p>

<pre class="verbatim">#(set-default-paper-size &quot;a6&quot;)

\book {
  \markuplist \table-of-contents
  \pageBreak
  \tocItem \markup { The first score }
  \score {
    {
      c'1 \pageBreak
      \mark &quot;A&quot; \tocItem \markup { Mark A }
      d'1
    }
  }
  \pageBreak
  \tocItem \markup { The second score }
  \score {
    { e'1 }
    \header { piece = &quot;Second score&quot; }
  }
}
</pre><p>
 <a href="c8/lily-17922368.ly">
  <img align="middle"
       border="0"
       src="c8/lily-17922368.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertical-aligned-staffgroups-without-connecting-systemstartbar.ly"></a>

<hr size="6">
<a name="Paper-and-layout_003a-Vertical-aligned-StaffGroups-without-connecting-SystemStartBar"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#titles" title="Next chapter">&nbsp;Titles &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-table-of-contents" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Table of contents&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#paper-and-layout" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Paper and layout&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#titles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Titles &gt; </a>]</td></tr></table>
<a name="paper-and-layout-vertical-aligned-staffgroups-without-connecting-systemstartbar"></a>
<h2 class="unnumberedsec">Vertical aligned StaffGroups without connecting SystemStartBar</h2>


<p>This snippet shows how to achieve vertically aligned StaffGroups with a
SystemStartBar for each StaffGroup, but without connecting them.
</p>

<pre class="verbatim">% by Thomas Morley

#(set-global-staff-size 18)

\paper {
  indent = 0
  ragged-right = ##f
  print-all-headers = ##t
}

\layout {
  \context {
    \Staff
    \consists &quot;Mark_engraver&quot;
    \override RehearsalMark.self-alignment-X = #LEFT
  }
  \context {
    \StaffGroup
    systemStartDelimiterHierarchy =
      #'(SystemStartBrace (SystemStartBracket a b))
  }
  \context {
    \Score
    \override SystemStartBrace.style = #'bar-line
    \omit SystemStartBar
    \override SystemStartBrace.padding = #-0.1
    \override SystemStartBrace.thickness = #1.6
    \remove &quot;Mark_engraver&quot;
    \override StaffGrouper.staffgroup-staff-spacing.basic-distance = #15
  }
}

%%%% EXAMPLE

txt =
\lyricmode {
  Wer4 nur den lie -- ben Gott läßt wal2 -- ten4
  und4 hof -- fet auf ihn al -- le Zeit2.
}

% First StaffGroup &quot;exercise&quot;

eI =
\relative c' {
        \mark \markup {
                \bold Teacher:
                This is a simple setting of the choral. Please improve it.
                }
        \key a \minor
        \time 4/4
        \voiceOne

        \partial 4
        e4
        a b c b
        a b gis2
        e4\fermata g! g f
        e a a gis
        a2.\fermata
        \bar &quot;:|.&quot;
}

eII =
\relative c' {
        \key a \minor
        \time 4/4
        \voiceTwo
        \partial 4
        c4
        e e e gis
        a f e2
        b4 b d d
        c c d d
        c2.
        \bar &quot;:|.&quot;
}

eIII =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceOne

        \partial 4
        a4
        c b a b
        c d b2
        gis4 g g b
        c a f e
        e2.
}

eIV =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceTwo

        \partial 4
        a,4
        a' gis a e
        a, d e2
        e,4\fermata e' b g
        c f d e
        a,2.\fermata
        \bar &quot;:|.&quot;
}

exercise =
\new StaffGroup = &quot;exercise&quot;
&lt;&lt;

  \new Staff
    &lt;&lt;
      \new Voice \eI
      \new Voice \eII
    &gt;&gt;

  \new Lyrics \txt

  \new Staff
    &lt;&lt;
      \new Voice \eIII
      \new Voice \eIV
    &gt;&gt;
&gt;&gt;

% Second StaffGRoup &quot;simple Bach&quot;

sbI =
\relative c' {
        \mark \markup { \bold&quot; Pupil:&quot; Here's my version! }
        \key a \minor
        \time 4/4
        \voiceOne

        \partial 4
        e4
        a b c b
        a b gis2
        e4\fermata g! g f
        e a a gis
        a2.\fermata
        \bar &quot;:|.&quot;
}

sbII =
\relative c' {
        \key a \minor
        \time 4/4
        \voiceTwo
        \partial 4
        c8 d
        e4 e e8 f g4
        f f e2
        b4 b8 c d4 d
        e8 d c4 b8 c d4
        c2.
        \bar &quot;:|.&quot;
}

sbIII =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceOne

        \partial 4
        a8 b
        c4 b a b8 c
        d4 d8 c b2
        gis4 g g8 a b4
        b a8 g f4 e
        e2.
}

sbIV =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceTwo

        \partial 4
        a,4
        a' gis a e
        f8 e d4 e2
        e,4\fermata e' b a8 g
        c4 f8 e d4 e
        a,2.\fermata
        \bar &quot;:|.&quot;
}

simpleBach =
\new StaffGroup = &quot;simple Bach&quot;
&lt;&lt;

  \new Staff
    &lt;&lt;
      \new Voice \sbI
      \new Voice \sbII
    &gt;&gt;

  \new Lyrics \txt

  \new Staff
    &lt;&lt;
      \new Voice \sbIII
      \new Voice \sbIV
    &gt;&gt;
&gt;&gt;

% Third StaffGroup &quot;chromatic Bach&quot;

cbI =
\relative c' {
        \mark \markup {
          \bold &quot;Teacher:&quot;
          \column {
            &quot;Well, you simply copied and transposed a version of J.S.Bach.&quot;
            &quot;Do you know this one?&quot;
          }
        }
        \key a \minor
        \time 4/4
        \voiceOne

        \partial 4
        e4
        a b c b
        a b gis4. fis8
        e4\fermata g! g f
        e a a8 b gis4
        a2.\fermata
        \bar &quot;:|.&quot;
}

cbII =
\relative c' {
        \key a \minor
        \time 4/4
        \voiceTwo
        \partial 4
        c8 d
        e4 e e8 fis gis4
        a8 g! f!4 e2
        b4 e e d
        d8[ cis] d dis e fis e4
        e2.
        \bar &quot;:|.&quot;
}

cbIII =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceOne

        \partial 4
        a8 b
        c[ b] a gis8 a4 d,
        e8[ e'] d c b4. a8
        gis4 b c d8 c
        b[ a] a b c b b c16 d
        c2.
}

cbIV =
\relative c' {
        \key a \minor
        \time 4/4
        \clef bass
        \voiceTwo

        \partial 4
        a4
        c, e a, b
        c d e2
        e4\fermata e a b8 c
        gis[ g] fis f e dis e4
        a,2.\fermata
        \bar &quot;:|.&quot;
}

chromaticBach =
\new StaffGroup = &quot;chromatic Bach&quot;
&lt;&lt;

  \new Staff
    &lt;&lt;
      \new Voice \cbI
      \new Voice \cbII
    &gt;&gt;

  \new Lyrics \txt

  \new Staff
    &lt;&lt;
      \new Voice \cbIII
      \new Voice \cbIV
    &gt;&gt;
&gt;&gt;


% Score

\score {
        &lt;&lt;
        \exercise
        \simpleBach
        \chromaticBach
        &gt;&gt;
        \header {
                title = \markup
                           \column {
                             \combine \null \vspace #1
                             &quot;Exercise: Improve the given choral&quot;
                             &quot; &quot;
                            }
        }
        \layout {
                \context {
                        \Lyrics
                        \override LyricText.X-offset = #-1
                }
        }
}
</pre><p>
 <a href="81/lily-bdc2a9b0.ly">
  <img align="middle"
       border="0"
       src="81/lily-bdc2a9b0.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Titles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#paper-and-layout" title="Beginning of this chapter or previous chapter"> &lt;&lt; Paper and layout&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#spacing" title="Next chapter">&nbsp;Spacing &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#paper-and-layout-vertical-aligned-staffgroups-without-connecting-systemstartbar" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Paper and layout: Vertical aligned StaffGroups without connecting SystemStartBar&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#titles-adding-the-current-date-to-a-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Titles: Adding the current date to a score &gt; </a>]</td></tr></table>
<a name="titles"></a>
<h1 class="unnumbered">Titles</h1>

<a name="index-Titles-and-headers"></a>
<p><a href="notation-big-page.html#titles-and-headers">Titles and headers</a>
</p>

<a name="adding-the-current-date-to-a-score.ly"></a>

<hr size="6">
<a name="Titles_003a-Adding-the-current-date-to-a-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#titles" title="Beginning of this chapter or previous chapter"> &lt;&lt; Titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#spacing" title="Next chapter">&nbsp;Spacing &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#titles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#titles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Titles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#titles-aligning-and-centering-instrument-names" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Titles: Aligning and centering instrument names &gt; </a>]</td></tr></table>
<a name="titles-adding-the-current-date-to-a-score"></a>
<h2 class="unnumberedsec">Adding the current date to a score</h2>


<p>With a little Scheme code, the current date can easily be added to a
score.
</p>

<pre class="verbatim">% first, define a variable to hold the formatted date:
date = #(strftime &quot;%d-%m-%Y&quot; (localtime (current-time)))

% use it in the title block:
\header {
  title = &quot;Including the date!&quot;
  subtitle = \date
}

\score {
  \relative c'' {
    c4 c c c
  }
}
% and use it in a \markup block:
\markup {
  \date
}
</pre><p>
 <a href="f0/lily-ea2a4b72.ly">
  <img align="middle"
       border="0"
       src="f0/lily-ea2a4b72.png"
       alt="[image of music]">
 </a>
</p>




<a name="aligning-and-centering-instrument-names.ly"></a>

<hr size="6">
<a name="Titles_003a-Aligning-and-centering-instrument-names"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#titles" title="Beginning of this chapter or previous chapter"> &lt;&lt; Titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#spacing" title="Next chapter">&nbsp;Spacing &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#titles-adding-the-current-date-to-a-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Titles: Adding the current date to a score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#titles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Titles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#titles-demonstrating-all-headers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Titles: Demonstrating all headers &gt; </a>]</td></tr></table>
<a name="titles-aligning-and-centering-instrument-names"></a>
<h2 class="unnumberedsec">Aligning and centering instrument names</h2>


<p>The horizontal alignment of instrument names is tweaked by changing the
<code>Staff.InstrumentName #'self-alignment-X</code> property. The
<code>\layout</code> variables <code>indent</code> and <code>short-indent</code> define
the space in which the instrument names are aligned before the first
and the following systems, respectively.
</p>

<pre class="verbatim">\score {
  \new StaffGroup &lt;&lt;

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #LEFT
      instrumentName = \markup \left-column {
        &quot;Left aligned&quot;
        &quot;instrument name&quot;
        }
        shortInstrumentName = &quot;Left&quot;
      }

      {  c''1 \break c''1 }

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #CENTER
      instrumentName = \markup \center-column {
        Centered
        &quot;instrument name&quot;
        }
      shortInstrumentName = &quot;Centered&quot;
    }

    { g'1 g'1}

    \new Staff \with {
      \override InstrumentName.self-alignment-X = #RIGHT
      instrumentName = \markup \right-column {
        &quot;Right aligned&quot;
        &quot;instrument name&quot;
      }
      shortInstrumentName = &quot;Right&quot;
    }

    { e'1 e'1 }

  &gt;&gt;

  \layout {
    ragged-right = ##t
    indent = 4\cm
    short-indent = 2\cm
  }
}
</pre><p>
 <a href="16/lily-2e2f869f.ly">
  <img align="middle"
       border="0"
       src="16/lily-2e2f869f.png"
       alt="[image of music]">
 </a>
</p>




<a name="demonstrating-all-headers.ly"></a>

<hr size="6">
<a name="Titles_003a-Demonstrating-all-headers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#titles" title="Beginning of this chapter or previous chapter"> &lt;&lt; Titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#spacing" title="Next chapter">&nbsp;Spacing &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#titles-aligning-and-centering-instrument-names" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Titles: Aligning and centering instrument names&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#titles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Titles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#titles-outputting-the-version-number" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Titles: Outputting the version number &gt; </a>]</td></tr></table>
<a name="titles-demonstrating-all-headers"></a>
<h2 class="unnumberedsec">Demonstrating all headers</h2>

<p>All header fields with special meanings.
</p><pre class="verbatim">\header {
  copyright = &quot;copyright&quot;
  title = &quot;title&quot;
  subtitle = &quot;subtitle&quot;
  composer = &quot;composer&quot;
  arranger = &quot;arranger&quot;
  instrument = &quot;instrument&quot;
  metre = &quot;metre&quot;
  opus = &quot;opus&quot;
  piece = &quot;piece&quot;
  poet = &quot;poet&quot;
  texidoc = &quot;All header fields with special meanings.&quot;
  copyright = &quot;public domain&quot;
  enteredby = &quot;jcn&quot;
  source = &quot;urtext&quot;
}

\layout {
  ragged-right = ##f
}

\score {
  \relative c'' { c1 | c | c | c }
}

\score {
   \relative c'' { c1 | c | c | c }
   \header {
     title = &quot;localtitle&quot;
     subtitle = &quot;localsubtitle&quot;
     composer = &quot;localcomposer&quot;
     arranger = &quot;localarranger&quot;
     instrument = &quot;localinstrument&quot;
     metre = &quot;localmetre&quot;
     opus = &quot;localopus&quot;
     piece = &quot;localpiece&quot;
     poet = &quot;localpoet&quot;
     copyright = &quot;localcopyright&quot;
   }
}
</pre><p>
 <a href="0f/lily-530031e4.ly">
  <img align="middle"
       border="0"
       src="0f/lily-530031e4.png"
       alt="[image of music]">
 </a>
</p>




<a name="outputting-the-version-number.ly"></a>

<hr size="6">
<a name="Titles_003a-Outputting-the-version-number"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#titles" title="Beginning of this chapter or previous chapter"> &lt;&lt; Titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#spacing" title="Next chapter">&nbsp;Spacing &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#titles-demonstrating-all-headers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Titles: Demonstrating all headers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#titles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Titles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing &gt; </a>]</td></tr></table>
<a name="titles-outputting-the-version-number"></a>
<h2 class="unnumberedsec">Outputting the version number</h2>


<p>By putting the output of
    <code>lilypond-version</code> into a lyric, it is possible to print the
    version number of LilyPond in a score, or in a document generated
    with <code>lilypond-book</code>.  Another possibility is to append the
    version number to the doc-string, in this manner:
</p>

<pre class="verbatim">\score {
  \new Lyrics {
    \override Score.RehearsalMark.self-alignment-X = #LEFT
    \mark #(string-append &quot;Processed with LilyPond version &quot; (lilypond-version))
    s2
  }
}
</pre><p>
 <a href="68/lily-8bf445ae.ly">
  <img align="middle"
       border="0"
       src="68/lily-8bf445ae.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="Spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#titles" title="Beginning of this chapter or previous chapter"> &lt;&lt; Titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#titles-outputting-the-version-number" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Titles: Outputting the version number&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-adjusting-lyrics-vertical-spacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing: Adjusting lyrics vertical spacing &gt; </a>]</td></tr></table>
<a name="spacing"></a>
<h1 class="unnumbered">Spacing</h1>

<a name="index-Spacing-issues-1"></a>
<p><a href="notation-big-page.html#spacing-issues">Spacing issues</a>
</p>

<a name="adjusting-lyrics-vertical-spacing.ly"></a>

<hr size="6">
<a name="Spacing_003a-Adjusting-lyrics-vertical-spacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#spacing" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-allowing-fingerings-to-be-printed-inside-the-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing: Allowing fingerings to be printed inside the staff &gt; </a>]</td></tr></table>
<a name="spacing-adjusting-lyrics-vertical-spacing"></a>
<h2 class="unnumberedsec">Adjusting lyrics vertical spacing</h2>


<p>This snippet shows how to bring the lyrics line closer to the staff.
</p>

<pre class="verbatim">% Default layout:
&lt;&lt;
  \new Staff \new Voice = melody \relative c' {
    c4 d e f
    g4 f e d
    c1
  }
  \new Lyrics \lyricsto melody { aa aa aa aa aa aa aa aa aa }

  \new Staff {
    \new Voice = melody \relative c' {
      c4 d e f
      g4 f e d
      c1
    }
  }
  % Reducing the minimum space below the staff and above the lyrics:
  \new Lyrics \with {
    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing =
      #'((basic-distance . 1))
  }
  \lyricsto melody { aa aa aa aa aa aa aa aa aa }
&gt;&gt;
</pre><p>
 <a href="8e/lily-6a2f611e.ly">
  <img align="middle"
       border="0"
       src="8e/lily-6a2f611e.png"
       alt="[image of music]">
 </a>
</p>




<a name="allowing-fingerings-to-be-printed-inside-the-staff.ly"></a>

<hr size="6">
<a name="Spacing_003a-Allowing-fingerings-to-be-printed-inside-the-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-adjusting-lyrics-vertical-spacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing: Adjusting lyrics vertical spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#spacing" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-page-label" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing: Page label &gt; </a>]</td></tr></table>
<a name="spacing-allowing-fingerings-to-be-printed-inside-the-staff"></a>
<h2 class="unnumberedsec">Allowing fingerings to be printed inside the staff</h2>


<p>By default, vertically oriented fingerings are positioned outside the
staff.  However, this behavior can be canceled. Note: you must use a
chord construct &lt;&gt;, even if it is only a single note.
</p>

<pre class="verbatim">\relative c' {
  &lt;c-1 e-2 g-3 b-5&gt;2
  \override Fingering.staff-padding = #'()
  &lt;c-1 e-2 g-3 b-5&gt;4 &lt;g'-0&gt;
}
</pre><p>
 <a href="15/lily-012deba9.ly">
  <img align="middle"
       border="0"
       src="15/lily-012deba9.png"
       alt="[image of music]">
 </a>
</p>




<a name="page-label.ly"></a>

<hr size="6">
<a name="Spacing_003a-Page-label"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-allowing-fingerings-to-be-printed-inside-the-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing: Allowing fingerings to be printed inside the staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#spacing" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-proportional-strict-notespacing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing: Proportional strict notespacing &gt; </a>]</td></tr></table>
<a name="spacing-page-label"></a>
<h2 class="unnumberedsec">Page label</h2>


<p>Page labels may be placed inside music or at top-level, and referred to
in markups.
</p>

<pre class="verbatim">#(set-default-paper-size &quot;a6&quot;)

#(define-markup-command (toc-line layout props label text)
  (symbol? markup?)
  (interpret-markup layout props
   (markup #:fill-line (text #:page-ref label &quot;8&quot; &quot;?&quot;))))

\book {
  \markup \huge \fill-line { \null Title Page \null }

  \pageBreak

  \label #'toc
  \markup \column {
    \large \fill-line { \null Table of contents \null }
    \toc-line #'toc &quot;Table of contents&quot;
    \toc-line #'firstScore &quot;First Score&quot;
    \toc-line #'markA &quot;Mark A&quot;
    \toc-line #'markB &quot;Mark B&quot;
    \toc-line #'markC &quot;Mark C&quot;
    \toc-line #'unknown &quot;Unknown label&quot;
  }

  \pageBreak

  \label #'firstScore
  \score {
    \new Staff \relative c' {
      c2 c
      \mark \markup {
        A (page \concat { \page-ref #'markA &quot;0&quot; &quot;?&quot; ) }
      } \label #'markA
      c2 c
      \pageBreak
      \mark &quot;B&quot; \label #'markB
      d2 d
      d2 d
      \once \override Score.RehearsalMark.break-visibility =
        #begin-of-line-invisible
      \mark &quot;C&quot; \label #'markC
    }
    \header { piece = &quot;First score&quot; }
  }
}
</pre><p>
 <a href="a3/lily-6b604237.ly">
  <img align="middle"
       border="0"
       src="a3/lily-6b604237.png"
       alt="[image of music]">
 </a>
</p>




<a name="proportional-strict-notespacing.ly"></a>

<hr size="6">
<a name="Spacing_003a-Proportional-strict-notespacing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-page-label" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing: Page label&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#spacing" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-vertically-aligned-dynamics-and-textscripts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing: Vertically aligned dynamics and textscripts &gt; </a>]</td></tr></table>
<a name="spacing-proportional-strict-notespacing"></a>
<h2 class="unnumberedsec">Proportional strict notespacing</h2>


<p>If <code>strict-note-spacing</code> is set spacing of notes is not influenced
by bars or clefs within a system. Rather, they are placed just before
the note that occurs at the same time. This may cause collisions.
</p>

<pre class="verbatim">\relative c'' &lt;&lt;
  \override Score.SpacingSpanner.strict-note-spacing = ##t
  \set Score.proportionalNotationDuration = #(ly:make-moment 1/16)
  \new Staff {
    c8[ c \clef alto c c \grace { d16 } c8 c] c4
    c2 \grace { c16[ c16] } c2
  }
  \new Staff {
    c2 \tuplet 3/2 { c8 \clef bass cis,, c } c4
    c1
  }
&gt;&gt;
</pre><p>
 <a href="39/lily-63aa6413.ly">
  <img align="middle"
       border="0"
       src="39/lily-63aa6413.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-aligned-dynamics-and-textscripts.ly"></a>

<hr size="6">
<a name="Spacing_003a-Vertically-aligned-dynamics-and-textscripts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-proportional-strict-notespacing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing: Proportional strict notespacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#spacing" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#spacing-vertically-aligning-ossias-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Spacing: Vertically aligning ossias and lyrics &gt; </a>]</td></tr></table>
<a name="spacing-vertically-aligned-dynamics-and-textscripts"></a>
<h2 class="unnumberedsec">Vertically aligned dynamics and textscripts</h2>


<p>All <code>DynamicLineSpanner</code> objects (hairpins and dynamic texts) are
placed with their reference line at least <code>'staff-padding</code> from
the staff, unless other notation forces them to be farther. Setting
<code>'staff-padding</code> to a sufficiently large value aligns the dynamics.
</p>
<p>The same idea, together with <code>\textLengthOn</code>, is used to align
the text scripts along their baseline.
</p>

<pre class="verbatim">music = \relative c' {
  a'2\p b\f
  e4\p f\f\&gt; g, b\p
  c2^\markup { \huge gorgeous } c^\markup { \huge fantastic }
}

{
  \music
  \break
  \override DynamicLineSpanner.staff-padding = #3
  \textLengthOn
  \override TextScript.staff-padding = #1
  \music
}
</pre><p>
 <a href="f8/lily-e40ec56a.ly">
  <img align="middle"
       border="0"
       src="f8/lily-e40ec56a.png"
       alt="[image of music]">
 </a>
</p>




<a name="vertically-aligning-ossias-and-lyrics.ly"></a>

<hr size="6">
<a name="Spacing_003a-Vertically-aligning-ossias-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#midi" title="Next chapter">&nbsp;MIDI &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-vertically-aligned-dynamics-and-textscripts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing: Vertically aligned dynamics and textscripts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#spacing" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Spacing&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI &gt; </a>]</td></tr></table>
<a name="spacing-vertically-aligning-ossias-and-lyrics"></a>
<h2 class="unnumberedsec">Vertically aligning ossias and lyrics</h2>


<p>This snippet demonstrates the use of the context properties
<code>alignBelowContext</code> and <code>alignAboveContext</code> to control the
positioning of lyrics and ossias.
</p>

<pre class="verbatim">\paper {
  ragged-right = ##t
}

\relative c' &lt;&lt;
  \new Staff = &quot;1&quot; { c4 c s2 }
  \new Staff = &quot;2&quot; { c4 c s2 }
  \new Staff = &quot;3&quot; { c4 c s2 }
  { \skip 2
    &lt;&lt;
      \lyrics {
        \set alignBelowContext = #&quot;1&quot;
        lyrics4 below
      }
      \new Staff \with {
        alignAboveContext = #&quot;3&quot;
        fontSize = #-2
        \override StaffSymbol.staff-space = #(magstep -2)
        \remove &quot;Time_signature_engraver&quot;
      } {
        \tuplet 6/4 {
          \override TextScript.padding = #3
          c8[^&quot;ossia above&quot; d e d e f]
        }
      }
    &gt;&gt;
  }
&gt;&gt;
</pre><p>
 <a href="c9/lily-f55b8b69.ly">
  <img align="middle"
       border="0"
       src="c9/lily-f55b8b69.png"
       alt="[image of music]">
 </a>
</p>




<hr size="6">
<a name="MIDI"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#spacing" title="Beginning of this chapter or previous chapter"> &lt;&lt; Spacing&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#spacing-vertically-aligning-ossias-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Spacing: Vertically aligning ossias and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-changing-midi-output-to-one-channel-per-voice" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI: Changing MIDI output to one channel per voice &gt; </a>]</td></tr></table>
<a name="midi"></a>
<h1 class="unnumbered">MIDI</h1>

<a name="index-Creating-MIDI-output"></a>
<p><a href="notation-big-page.html#creating-midi-output">Creating MIDI output</a>
</p>

<a name="changing-midi-output-to-one-channel-per-voice.ly"></a>

<hr size="6">
<a name="MIDI_003a-Changing-MIDI-output-to-one-channel-per-voice"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#midi" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;MIDI&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-changing-the-tempo-without-a-metronome-mark" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI: Changing the tempo without a metronome mark &gt; </a>]</td></tr></table>
<a name="midi-changing-midi-output-to-one-channel-per-voice"></a>
<h2 class="unnumberedsec">Changing MIDI output to one channel per voice</h2>


<p>When outputting MIDI, the default behavior is for each staff to
represent one MIDI channel, with all the voices on a staff amalgamated.
This minimizes the risk of running out of MIDI channels, since there
are only 16 available per track.
</p>
<p>However, by moving the <code>Staff_performer</code> to the <code>Voice</code>
context, each voice on a staff can have its own MIDI channel, as is
demonstrated by the following example: despite being on the same staff,
two MIDI channels are created, each with a different
<code>midiInstrument</code>.
</p>

<pre class="verbatim">\score {
  \new Staff &lt;&lt;
    \new Voice \relative c''' {
      \set midiInstrument = #&quot;flute&quot;
      \voiceOne
      \key g \major
      \time 2/2
      r2 g-&quot;Flute&quot; ~
      g fis ~
      fis4 g8 fis e2 ~
      e4 d8 cis d2
    }
    \new Voice \relative c'' {
      \set midiInstrument = #&quot;clarinet&quot;
      \voiceTwo
      b1-&quot;Clarinet&quot;
      a2. b8 a
      g2. fis8 e
      fis2 r
    }
  &gt;&gt;
  \layout { }
  \midi {
    \context {
      \Staff
      \remove &quot;Staff_performer&quot;
    }
    \context {
      \Voice
      \consists &quot;Staff_performer&quot;
    }
    \tempo 2 = 72
  }
}
</pre><p>
 <a href="70/lily-f5189f37.ly">
  <img align="middle"
       border="0"
       src="70/lily-f5189f37.png"
       alt="[image of music]">
 </a>
</p>




<a name="changing-the-tempo-without-a-metronome-mark.ly"></a>

<hr size="6">
<a name="MIDI_003a-Changing-the-tempo-without-a-metronome-mark"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-changing-midi-output-to-one-channel-per-voice" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI: Changing MIDI output to one channel per voice&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#midi" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;MIDI&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-creating-custom-dynamics-in-midi-output" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI: Creating custom dynamics in MIDI output &gt; </a>]</td></tr></table>
<a name="midi-changing-the-tempo-without-a-metronome-mark"></a>
<h2 class="unnumberedsec">Changing the tempo without a metronome mark</h2>


<p>To change the tempo in MIDI output without printing anything, make the
metronome mark invisible.
</p>

<pre class="verbatim">\score {
  \new Staff \relative c' {
    \tempo 4 = 160
    c4 e g b
    c4 b d c
    \set Score.tempoHideNote = ##t
    \tempo 4 = 96
    d,4 fis a cis
    d4 cis e d
  }
  \layout { }
  \midi { }
}
</pre><p>
 <a href="87/lily-510c90fa.ly">
  <img align="middle"
       border="0"
       src="87/lily-510c90fa.png"
       alt="[image of music]">
 </a>
</p>




<a name="creating-custom-dynamics-in-midi-output.ly"></a>

<hr size="6">
<a name="MIDI_003a-Creating-custom-dynamics-in-MIDI-output"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-changing-the-tempo-without-a-metronome-mark" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI: Changing the tempo without a metronome mark&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#midi" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;MIDI&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI: Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi &gt; </a>]</td></tr></table>
<a name="midi-creating-custom-dynamics-in-midi-output"></a>
<h2 class="unnumberedsec">Creating custom dynamics in MIDI output</h2>


<p>The following example shows how to create a dynamic marking, not
included in the default list, and assign it a specific value so that it
can be used to affect MIDI output.
</p>

<p>The dynamic mark <code>\rfz</code> is assigned a value of <code>0.9</code>.
</p>

<pre class="verbatim">#(define (myDynamics dynamic)
    (if (equal? dynamic &quot;rfz&quot;)
      0.9
      (default-dynamic-absolute-volume dynamic)))

\score {
  \new Staff {
    \set Staff.midiInstrument = #&quot;cello&quot;
    \set Score.dynamicAbsoluteVolumeFunction = #myDynamics
    \new Voice {
      \relative {
        a'4\pp b c-\rfz
      }
    }
  }
  \layout {}
  \midi {}
}
</pre><p>
 <a href="a5/lily-2b395cb8.ly">
  <img align="middle"
       border="0"
       src="a5/lily-2b395cb8.png"
       alt="[image of music]">
 </a>
</p>




<a name="customize-drumpitchnames,-drumstyletable-and-drumpitchtable-in-layout-and-midi.ly"></a>

<hr size="6">
<a name="MIDI_003a-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-creating-custom-dynamics-in-midi-output" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI: Creating custom dynamics in MIDI output&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#midi" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;MIDI&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-demo-midiinstruments" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI: Demo MidiInstruments &gt; </a>]</td></tr></table>
<a name="midi-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi"></a>
<h2 class="unnumberedsec">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</h2>


<p>If you want to use customized drum-pitch-names for an own drum-style
with proper output for layout and midi, follow the steps as
demonstrated in the code below. In short:
</p>
<p>* define the names * define the appearence * tell LilyPond to use it
for layout * assign pitches to the names * tell LilyPond to use them
for midi
</p>

<pre class="verbatim">%% This snippet tries to amend
%% NR 2.5.1 Common notation for percussion - Custom percussion staves
%% http://lilypond.org/doc/v2.18/Documentation/notation/common-notation-for-percussion#custom-percussion-staves

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% To use custom drum-pitch-names for your score and midi you need to follow
%% this route:
%%
%%%%%%%%%%%%
%% LAYOUT:
%%%%%%%%%%%%
%%
%% (1) Define a name and put it in `drumPitchNames'
%%     This can be done at toplevel with
%%         drumPitchNames #'my-name  = #'my-name
%%     or shorter:
%%         drumPitchNames.my-name  = #'my-name
%%     It's possible to add an alias as well.
%% (2) Define how it should be printed
%%     Therefore put them into a toplevel-list, where each entry should look:
%%         (my-name
%%           note-head-style-or-default
%%             articulation-string-or-#f
%%               staff-position)
%%     Example:
%%         #(define my-style
%%           '(
%%             (my-name default &quot;tenuto&quot; -1)
%%             ; ...
%%             ))
%% (3) Tell LilyPond to use this custom-definitions, with
%%         drumStyleTable = #(alist-&gt;hash-table my-style)
%%     in a \layout or \with
%%
%%     Now we're done for layout, here a short, but complete example:
%%         \new DrumStaff
%%           \with { drumStyleTable = #(alist-&gt;hash-table my-style) }
%%           \drummode { my-name }
%%
%%%%%%%%%%%%
%% MIDI:
%%%%%%%%%%%%
%%
%% (1) Again at toplvel, assign a pitch to your custom-note-name
%%         midiDrumPitches #'my-name = #(ly:make-pitch -1 4 FLAT)
%%     or shorter:
%%         midiDrumPitches.my-name = ges
%%     Note that you have to use the name, which is in drumPitchNames, no alias
%% (2) Tell LilyPond to use this pitch(es), with
%%         drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
%%
%%     Example:
%%         \score {
%%            \new DrumStaff
%%             \with {
%%               drumStyleTable = #(alist-&gt;hash-table my-style)
%%               drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
%%             }
%%             \drummode { my-name4 }
%%           \layout {}
%%           \midi {}
%%         }
%%
%%%%%%%%%%%%
%% TESTING
%%%%%%%%%%%%
%%
%% To test whether all is fine, run the following sequence in terminal:
%%         lilypond my-file.ly
%%         midi2ly my-file.midi
%%         gedit my-file-midi.ly
%%
%% Which will do:
%% 1. create pdf and midi
%% 2. transform the midi back to a .ly-file
%%    (note: midi2ly is not always good in correctly identifying enharmonic pitches)
%% 3. open this file in gedit (or use another editor)
%% Now watch what you've got.
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% FULL EXAMPLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

drumPitchNames.dbass      = #'dbass
drumPitchNames.dba        = #'dbass  % 'db is in use already
drumPitchNames.dbassmute  = #'dbassmute
drumPitchNames.dbm        = #'dbassmute
drumPitchNames.do         = #'dopen
drumPitchNames.dopenmute  = #'dopenmute
drumPitchNames.dom        = #'dopenmute
drumPitchNames.dslap      = #'dslap
drumPitchNames.ds         = #'dslap
drumPitchNames.dslapmute  = #'dslapmute
drumPitchNames.dsm        = #'dslapmute

#(define djembe
  '((dbass      default  #f         -2)
    (dbassmute  default  &quot;stopped&quot;  -2)
    (dopen      default  #f          0)
    (dopenmute  default  &quot;stopped&quot;   0)
    (dslap      default  #f          2)
    (dslapmute  default  &quot;stopped&quot;   2)))

midiDrumPitches.dbass = g
midiDrumPitches.dbassmute = fis
midiDrumPitches.dopen =  a
midiDrumPitches.dopenmute = gis
midiDrumPitches.dslap =  b
midiDrumPitches.dslapmute = ais

one = \drummode { r4 dba4 do ds r dbm dom dsm }

\score {
   \new DrumStaff
    \with {
      \override StaffSymbol.line-count =  #3
      instrumentName = #&quot;Djembe &quot;
      drumStyleTable = #(alist-&gt;hash-table djembe)
      drumPitchTable = #(alist-&gt;hash-table midiDrumPitches)
    }
    \one
  \layout {}
  \midi {}
}
</pre><p>
 <a href="24/lily-1782ec30.ly">
  <img align="middle"
       border="0"
       src="24/lily-1782ec30.png"
       alt="[image of music]">
 </a>
</p>




<a name="demo-midiinstruments.ly"></a>

<hr size="6">
<a name="MIDI_003a-Demo-MidiInstruments"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI: Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#midi" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;MIDI&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#midi-replacing-default-midi-instrument-equalization" title="Next section in reading order" accesskey="n" rel="next">&nbsp;MIDI: Replacing default MIDI instrument equalization &gt; </a>]</td></tr></table>
<a name="midi-demo-midiinstruments"></a>
<h2 class="unnumberedsec">Demo MidiInstruments</h2>


<p>Problem: How to know which <code>midiInstrument</code> would be best for your
composition? Solution: A LilyPond demo file.
</p>



<pre class="verbatim">\header {
  title = &quot;Demo of all midi sounds&quot;
  arranger = &quot;Myself &quot;
}

baseMelody = \relative c' {
  c4.\mf g c16 b' c d
  e16 d e f g4 g'4 r
  R1
}
melody = {
  \tempo 4 = 150
  \baseMelody
}

\score {
  \new Staff &lt;&lt;
    \new Voice \melody
  &gt;&gt;
  \layout { }
}

\score {
  \new Staff &lt;&lt;
    \new Voice {
      r\mf
      \set Staff.midiInstrument = #&quot;acoustic grand&quot; \melody
      \set Staff.midiInstrument = #&quot;bright acoustic&quot; \melody
      \set Staff.midiInstrument = #&quot;electric grand&quot; \melody
      \set Staff.midiInstrument = #&quot;honky-tonk&quot; \melody
      \set Staff.midiInstrument = #&quot;electric piano 1&quot; \melody
      \set Staff.midiInstrument = #&quot;electric piano 2&quot; \melody
      \set Staff.midiInstrument = #&quot;harpsichord&quot; \melody
      \set Staff.midiInstrument = #&quot;clav&quot; \melody
      \set Staff.midiInstrument = #&quot;celesta&quot; \melody
      \set Staff.midiInstrument = #&quot;glockenspiel&quot; \melody
      \set Staff.midiInstrument = #&quot;music box&quot; \melody
      \set Staff.midiInstrument = #&quot;vibraphone&quot; \melody
      \set Staff.midiInstrument = #&quot;marimba&quot; \melody
      \set Staff.midiInstrument = #&quot;xylophone&quot; \melody
      \set Staff.midiInstrument = #&quot;tubular bells&quot; \melody
      \set Staff.midiInstrument = #&quot;dulcimer&quot; \melody
      \set Staff.midiInstrument = #&quot;drawbar organ&quot; \melody
      \set Staff.midiInstrument = #&quot;percussive organ&quot; \melody
      \set Staff.midiInstrument = #&quot;rock organ&quot; \melody
      \set Staff.midiInstrument = #&quot;church organ&quot; \melody
      \set Staff.midiInstrument = #&quot;reed organ&quot; \melody
      \set Staff.midiInstrument = #&quot;accordion&quot; \melody
      \set Staff.midiInstrument = #&quot;harmonica&quot; \melody
      \set Staff.midiInstrument = #&quot;concertina&quot; \melody
      \set Staff.midiInstrument = #&quot;acoustic guitar (nylon)&quot; \melody
      \set Staff.midiInstrument = #&quot;acoustic guitar (steel)&quot; \melody
      \set Staff.midiInstrument = #&quot;electric guitar (jazz)&quot; \melody
      \set Staff.midiInstrument = #&quot;electric guitar (clean)&quot; \melody
      \set Staff.midiInstrument = #&quot;electric guitar (muted)&quot; \melody
      \set Staff.midiInstrument = #&quot;overdriven guitar&quot; \melody
      \set Staff.midiInstrument = #&quot;distorted guitar&quot; \melody
      \set Staff.midiInstrument = #&quot;acoustic bass&quot; \melody
      \set Staff.midiInstrument = #&quot;electric bass (finger)&quot; \melody
      \set Staff.midiInstrument = #&quot;electric bass (pick)&quot; \melody
      \set Staff.midiInstrument = #&quot;fretless bass&quot; \melody
      \set Staff.midiInstrument = #&quot;slap bass 1&quot; \melody
      \set Staff.midiInstrument = #&quot;slap bass 2&quot; \melody
      \set Staff.midiInstrument = #&quot;synth bass 1&quot; \melody
      \set Staff.midiInstrument = #&quot;synth bass 2&quot; \melody
      \set Staff.midiInstrument = #&quot;violin&quot; \melody
      \set Staff.midiInstrument = #&quot;viola&quot; \melody
      \set Staff.midiInstrument = #&quot;cello&quot; \melody
      \set Staff.midiInstrument = #&quot;contrabass&quot; \melody
      \set Staff.midiInstrument = #&quot;tremolo strings&quot; \melody
      \set Staff.midiInstrument = #&quot;pizzicato strings&quot; \melody
      \set Staff.midiInstrument = #&quot;orchestral harp&quot; \melody
      \set Staff.midiInstrument = #&quot;timpani&quot; \melody
      \set Staff.midiInstrument = #&quot;string ensemble 1&quot; \melody
      \set Staff.midiInstrument = #&quot;string ensemble 2&quot; \melody
      \set Staff.midiInstrument = #&quot;synthstrings 1&quot; \melody
      \set Staff.midiInstrument = #&quot;synthstrings 2&quot; \melody
      \set Staff.midiInstrument = #&quot;choir aahs&quot; \melody
      \set Staff.midiInstrument = #&quot;voice oohs&quot; \melody
      \set Staff.midiInstrument = #&quot;synth voice&quot; \melody
      \set Staff.midiInstrument = #&quot;orchestra hit&quot; \melody
      \set Staff.midiInstrument = #&quot;trumpet&quot; \melody
      \set Staff.midiInstrument = #&quot;trombone&quot; \melody
      \set Staff.midiInstrument = #&quot;tuba&quot; \melody
      \set Staff.midiInstrument = #&quot;muted trumpet&quot; \melody
      \set Staff.midiInstrument = #&quot;french horn&quot; \melody
      \set Staff.midiInstrument = #&quot;brass section&quot; \melody
      \set Staff.midiInstrument = #&quot;synthbrass 1&quot; \melody
      \set Staff.midiInstrument = #&quot;synthbrass 2&quot; \melody
      \set Staff.midiInstrument = #&quot;soprano sax&quot; \melody
      \set Staff.midiInstrument = #&quot;alto sax&quot; \melody
      \set Staff.midiInstrument = #&quot;tenor sax&quot; \melody
      \set Staff.midiInstrument = #&quot;baritone sax&quot; \melody
      \set Staff.midiInstrument = #&quot;oboe&quot; \melody
      \set Staff.midiInstrument = #&quot;english horn&quot; \melody
      \set Staff.midiInstrument = #&quot;bassoon&quot; \melody
      \set Staff.midiInstrument = #&quot;clarinet&quot; \melody
      \set Staff.midiInstrument = #&quot;piccolo&quot; \melody
      \set Staff.midiInstrument = #&quot;flute&quot; \melody
      \set Staff.midiInstrument = #&quot;recorder&quot; \melody
      \set Staff.midiInstrument = #&quot;pan flute&quot; \melody
      \set Staff.midiInstrument = #&quot;blown bottle&quot; \melody
      \set Staff.midiInstrument = #&quot;shakuhachi&quot; \melody
      \set Staff.midiInstrument = #&quot;whistle&quot; \melody
      \set Staff.midiInstrument = #&quot;ocarina&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 1 (square)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 2 (sawtooth)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 3 (calliope)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 4 (chiff)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 5 (charang)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 6 (voice)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 7 (fifths)&quot; \melody
      \set Staff.midiInstrument = #&quot;lead 8 (bass+lead)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 1 (new age)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 2 (warm)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 3 (polysynth)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 4 (choir)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 5 (bowed)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 6 (metallic)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 7 (halo)&quot; \melody
      \set Staff.midiInstrument = #&quot;pad 8 (sweep)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 1 (rain)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 2 (soundtrack)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 3 (crystal)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 4 (atmosphere)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 5 (brightness)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 6 (goblins)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 7 (echoes)&quot; \melody
      \set Staff.midiInstrument = #&quot;fx 8 (sci-fi)&quot; \melody
      \set Staff.midiInstrument = #&quot;sitar&quot; \melody
      \set Staff.midiInstrument = #&quot;banjo&quot; \melody
      \set Staff.midiInstrument = #&quot;shamisen&quot; \melody
      \set Staff.midiInstrument = #&quot;koto&quot; \melody
      \set Staff.midiInstrument = #&quot;kalimba&quot; \melody
      \set Staff.midiInstrument = #&quot;bagpipe&quot; \melody
      \set Staff.midiInstrument = #&quot;fiddle&quot; \melody
      \set Staff.midiInstrument = #&quot;shanai&quot; \melody
      \set Staff.midiInstrument = #&quot;tinkle bell&quot; \melody
      \set Staff.midiInstrument = #&quot;agogo&quot; \melody
      \set Staff.midiInstrument = #&quot;steel drums&quot; \melody
      \set Staff.midiInstrument = #&quot;woodblock&quot; \melody
      \set Staff.midiInstrument = #&quot;taiko drum&quot; \melody
      \set Staff.midiInstrument = #&quot;melodic tom&quot; \melody
      \set Staff.midiInstrument = #&quot;synth drum&quot; \melody
      \set Staff.midiInstrument = #&quot;reverse cymbal&quot; \melody
      \set Staff.midiInstrument = #&quot;guitar fret noise&quot; \melody
      \set Staff.midiInstrument = #&quot;breath noise&quot; \melody
      \set Staff.midiInstrument = #&quot;seashore&quot; \melody
      \set Staff.midiInstrument = #&quot;bird tweet&quot; \melody
      \set Staff.midiInstrument = #&quot;telephone ring&quot; \melody
      \set Staff.midiInstrument = #&quot;helicopter&quot; \melody
      \set Staff.midiInstrument = #&quot;applause&quot; \melody
      \set Staff.midiInstrument = #&quot;gunshot&quot; \melody
    }
  &gt;&gt;
  \midi { }
}
</pre><p>
 <a href="6c/lily-762f07d0.ly">
  <img align="middle"
       border="0"
       src="6c/lily-762f07d0.png"
       alt="[image of music]">
 </a>
</p>




<a name="replacing-default-midi-instrument-equalization.ly"></a>

<hr size="6">
<a name="MIDI_003a-Replacing-default-MIDI-instrument-equalization"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-demo-midiinstruments" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI: Demo MidiInstruments&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#midi" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;MIDI&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates &gt; </a>]</td></tr></table>
<a name="midi-replacing-default-midi-instrument-equalization"></a>
<h2 class="unnumberedsec">Replacing default MIDI instrument equalization</h2>

<p>The default MIDI instrument equalizer can be replaced by
  setting the <code>instrumentEqualizer</code> property in the <code>Score</code>
  context to a user-defined Scheme procedure that uses a MIDI instrument
  name as its argument along with a pair of fractions indicating the
  minimum and maximum volumes respectively to be applied to that
  specific instrument.
</p>
<p>  The following example sets the minimum and maximum volumes for flute
  and clarinet respectively.
</p><pre class="verbatim">#(define my-instrument-equalizer-alist '())

#(set! my-instrument-equalizer-alist
  (append
    '(
      (&quot;flute&quot; . (0.7 . 0.9))
      (&quot;clarinet&quot; . (0.3 . 0.6)))
    my-instrument-equalizer-alist))

#(define (my-instrument-equalizer s)
  (let ((entry (assoc s my-instrument-equalizer-alist)))
    (if entry
      (cdr entry))))

\score {
  &lt;&lt;
    \new Staff {
      \key g \major
      \time 2/2
      \set Score.instrumentEqualizer = #my-instrument-equalizer
      \set Staff.midiInstrument = #&quot;flute&quot;
      \new Voice \relative {
        r2 g''\mp g fis~
        4 g8 fis e2~
        4 d8 cis d2
      }
    }
    \new Staff {
      \key g \major
      \set Staff.midiInstrument = #&quot;clarinet&quot;
      \new Voice \relative {
        b'1\p a2. b8 a
        g2. fis8 e
        fis2 r
      }
    }
  &gt;&gt;
  \layout { }
  \midi {  }
}
</pre><p>
 <a href="3d/lily-1fe60aa0.ly">
  <img align="middle"
       border="0"
       src="3d/lily-1fe60aa0.png"
       alt="[image of music]">
 </a>
</p>



<hr size="6">
<a name="Templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#midi" title="Beginning of this chapter or previous chapter"> &lt;&lt; MIDI&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#midi-replacing-default-midi-instrument-equalization" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; MIDI: Replacing default MIDI instrument equalization&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-ancient-notation-template-_002d-modern-transcription-of-gregorian-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Ancient notation template -- modern transcription of gregorian music &gt; </a>]</td></tr></table>
<a name="templates"></a>
<h1 class="unnumbered">Templates</h1>


<a name="ancient-notation-template----modern-transcription-of-gregorian-music.ly"></a>

<hr size="6">
<a name="Templates_003a-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-anglican-psalm-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Anglican psalm template &gt; </a>]</td></tr></table>
<a name="templates-ancient-notation-template-_002d-modern-transcription-of-gregorian-music"></a>
<h2 class="unnumberedsec">Ancient notation template &ndash; modern transcription of gregorian music</h2>


<p>This example demonstrates how to do modern transcription of Gregorian
music. Gregorian music has no measure, no stems; it uses only half and
quarter note heads, and special marks, indicating rests of different
length.
</p>

<pre class="verbatim">\include &quot;gregorian.ly&quot;

chant = \relative c' {
  \set Score.timing = ##f
  f4 a2 \divisioMinima
  g4 b a2 f2 \divisioMaior
  g4( f) f( g) a2 \finalis
}

verba = \lyricmode {
  Lo -- rem ip -- sum do -- lor sit a -- met
}

\score {
  \new Staff &lt;&lt;
    \new Voice = &quot;melody&quot; \chant
    \new Lyrics = &quot;one&quot; \lyricsto melody \verba
  &gt;&gt;
  \layout {
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Bar_engraver&quot;
      \hide Stem
    }
    \context {
      \Voice
      \override Stem.length = #0
    }
    \context {
      \Score
      barAlways = ##t
    }
  }
}
</pre><p>
 <a href="7b/lily-377306ba.ly">
  <img align="middle"
       border="0"
       src="7b/lily-377306ba.png"
       alt="[image of music]">
 </a>
</p>




<a name="anglican-psalm-template.ly"></a>

<hr size="6">
<a name="Templates_003a-Anglican-psalm-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-ancient-notation-template-_002d-modern-transcription-of-gregorian-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Ancient notation template -- modern transcription of gregorian music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-hymn-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Hymn template &gt; </a>]</td></tr></table>
<a name="templates-anglican-psalm-template"></a>
<h2 class="unnumberedsec">Anglican psalm template</h2>


<p>This template shows one way of setting out an Anglican psalm chant. It
also shows how the verses may be added as stand-alone text under the
music.  The two verses are coded in different styles to demonstrate
more possibilities.
</p>

<pre class="verbatim">SopranoMusic = \relative g' {
  g1 | c2 b | a1 | \bar &quot;||&quot;
  a1 | d2 c | c b | c1 | \bar &quot;||&quot;
}

AltoMusic = \relative c' {
  e1 | g2 g | f1 |
  f1 | f2 e | d d | e1 |
}

TenorMusic = \relative a {
  c1 | c2 c | c1 |
  d1 | g,2 g | g g | g1 |
}

BassMusic =  \relative c {
  c1 | e2 e | f1 |
  d1 | b2 c | g' g | c,1 |
}

global = {
  \time 2/2
}

dot = \markup {
  \raise #0.7 \musicglyph #&quot;dots.dot&quot;
}

tick = \markup {
  \raise #1 \fontsize #-5 \musicglyph #&quot;scripts.rvarcomma&quot;
}

% Use markup to center the chant on the page
\markup {
  \fill-line {
    \score {  % centered
      &lt;&lt;
        \new ChoirStaff &lt;&lt;
          \new Staff &lt;&lt;
            \global
            \clef &quot;treble&quot;
            \new Voice = &quot;Soprano&quot; &lt;&lt;
              \voiceOne
              \SopranoMusic
            &gt;&gt;
            \new Voice = &quot;Alto&quot; &lt;&lt;
              \voiceTwo
              \AltoMusic
            &gt;&gt;
          &gt;&gt;
          \new Staff &lt;&lt;
            \clef &quot;bass&quot;
            \global
            \new Voice = &quot;Tenor&quot; &lt;&lt;
              \voiceOne
              \TenorMusic
            &gt;&gt;
            \new Voice = &quot;Bass&quot; &lt;&lt;
              \voiceTwo
              \BassMusic
            &gt;&gt;
          &gt;&gt;
        &gt;&gt;
      &gt;&gt;
      \layout {
        \context {
          \Score
          \override SpacingSpanner.base-shortest-duration = #(ly:make-moment 1/2)
        }
        \context {
          \Staff
          \remove &quot;Time_signature_engraver&quot;
        }
      }
    }  % End score
  }
}  % End markup

\markup {
  \fill-line {
    \column {
      \left-align {
        \null \null \null
        \line {
          \fontsize #5 O
          \fontsize #3 come
          let us \bold sing | unto \dot the | Lord : let
        }
        \line {
          us heartily
          \concat { re \bold joice }
          in the | strength of | our
        }
        \line {
          sal | vation.
        }
        \null
        \line {
          \hspace #2.5 8. Today if ye will hear his voice *
        }
        \line {
          \concat { \bold hard en }
          \tick not your \tick hearts : as in the pro-
        }
        \line {
          vocation * and as in the \bold day of tempt- \tick
        }
        \line {
          -ation \tick in the \tick wilderness.
        }
      }
    }
  }
}
</pre><p>
 <a href="01/lily-e41e14d9.ly">
  <img align="middle"
       border="0"
       src="01/lily-e41e14d9.png"
       alt="[image of music]">
 </a>
</p>




<a name="hymn-template.ly"></a>

<hr size="6">
<a name="Templates_003a-Hymn-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-anglican-psalm-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Anglican psalm template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-jazz-combo-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Jazz combo template &gt; </a>]</td></tr></table>
<a name="templates-hymn-template"></a>
<h2 class="unnumberedsec">Hymn template</h2>


<p>This code shows one way of setting out a hymn tune when each line
starts and ends with a partial measure.  It also shows how to add the
verses as stand-alone text under the music.
</p>

<pre class="verbatim">Timeline = {
  \time 4/4
  \tempo 4=96
  \partial 2
  s2 | s1 | s2 \breathe s2 | s1 | s2 \bar &quot;||&quot; \break
  s2 | s1 | s2 \breathe s2 | s1 | s2 \bar &quot;||&quot;
}

SopranoMusic = \relative g' {
  g4 g | g g g g | g g g g | g g g g | g2
  g4 g | g g g g | g g g g | g g g g | g2
}

AltoMusic = \relative c' {
  d4 d | d d d d | d d d d | d d d d | d2
  d4 d | d d d d | d d d d | d d d d | d2
}

TenorMusic = \relative a {
  b4 b | b b b b | b b b b | b b b b | b2
  b4 b | b b b b | b b b b | b b b b | b2
}

BassMusic =  \relative g {
  g4 g | g g g g | g g g g | g g g g | g2
  g4 g | g g g g | g g g g | g g g g | g2
}

global = {
 \key g \major
}

\score {  % Start score
  &lt;&lt;
    \new PianoStaff &lt;&lt;  % Start pianostaff
      \new Staff &lt;&lt;  % Start Staff = RH
        \global
        \clef &quot;treble&quot;
        \new Voice = &quot;Soprano&quot; &lt;&lt;  % Start Voice = &quot;Soprano&quot;
          \Timeline
          \voiceOne
          \SopranoMusic
        &gt;&gt;  % End Voice = &quot;Soprano&quot;
        \new Voice = &quot;Alto&quot; &lt;&lt;  % Start Voice = &quot;Alto&quot;
          \Timeline
          \voiceTwo
          \AltoMusic
        &gt;&gt;  % End Voice = &quot;Alto&quot;
      &gt;&gt;  % End Staff = RH
      \new Staff &lt;&lt;  % Start Staff = LH
        \global
        \clef &quot;bass&quot;
        \new Voice = &quot;Tenor&quot; &lt;&lt;  % Start Voice = &quot;Tenor&quot;
          \Timeline
          \voiceOne
          \TenorMusic
        &gt;&gt;  % End Voice = &quot;Tenor&quot;
        \new Voice = &quot;Bass&quot; &lt;&lt;  % Start Voice = &quot;Bass&quot;
          \Timeline
          \voiceTwo
          \BassMusic
        &gt;&gt;  % End Voice = &quot;Bass&quot;
      &gt;&gt;  % End Staff = LH
    &gt;&gt;  % End pianostaff
  &gt;&gt;
}  % End score

\markup {
  \fill-line {
    &quot;&quot;
    {
      \column {
        \left-align {
          &quot;This is line one of the first verse&quot;
          &quot;This is line two of the same&quot;
          &quot;And here's line three of the first verse&quot;
          &quot;And the last line of the same&quot;
        }
      }
    }
    &quot;&quot;
  }
}

\paper {  % Start paper block
  indent = 0     % don't indent first system
  line-width = 130   % shorten line length to suit music
}  % End paper block
</pre><p>
 <a href="b7/lily-3cf7cdbc.ly">
  <img align="middle"
       border="0"
       src="b7/lily-3cf7cdbc.png"
       alt="[image of music]">
 </a>
</p>




<a name="jazz-combo-template.ly"></a>

<hr size="6">
<a name="Templates_003a-Jazz-combo-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-hymn-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Hymn template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-orchestra-choir-and-piano-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Orchestra choir and piano template &gt; </a>]</td></tr></table>
<a name="templates-jazz-combo-template"></a>
<h2 class="unnumberedsec">Jazz combo template</h2>


<p>This is quite an advanced template, for a jazz ensemble. Note that all
instruments are notated in <code>\key c \major</code>. This refers to the
key in concert pitch; the key will be automatically transposed if the
music is within a <code>\transpose</code> section.
</p>

<pre class="verbatim">  }
}
% To make the example display in the documentation
\paper {
  paper-width = 130
}
%#(set-global-staff-size 16)
\include &quot;english.ly&quot;

%%%%%%%%%%%% Some macros %%%%%%%%%%%%%%%%%%%

sl = {
  \override NoteHead.style = #'slash
  \hide Stem
}
nsl = {
  \revert NoteHead.style
  \undo \hide Stem
}
crOn = \override NoteHead.style = #'cross
crOff = \revert NoteHead.style

%% insert chord name style stuff here.

jazzChords = { }

%%%%%%%%%%%% Keys'n'thangs %%%%%%%%%%%%%%%%%

global = { \time 4/4 }

Key = { \key c \major }

% ############ Horns ############

% ------ Trumpet ------
trpt = \transpose c d \relative c'' {
  \Key
  c1 | c | c |
}
trpHarmony = \transpose c' d {
  \jazzChords
}
trumpet = {
  \global
  \clef treble
  &lt;&lt;
    \trpt
  &gt;&gt;
}

% ------ Alto Saxophone ------
alto = \transpose c a \relative c' {
  \Key
  c1 | c | c |
}
altoHarmony = \transpose c' a {
  \jazzChords
}
altoSax = {
  \global
  \clef treble
  &lt;&lt;
    \alto
  &gt;&gt;
}

% ------ Baritone Saxophone ------
bari = \transpose c a' \relative c {
  \Key
  c1
  c1
  \sl
  d4^&quot;Solo&quot; d d d
  \nsl
}
bariHarmony = \transpose c' a \chordmode {
  \jazzChords s1 s d2:maj e:m7
}
bariSax = {
  \global
  \clef treble
  &lt;&lt;
    \bari
  &gt;&gt;
}

% ------ Trombone ------
tbone = \relative c {
  \Key
  c1 | c | c
}
tboneHarmony = \chordmode {
  \jazzChords
}
trombone = {
  \global
  \clef bass
  &lt;&lt;
    \tbone
  &gt;&gt;
}

% ############ Rhythm Section #############

% ------ Guitar ------
gtr = \relative c'' {
  \Key
  c1
  \sl
  b4 b b b
  \nsl
  c1
}
gtrHarmony = \chordmode {
  \jazzChords
  s1 c2:min7+ d2:maj9
}
guitar = {
  \global
  \clef treble
  &lt;&lt;
    \gtr
  &gt;&gt;
}

%% ------ Piano ------
rhUpper = \relative c'' {
  \voiceOne
  \Key
  c1 | c | c
}
rhLower = \relative c' {
  \voiceTwo
  \Key
  e1 | e | e
}

lhUpper = \relative c' {
  \voiceOne
  \Key
  g1 | g | g
}
lhLower = \relative c {
  \voiceTwo
  \Key
  c1 | c | c
}

PianoRH = {
  \clef treble
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \rhUpper
    \new Voice = &quot;two&quot; \rhLower
  &gt;&gt;
}
PianoLH = {
  \clef bass
  \global
  &lt;&lt;
    \new Voice = &quot;one&quot; \lhUpper
    \new Voice = &quot;two&quot; \lhLower
  &gt;&gt;
}

piano = {
  &lt;&lt;
    \new Staff = &quot;upper&quot; \PianoRH
    \new Staff = &quot;lower&quot; \PianoLH
  &gt;&gt;
}

% ------ Bass Guitar ------
Bass = \relative c {
  \Key
  c1 | c | c
}
bass = {
  \global
  \clef bass
  &lt;&lt;
    \Bass
  &gt;&gt;
}

% ------ Drums ------
up = \drummode {
  \voiceOne
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
}
down = \drummode {
  \voiceTwo
  bd4 s bd s
  bd4 s bd s
  bd4 s bd s
}

drumContents = {
  \global
  &lt;&lt;
    \new DrumVoice \up
    \new DrumVoice \down
  &gt;&gt;
}

%%%%%%%%% It All Goes Together Here %%%%%%%%%%%%%%%%%%%%%%

\score {
  &lt;&lt;
    \new StaffGroup = &quot;horns&quot; &lt;&lt;
      \new Staff = &quot;trumpet&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \trumpet
      \new Staff = &quot;altosax&quot; \with { instrumentName = #&quot;Alto Sax&quot; }
      \altoSax
      \new ChordNames = &quot;barichords&quot; \with { instrumentName = #&quot;Trumpet&quot; }
      \bariHarmony
      \new Staff = &quot;barisax&quot; \with { instrumentName = #&quot;Bari Sax&quot; }
      \bariSax
      \new Staff = &quot;trombone&quot; \with { instrumentName = #&quot;Trombone&quot; }
      \trombone
    &gt;&gt;

    \new StaffGroup = &quot;rhythm&quot; &lt;&lt;
      \new ChordNames = &quot;chords&quot; \gtrHarmony
      \new Staff = &quot;guitar&quot; \with { instrumentName = #&quot;Guitar&quot; }
      \guitar
      \new PianoStaff = &quot;piano&quot; \with {
        instrumentName = #&quot;Piano&quot;
        midiInstrument = #&quot;acoustic grand&quot;
      }
      \piano
      \new Staff = &quot;bass&quot; \with { instrumentName = #&quot;Bass&quot; }
      \bass
      \new DrumStaff \with { instrumentName = #&quot;Drums&quot; }
      \drumContents
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
    \context {
      \Score
      \override BarNumber.padding = #3
      \override RehearsalMark.padding = #2
      skipBars = ##t
    }
  }
  \midi { }
}
</pre><p>
 <a href="11/lily-52f7d620.ly">
  <img align="middle"
       border="0"
       src="11/lily-52f7d620.png"
       alt="[image of music]">
 </a>
</p>




<a name="orchestra,-choir-and-piano-template.ly"></a>

<hr size="6">
<a name="Templates_003a-Orchestra-choir-and-piano-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-jazz-combo-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Jazz combo template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-piano-template-_0028simple_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Piano template (simple) &gt; </a>]</td></tr></table>
<a name="templates-orchestra-choir-and-piano-template"></a>
<h2 class="unnumberedsec">Orchestra choir and piano template</h2>


<p>This template demonstrates the use of nested <code>StaffGroup</code> and
<code>GrandStaff</code> contexts to sub-group instruments of the same type
together, and a way to use <code>\transpose</code> so that variables hold
music for transposing instruments at concert pitch.
</p>

<pre class="verbatim">fluteMusic = \relative c' { \key g \major g'1 b }

% Pitches as written on a manuscript for Clarinet in A
% are transposed to concert pitch.

clarinetMusic = \transpose c' a
  \relative c'' { \key bes \major bes1 d }

trumpetMusic = \relative c { \key g \major g''1 b }

% Key signature is often omitted for horns

hornMusic = \transpose c' f
  \relative c { d'1 fis }

percussionMusic = \relative c { \key g \major g1 b }

sopranoMusic = \relative c'' { \key g \major g'1 b }

sopranoLyrics = \lyricmode { Lyr -- ics }

altoIMusic = \relative c' { \key g \major g'1 b }

altoIIMusic = \relative c' { \key g \major g'1 b }

altoILyrics =  \sopranoLyrics

altoIILyrics = \lyricmode { Ah -- ah }

tenorMusic = \relative c' { \clef &quot;treble_8&quot; \key g \major g1 b }

tenorLyrics = \sopranoLyrics

pianoRHMusic = \relative c { \key g \major g''1 b }

pianoLHMusic = \relative c { \clef bass \key g \major g1 b }

violinIMusic = \relative c' { \key g \major g'1 b }

violinIIMusic = \relative c' { \key g \major g'1 b }

violaMusic = \relative c { \clef alto \key g \major g'1 b }

celloMusic = \relative c { \clef bass \key g \major g1 b }

bassMusic = \relative c { \clef &quot;bass_8&quot; \key g \major g,1 b }

\score {
  &lt;&lt;
    \new StaffGroup = &quot;StaffGroup_woodwinds&quot; &lt;&lt;
      \new Staff = &quot;Staff_flute&quot; \with { instrumentName = #&quot;Flute&quot; }
      \fluteMusic

      \new Staff = &quot;Staff_clarinet&quot; \with {
        instrumentName = \markup { \concat { &quot;Clarinet in B&quot; \flat } }
      }

      % Declare that written Middle C in the music
      % to follow sounds a concert B flat, for
      % output using sounded pitches such as MIDI.
      %\transposition bes

      % Print music for a B-flat clarinet
      \transpose bes c' \clarinetMusic
    &gt;&gt;

    \new StaffGroup = &quot;StaffGroup_brass&quot; &lt;&lt;
      \new Staff = &quot;Staff_hornI&quot; \with { instrumentName = #&quot;Horn in F&quot; }
       % \transposition f
        \transpose f c' \hornMusic

      \new Staff = &quot;Staff_trumpet&quot; \with { instrumentName = #&quot;Trumpet in  C&quot; }
      \trumpetMusic

    &gt;&gt;
    \new RhythmicStaff = &quot;RhythmicStaff_percussion&quot;
    \with { instrumentName = #&quot;Percussion&quot; }
    &lt;&lt;
      \percussionMusic
    &gt;&gt;
    \new PianoStaff \with { instrumentName = #&quot;Piano&quot; }
    &lt;&lt;
      \new Staff { \pianoRHMusic }
      \new Staff { \pianoLHMusic }
    &gt;&gt;
    \new ChoirStaff = &quot;ChoirStaff_choir&quot; &lt;&lt;
      \new Staff = &quot;Staff_soprano&quot; \with { instrumentName = #&quot;Soprano&quot; }
      \new Voice = &quot;soprano&quot;
      \sopranoMusic

      \new Lyrics \lyricsto &quot;soprano&quot; { \sopranoLyrics }
      \new GrandStaff = &quot;GrandStaff_altos&quot;
      \with { \accepts Lyrics } &lt;&lt;
        \new Staff = &quot;Staff_altoI&quot;  \with { instrumentName = #&quot;Alto I&quot; }
        \new Voice = &quot;altoI&quot;
        \altoIMusic

        \new Lyrics \lyricsto &quot;altoI&quot; { \altoILyrics }
        \new Staff = &quot;Staff_altoII&quot; \with { instrumentName = #&quot;Alto II&quot; }
        \new Voice = &quot;altoII&quot;
        \altoIIMusic

        \new Lyrics \lyricsto &quot;altoII&quot; { \altoIILyrics }
      &gt;&gt;

      \new Staff = &quot;Staff_tenor&quot; \with { instrumentName = #&quot;Tenor&quot; }
        \new Voice = &quot;tenor&quot;
        \tenorMusic

      \new Lyrics \lyricsto &quot;tenor&quot; { \tenorLyrics }
    &gt;&gt;
    \new StaffGroup = &quot;StaffGroup_strings&quot; &lt;&lt;
      \new GrandStaff = &quot;GrandStaff_violins&quot; &lt;&lt;
        \new Staff = &quot;Staff_violinI&quot; \with { instrumentName = #&quot;Violin I&quot; }
        \violinIMusic

        \new Staff = &quot;Staff_violinII&quot; \with { instrumentName = #&quot;Violin II&quot; }
        \violinIIMusic
      &gt;&gt;

      \new Staff = &quot;Staff_viola&quot; \with { instrumentName = #&quot;Viola&quot; }
      \violaMusic

      \new Staff = &quot;Staff_cello&quot; \with { instrumentName = #&quot;Cello&quot; }
      \celloMusic

      \new Staff = &quot;Staff_bass&quot; \with { instrumentName = #&quot;Double Bass&quot; }
      \bassMusic
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre><p>
 <a href="63/lily-1cd18f77.ly">
  <img align="middle"
       border="0"
       src="63/lily-1cd18f77.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-simple.ly"></a>

<hr size="6">
<a name="Templates_003a-Piano-template-_0028simple_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-orchestra-choir-and-piano-template" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Orchestra choir and piano template&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-piano-template-with-centered-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Piano template with centered lyrics &gt; </a>]</td></tr></table>
<a name="templates-piano-template-_0028simple_0029"></a>
<h2 class="unnumberedsec">Piano template (simple)</h2>


<p>Here is a simple piano staff with some notes.
</p>

<pre class="verbatim">lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

\score {
  \new PianoStaff \with { instrumentName = #&quot;Piano&quot; }
  &lt;&lt;
    \new Staff = &quot;upper&quot; \upper
    \new Staff = &quot;lower&quot; \lower
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="30/lily-2e7eaa60.ly">
  <img align="middle"
       border="0"
       src="30/lily-2e7eaa60.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-with-centered-lyrics.ly"></a>

<hr size="6">
<a name="Templates_003a-Piano-template-with-centered-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-piano-template-_0028simple_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Piano template (simple)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-piano-template-with-melody-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Piano template with melody and lyrics &gt; </a>]</td></tr></table>
<a name="templates-piano-template-with-centered-lyrics"></a>
<h2 class="unnumberedsec">Piano template with centered lyrics</h2>


<p>Instead of having a full staff for the melody and lyrics, lyrics can be
centered between the staves of a piano staff.
</p>

<pre class="verbatim">upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = upper { \new Voice = &quot;singer&quot; \upper }
    \new Lyrics \lyricsto &quot;singer&quot; \text
    \new Staff = lower { \lower }
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="8f/lily-fef1140c.ly">
  <img align="middle"
       border="0"
       src="8f/lily-fef1140c.png"
       alt="[image of music]">
 </a>
</p>




<a name="piano-template-with-melody-and-lyrics.ly"></a>

<hr size="6">
<a name="Templates_003a-Piano-template-with-melody-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-piano-template-with-centered-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Piano template with centered lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-satb-choir-template-_002d-four-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: SATB Choir template - four staves &gt; </a>]</td></tr></table>
<a name="templates-piano-template-with-melody-and-lyrics"></a>
<h2 class="unnumberedsec">Piano template with melody and lyrics</h2>


<p>Here is a typical song format: one staff with the melody and lyrics,
with piano accompaniment underneath.
</p>

<pre class="verbatim">melody = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4

  a2 c
}

\score {
  &lt;&lt;
    \new Voice = &quot;mel&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto mel \text
    \new PianoStaff &lt;&lt;
      \new Staff = &quot;upper&quot; \upper
      \new Staff = &quot;lower&quot; \lower
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \Staff \RemoveEmptyStaves }
  }
  \midi { }
}
</pre><p>
 <a href="b6/lily-36167b72.ly">
  <img align="middle"
       border="0"
       src="b6/lily-36167b72.png"
       alt="[image of music]">
 </a>
</p>




<a name="satb-choir-template---four-staves.ly"></a>

<hr size="6">
<a name="Templates_003a-SATB-Choir-template-_002d-four-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-piano-template-with-melody-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Piano template with melody and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-score-for-diatonic-accordion" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Score for diatonic accordion &gt; </a>]</td></tr></table>
<a name="templates-satb-choir-template-_002d-four-staves"></a>
<h2 class="unnumberedsec">SATB Choir template - four staves</h2>


<p>SATB choir template (four staves)
</p>

<pre class="verbatim">global = {
  \key c \major
  \time 4/4
  \dynamicUp
}
sopranonotes = \relative c'' {
  c2 \p \&lt; d c d \f
}
sopranowords = \lyricmode { do do do do }
altonotes = \relative c'' {
  c2\p d c d
}
altowords = \lyricmode { re re re re }
tenornotes = {
  \clef &quot;G_8&quot;
  c2\mp d c d
}
tenorwords = \lyricmode { mi mi mi mi }
bassnotes = {
  \clef bass
  c2\mf d c d
}
basswords = \lyricmode { mi mi mi mi }

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff &lt;&lt;
      \new Voice = &quot;soprano&quot; &lt;&lt;
        \global
        \sopranonotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;soprano&quot; \sopranowords
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;alto&quot; &lt;&lt;
        \global
        \altonotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;alto&quot; \altowords
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;tenor&quot; &lt;&lt;
        \global
        \tenornotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;tenor&quot; \tenorwords
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;bass&quot; &lt;&lt;
        \global
        \bassnotes
      &gt;&gt;
      \new Lyrics \lyricsto &quot;bass&quot; \basswords
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="2d/lily-2444b243.ly">
  <img align="middle"
       border="0"
       src="2d/lily-2444b243.png"
       alt="[image of music]">
 </a>
</p>




<a name="score-for-diatonic-accordion.ly"></a>

<hr size="6">
<a name="Templates_003a-Score-for-diatonic-accordion"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-satb-choir-template-_002d-four-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: SATB Choir template - four staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-single-staff-template-with-notes-lyrics-and-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Single staff template with notes lyrics and chords &gt; </a>]</td></tr></table>
<a name="templates-score-for-diatonic-accordion"></a>
<h2 class="unnumberedsec">Score for diatonic accordion</h2>


<p>A template to write a score for a diatonic accordion.
</p>
<p>- There is a horizontal staff indicating if the accordion must be
pushed (thick line) or pulled (thin line)
</p>
<p>- There is a small rhythmic staff with lyrics that describes the bass
buttons to press. The bar lines are made from gridlines
</p>
<p>- The tabulator staff for diatonic accordions shows the geographic
position of the buttons and not (as for every other instrument) the
pitch of the notes; the keys on the melody-side of the accordion are
placed in three columns and about 12 rows
</p>

<p>In the tabulator staff notation the outermost column is described with
notes between lines, the innermost column is described with notes
between lines and a cross as accidental, and the middle column is
described with notes on a line, whereby the row in the middle is
represented on the middle line in the staff.
</p>

<p>Some words to transpose piano notes to the diatonic accordion:
</p>

<p>1. Every diatonic accordion is built for some keys only (for example,
for the keys of C major and F major), so it is important to transpose a
piano melody to match one of these keys. Transpose the source code, not
only the output because this code is required later on to translate it
once more to the tabulator staff. This can be done with the command
<code>displayLilyMusic</code>.
</p>

<p>2. You have to alternate the push- and pull-direction of the accordion
regularly. If the player has a too long part to pull the accordion gets
broken. On the other hand, some harmonies are only available in one
direction. Considering this, decide which parts of the melody are the
push-parts and which the pull-parts.
</p>

<p>3. For each pull- or push-part translate the piano notes to the
according tabulature representation.
</p>

<pre class="verbatim">verse = \lyricmode { Wie gross bist du! Wie gross bist du! }

harmonies = \new ChordNames \chordmode {
  \germanChords
  \set chordChanges = ##t
  bes8 bes8 bes8
  es2 f
  bes1
}

NoStem = { \hide Stem }
NoNoteHead = \hide NoteHead
ZeroBeam = \override Beam.positions = #'(0 . 0)

staffTabLine = \new Staff \with {
  \remove &quot;Time_signature_engraver&quot;
  \remove &quot;Clef_engraver&quot;
} {
  \override Staff.StaffSymbol.line-positions = #'(0)
  % Shows one horizontal line. The vertical line
  %  (simulating a bar-line) is simulated with a gridline
  \set Staff.midiInstrument = #&quot;choir aahs&quot;
  \key c \major
  \relative c''
  {
    % disable the following line to see the noteheads while writing the song
    \NoNoteHead
    \override NoteHead.no-ledgers = ##t

    % The beam between 8th-notes is used to draw the push-line
    %How to fast write the push-lines:
    %  1. write repeatedly 'c c c c c c c c |' for the whole length of the song
    %  2. uncomment the line \NoNoteHead
    %  3. compile
    %  4. Mark the positions on which push/pull changes.
    %     In the score-picture click on the position
    %        the push- or pull-part starts
    %           (on the noteHead, the cursor will change to a hand-icon).
    %     The cursor in the source code will jump just at this position.
    %   a) If a push-part starts there, replace the 'c' by an 'e['
    %   b) If a pull-part starts there, replace the 'c' by an 's'
    %  5. Switch into 'overwrite-mode' by pressing the 'ins' key.
    %  6. For the pull-parts overwrite the 'c' with 's'
    %  7. For every push-part replace the last 'c' with 'e]'
    %        8. Switch into 'insert-mode' again
    %  9. At last it should look like e.g.
    %        (s s e[ c | c c c c c c c c | c c c c c c e] s s)
    % 10. re-enable the line \NoNoteHead
    \autoBeamOff
    \ZeroBeam
    s8 s s e[ c c c c c c e] | s s s s s
  }
}

% Accordion melody in tabulator score
% 1. Place a copy of the piano melody below
% 2. Separate piano melody into pull- and push-parts
%      according to the staffTabLine you've already made
% 3. For each line: Double the line. Remark the 1st one
%      (Keeps unchanged as reference) and then change the second
%      line using the transformation paper
%    or the macros 'conv2diaton push.bsh' and 'conv2diaton pull.bsh'
% Tips:
% - In jEdit Search &amp; Replace mark the Option 'Keep Dialog'

AccordionTabTwoCBesDur = {
  % pull 1
  %&lt;f' bes'&gt;8 &lt;f' a'&gt;8 &lt;d' bes'&gt;8 |
  &lt;g'' a''&gt;8 &lt;g'' b''&gt;8 &lt;e'' a''&gt;8 |
  % push 2
  %&lt;g' c''&gt;4 &lt;f' d''&gt; &lt;g' ees''&gt; &lt;f' a'&gt; |
  &lt;g'' a''&gt;4 &lt;d'' eisis''&gt; &lt;g'' bisis''&gt; &lt;d'' f''&gt; |
  % pull 3
  % &lt;f' bes'&gt;2 r8 }
  &lt;g'' a''&gt;2 r8 }

AccordionTab= { \dynamicUp
  % 1. Place a copy of the piano melody above
  % 2. Separate piano melody into pull- and push-parts
  %      according to the staffTabLine you've already made
  % 3. For each line: Double the line. Remark the 1st one
  %      (Keeps unchanged as reference) and then
  %      change the second line using the transformation paper
  % Tips:
  % - In jEdit Search &amp; Replace mark the Option 'Keep Dialog'
  % -
  \AccordionTabTwoCBesDur
}



\layout {
  \context {
    \Score
    % The vertical line (simulating a bar-line) in
    % the staffBassRhytm is a gridline
    \consists &quot;Grid_line_span_engraver&quot;
  }
  \context {
    \Staff
    \consists &quot;Grid_point_engraver&quot;
    gridInterval = #(ly:make-moment 4/4) % 4/4 - tact. How many beats per bar
    % The following line has to be adjusted O-F-T-E-N.
    \override GridPoint.Y-extent = #'(-2 . -21)
  }
  \context {
    \ChoirStaff
    \remove &quot;System_start_delimiter_engraver&quot;
  }
}

staffVoice = \new Staff = astaffvoice  {
  \time 4/4
  \set Staff.instrumentName = &quot;Voice&quot;
  \set Staff.midiInstrument = &quot;voice oohs&quot;
  \key bes \major
  \partial 8*3
  \clef treble
  {
    \context Voice = &quot;melodyVoi&quot;
    {
      &lt;f' bes'&gt;8 &lt;f' a'&gt;8 &lt;d' bes'&gt;8 |
      &lt;g' c''&gt;4 &lt;f' d''&gt; &lt;g' es''&gt; &lt;f' a'&gt; |
      &lt;f' bes'&gt;2 r8
    }
    \bar &quot;|.&quot;
  }
}

staffAccordionMel =
\new Staff  \with { \remove &quot;Clef_engraver&quot; } {
  \accidentalStyle forget %Set the accidentals (Vorzeichen) for each note,
  %do not remember them for the rest of the measure.
  \time 4/4
  \set Staff.instrumentName=&quot;Accordion&quot;
  \set Staff.midiInstrument=&quot;voice oohs&quot;
  \key c \major
  \clef treble
  { \AccordionTab \bar &quot;|.&quot; }
}

AltOn =
#(define-music-function (mag) (number?)
  #{ \override Stem.length = #(* 7.0 mag)
      \override NoteHead.font-size =
#(inexact-&gt;exact (* (/ 6.0 (log 2.0)) (log mag))) #})

AltOff = {
  \revert Stem.length
  \revert NoteHead.font-size
}

BassRhytm = {s4 s8 | c2 c2 | c2 s8 }
LyricBassRhythmI=  \lyricmode { c b | c }

staffBassRhytm =
\new Staff = staffbass \with { \remove &quot;Clef_engraver&quot; } {
  % This is not a RhythmicStaff  because it must be possible to append lyrics.

  \override Score.GridLine.extra-offset = #'( 13.0 . 0.0 ) % x.y
  \override Staff.StaffSymbol.line-positions = #'( 0 )
  % Shows one horizontal line. The vertical line
  %  (simulating a bar-line) is simulated by a grid
  % Search for 'grid' in this page to find all related functions
  \time 4/4
  {
    \context Voice = &quot;VoiceBassRhytm&quot;
    \stemDown \AltOn #0.6
    \relative c''
    {
      \BassRhytm
    }
    \AltOff
    \bar &quot;|.&quot;
  }
}

\score {
  \new ChoirStaff &lt;&lt;
    \harmonies
    \staffVoice
    \context Lyrics = &quot;lmelodyVoi&quot;
      \with { alignBelowContext = astaffvoice }
      \lyricsto melodyVoi \verse
    \staffAccordionMel
    \staffTabLine
    \staffBassRhytm
    \context Lyrics = &quot;lBassRhytmAboveI&quot;
      \with { alignAboveContext = staffbass }
      \lyricsto VoiceBassRhytm \LyricBassRhythmI
  &gt;&gt;
}
</pre><p>
 <a href="1d/lily-f5e3438d.ly">
  <img align="middle"
       border="0"
       src="1d/lily-f5e3438d.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes,-lyrics,-and-chords.ly"></a>

<hr size="6">
<a name="Templates_003a-Single-staff-template-with-notes-lyrics-and-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-score-for-diatonic-accordion" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Score for diatonic accordion&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-single-staff-template-with-notes-lyrics-chords-and-frets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Single staff template with notes lyrics chords and frets &gt; </a>]</td></tr></table>
<a name="templates-single-staff-template-with-notes-lyrics-and-chords"></a>
<h2 class="unnumberedsec">Single staff template with notes lyrics and chords</h2>


<p>This template allows the preparation of a song with melody, words, and
chords.
</p>

<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

harmonies = \chordmode {
  a2 c
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Voice = &quot;one&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="24/lily-998753a9.ly">
  <img align="middle"
       border="0"
       src="24/lily-998753a9.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes,-lyrics,-chords-and-frets.ly"></a>

<hr size="6">
<a name="Templates_003a-Single-staff-template-with-notes-lyrics-chords-and-frets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-single-staff-template-with-notes-lyrics-and-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Single staff template with notes lyrics and chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-single-staff-template-with-notes-and-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Single staff template with notes and chords &gt; </a>]</td></tr></table>
<a name="templates-single-staff-template-with-notes-lyrics-chords-and-frets"></a>
<h2 class="unnumberedsec">Single staff template with notes lyrics chords and frets</h2>


<p>Here is a simple lead sheet template with melody, lyrics, chords and
fret diagrams.
</p>

<pre class="verbatim">verseI = \lyricmode {
  \set stanza = #&quot;1.&quot;
  This is the first verse
}

verseII = \lyricmode {
  \set stanza = #&quot;2.&quot;
  This is the second verse.
}

theChords = \chordmode {
  % insert chords for chordnames and fretboards here
  c2 g4 c
}

staffMelody = \relative c' {
   \key c \major
   \clef treble
   % Type notes for melody here
   c4 d8 e f4 g
   \bar &quot;|.&quot;
}

\score {
  &lt;&lt;
    \context ChordNames { \theChords }
    \context FretBoards { \theChords }
    \new Staff {
      \context Voice = &quot;voiceMelody&quot; { \staffMelody }
    }
    \new Lyrics = &quot;lyricsI&quot; {
      \lyricsto &quot;voiceMelody&quot; \verseI
    }
    \new Lyrics = &quot;lyricsII&quot; {
      \lyricsto &quot;voiceMelody&quot; \verseII
    }
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="83/lily-2dbd9efe.ly">
  <img align="middle"
       border="0"
       src="83/lily-2dbd9efe.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes-and-chords.ly"></a>

<hr size="6">
<a name="Templates_003a-Single-staff-template-with-notes-and-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-single-staff-template-with-notes-lyrics-chords-and-frets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Single staff template with notes lyrics chords and frets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-single-staff-template-with-notes-and-lyrics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Single staff template with notes and lyrics &gt; </a>]</td></tr></table>
<a name="templates-single-staff-template-with-notes-and-chords"></a>
<h2 class="unnumberedsec">Single staff template with notes and chords</h2>


<p>Want to prepare a lead sheet with a melody and chords? Look no further!
</p>


<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  f4 e8[ c] d4 g
  a2 ~ a
}

harmonies = \chordmode {
  c4:m f:min7 g:maj c:aug
  d2:dim b4:5 e:sus
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Staff \melody
  &gt;&gt;
  \layout{ }
  \midi { }
}
</pre><p>
 <a href="95/lily-6a45e9d2.ly">
  <img align="middle"
       border="0"
       src="95/lily-6a45e9d2.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-notes-and-lyrics.ly"></a>

<hr size="6">
<a name="Templates_003a-Single-staff-template-with-notes-and-lyrics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-single-staff-template-with-notes-and-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Single staff template with notes and chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-single-staff-template-with-only-notes" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Single staff template with only notes &gt; </a>]</td></tr></table>
<a name="templates-single-staff-template-with-notes-and-lyrics"></a>
<h2 class="unnumberedsec">Single staff template with notes and lyrics</h2>


<p>This small template demonstrates a simple melody with lyrics. Cut and
paste, add notes, then words for the lyrics. This example turns off
automatic beaming, which is common for vocal parts. To use automatic
beaming, change or comment out the relevant line.
</p>

<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score{
  &lt;&lt;
    \new Voice = &quot;one&quot; {
      \autoBeamOff
      \melody
    }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="2d/lily-27a6fe3a.ly">
  <img align="middle"
       border="0"
       src="2d/lily-27a6fe3a.png"
       alt="[image of music]">
 </a>
</p>




<a name="single-staff-template-with-only-notes.ly"></a>

<hr size="6">
<a name="Templates_003a-Single-staff-template-with-only-notes"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-single-staff-template-with-notes-and-lyrics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Single staff template with notes and lyrics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-string-quartet-template-_0028simple_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: String quartet template (simple) &gt; </a>]</td></tr></table>
<a name="templates-single-staff-template-with-only-notes"></a>
<h2 class="unnumberedsec">Single staff template with only notes</h2>


<p>This very simple template gives you a staff with notes, suitable for a
solo instrument or a melodic fragment. Cut and paste this into a file,
add notes, and you&rsquo;re finished!
</p>

<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4

  a4 b c d
}

\score {
  \new Staff \melody
  \layout { }
  \midi { }
}
</pre><p>
 <a href="1b/lily-8f2836eb.ly">
  <img align="middle"
       border="0"
       src="1b/lily-8f2836eb.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-quartet-template-simple.ly"></a>

<hr size="6">
<a name="Templates_003a-String-quartet-template-_0028simple_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-single-staff-template-with-only-notes" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Single staff template with only notes&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-string-quartet-template-with-separate-parts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: String quartet template with separate parts &gt; </a>]</td></tr></table>
<a name="templates-string-quartet-template-_0028simple_0029"></a>
<h2 class="unnumberedsec">String quartet template (simple)</h2>


<p>This template demonstrates a simple string quartet. It also uses a
<code>\global</code> section for time and key signatures
</p>

<pre class="verbatim">violinOne = \new Voice \relative c'' {
  c2 d
  e1
  \bar &quot;|.&quot;
}

violinTwo = \new Voice \relative c'' {
  g2 f
  e1
  \bar &quot;|.&quot;
}

viola = \new Voice \relative c' {
  \clef alto
  e2 d
  c1
  \bar &quot;|.&quot;
}

cello = \new Voice \relative c' {
  \clef bass
  c2 b
  a1
  \bar &quot;|.&quot;
}

\score {
  \new StaffGroup &lt;&lt;
    \new Staff \with { instrumentName = &quot;Violin 1&quot; }
    &lt;&lt; \global \violinOne &gt;&gt;
    \new Staff \with { instrumentName = &quot;Violin 2&quot; }
    &lt;&lt; \global \violinTwo &gt;&gt;
    \new Staff \with { instrumentName = &quot;Viola&quot; }
    &lt;&lt; \global \viola &gt;&gt;
    \new Staff \with { instrumentName = &quot;Cello&quot; }
    &lt;&lt; \global \cello &gt;&gt;
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="7a/lily-8bd39fb4.ly">
  <img align="middle"
       border="0"
       src="7a/lily-8bd39fb4.png"
       alt="[image of music]">
 </a>
</p>




<a name="string-quartet-template-with-separate-parts.ly"></a>

<hr size="6">
<a name="Templates_003a-String-quartet-template-with-separate-parts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-string-quartet-template-_0028simple_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: String quartet template (simple)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-vocal-ensemble-template-with-automatic-piano-reduction" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Vocal ensemble template with automatic piano reduction &gt; </a>]</td></tr></table>
<a name="templates-string-quartet-template-with-separate-parts"></a>
<h2 class="unnumberedsec">String quartet template with separate parts</h2>


<p>The &ldquo;String quartet template&rdquo; snippet produces a nice string
quartet, but what if you needed to print parts? This new template
demonstrates how to use the <code>\tag</code> feature to easily split a
piece into individual parts.
</p>
<p>You need to split this template into separate files; the filenames are
contained in comments at the beginning of each file. <code>piece.ly</code>
contains all the music definitions. The other files – <code>score.ly</code>,
<code>vn1.ly</code>, <code>vn2.ly</code>, <code>vla.ly</code>, and <code>vlc.ly</code> –
produce the appropriate part.
</p>

<p>Do not forget to remove specified comments when using separate files!
</p>

<pre class="verbatim">Violinone = \new Voice {
  \relative c'' {
    c2 d e1
    \bar &quot;|.&quot;
  }
}


Violintwo = \new Voice {
  \relative c'' {
    g2 f e1
    \bar &quot;|.&quot;
  }
}


Viola = \new Voice {
  \relative c' {
    \clef alto
    e2 d c1
    \bar &quot;|.&quot;
  }
}


Cello = \new Voice {
  \relative c' {
    \clef bass
    c2 b a1
    \bar &quot;|.&quot;
  }
}


music = {
  &lt;&lt;
    \tag #'score \tag #'vn1
    \new Staff \with { instrumentName = &quot;Violin 1&quot; }
    &lt;&lt; \global \Violinone &gt;&gt;

    \tag #'score \tag #'vn2
    \new Staff \with { instrumentName = &quot;Violin 2&quot; }
    &lt;&lt; \global \Violintwo&gt;&gt;

    \tag #'score \tag #'vla
    \new Staff \with { instrumentName = &quot;Viola&quot; }
    &lt;&lt; \global \Viola&gt;&gt;

    \tag #'score \tag #'vlc
    \new Staff \with { instrumentName = &quot;Cello&quot; }
    &lt;&lt; \global \Cello &gt;&gt;
  &gt;&gt;
}

% These are the other files you need to save on your computer

% score.ly
% (This is the main file)

% uncomment the line below when using a separate file
%\include &quot;piece.ly&quot;

#(set-global-staff-size 14)

\score {
  \new StaffGroup \keepWithTag #'score \music
  \layout { }
  \midi { }
}


%{ Uncomment this block when using separate files

% vn1.ly
% (This is the Violin 1 part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vn1 \music
  \layout { }
}


% vn2.ly
% (This is the Violin 2 part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vn2 \music
  \layout { }
}


% vla.ly
% (This is the Viola part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vla \music
  \layout { }
}


% vlc.ly
% (This is the Cello part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vlc \music
  \layout { }
}

%}
</pre><p>
 <a href="78/lily-7d1ea106.ly">
  <img align="middle"
       border="0"
       src="78/lily-7d1ea106.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-automatic-piano-reduction.ly"></a>

<hr size="6">
<a name="Templates_003a-Vocal-ensemble-template-with-automatic-piano-reduction"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-string-quartet-template-with-separate-parts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: String quartet template with separate parts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Vocal ensemble template with lyrics aligned below and above the staves &gt; </a>]</td></tr></table>
<a name="templates-vocal-ensemble-template-with-automatic-piano-reduction"></a>
<h2 class="unnumberedsec">Vocal ensemble template with automatic piano reduction</h2>


<p>This template adds an automatic piano reduction to the standard SATB
vocal score demonstrated in &ldquo;Vocal ensemble template&rdquo;. This
demonstrates one of the strengths of LilyPond – you can use a music
definition more than once. If any changes are made to the vocal notes
(say, <code>tenorMusic</code>), then the changes will also apply to the piano
reduction.
</p>

<pre class="verbatim">\paper {
  top-system-spacing.basic-distance = #10
  score-system-spacing.basic-distance = #20
  system-system-spacing.basic-distance = #20
  last-bottom-spacing.basic-distance = #10
}

global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative {
  c''4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative {
  e'4 f d e
}
altoWords =\lyricmode {
  ha ha ha ha
}

tenorMusic = \relative {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  &lt;&lt;
    \new ChoirStaff &lt;&lt;
      \new Lyrics = &quot;sopranos&quot; \with {
        % This is needed for lyrics above a staff
        \override VerticalAxisGroup.staff-affinity = #DOWN
      }
      \new Staff = &quot;women&quot; &lt;&lt;
        \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
        \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = &quot;altos&quot;
      \new Lyrics = &quot;tenors&quot; \with {
        % This is needed for lyrics above a staff
        \override VerticalAxisGroup.staff-affinity = #DOWN
      }

      \new Staff = &quot;men&quot; &lt;&lt;
        \clef bass
        \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
        \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = &quot;basses&quot;
      \context Lyrics = &quot;sopranos&quot; \lyricsto &quot;sopranos&quot; \sopWords
      \context Lyrics = &quot;altos&quot; \lyricsto &quot;altos&quot; \altoWords
      \context Lyrics = &quot;tenors&quot; \lyricsto &quot;tenors&quot; \tenorWords
      \context Lyrics = &quot;basses&quot; \lyricsto &quot;basses&quot; \bassWords
    &gt;&gt;
    \new PianoStaff &lt;&lt;
      \new Staff &lt;&lt;
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \sopMusic &gt;&gt;
        &lt;&lt; \global \altoMusic &gt;&gt;
      &gt;&gt;
      \new Staff &lt;&lt;
        \clef bass
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \tenorMusic &gt;&gt;
        &lt;&lt; \global \bassMusic &gt;&gt;
      &gt;&gt;
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="7e/lily-b74604fe.ly">
  <img align="middle"
       border="0"
       src="7e/lily-b74604fe.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves.ly"></a>

<hr size="6">
<a name="Templates_003a-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-vocal-ensemble-template-with-automatic-piano-reduction" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Vocal ensemble template with automatic piano reduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-vocal-ensemble-template-with-verse-and-refrain" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Vocal ensemble template with verse and refrain &gt; </a>]</td></tr></table>
<a name="templates-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves"></a>
<h2 class="unnumberedsec">Vocal ensemble template with lyrics aligned below and above the staves</h2>


<p>This template is basically the same as the simple &ldquo;Vocal ensemble&rdquo;
template, with the exception that here all the lyrics lines are placed
using <code>alignAboveContext</code> and <code>alignBelowContext</code>.
</p>

<pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff = &quot;women&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
      \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;women&quot; }
      \lyricsto &quot;sopranos&quot; \sopWords
    \new Lyrics \with { alignBelowContext = #&quot;women&quot; }
      \lyricsto &quot;altos&quot; \altoWords
    % we could remove the line about this with the line below, since
    % we want the alto lyrics to be below the alto Voice anyway.
    % \new Lyrics \lyricsto &quot;altos&quot; \altoWords

    \new Staff = &quot;men&quot; &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
      \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = #&quot;men&quot; }
      \lyricsto &quot;tenors&quot; \tenorWords
    \new Lyrics \with { alignBelowContext = #&quot;men&quot; }
      \lyricsto &quot;basses&quot; \bassWords
    % again, we could replace the line above this with the line below.
    % \new Lyrics \lyricsto &quot;basses&quot; \bassWords
  &gt;&gt;
}
</pre><p>
 <a href="8b/lily-01f33d94.ly">
  <img align="middle"
       border="0"
       src="8b/lily-01f33d94.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template-with-verse-and-refrain.ly"></a>

<hr size="6">
<a name="Templates_003a-Vocal-ensemble-template-with-verse-and-refrain"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Vocal ensemble template with lyrics aligned below and above the staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#templates-vocal-ensemble-template" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates: Vocal ensemble template &gt; </a>]</td></tr></table>
<a name="templates-vocal-ensemble-template-with-verse-and-refrain"></a>
<h2 class="unnumberedsec">Vocal ensemble template with verse and refrain</h2>


<p>This template creates a score which starts with a solo verse and
continues into a refrain for two voices.  It also demonstrates the use
of spacer rests within the <code>\global</code> variable to define meter
changes (and other elements common to all parts) throughout the entire
score.
</p>

<pre class="verbatim">global = {
  \key g \major

  % verse
  \time 3/4
  s2.*2
  \break

  % refrain
  \time 2/4
  s2*2
  \bar &quot;|.&quot;
}

SoloNotes = \relative g' {
  \clef &quot;treble&quot;

  % verse
  g4 g g |
  b4 b b |

  % refrain
  R2*2 |
}

SoloLyrics = \lyricmode {
  One two three |
  four five six |
}

SopranoNotes = \relative c'' {
  \clef &quot;treble&quot;

  % verse
  R2.*2 |

  % refrain
  c4 c |
  g4 g |
}

SopranoLyrics = \lyricmode {
  la la |
  la la |
}

BassNotes = \relative c {
  \clef &quot;bass&quot;

  % verse
  R2.*2 |

  % refrain
  c4 e |
  d4 d |
}

BassLyrics = \lyricmode {
  dum dum |
  dum dum |
}

\score {
  &lt;&lt;
    \new Voice = &quot;SoloVoice&quot; &lt;&lt; \global \SoloNotes &gt;&gt;
    \new Lyrics \lyricsto &quot;SoloVoice&quot; \SoloLyrics

    \new ChoirStaff &lt;&lt;
      \new Voice = &quot;SopranoVoice&quot; &lt;&lt; \global \SopranoNotes &gt;&gt;
      \new Lyrics \lyricsto &quot;SopranoVoice&quot; \SopranoLyrics

      \new Voice = &quot;BassVoice&quot; &lt;&lt; \global \BassNotes &gt;&gt;
      \new Lyrics \lyricsto &quot;BassVoice&quot; \BassLyrics
    &gt;&gt;
  &gt;&gt;
  \layout {
    ragged-right = ##t
    \context { \Staff
      % these lines prevent empty staves from being printed
      \RemoveEmptyStaves
      \override VerticalAxisGroup.remove-first = ##t
    }
  }
}
</pre><p>
 <a href="80/lily-f3131e82.ly">
  <img align="middle"
       border="0"
       src="80/lily-f3131e82.png"
       alt="[image of music]">
 </a>
</p>




<a name="vocal-ensemble-template.ly"></a>

<hr size="6">
<a name="Templates_003a-Vocal-ensemble-template"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#templates-vocal-ensemble-template-with-verse-and-refrain" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates: Vocal ensemble template with verse and refrain&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[&nbsp; &gt; ]</td></tr></table>
<a name="templates-vocal-ensemble-template"></a>
<h2 class="unnumberedsec">Vocal ensemble template</h2>


<p>Here is a standard four-part SATB vocal score. With larger ensembles,
it is often useful to include a section which is included in all parts.
For example, the time signature and key signature are almost always the
same for all parts. Like in the &ldquo;Hymn&rdquo; template, the four voices are
regrouped on only two staves.
</p>

<pre class="verbatim">\paper {
  top-system-spacing.basic-distance = #10
  score-system-spacing.basic-distance = #20
  system-system-spacing.basic-distance = #20
  last-bottom-spacing.basic-distance = #10
}

global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative {
  c''4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative {
  e'4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Lyrics = &quot;sopranos&quot; \with {
      % this is needed for lyrics above a staff
      \override VerticalAxisGroup.staff-affinity = #DOWN
    }
    \new Staff = &quot;women&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; {
        \voiceOne
        &lt;&lt; \global \sopMusic &gt;&gt;
      }
      \new Voice = &quot;altos&quot; {
        \voiceTwo
        &lt;&lt; \global \altoMusic &gt;&gt;
      }
    &gt;&gt;
    \new Lyrics = &quot;altos&quot;
    \new Lyrics = &quot;tenors&quot; \with {
      % this is needed for lyrics above a staff
      \override VerticalAxisGroup.staff-affinity = #DOWN
    }
    \new Staff = &quot;men&quot; &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; {
        \voiceOne
        &lt;&lt; \global \tenorMusic &gt;&gt;
      }
      \new Voice = &quot;basses&quot; {
        \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt;
      }
    &gt;&gt;
    \new Lyrics = &quot;basses&quot;
    \context Lyrics = &quot;sopranos&quot; \lyricsto &quot;sopranos&quot; \sopWords
    \context Lyrics = &quot;altos&quot; \lyricsto &quot;altos&quot; \altoWords
    \context Lyrics = &quot;tenors&quot; \lyricsto &quot;tenors&quot; \tenorWords
    \context Lyrics = &quot;basses&quot; \lyricsto &quot;basses&quot; \bassWords
  &gt;&gt;
}
</pre><p>
 <a href="1b/lily-d20d643e.ly">
  <img align="middle"
       border="0"
       src="1b/lily-d20d643e.png"
       alt="[image of music]">
 </a>
</p>





<hr size="6">
<a name="SEC_Contents"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Pitches-1" href="#pitches">Pitches</a>
  <ul class="toc">
    <li><a name="toc-Adding-ambitus-per-voice-1" href="#pitches-adding-ambitus-per-voice">Adding ambitus per voice</a></li>
    <li><a name="toc-Adding-an-ottava-marking-to-a-single-voice-1" href="#pitches-adding-an-ottava-marking-to-a-single-voice">Adding an ottava marking to a single voice</a></li>
    <li><a name="toc-Altering-the-length-of-beamed-stems-1" href="#pitches-altering-the-length-of-beamed-stems">Altering the length of beamed stems</a></li>
    <li><a name="toc-Ambitus-with-multiple-voices-1" href="#pitches-ambitus-with-multiple-voices">Ambitus with multiple voices</a></li>
    <li><a name="toc-Ambitus-1" href="#pitches-ambitus">Ambitus</a></li>
    <li><a name="toc-Applying-note-head-styles-depending-on-the-step-of-the-scale" href="#pitches-applying-note-head-styles-depending-on-the-step-of-the-scale">Applying note head styles depending on the step of the scale</a></li>
    <li><a name="toc-Automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody" href="#pitches-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody">Automatically changing the stem direction of the middle note based on the melody</a></li>
    <li><a name="toc-Changing-ottava-text" href="#pitches-changing-ottava-text">Changing ottava text</a></li>
    <li><a name="toc-Changing-the-ambitus-gap" href="#pitches-changing-the-ambitus-gap">Changing the ambitus gap</a></li>
    <li><a name="toc-Changing-the-interval-of-lines-on-the-stave" href="#pitches-changing-the-interval-of-lines-on-the-stave">Changing the interval of lines on the stave</a></li>
    <li><a name="toc-Clefs-can-be-transposed-by-arbitrary-amounts" href="#pitches-clefs-can-be-transposed-by-arbitrary-amounts">Clefs can be transposed by arbitrary amounts</a></li>
    <li><a name="toc-Coloring-notes-depending-on-their-pitch-1" href="#pitches-coloring-notes-depending-on-their-pitch">Coloring notes depending on their pitch</a></li>
    <li><a name="toc-Creating-a-sequence-of-notes-on-various-pitches" href="#pitches-creating-a-sequence-of-notes-on-various-pitches">Creating a sequence of notes on various pitches</a></li>
    <li><a name="toc-Creating-custom-key-signatures" href="#pitches-creating-custom-key-signatures">Creating custom key signatures</a></li>
    <li><a name="toc-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi-1" href="#pitches-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</a></li>
    <li><a name="toc-Forcing-a-clef-symbol-to-be-displayed" href="#pitches-forcing-a-clef-symbol-to-be-displayed">Forcing a clef symbol to be displayed</a></li>
    <li><a name="toc-Generating-random-notes" href="#pitches-generating-random-notes">Generating random notes</a></li>
    <li><a name="toc-Hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system" href="#pitches-hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system">Hiding accidentals on tied notes at the start of a new system</a></li>
    <li><a name="toc-Keep-change-clefs-full-sized" href="#pitches-keep-change-clefs-full-sized">Keep change clefs full sized</a></li>
    <li><a name="toc-Makam-example" href="#pitches-makam-example">Makam example</a></li>
    <li><a name="toc-Modifying-the-Ottava-spanner-slope" href="#pitches-modifying-the-ottava-spanner-slope">Modifying the Ottava spanner slope</a></li>
    <li><a name="toc-Non_002dtraditional-key-signatures" href="#pitches-non_002dtraditional-key-signatures">Non-traditional key signatures</a></li>
    <li><a name="toc-Numbers-as-easy-note-heads" href="#pitches-numbers-as-easy-note-heads">Numbers as easy note heads</a></li>
    <li><a name="toc-Orchestra-choir-and-piano-template-2" href="#pitches-orchestra-choir-and-piano-template">Orchestra choir and piano template</a></li>
    <li><a name="toc-Ottava-text-1" href="#pitches-ottava-text">Ottava text</a></li>
    <li><a name="toc-Preventing-extra-naturals-from-being-automatically-added" href="#pitches-preventing-extra-naturals-from-being-automatically-added">Preventing extra naturals from being automatically added</a></li>
    <li><a name="toc-Preventing-natural-signs-from-being-printed-when-the-key-signature-changes" href="#pitches-preventing-natural-signs-from-being-printed-when-the-key-signature-changes">Preventing natural signs from being printed when the key signature changes</a></li>
    <li><a name="toc-Quoting-another-voice-with-transposition" href="#pitches-quoting-another-voice-with-transposition">Quoting another voice with transposition</a></li>
    <li><a name="toc-Separating-key-cancellations-from-key-signature-changes-1" href="#pitches-separating-key-cancellations-from-key-signature-changes">Separating key cancellations from key signature changes</a></li>
    <li><a name="toc-Transposing-pitches-with-minimum-accidentals-_0028_0022Smart_0022-transpose_0029" href="#pitches-transposing-pitches-with-minimum-accidentals-_0028_0022smart_0022-transpose_0029">Transposing pitches with minimum accidentals (&quot;Smart&quot; transpose)</a></li>
    <li><a name="toc-Tweaking-clef-properties" href="#pitches-tweaking-clef-properties">Tweaking clef properties</a></li>
    <li><a name="toc-Using-autochange-with-more-than-one-voice-1" href="#pitches-using-autochange-with-more-than-one-voice">Using autochange with more than one voice</a></li>
  </ul></li>
  <li><a name="toc-Rhythms-1" href="#rhythms">Rhythms</a>
  <ul class="toc">
    <li><a name="toc-Adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms" href="#rhythms-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms">Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms</a></li>
    <li><a name="toc-Adding-drum-parts-1" href="#rhythms-adding-drum-parts">Adding drum parts</a></li>
    <li><a name="toc-Adjusting-grace-note-spacing" href="#rhythms-adjusting-grace-note-spacing">Adjusting grace note spacing</a></li>
    <li><a name="toc-Aligning-bar-numbers" href="#rhythms-aligning-bar-numbers">Aligning bar numbers</a></li>
    <li><a name="toc-Alternative-breve-notes" href="#rhythms-alternative-breve-notes">Alternative breve notes</a></li>
    <li><a name="toc-Automatic-beam-subdivisions" href="#rhythms-automatic-beam-subdivisions">Automatic beam subdivisions</a></li>
    <li><a name="toc-Automatically-change-durations" href="#rhythms-automatically-change-durations">Automatically change durations</a></li>
    <li><a name="toc-Avoiding-collisions-with-chord-fingerings-1" href="#rhythms-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a></li>
    <li><a name="toc-Beam-endings-in-Score-context" href="#rhythms-beam-endings-in-score-context">Beam endings in Score context</a></li>
    <li><a name="toc-Beams-across-line-breaks" href="#rhythms-beams-across-line-breaks">Beams across line breaks</a></li>
    <li><a name="toc-Changing-beam-knee-gap" href="#rhythms-changing-beam-knee-gap">Changing beam knee gap</a></li>
    <li><a name="toc-Changing-form-of-multi_002dmeasure-rests" href="#rhythms-changing-form-of-multi_002dmeasure-rests">Changing form of multi-measure rests</a></li>
    <li><a name="toc-Changing-the-number-of-augmentation-dots-per-note-1" href="#rhythms-changing-the-number-of-augmentation-dots-per-note">Changing the number of augmentation dots per note</a></li>
    <li><a name="toc-Changing-the-tempo-without-a-metronome-mark" href="#rhythms-changing-the-tempo-without-a-metronome-mark">Changing the tempo without a metronome mark</a></li>
    <li><a name="toc-Changing-the-tuplet-number" href="#rhythms-changing-the-tuplet-number">Changing the tuplet number</a></li>
    <li><a name="toc-Changing-time-signatures-inside-a-polymetric-section-using-_005cscaleDurations" href="#rhythms-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations">Changing time signatures inside a polymetric section using \scaleDurations</a></li>
    <li><a name="toc-Chant-or-psalms-notation-1" href="#rhythms-chant-or-psalms-notation">Chant or psalms notation</a></li>
    <li><a name="toc-Compound-time-signatures" href="#rhythms-compound-time-signatures">Compound time signatures</a></li>
    <li><a name="toc-Conducting-signs-measure-grouping-signs" href="#rhythms-conducting-signs-measure-grouping-signs">Conducting signs measure grouping signs</a></li>
    <li><a name="toc-Consistently-left-aligned-bar-numbers" href="#rhythms-consistently-left-aligned-bar-numbers">Consistently left aligned bar numbers</a></li>
    <li><a name="toc-Controlling-tuplet-bracket-visibility-1" href="#rhythms-controlling-tuplet-bracket-visibility">Controlling tuplet bracket visibility</a></li>
    <li><a name="toc-Creating-metronome-marks-in-markup-mode" href="#rhythms-creating-metronome-marks-in-markup-mode">Creating metronome marks in markup mode</a></li>
    <li><a name="toc-Engraving-ties-manually" href="#rhythms-engraving-ties-manually">Engraving ties manually</a></li>
    <li><a name="toc-Engraving-tremolos-with-floating-beams" href="#rhythms-engraving-tremolos-with-floating-beams">Engraving tremolos with floating beams</a></li>
    <li><a name="toc-Entering-several-tuplets-using-only-one-_005ctuplet-command" href="#rhythms-entering-several-tuplets-using-only-one-_005ctuplet-command">Entering several tuplets using only one \tuplet command</a></li>
    <li><a name="toc-Flat-flags-and-beam-nibs" href="#rhythms-flat-flags-and-beam-nibs">Flat flags and beam nibs</a></li>
    <li><a name="toc-Forcing-rehearsal-marks-to-start-from-a-given-letter-or-number" href="#rhythms-forcing-rehearsal-marks-to-start-from-a-given-letter-or-number">Forcing rehearsal marks to start from a given letter or number</a></li>
    <li><a name="toc-Generating-custom-flags" href="#rhythms-generating-custom-flags">Generating custom flags</a></li>
    <li><a name="toc-Guitar-strum-rhythms-1" href="#rhythms-guitar-strum-rhythms">Guitar strum rhythms</a></li>
    <li><a name="toc-Heavily-customized-polymetric-time-signatures" href="#rhythms-heavily-customized-polymetric-time-signatures">Heavily customized polymetric time signatures</a></li>
    <li><a name="toc-Making-an-object-invisible-with-the-_0027transparent-property-2" href="#rhythms-making-an-object-invisible-with-the-_0027transparent-property">Making an object invisible with the &rsquo;transparent property</a></li>
    <li><a name="toc-Making-slurs-with-complex-dash-structure" href="#rhythms-making-slurs-with-complex-dash-structure">Making slurs with complex dash structure</a></li>
    <li><a name="toc-Manually-controlling-beam-positions" href="#rhythms-manually-controlling-beam-positions">Manually controlling beam positions</a></li>
    <li><a name="toc-Merging-multi_002dmeasure-rests-in-a-polyphonic-part" href="#rhythms-merging-multi_002dmeasure-rests-in-a-polyphonic-part">Merging multi-measure rests in a polyphonic part</a></li>
    <li><a name="toc-Modifying-tuplet-bracket-length" href="#rhythms-modifying-tuplet-bracket-length">Modifying tuplet bracket length</a></li>
    <li><a name="toc-Moving-dotted-notes-in-polyphony-2" href="#rhythms-moving-dotted-notes-in-polyphony">Moving dotted notes in polyphony</a></li>
    <li><a name="toc-Multi_002dmeasure-rest-markup" href="#rhythms-multi_002dmeasure-rest-markup">Multi-measure rest markup</a></li>
    <li><a name="toc-Non_002ddefault-tuplet-numbers" href="#rhythms-non_002ddefault-tuplet-numbers">Non-default tuplet numbers</a></li>
    <li><a name="toc-Partcombine-and-autoBeamOff" href="#rhythms-partcombine-and-autobeamoff">Partcombine and autoBeamOff</a></li>
    <li><a name="toc-Permitting-line-breaks-within-beamed-tuplets" href="#rhythms-permitting-line-breaks-within-beamed-tuplets">Permitting line breaks within beamed tuplets</a></li>
    <li><a name="toc-Positioning-grace-note-beams-at-the-height-of-normal-note-beams" href="#rhythms-positioning-grace-note-beams-at-the-height-of-normal-note-beams">Positioning grace note beams at the height of normal note beams</a></li>
    <li><a name="toc-Positioning-grace-notes-with-floating-space" href="#rhythms-positioning-grace-notes-with-floating-space">Positioning grace notes with floating space</a></li>
    <li><a name="toc-Positioning-multi_002dmeasure-rests" href="#rhythms-positioning-multi_002dmeasure-rests">Positioning multi-measure rests</a></li>
    <li><a name="toc-Preventing-final-mark-from-removing-final-tuplet" href="#rhythms-preventing-final-mark-from-removing-final-tuplet">Preventing final mark from removing final tuplet</a></li>
    <li><a name="toc-Printing-bar-numbers-at-regular-intervals" href="#rhythms-printing-bar-numbers-at-regular-intervals">Printing bar numbers at regular intervals</a></li>
    <li><a name="toc-Printing-bar-numbers-inside-boxes-or-circles-1" href="#rhythms-printing-bar-numbers-inside-boxes-or-circles">Printing bar numbers inside boxes or circles</a></li>
    <li><a name="toc-Printing-bar-numbers-with-changing-regular-intervals-1" href="#rhythms-printing-bar-numbers-with-changing-regular-intervals">Printing bar numbers with changing regular intervals</a></li>
    <li><a name="toc-Printing-metronome-and-rehearsal-marks-below-the-staff-1" href="#rhythms-printing-metronome-and-rehearsal-marks-below-the-staff">Printing metronome and rehearsal marks below the staff</a></li>
    <li><a name="toc-Printing-music-with-different-time-signatures-1" href="#rhythms-printing-music-with-different-time-signatures">Printing music with different time signatures</a></li>
    <li><a name="toc-Printing-the-bar-number-for-the-first-measure" href="#rhythms-printing-the-bar-number-for-the-first-measure">Printing the bar number for the first measure</a></li>
    <li><a name="toc-Redefining-grace-note-global-defaults" href="#rhythms-redefining-grace-note-global-defaults">Redefining grace note global defaults</a></li>
    <li><a name="toc-Removing-bar-numbers-from-a-score-1" href="#rhythms-removing-bar-numbers-from-a-score">Removing bar numbers from a score</a></li>
    <li><a name="toc-Removing-connecting-bar-lines-on-StaffGroup-PianoStaff-or-GrandStaff" href="#rhythms-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff">Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff</a></li>
    <li><a name="toc-Rest-styles-2" href="#rhythms-rest-styles">Rest styles</a></li>
    <li><a name="toc-Reverting-default-beam-endings" href="#rhythms-reverting-default-beam-endings">Reverting default beam endings</a></li>
    <li><a name="toc-Rhythmic-slashes-1" href="#rhythms-rhythmic-slashes">Rhythmic slashes</a></li>
    <li><a name="toc-Skips-in-lyric-mode-_00282_0029-1" href="#rhythms-skips-in-lyric-mode-_00282_0029">Skips in lyric mode (2)</a></li>
    <li><a name="toc-Skips-in-lyric-mode-1" href="#rhythms-skips-in-lyric-mode">Skips in lyric mode</a></li>
    <li><a name="toc-Stemlets" href="#rhythms-stemlets">Stemlets</a></li>
    <li><a name="toc-Strict-beat-beaming" href="#rhythms-strict-beat-beaming">Strict beat beaming</a></li>
    <li><a name="toc-Subdividing-beams" href="#rhythms-subdividing-beams">Subdividing beams</a></li>
    <li><a name="toc-Three_002dsided-box" href="#rhythms-three_002dsided-box">Three-sided box</a></li>
    <li><a name="toc-Time-signature-in-parentheses-_002d-method-3" href="#rhythms-time-signature-in-parentheses-_002d-method-3">Time signature in parentheses - method 3</a></li>
    <li><a name="toc-Time-signature-in-parentheses" href="#rhythms-time-signature-in-parentheses">Time signature in parentheses</a></li>
    <li><a name="toc-Time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029" href="#rhythms-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029">Time signature printing only the numerator as a number (instead of the fraction)</a></li>
    <li><a name="toc-Tweaking-grace-layout-within-music" href="#rhythms-tweaking-grace-layout-within-music">Tweaking grace layout within music</a></li>
    <li><a name="toc-User-defined-time-signatures" href="#rhythms-user-defined-time-signatures">User defined time signatures</a></li>
    <li><a name="toc-Using-alternative-flag-styles" href="#rhythms-using-alternative-flag-styles">Using alternative flag styles</a></li>
    <li><a name="toc-Using-grace-note-slashes-with-normal-heads" href="#rhythms-using-grace-note-slashes-with-normal-heads">Using grace note slashes with normal heads</a></li>
    <li><a name="toc-Using-ties-with-arpeggios" href="#rhythms-using-ties-with-arpeggios">Using ties with arpeggios</a></li>
  </ul></li>
  <li><a name="toc-Expressive-marks-1" href="#expressive-marks">Expressive marks</a>
  <ul class="toc">
    <li><a name="toc-Adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms-1" href="#expressive-marks-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms">Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms</a></li>
    <li><a name="toc-Adding-parentheses-around-an-expressive-mark-or-chordal-note" href="#expressive-marks-adding-parentheses-around-an-expressive-mark-or-chordal-note">Adding parentheses around an expressive mark or chordal note</a></li>
    <li><a name="toc-Adding-timing-marks-to-long-glissandi" href="#expressive-marks-adding-timing-marks-to-long-glissandi">Adding timing marks to long glissandi</a></li>
    <li><a name="toc-Adjusting-the-shape-of-falls-and-doits" href="#expressive-marks-adjusting-the-shape-of-falls-and-doits">Adjusting the shape of falls and doits</a></li>
    <li><a name="toc-Alternative-breve-notes-1" href="#expressive-marks-alternative-breve-notes">Alternative breve notes</a></li>
    <li><a name="toc-Asymmetric-slurs-1" href="#expressive-marks-asymmetric-slurs">Asymmetric slurs</a></li>
    <li><a name="toc-Breathing-signs" href="#expressive-marks-breathing-signs">Breathing signs</a></li>
    <li><a name="toc-Broken-Crescendo-Hairpin" href="#expressive-marks-broken-crescendo-hairpin">Broken Crescendo Hairpin</a></li>
    <li><a name="toc-Caesura-_0028_0022railtracks_0022_0029-with-fermata-1" href="#expressive-marks-caesura-_0028_0022railtracks_0022_0029-with-fermata">Caesura (&quot;railtracks&quot;) with fermata</a></li>
    <li><a name="toc-Center-text-below-hairpin-dynamics" href="#expressive-marks-center-text-below-hairpin-dynamics">Center text below hairpin dynamics</a></li>
    <li><a name="toc-Changing-_005cflageolet-mark-size-1" href="#expressive-marks-changing-_005cflageolet-mark-size">Changing \flageolet mark size</a></li>
    <li><a name="toc-Changing-text-and-spanner-styles-for-text-dynamics-1" href="#expressive-marks-changing-text-and-spanner-styles-for-text-dynamics">Changing text and spanner styles for text dynamics</a></li>
    <li><a name="toc-Changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed" href="#expressive-marks-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed">Changing the appearance of a slur from solid to dotted or dashed</a></li>
    <li><a name="toc-Changing-the-breath-mark-symbol" href="#expressive-marks-changing-the-breath-mark-symbol">Changing the breath mark symbol</a></li>
    <li><a name="toc-Changing-the-number-of-augmentation-dots-per-note" href="#expressive-marks-changing-the-number-of-augmentation-dots-per-note">Changing the number of augmentation dots per note</a></li>
    <li><a name="toc-Combining-dynamics-with-markup-texts-1" href="#expressive-marks-combining-dynamics-with-markup-texts">Combining dynamics with markup texts</a></li>
    <li><a name="toc-Contemporary-glissando" href="#expressive-marks-contemporary-glissando">Contemporary glissando</a></li>
    <li><a name="toc-Controlling-spanner-visibility-after-a-line-break-1" href="#expressive-marks-controlling-spanner-visibility-after-a-line-break">Controlling spanner visibility after a line break</a></li>
    <li><a name="toc-Controlling-the-vertical-ordering-of-scripts" href="#expressive-marks-controlling-the-vertical-ordering-of-scripts">Controlling the vertical ordering of scripts</a></li>
    <li><a name="toc-Creating-a-delayed-turn-2" href="#expressive-marks-creating-a-delayed-turn">Creating a delayed turn</a></li>
    <li><a name="toc-Creating-arpeggios-across-notes-in-different-voices" href="#expressive-marks-creating-arpeggios-across-notes-in-different-voices">Creating arpeggios across notes in different voices</a></li>
    <li><a name="toc-Creating-cross_002dstaff-arpeggios-in-a-piano-staff" href="#expressive-marks-creating-cross_002dstaff-arpeggios-in-a-piano-staff">Creating cross-staff arpeggios in a piano staff</a></li>
    <li><a name="toc-Creating-cross_002dstaff-arpeggios-in-other-contexts" href="#expressive-marks-creating-cross_002dstaff-arpeggios-in-other-contexts">Creating cross-staff arpeggios in other contexts</a></li>
    <li><a name="toc-Creating-double_002ddigit-fingerings" href="#expressive-marks-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a></li>
    <li><a name="toc-Creating-_0022real_0022-parenthesized-dynamics" href="#expressive-marks-creating-_0022real_0022-parenthesized-dynamics">Creating &quot;real&quot; parenthesized dynamics</a></li>
    <li><a name="toc-Creating-simultaneous-rehearsal-marks-1" href="#expressive-marks-creating-simultaneous-rehearsal-marks">Creating simultaneous rehearsal marks</a></li>
    <li><a name="toc-Creating-slurs-across-voices-1" href="#expressive-marks-creating-slurs-across-voices">Creating slurs across voices</a></li>
    <li><a name="toc-Creating-text-spanners" href="#expressive-marks-creating-text-spanners">Creating text spanners</a></li>
    <li><a name="toc-Double-glissando-1" href="#expressive-marks-double-glissando">Double glissando</a></li>
    <li><a name="toc-Dynamics-custom-text-spanner-postfix" href="#expressive-marks-dynamics-custom-text-spanner-postfix">Dynamics custom text spanner postfix</a></li>
    <li><a name="toc-Dynamics-text-spanner-postfix" href="#expressive-marks-dynamics-text-spanner-postfix">Dynamics text spanner postfix</a></li>
    <li><a name="toc-Glissandi-can-skip-grobs" href="#expressive-marks-glissandi-can-skip-grobs">Glissandi can skip grobs</a></li>
    <li><a name="toc-Hairpins-with-different-line-styles" href="#expressive-marks-hairpins-with-different-line-styles">Hairpins with different line styles</a></li>
    <li><a name="toc-Hiding-the-extender-line-for-text-dynamics" href="#expressive-marks-hiding-the-extender-line-for-text-dynamics">Hiding the extender line for text dynamics</a></li>
    <li><a name="toc-Horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029" href="#expressive-marks-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029">Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029-3" href="#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029-1" href="#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a></li>
    <li><a name="toc-Inserting-a-caesura-1" href="#expressive-marks-inserting-a-caesura">Inserting a caesura</a></li>
    <li><a name="toc-Laissez-vibrer-ties-1" href="#expressive-marks-laissez-vibrer-ties">Laissez vibrer ties</a></li>
    <li><a name="toc-Line-arrows" href="#expressive-marks-line-arrows">Line arrows</a></li>
    <li><a name="toc-Making-slurs-with-complex-dash-structure-1" href="#expressive-marks-making-slurs-with-complex-dash-structure">Making slurs with complex dash structure</a></li>
    <li><a name="toc-Modifying-default-values-for-articulation-shorthand-notation" href="#expressive-marks-modifying-default-values-for-articulation-shorthand-notation">Modifying default values for articulation shorthand notation</a></li>
    <li><a name="toc-Moving-slur-positions-vertically-1" href="#expressive-marks-moving-slur-positions-vertically">Moving slur positions vertically</a></li>
    <li><a name="toc-Moving-the-ends-of-hairpins" href="#expressive-marks-moving-the-ends-of-hairpins">Moving the ends of hairpins</a></li>
    <li><a name="toc-Positioning-arpeggios-1" href="#expressive-marks-positioning-arpeggios">Positioning arpeggios</a></li>
    <li><a name="toc-Positioning-text-markups-inside-slurs-1" href="#expressive-marks-positioning-text-markups-inside-slurs">Positioning text markups inside slurs</a></li>
    <li><a name="toc-Printing-hairpins-in-various-styles" href="#expressive-marks-printing-hairpins-in-various-styles">Printing hairpins in various styles</a></li>
    <li><a name="toc-Printing-hairpins-using-al-niente-notation" href="#expressive-marks-printing-hairpins-using-al-niente-notation">Printing hairpins using al niente notation</a></li>
    <li><a name="toc-Printing-metronome-and-rehearsal-marks-below-the-staff-2" href="#expressive-marks-printing-metronome-and-rehearsal-marks-below-the-staff">Printing metronome and rehearsal marks below the staff</a></li>
    <li><a name="toc-Setting-hairpin-behavior-at-bar-lines-1" href="#expressive-marks-setting-hairpin-behavior-at-bar-lines">Setting hairpin behavior at bar lines</a></li>
    <li><a name="toc-Setting-the-minimum-length-of-hairpins" href="#expressive-marks-setting-the-minimum-length-of-hairpins">Setting the minimum length of hairpins</a></li>
    <li><a name="toc-Showing-the-same-articulation-above-and-below-a-note-or-chord-1" href="#expressive-marks-showing-the-same-articulation-above-and-below-a-note-or-chord">Showing the same articulation above and below a note or chord</a></li>
    <li><a name="toc-Snap_002dpizzicato-or-Bartok-pizzicato" href="#expressive-marks-snap_002dpizzicato-or-bartok-pizzicato">Snap-pizzicato or Bartok pizzicato</a></li>
    <li><a name="toc-Using-a-tick-as-the-breath-mark-symbol" href="#expressive-marks-using-a-tick-as-the-breath-mark-symbol">Using a tick as the breath mark symbol</a></li>
    <li><a name="toc-Using-arpeggioBracket-to-make-divisi-more-visible" href="#expressive-marks-using-arpeggiobracket-to-make-divisi-more-visible">Using arpeggioBracket to make divisi more visible</a></li>
    <li><a name="toc-Using-double-slurs-for-legato-chords" href="#expressive-marks-using-double-slurs-for-legato-chords">Using double slurs for legato chords</a></li>
    <li><a name="toc-Using-the-whiteout-property-1" href="#expressive-marks-using-the-whiteout-property">Using the whiteout property</a></li>
    <li><a name="toc-Vertical-line-as-a-baroque-articulation-mark" href="#expressive-marks-vertical-line-as-a-baroque-articulation-mark">Vertical line as a baroque articulation mark</a></li>
    <li><a name="toc-Vertically-aligning-dynamics-across-multiple-notes" href="#expressive-marks-vertically-aligning-dynamics-across-multiple-notes">Vertically aligning dynamics across multiple notes</a></li>
  </ul></li>
  <li><a name="toc-Repeats-1" href="#repeats">Repeats</a>
  <ul class="toc">
    <li><a name="toc-Adding-volta-brackets-to-additional-staves" href="#repeats-adding-volta-brackets-to-additional-staves">Adding volta brackets to additional staves</a></li>
    <li><a name="toc-Centered-measure-numbers" href="#repeats-centered-measure-numbers">Centered measure numbers</a></li>
    <li><a name="toc-Changing-the-default-bar-lines" href="#repeats-changing-the-default-bar-lines">Changing the default bar lines</a></li>
    <li><a name="toc-Cross_002dstaff-tremolos-1" href="#repeats-cross_002dstaff-tremolos">Cross-staff tremolos</a></li>
    <li><a name="toc-Engraving-tremolos-with-floating-beams-1" href="#repeats-engraving-tremolos-with-floating-beams">Engraving tremolos with floating beams</a></li>
    <li><a name="toc-Isolated-percent-repeats" href="#repeats-isolated-percent-repeats">Isolated percent repeats</a></li>
    <li><a name="toc-Measure-counter-2" href="#repeats-measure-counter">Measure counter</a></li>
    <li><a name="toc-Numbering-groups-of-measures-3" href="#repeats-numbering-groups-of-measures">Numbering groups of measures</a></li>
    <li><a name="toc-Percent-repeat-count-visibility-1" href="#repeats-percent-repeat-count-visibility">Percent repeat count visibility</a></li>
    <li><a name="toc-Percent-repeat-counter" href="#repeats-percent-repeat-counter">Percent repeat counter</a></li>
    <li><a name="toc-Positioning-segno-and-coda-_0028with-line-break_0029" href="#repeats-positioning-segno-and-coda-_0028with-line-break_0029">Positioning segno and coda (with line break)</a></li>
    <li><a name="toc-Setting-the-double-repeat-default-for-volte" href="#repeats-setting-the-double-repeat-default-for-volte">Setting the double repeat default for volte</a></li>
    <li><a name="toc-Shortening-volta-brackets" href="#repeats-shortening-volta-brackets">Shortening volta brackets</a></li>
    <li><a name="toc-Volta-below-chords-2" href="#repeats-volta-below-chords">Volta below chords</a></li>
    <li><a name="toc-Volta-multi-staff" href="#repeats-volta-multi-staff">Volta multi staff</a></li>
    <li><a name="toc-Volta-text-markup-using-repeatCommands-1" href="#repeats-volta-text-markup-using-repeatcommands">Volta text markup using repeatCommands</a></li>
  </ul></li>
  <li><a name="toc-Simultaneous-notes-1" href="#simultaneous-notes">Simultaneous notes</a>
  <ul class="toc">
    <li><a name="toc-Additional-voices-to-avoid-collisions" href="#simultaneous-notes-additional-voices-to-avoid-collisions">Additional voices to avoid collisions</a></li>
    <li><a name="toc-Changing-a-single-note_0027s-size-in-a-chord-2" href="#simultaneous-notes-changing-a-single-note_0027s-size-in-a-chord">Changing a single note&rsquo;s size in a chord</a></li>
    <li><a name="toc-Changing-partcombine-texts" href="#simultaneous-notes-changing-partcombine-texts">Changing partcombine texts</a></li>
    <li><a name="toc-Clusters-2" href="#simultaneous-notes-clusters">Clusters</a></li>
    <li><a name="toc-Combining-two-parts-on-the-same-staff-1" href="#simultaneous-notes-combining-two-parts-on-the-same-staff">Combining two parts on the same staff</a></li>
    <li><a name="toc-Displaying-complex-chords" href="#simultaneous-notes-displaying-complex-chords">Displaying complex chords</a></li>
    <li><a name="toc-Double-glissando" href="#simultaneous-notes-double-glissando">Double glissando</a></li>
    <li><a name="toc-Forcing-horizontal-shift-of-notes" href="#simultaneous-notes-forcing-horizontal-shift-of-notes">Forcing horizontal shift of notes</a></li>
    <li><a name="toc-Making-an-object-invisible-with-the-_0027transparent-property-1" href="#simultaneous-notes-making-an-object-invisible-with-the-_0027transparent-property">Making an object invisible with the &rsquo;transparent property</a></li>
    <li><a name="toc-Moving-dotted-notes-in-polyphony" href="#simultaneous-notes-moving-dotted-notes-in-polyphony">Moving dotted notes in polyphony</a></li>
    <li><a name="toc-Suppressing-warnings-for-clashing-note-columns" href="#simultaneous-notes-suppressing-warnings-for-clashing-note-columns">Suppressing warnings for clashing note columns</a></li>
    <li><a name="toc-Two-_005cpartcombine-pairs-on-one-staff" href="#simultaneous-notes-two-_005cpartcombine-pairs-on-one-staff">Two \partcombine pairs on one staff</a></li>
  </ul></li>
  <li><a name="toc-Staff-notation-1" href="#staff-notation">Staff notation</a>
  <ul class="toc">
    <li><a name="toc-Adding-ambitus-per-voice-2" href="#staff-notation-adding-ambitus-per-voice">Adding ambitus per voice</a></li>
    <li><a name="toc-Adding-an-extra-staff-at-a-line-break" href="#staff-notation-adding-an-extra-staff-at-a-line-break">Adding an extra staff at a line break</a></li>
    <li><a name="toc-Adding-an-extra-staff-1" href="#staff-notation-adding-an-extra-staff">Adding an extra staff</a></li>
    <li><a name="toc-Adding-indicators-to-staves-which-get-split-after-a-break" href="#staff-notation-adding-indicators-to-staves-which-get-split-after-a-break">Adding indicators to staves which get split after a break</a></li>
    <li><a name="toc-Adding-orchestral-cues-to-a-vocal-score" href="#staff-notation-adding-orchestral-cues-to-a-vocal-score">Adding orchestral cues to a vocal score</a></li>
    <li><a name="toc-Adding-timing-marks-to-long-glissandi-1" href="#staff-notation-adding-timing-marks-to-long-glissandi">Adding timing marks to long glissandi</a></li>
    <li><a name="toc-Alternative-bar-numbering-2" href="#staff-notation-alternative-bar-numbering">Alternative bar numbering</a></li>
    <li><a name="toc-Centered-measure-numbers-1" href="#staff-notation-centered-measure-numbers">Centered measure numbers</a></li>
    <li><a name="toc-Changing-the-default-bar-lines-1" href="#staff-notation-changing-the-default-bar-lines">Changing the default bar lines</a></li>
    <li><a name="toc-Changing-the-number-of-lines-in-a-staff" href="#staff-notation-changing-the-number-of-lines-in-a-staff">Changing the number of lines in a staff</a></li>
    <li><a name="toc-Changing-the-staff-size" href="#staff-notation-changing-the-staff-size">Changing the staff size</a></li>
    <li><a name="toc-Creating-blank-staves-3" href="#staff-notation-creating-blank-staves">Creating blank staves</a></li>
    <li><a name="toc-Creating-custom-key-signatures-2" href="#staff-notation-creating-custom-key-signatures">Creating custom key signatures</a></li>
    <li><a name="toc-Creating-double_002ddigit-fingerings-2" href="#staff-notation-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a></li>
    <li><a name="toc-Cross-staff-stems-2" href="#staff-notation-cross-staff-stems">Cross staff stems</a></li>
    <li><a name="toc-Display-bracket-with-only-one-staff-in-a-system" href="#staff-notation-display-bracket-with-only-one-staff-in-a-system">Display bracket with only one staff in a system</a></li>
    <li><a name="toc-Extending-a-TrillSpanner" href="#staff-notation-extending-a-trillspanner">Extending a TrillSpanner</a></li>
    <li><a name="toc-Extending-glissandi-across-repeats" href="#staff-notation-extending-glissandi-across-repeats">Extending glissandi across repeats</a></li>
    <li><a name="toc-Flat-Ties" href="#staff-notation-flat-ties">Flat Ties</a></li>
    <li><a name="toc-Forcing-measure-width-to-adapt-to-MetronomeMark_0027s-width" href="#staff-notation-forcing-measure-width-to-adapt-to-metronomemark_0027s-width">Forcing measure width to adapt to MetronomeMark&rsquo;s width</a></li>
    <li><a name="toc-Glissandi-can-skip-grobs-1" href="#staff-notation-glissandi-can-skip-grobs">Glissandi can skip grobs</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029-1" href="#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" href="#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a></li>
    <li><a name="toc-Incipit-1" href="#staff-notation-incipit">Incipit</a></li>
    <li><a name="toc-Inserting-score-fragments-above-a-staff-as-markups" href="#staff-notation-inserting-score-fragments-above-a-staff-as-markups">Inserting score fragments above a staff as markups</a></li>
    <li><a name="toc-Let-TabStaff-print-the-topmost-string-at-bottom-1" href="#staff-notation-let-tabstaff-print-the-topmost-string-at-bottom">Let TabStaff print the topmost string at bottom</a></li>
    <li><a name="toc-Letter-tablature-formatting" href="#staff-notation-letter-tablature-formatting">Letter tablature formatting</a></li>
    <li><a name="toc-Making-glissandi-breakable-1" href="#staff-notation-making-glissandi-breakable">Making glissandi breakable</a></li>
    <li><a name="toc-Making-some-staff-lines-thicker-than-the-others" href="#staff-notation-making-some-staff-lines-thicker-than-the-others">Making some staff lines thicker than the others</a></li>
    <li><a name="toc-Measure-counter" href="#staff-notation-measure-counter">Measure counter</a></li>
    <li><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029" href="#staff-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a></li>
    <li><a name="toc-Modifying-the-Ottava-spanner-slope-1" href="#staff-notation-modifying-the-ottava-spanner-slope">Modifying the Ottava spanner slope</a></li>
    <li><a name="toc-Nesting-staves-2" href="#staff-notation-nesting-staves">Nesting staves</a></li>
    <li><a name="toc-Non_002dtraditional-key-signatures-1" href="#staff-notation-non_002dtraditional-key-signatures">Non-traditional key signatures</a></li>
    <li><a name="toc-Numbering-groups-of-measures" href="#staff-notation-numbering-groups-of-measures">Numbering groups of measures</a></li>
    <li><a name="toc-Orchestra-choir-and-piano-template-3" href="#staff-notation-orchestra-choir-and-piano-template">Orchestra choir and piano template</a></li>
    <li><a name="toc-Putting-lyrics-inside-the-staff-1" href="#staff-notation-putting-lyrics-inside-the-staff">Putting lyrics inside the staff</a></li>
    <li><a name="toc-Quoting-another-voice-with-transposition-1" href="#staff-notation-quoting-another-voice-with-transposition">Quoting another voice with transposition</a></li>
    <li><a name="toc-Quoting-another-voice" href="#staff-notation-quoting-another-voice">Quoting another voice</a></li>
    <li><a name="toc-Removing-brace-on-first-line-of-piano-score" href="#staff-notation-removing-brace-on-first-line-of-piano-score">Removing brace on first line of piano score</a></li>
    <li><a name="toc-Removing-the-first-empty-line-1" href="#staff-notation-removing-the-first-empty-line">Removing the first empty line</a></li>
    <li><a name="toc-Setting-system-separators" href="#staff-notation-setting-system-separators">Setting system separators</a></li>
    <li><a name="toc-Tick-bar-lines" href="#staff-notation-tick-bar-lines">Tick bar lines</a></li>
    <li><a name="toc-Time-signature-in-parentheses-_002d-method-3-1" href="#staff-notation-time-signature-in-parentheses-_002d-method-3">Time signature in parentheses - method 3</a></li>
    <li><a name="toc-Time-signature-in-parentheses-2" href="#staff-notation-time-signature-in-parentheses">Time signature in parentheses</a></li>
    <li><a name="toc-Tweaking-clef-properties-2" href="#staff-notation-tweaking-clef-properties">Tweaking clef properties</a></li>
    <li><a name="toc-Two-_005cpartcombine-pairs-on-one-staff-1" href="#staff-notation-two-_005cpartcombine-pairs-on-one-staff">Two \partcombine pairs on one staff</a></li>
    <li><a name="toc-Use-square-bracket-at-the-start-of-a-staff-group-1" href="#staff-notation-use-square-bracket-at-the-start-of-a-staff-group">Use square bracket at the start of a staff group</a></li>
    <li><a name="toc-Using-autochange-with-more-than-one-voice" href="#staff-notation-using-autochange-with-more-than-one-voice">Using autochange with more than one voice</a></li>
    <li><a name="toc-Using-marklines-in-a-Frenched-score" href="#staff-notation-using-marklines-in-a-frenched-score">Using marklines in a Frenched score</a></li>
    <li><a name="toc-Vertical-aligned-StaffGroups-without-connecting-SystemStartBar" href="#staff-notation-vertical-aligned-staffgroups-without-connecting-systemstartbar">Vertical aligned StaffGroups without connecting SystemStartBar</a></li>
    <li><a name="toc-Volta-below-chords-1" href="#staff-notation-volta-below-chords">Volta below chords</a></li>
    <li><a name="toc-Volta-multi-staff-1" href="#staff-notation-volta-multi-staff">Volta multi staff</a></li>
  </ul></li>
  <li><a name="toc-Editorial-annotations-1" href="#editorial-annotations">Editorial annotations</a>
  <ul class="toc">
    <li><a name="toc-Adding-fingerings-to-a-score" href="#editorial-annotations-adding-fingerings-to-a-score">Adding fingerings to a score</a></li>
    <li><a name="toc-Adding-links-to-objects" href="#editorial-annotations-adding-links-to-objects">Adding links to objects</a></li>
    <li><a name="toc-Adding-markups-in-a-tablature-3" href="#editorial-annotations-adding-markups-in-a-tablature">Adding markups in a tablature</a></li>
    <li><a name="toc-Allowing-fingerings-to-be-printed-inside-the-staff-1" href="#editorial-annotations-allowing-fingerings-to-be-printed-inside-the-staff">Allowing fingerings to be printed inside the staff</a></li>
    <li><a name="toc-Alternative-bar-numbering-1" href="#editorial-annotations-alternative-bar-numbering">Alternative bar numbering</a></li>
    <li><a name="toc-Analysis-brackets-above-the-staff-1" href="#editorial-annotations-analysis-brackets-above-the-staff">Analysis brackets above the staff</a></li>
    <li><a name="toc-Analysis-brackets-with-labels" href="#editorial-annotations-analysis-brackets-with-labels">Analysis brackets with labels</a></li>
    <li><a name="toc-Applying-note-head-styles-depending-on-the-step-of-the-scale-1" href="#editorial-annotations-applying-note-head-styles-depending-on-the-step-of-the-scale">Applying note head styles depending on the step of the scale</a></li>
    <li><a name="toc-Avoiding-collisions-with-chord-fingerings-3" href="#editorial-annotations-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a></li>
    <li><a name="toc-Blanking-staff-lines-using-the-_005cwhiteout-command-1" href="#editorial-annotations-blanking-staff-lines-using-the-_005cwhiteout-command">Blanking staff lines using the \whiteout command</a></li>
    <li><a name="toc-Changing-a-single-note_0027s-size-in-a-chord" href="#editorial-annotations-changing-a-single-note_0027s-size-in-a-chord">Changing a single note&rsquo;s size in a chord</a></li>
    <li><a name="toc-Changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed-1" href="#editorial-annotations-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed">Changing the appearance of a slur from solid to dotted or dashed</a></li>
    <li><a name="toc-Coloring-notes-depending-on-their-pitch" href="#editorial-annotations-coloring-notes-depending-on-their-pitch">Coloring notes depending on their pitch</a></li>
    <li><a name="toc-Controlling-the-placement-of-chord-fingerings" href="#editorial-annotations-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a></li>
    <li><a name="toc-Creating-a-delayed-turn-1" href="#editorial-annotations-creating-a-delayed-turn">Creating a delayed turn</a></li>
    <li><a name="toc-Creating-blank-staves-1" href="#editorial-annotations-creating-blank-staves">Creating blank staves</a></li>
    <li><a name="toc-Creating-double_002ddigit-fingerings-1" href="#editorial-annotations-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a></li>
    <li><a name="toc-Default-direction-of-stems-on-the-center-line-of-the-staff" href="#editorial-annotations-default-direction-of-stems-on-the-center-line-of-the-staff">Default direction of stems on the center line of the staff</a></li>
    <li><a name="toc-Drawing-boxes-around-grobs-1" href="#editorial-annotations-drawing-boxes-around-grobs">Drawing boxes around grobs</a></li>
    <li><a name="toc-Drawing-circles-around-note-heads" href="#editorial-annotations-drawing-circles-around-note-heads">Drawing circles around note heads</a></li>
    <li><a name="toc-Drawing-circles-around-various-objects-1" href="#editorial-annotations-drawing-circles-around-various-objects">Drawing circles around various objects</a></li>
    <li><a name="toc-Embedding-native-PostScript-in-a-_005cmarkup-block-1" href="#editorial-annotations-embedding-native-postscript-in-a-_005cmarkup-block">Embedding native PostScript in a \markup block</a></li>
    <li><a name="toc-Grid-lines_003a-changing-their-appearance" href="#editorial-annotations-grid-lines_003a-changing-their-appearance">Grid lines: changing their appearance</a></li>
    <li><a name="toc-Grid-lines_003a-emphasizing-rhythms-and-notes-synchronization" href="#editorial-annotations-grid-lines_003a-emphasizing-rhythms-and-notes-synchronization">Grid lines: emphasizing rhythms and notes synchronization</a></li>
    <li><a name="toc-Hammer-on-and-pull-off-using-chords-1" href="#editorial-annotations-hammer-on-and-pull-off-using-chords">Hammer on and pull off using chords</a></li>
    <li><a name="toc-Hammer-on-and-pull-off-using-voices" href="#editorial-annotations-hammer-on-and-pull-off-using-voices">Hammer on and pull off using voices</a></li>
    <li><a name="toc-Hammer-on-and-pull-off" href="#editorial-annotations-hammer-on-and-pull-off">Hammer on and pull off</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029-2" href="#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029-2" href="#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a></li>
    <li><a name="toc-Making-some-staff-lines-thicker-than-the-others-1" href="#editorial-annotations-making-some-staff-lines-thicker-than-the-others">Making some staff lines thicker than the others</a></li>
    <li><a name="toc-Marking-notes-of-spoken-parts-with-a-cross-on-the-stem" href="#editorial-annotations-marking-notes-of-spoken-parts-with-a-cross-on-the-stem">Marking notes of spoken parts with a cross on the stem</a></li>
    <li><a name="toc-Measure-counter-1" href="#editorial-annotations-measure-counter">Measure counter</a></li>
    <li><a name="toc-Numbering-groups-of-measures-1" href="#editorial-annotations-numbering-groups-of-measures">Numbering groups of measures</a></li>
    <li><a name="toc-Positioning-fingering-indications-precisely" href="#editorial-annotations-positioning-fingering-indications-precisely">Positioning fingering indications precisely</a></li>
    <li><a name="toc-Positioning-text-markups-inside-slurs-2" href="#editorial-annotations-positioning-text-markups-inside-slurs">Positioning text markups inside slurs</a></li>
    <li><a name="toc-Printing-text-from-right-to-left" href="#editorial-annotations-printing-text-from-right-to-left">Printing text from right to left</a></li>
    <li><a name="toc-String-number-extender-lines" href="#editorial-annotations-string-number-extender-lines">String number extender lines</a></li>
    <li><a name="toc-Using-PostScript-to-generate-special-note-head-shapes-1" href="#editorial-annotations-using-postscript-to-generate-special-note-head-shapes">Using PostScript to generate special note head shapes</a></li>
    <li><a name="toc-Using-the-whiteout-property" href="#editorial-annotations-using-the-whiteout-property">Using the whiteout property</a></li>
  </ul></li>
  <li><a name="toc-Text-1" href="#text">Text</a>
  <ul class="toc">
    <li><a name="toc-Adding-markups-in-a-tablature-2" href="#text-adding-markups-in-a-tablature">Adding markups in a tablature</a></li>
    <li><a name="toc-Adding-the-current-date-to-a-score" href="#text-adding-the-current-date-to-a-score">Adding the current date to a score</a></li>
    <li><a name="toc-Adjusting-lyrics-vertical-spacing-3" href="#text-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a></li>
    <li><a name="toc-Aligning-and-centering-instrument-names" href="#text-aligning-and-centering-instrument-names">Aligning and centering instrument names</a></li>
    <li><a name="toc-Aligning-objects-created-with-the-_005cmark-command" href="#text-aligning-objects-created-with-the-_005cmark-command">Aligning objects created with the \mark command</a></li>
    <li><a name="toc-Aligning-syllables-with-melisma-1" href="#text-aligning-syllables-with-melisma">Aligning syllables with melisma</a></li>
    <li><a name="toc-Blanking-staff-lines-using-the-_005cwhiteout-command" href="#text-blanking-staff-lines-using-the-_005cwhiteout-command">Blanking staff lines using the \whiteout command</a></li>
    <li><a name="toc-Center-text-below-hairpin-dynamics-1" href="#text-center-text-below-hairpin-dynamics">Center text below hairpin dynamics</a></li>
    <li><a name="toc-Changing-ottava-text-1" href="#text-changing-ottava-text">Changing ottava text</a></li>
    <li><a name="toc-Changing-the-default-text-font-family-1" href="#text-changing-the-default-text-font-family">Changing the default text font family</a></li>
    <li><a name="toc-Combining-dynamics-with-markup-texts" href="#text-combining-dynamics-with-markup-texts">Combining dynamics with markup texts</a></li>
    <li><a name="toc-Combining-two-parts-on-the-same-staff" href="#text-combining-two-parts-on-the-same-staff">Combining two parts on the same staff</a></li>
    <li><a name="toc-Creating-_0022real_0022-parenthesized-dynamics-1" href="#text-creating-_0022real_0022-parenthesized-dynamics">Creating &quot;real&quot; parenthesized dynamics</a></li>
    <li><a name="toc-Creating-simultaneous-rehearsal-marks" href="#text-creating-simultaneous-rehearsal-marks">Creating simultaneous rehearsal marks</a></li>
    <li><a name="toc-Creating-text-spanners-1" href="#text-creating-text-spanners">Creating text spanners</a></li>
    <li><a name="toc-Demonstrating-all-headers-2" href="#text-demonstrating-all-headers">Demonstrating all headers</a></li>
    <li><a name="toc-Embedding-native-PostScript-in-a-_005cmarkup-block" href="#text-embedding-native-postscript-in-a-_005cmarkup-block">Embedding native PostScript in a \markup block</a></li>
    <li><a name="toc-Formatting-lyrics-syllables-1" href="#text-formatting-lyrics-syllables">Formatting lyrics syllables</a></li>
    <li><a name="toc-How-to-put-ties-between-syllables-in-lyrics-1" href="#text-how-to-put-ties-between-syllables-in-lyrics">How to put ties between syllables in lyrics</a></li>
    <li><a name="toc-Lyrics-alignment" href="#text-lyrics-alignment">Lyrics alignment</a></li>
    <li><a name="toc-Markup-lines" href="#text-markup-lines">Markup lines</a></li>
    <li><a name="toc-Multi_002dmeasure-rest-markup-1" href="#text-multi_002dmeasure-rest-markup">Multi-measure rest markup</a></li>
    <li><a name="toc-Ottava-text" href="#text-ottava-text">Ottava text</a></li>
    <li><a name="toc-Outputting-the-version-number-1" href="#text-outputting-the-version-number">Outputting the version number</a></li>
    <li><a name="toc-Piano-template-with-centered-lyrics-2" href="#text-piano-template-with-centered-lyrics">Piano template with centered lyrics</a></li>
    <li><a name="toc-Printing-bar-numbers-with-changing-regular-intervals" href="#text-printing-bar-numbers-with-changing-regular-intervals">Printing bar numbers with changing regular intervals</a></li>
    <li><a name="toc-Printing-marks-at-the-end-of-a-line" href="#text-printing-marks-at-the-end-of-a-line">Printing marks at the end of a line</a></li>
    <li><a name="toc-Printing-marks-on-every-staff" href="#text-printing-marks-on-every-staff">Printing marks on every staff</a></li>
    <li><a name="toc-Printing-text-from-right-to-left-2" href="#text-printing-text-from-right-to-left">Printing text from right to left</a></li>
    <li><a name="toc-Putting-lyrics-inside-the-staff-2" href="#text-putting-lyrics-inside-the-staff">Putting lyrics inside the staff</a></li>
    <li><a name="toc-Stand_002dalone-two_002dcolumn-markup" href="#text-stand_002dalone-two_002dcolumn-markup">Stand-alone two-column markup</a></li>
    <li><a name="toc-String-number-extender-lines-3" href="#text-string-number-extender-lines">String number extender lines</a></li>
    <li><a name="toc-Three_002dsided-box-1" href="#text-three_002dsided-box">Three-sided box</a></li>
    <li><a name="toc-UTF_002d8" href="#text-utf_002d8">UTF-8</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" href="#text-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a></li>
    <li><a name="toc-Volta-text-markup-using-repeatCommands" href="#text-volta-text-markup-using-repeatcommands">Volta text markup using repeatCommands</a></li>
  </ul></li>
  <li><a name="toc-Vocal-music-1" href="#vocal-music">Vocal music</a>
  <ul class="toc">
    <li><a name="toc-Adding-ambitus-per-voice" href="#vocal-music-adding-ambitus-per-voice">Adding ambitus per voice</a></li>
    <li><a name="toc-Adding-indicators-to-staves-which-get-split-after-a-break-1" href="#vocal-music-adding-indicators-to-staves-which-get-split-after-a-break">Adding indicators to staves which get split after a break</a></li>
    <li><a name="toc-Adding-orchestral-cues-to-a-vocal-score-1" href="#vocal-music-adding-orchestral-cues-to-a-vocal-score">Adding orchestral cues to a vocal score</a></li>
    <li><a name="toc-Adjusting-lyrics-vertical-spacing-2" href="#vocal-music-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a></li>
    <li><a name="toc-Aligning-syllables-with-melisma" href="#vocal-music-aligning-syllables-with-melisma">Aligning syllables with melisma</a></li>
    <li><a name="toc-Ambitus-with-multiple-voices" href="#vocal-music-ambitus-with-multiple-voices">Ambitus with multiple voices</a></li>
    <li><a name="toc-Ambitus" href="#vocal-music-ambitus">Ambitus</a></li>
    <li><a name="toc-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music" href="#vocal-music-ancient-notation-template-_002d-modern-transcription-of-gregorian-music">Ancient notation template &ndash; modern transcription of gregorian music</a></li>
    <li><a name="toc-Anglican-psalm-template-1" href="#vocal-music-anglican-psalm-template">Anglican psalm template</a></li>
    <li><a name="toc-Arranging-separate-lyrics-on-a-single-line-1" href="#vocal-music-arranging-separate-lyrics-on-a-single-line">Arranging separate lyrics on a single line</a></li>
    <li><a name="toc-Changing-stanza-fonts" href="#vocal-music-changing-stanza-fonts">Changing stanza fonts</a></li>
    <li><a name="toc-Chant-or-psalms-notation-2" href="#vocal-music-chant-or-psalms-notation">Chant or psalms notation</a></li>
    <li><a name="toc-Forcing-hyphens-to-be-shown" href="#vocal-music-forcing-hyphens-to-be-shown">Forcing hyphens to be shown</a></li>
    <li><a name="toc-Formatting-lyrics-syllables" href="#vocal-music-formatting-lyrics-syllables">Formatting lyrics syllables</a></li>
    <li><a name="toc-How-to-put-ties-between-syllables-in-lyrics" href="#vocal-music-how-to-put-ties-between-syllables-in-lyrics">How to put ties between syllables in lyrics</a></li>
    <li><a name="toc-Hymn-template" href="#vocal-music-hymn-template">Hymn template</a></li>
    <li><a name="toc-Lyrics-alignment-1" href="#vocal-music-lyrics-alignment">Lyrics alignment</a></li>
    <li><a name="toc-Marking-notes-of-spoken-parts-with-a-cross-on-the-stem-1" href="#vocal-music-marking-notes-of-spoken-parts-with-a-cross-on-the-stem">Marking notes of spoken parts with a cross on the stem</a></li>
    <li><a name="toc-Obtaining-2_002e12-lyrics-spacing-in-newer-versions" href="#vocal-music-obtaining-2_002e12-lyrics-spacing-in-newer-versions">Obtaining 2.12 lyrics spacing in newer versions</a></li>
    <li><a name="toc-Orchestra-choir-and-piano-template" href="#vocal-music-orchestra-choir-and-piano-template">Orchestra choir and piano template</a></li>
    <li><a name="toc-Piano-template-with-melody-and-lyrics-2" href="#vocal-music-piano-template-with-melody-and-lyrics">Piano template with melody and lyrics</a></li>
    <li><a name="toc-Putting-lyrics-inside-the-staff" href="#vocal-music-putting-lyrics-inside-the-staff">Putting lyrics inside the staff</a></li>
    <li><a name="toc-SATB-Choir-template-_002d-four-staves" href="#vocal-music-satb-choir-template-_002d-four-staves">SATB Choir template - four staves</a></li>
    <li><a name="toc-Single-staff-template-with-notes-lyrics-and-chords" href="#vocal-music-single-staff-template-with-notes-lyrics-and-chords">Single staff template with notes lyrics and chords</a></li>
    <li><a name="toc-Single-staff-template-with-notes-lyrics-chords-and-frets" href="#vocal-music-single-staff-template-with-notes-lyrics-chords-and-frets">Single staff template with notes lyrics chords and frets</a></li>
    <li><a name="toc-Single-staff-template-with-notes-and-lyrics-1" href="#vocal-music-single-staff-template-with-notes-and-lyrics">Single staff template with notes and lyrics</a></li>
    <li><a name="toc-Skips-in-lyric-mode-_00282_0029" href="#vocal-music-skips-in-lyric-mode-_00282_0029">Skips in lyric mode (2)</a></li>
    <li><a name="toc-Skips-in-lyric-mode" href="#vocal-music-skips-in-lyric-mode">Skips in lyric mode</a></li>
    <li><a name="toc-Using-arpeggioBracket-to-make-divisi-more-visible-1" href="#vocal-music-using-arpeggiobracket-to-make-divisi-more-visible">Using arpeggioBracket to make divisi more visible</a></li>
    <li><a name="toc-Using-tags-to-produce-mensural-and-modern-music-from-the-same-source-1" href="#vocal-music-using-tags-to-produce-mensural-and-modern-music-from-the-same-source">Using tags to produce mensural and modern music from the same source</a></li>
    <li><a name="toc-Vertically-aligning-ossias-and-lyrics-2" href="#vocal-music-vertically-aligning-ossias-and-lyrics">Vertically aligning ossias and lyrics</a></li>
    <li><a name="toc-Vertically-centered-common-lyrics" href="#vocal-music-vertically-centered-common-lyrics">Vertically centered common lyrics</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-automatic-piano-reduction" href="#vocal-music-vocal-ensemble-template-with-automatic-piano-reduction">Vocal ensemble template with automatic piano reduction</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves-2" href="#vocal-music-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-verse-and-refrain-1" href="#vocal-music-vocal-ensemble-template-with-verse-and-refrain">Vocal ensemble template with verse and refrain</a></li>
    <li><a name="toc-Vocal-ensemble-template-1" href="#vocal-music-vocal-ensemble-template">Vocal ensemble template</a></li>
  </ul></li>
  <li><a name="toc-Chords-1" href="#chords">Chords</a>
  <ul class="toc">
    <li><a name="toc-Adding-a-figured-bass-above-or-below-the-notes" href="#chords-adding-a-figured-bass-above-or-below-the-notes">Adding a figured bass above or below the notes</a></li>
    <li><a name="toc-Adding-bar-lines-to-ChordNames-context" href="#chords-adding-bar-lines-to-chordnames-context">Adding bar lines to ChordNames context</a></li>
    <li><a name="toc-Avoiding-collisions-with-chord-fingerings-2" href="#chords-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a></li>
    <li><a name="toc-Bar-chords-notation-for-Guitar-_0028with-Text-Spanner_0029" href="#chords-bar-chords-notation-for-guitar-_0028with-text-spanner_0029">Bar chords notation for Guitar (with Text Spanner)</a></li>
    <li><a name="toc-Changing-chord-separator" href="#chords-changing-chord-separator">Changing chord separator</a></li>
    <li><a name="toc-Changing-the-chord-names-to-German-or-semi_002dGerman-notation" href="#chords-changing-the-chord-names-to-german-or-semi_002dgerman-notation">Changing the chord names to German or semi-German notation</a></li>
    <li><a name="toc-Changing-the-positions-of-figured-bass-alterations" href="#chords-changing-the-positions-of-figured-bass-alterations">Changing the positions of figured bass alterations</a></li>
    <li><a name="toc-Chord-name-exceptions" href="#chords-chord-name-exceptions">Chord name exceptions</a></li>
    <li><a name="toc-chord-name-major7" href="#chords-chord-name-major7">chord name major7</a></li>
    <li><a name="toc-Clusters-1" href="#chords-clusters">Clusters</a></li>
    <li><a name="toc-Controlling-the-placement-of-chord-fingerings-1" href="#chords-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a></li>
    <li><a name="toc-Cross_002dstaff-chords-_002d-beaming-problems-workaround-1" href="#chords-cross_002dstaff-chords-_002d-beaming-problems-workaround">Cross-staff chords - beaming problems workaround</a></li>
    <li><a name="toc-Displaying-complex-chords-1" href="#chords-displaying-complex-chords">Displaying complex chords</a></li>
    <li><a name="toc-Manually-break-figured-bass-extenders-for-only-some-numbers" href="#chords-manually-break-figured-bass-extenders-for-only-some-numbers">Manually break figured bass extenders for only some numbers</a></li>
    <li><a name="toc-Showing-chords-at-changes" href="#chords-showing-chords-at-changes">Showing chords at changes</a></li>
    <li><a name="toc-Simple-lead-sheet" href="#chords-simple-lead-sheet">Simple lead sheet</a></li>
    <li><a name="toc-Single-staff-template-with-notes-lyrics-and-chords-1" href="#chords-single-staff-template-with-notes-lyrics-and-chords">Single staff template with notes lyrics and chords</a></li>
    <li><a name="toc-Single-staff-template-with-notes-lyrics-chords-and-frets-1" href="#chords-single-staff-template-with-notes-lyrics-chords-and-frets">Single staff template with notes lyrics chords and frets</a></li>
    <li><a name="toc-Single-staff-template-with-notes-and-chords" href="#chords-single-staff-template-with-notes-and-chords">Single staff template with notes and chords</a></li>
    <li><a name="toc-Vertically-centering-paired-figured-bass-extenders-1" href="#chords-vertically-centering-paired-figured-bass-extenders">Vertically centering paired figured bass extenders</a></li>
    <li><a name="toc-Volta-below-chords" href="#chords-volta-below-chords">Volta below chords</a></li>
  </ul></li>
  <li><a name="toc-Keyboards-1" href="#keyboards">Keyboards</a>
  <ul class="toc">
    <li><a name="toc-Accordion_002ddiscant-symbols" href="#keyboards-accordion_002ddiscant-symbols">Accordion-discant symbols</a></li>
    <li><a name="toc-Accordion-register-symbols" href="#keyboards-accordion-register-symbols">Accordion register symbols</a></li>
    <li><a name="toc-Changing-the-text-for-sustain-markings" href="#keyboards-changing-the-text-for-sustain-markings">Changing the text for sustain markings</a></li>
    <li><a name="toc-Clusters" href="#keyboards-clusters">Clusters</a></li>
    <li><a name="toc-Controlling-the-placement-of-chord-fingerings-3" href="#keyboards-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a></li>
    <li><a name="toc-Creating-slurs-across-voices" href="#keyboards-creating-slurs-across-voices">Creating slurs across voices</a></li>
    <li><a name="toc-Cross_002dstaff-chords-_002d-beaming-problems-workaround" href="#keyboards-cross_002dstaff-chords-_002d-beaming-problems-workaround">Cross-staff chords - beaming problems workaround</a></li>
    <li><a name="toc-Cross_002dstaff-tremolos" href="#keyboards-cross_002dstaff-tremolos">Cross-staff tremolos</a></li>
    <li><a name="toc-Fine_002dtuning-pedal-brackets-1" href="#keyboards-fine_002dtuning-pedal-brackets">Fine-tuning pedal brackets</a></li>
    <li><a name="toc-Indicating-cross_002dstaff-chords-with-arpeggio-bracket" href="#keyboards-indicating-cross_002dstaff-chords-with-arpeggio-bracket">Indicating cross-staff chords with arpeggio bracket</a></li>
    <li><a name="toc-Jazz-combo-template-2" href="#keyboards-jazz-combo-template">Jazz combo template</a></li>
    <li><a name="toc-Laissez-vibrer-ties-2" href="#keyboards-laissez-vibrer-ties">Laissez vibrer ties</a></li>
    <li><a name="toc-Piano-template-_0028simple_0029" href="#keyboards-piano-template-_0028simple_0029">Piano template (simple)</a></li>
    <li><a name="toc-Piano-template-with-centered-lyrics-1" href="#keyboards-piano-template-with-centered-lyrics">Piano template with centered lyrics</a></li>
    <li><a name="toc-Piano-template-with-melody-and-lyrics-1" href="#keyboards-piano-template-with-melody-and-lyrics">Piano template with melody and lyrics</a></li>
    <li><a name="toc-Removing-brace-on-first-line-of-piano-score-2" href="#keyboards-removing-brace-on-first-line-of-piano-score">Removing brace on first line of piano score</a></li>
    <li><a name="toc-Using-autochange-with-more-than-one-voice-2" href="#keyboards-using-autochange-with-more-than-one-voice">Using autochange with more than one voice</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-automatic-piano-reduction-2" href="#keyboards-vocal-ensemble-template-with-automatic-piano-reduction">Vocal ensemble template with automatic piano reduction</a></li>
  </ul></li>
  <li><a name="toc-Percussion-1" href="#percussion">Percussion</a>
  <ul class="toc">
    <li><a name="toc-Adding-drum-parts" href="#percussion-adding-drum-parts">Adding drum parts</a></li>
    <li><a name="toc-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi-2" href="#percussion-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</a></li>
    <li><a name="toc-Heavily-customized-polymetric-time-signatures-1" href="#percussion-heavily-customized-polymetric-time-signatures">Heavily customized polymetric time signatures</a></li>
    <li><a name="toc-Jazz-combo-template-3" href="#percussion-jazz-combo-template">Jazz combo template</a></li>
    <li><a name="toc-Percussion-beaters" href="#percussion-percussion-beaters">Percussion beaters</a></li>
    <li><a name="toc-Printing-music-with-different-time-signatures" href="#percussion-printing-music-with-different-time-signatures">Printing music with different time signatures</a></li>
  </ul></li>
  <li><a name="toc-Fretted-strings-1" href="#fretted-strings">Fretted strings</a>
  <ul class="toc">
    <li><a name="toc-Adding-fingerings-to-a-score-1" href="#fretted-strings-adding-fingerings-to-a-score">Adding fingerings to a score</a></li>
    <li><a name="toc-Adding-fingerings-to-tablatures" href="#fretted-strings-adding-fingerings-to-tablatures">Adding fingerings to tablatures</a></li>
    <li><a name="toc-Adding-markups-in-a-tablature" href="#fretted-strings-adding-markups-in-a-tablature">Adding markups in a tablature</a></li>
    <li><a name="toc-Allowing-fingerings-to-be-printed-inside-the-staff" href="#fretted-strings-allowing-fingerings-to-be-printed-inside-the-staff">Allowing fingerings to be printed inside the staff</a></li>
    <li><a name="toc-Bar-chords-notation-for-Guitar-_0028with-Text-Spanner_0029-1" href="#fretted-strings-bar-chords-notation-for-guitar-_0028with-text-spanner_0029">Bar chords notation for Guitar (with Text Spanner)</a></li>
    <li><a name="toc-Changing-fret-orientations" href="#fretted-strings-changing-fret-orientations">Changing fret orientations</a></li>
    <li><a name="toc-Chord-glissando-in-tablature" href="#fretted-strings-chord-glissando-in-tablature">Chord glissando in tablature</a></li>
    <li><a name="toc-ChordChanges-for-FretBoards" href="#fretted-strings-chordchanges-for-fretboards">ChordChanges for FretBoards</a></li>
    <li><a name="toc-Controlling-the-placement-of-chord-fingerings-2" href="#fretted-strings-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a></li>
    <li><a name="toc-Customizing-fretboard-fret-diagrams-1" href="#fretted-strings-customizing-fretboard-fret-diagrams">Customizing fretboard fret diagrams</a></li>
    <li><a name="toc-Customizing-markup-fret-diagrams-1" href="#fretted-strings-customizing-markup-fret-diagrams">Customizing markup fret diagrams</a></li>
    <li><a name="toc-Defining-predefined-fretboards-for-other-instruments" href="#fretted-strings-defining-predefined-fretboards-for-other-instruments">Defining predefined fretboards for other instruments</a></li>
    <li><a name="toc-Faking-a-hammer-in-tablatures" href="#fretted-strings-faking-a-hammer-in-tablatures">Faking a hammer in tablatures</a></li>
    <li><a name="toc-Fingerings-string-indications-and-right_002dhand-fingerings" href="#fretted-strings-fingerings-string-indications-and-right_002dhand-fingerings">Fingerings string indications and right-hand fingerings</a></li>
    <li><a name="toc-Flamenco-notation" href="#fretted-strings-flamenco-notation">Flamenco notation</a></li>
    <li><a name="toc-Fret-diagrams-explained-and-developed-1" href="#fretted-strings-fret-diagrams-explained-and-developed">Fret diagrams explained and developed</a></li>
    <li><a name="toc-Fretboards-alternate-tables" href="#fretted-strings-fretboards-alternate-tables">Fretboards alternate tables</a></li>
    <li><a name="toc-Fretted_002dstring-harmonics-in-tablature" href="#fretted-strings-fretted_002dstring-harmonics-in-tablature">Fretted-string harmonics in tablature</a></li>
    <li><a name="toc-Guitar-slides" href="#fretted-strings-guitar-slides">Guitar slides</a></li>
    <li><a name="toc-Guitar-strum-rhythms" href="#fretted-strings-guitar-strum-rhythms">Guitar strum rhythms</a></li>
    <li><a name="toc-Hammer-on-and-pull-off-using-chords" href="#fretted-strings-hammer-on-and-pull-off-using-chords">Hammer on and pull off using chords</a></li>
    <li><a name="toc-Hammer-on-and-pull-off-using-voices-1" href="#fretted-strings-hammer-on-and-pull-off-using-voices">Hammer on and pull off using voices</a></li>
    <li><a name="toc-Hammer-on-and-pull-off-1" href="#fretted-strings-hammer-on-and-pull-off">Hammer on and pull off</a></li>
    <li><a name="toc-How-to-change-fret-diagram-position-1" href="#fretted-strings-how-to-change-fret-diagram-position">How to change fret diagram position</a></li>
    <li><a name="toc-Jazz-combo-template-1" href="#fretted-strings-jazz-combo-template">Jazz combo template</a></li>
    <li><a name="toc-Laissez-vibrer-ties" href="#fretted-strings-laissez-vibrer-ties">Laissez vibrer ties</a></li>
    <li><a name="toc-Let-TabStaff-print-the-topmost-string-at-bottom" href="#fretted-strings-let-tabstaff-print-the-topmost-string-at-bottom">Let TabStaff print the topmost string at bottom</a></li>
    <li><a name="toc-Letter-tablature-formatting-1" href="#fretted-strings-letter-tablature-formatting">Letter tablature formatting</a></li>
    <li><a name="toc-Open-string-harmonics-in-tablature" href="#fretted-strings-open-string-harmonics-in-tablature">Open string harmonics in tablature</a></li>
    <li><a name="toc-Placement-of-right_002dhand-fingerings" href="#fretted-strings-placement-of-right_002dhand-fingerings">Placement of right-hand fingerings</a></li>
    <li><a name="toc-Polyphony-in-tablature" href="#fretted-strings-polyphony-in-tablature">Polyphony in tablature</a></li>
    <li><a name="toc-Slides-in-tablature" href="#fretted-strings-slides-in-tablature">Slides in tablature</a></li>
    <li><a name="toc-Stem-and-beam-behavior-in-tablature" href="#fretted-strings-stem-and-beam-behavior-in-tablature">Stem and beam behavior in tablature</a></li>
    <li><a name="toc-String-number-extender-lines-1" href="#fretted-strings-string-number-extender-lines">String number extender lines</a></li>
  </ul></li>
  <li><a name="toc-Unfretted-strings-1" href="#unfretted-strings">Unfretted strings</a>
  <ul class="toc">
    <li><a name="toc-Changing-_005cflageolet-mark-size" href="#unfretted-strings-changing-_005cflageolet-mark-size">Changing \flageolet mark size</a></li>
    <li><a name="toc-Creating-slurs-across-voices-2" href="#unfretted-strings-creating-slurs-across-voices">Creating slurs across voices</a></li>
    <li><a name="toc-Dotted-harmonics" href="#unfretted-strings-dotted-harmonics">Dotted harmonics</a></li>
    <li><a name="toc-Snap_002dpizzicato-or-Bartok-pizzicato-1" href="#unfretted-strings-snap_002dpizzicato-or-bartok-pizzicato">Snap-pizzicato or Bartok pizzicato</a></li>
    <li><a name="toc-String-quartet-template-_0028simple_0029" href="#unfretted-strings-string-quartet-template-_0028simple_0029">String quartet template (simple)</a></li>
    <li><a name="toc-String-quartet-template-with-separate-parts" href="#unfretted-strings-string-quartet-template-with-separate-parts">String quartet template with separate parts</a></li>
  </ul></li>
  <li><a name="toc-Winds-1" href="#winds">Winds</a>
  <ul class="toc">
    <li><a name="toc-Changing-the-size-of-woodwind-diagrams" href="#winds-changing-the-size-of-woodwind-diagrams">Changing the size of woodwind diagrams</a></li>
    <li><a name="toc-Fingering-symbols-for-wind-instruments" href="#winds-fingering-symbols-for-wind-instruments">Fingering symbols for wind instruments</a></li>
    <li><a name="toc-Flute-slap-notation" href="#winds-flute-slap-notation">Flute slap notation</a></li>
    <li><a name="toc-Graphical-and-text-woodwind-diagrams" href="#winds-graphical-and-text-woodwind-diagrams">Graphical and text woodwind diagrams</a></li>
    <li><a name="toc-Recorder-fingering-chart" href="#winds-recorder-fingering-chart">Recorder fingering chart</a></li>
    <li><a name="toc-Woodwind-diagrams-key-lists" href="#winds-woodwind-diagrams-key-lists">Woodwind diagrams key lists</a></li>
    <li><a name="toc-Woodwind-diagrams-listing" href="#winds-woodwind-diagrams-listing">Woodwind diagrams listing</a></li>
  </ul></li>
  <li><a name="toc-Ancient-notation-1" href="#ancient-notation">Ancient notation</a>
  <ul class="toc">
    <li><a name="toc-Adding-a-figured-bass-above-or-below-the-notes-1" href="#ancient-notation-adding-a-figured-bass-above-or-below-the-notes">Adding a figured bass above or below the notes</a></li>
    <li><a name="toc-Ancient-fonts" href="#ancient-notation-ancient-fonts">Ancient fonts</a></li>
    <li><a name="toc-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music-1" href="#ancient-notation-ancient-notation-template-_002d-modern-transcription-of-gregorian-music">Ancient notation template &ndash; modern transcription of gregorian music</a></li>
    <li><a name="toc-Ancient-time-signatures" href="#ancient-notation-ancient-time-signatures">Ancient time signatures</a></li>
    <li><a name="toc-Chant-or-psalms-notation-3" href="#ancient-notation-chant-or-psalms-notation">Chant or psalms notation</a></li>
    <li><a name="toc-Custodes-1" href="#ancient-notation-custodes">Custodes</a></li>
    <li><a name="toc-Incipit" href="#ancient-notation-incipit">Incipit</a></li>
    <li><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029-1" href="#ancient-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a></li>
    <li><a name="toc-Rest-styles-1" href="#ancient-notation-rest-styles">Rest styles</a></li>
    <li><a name="toc-Using-tags-to-produce-mensural-and-modern-music-from-the-same-source" href="#ancient-notation-using-tags-to-produce-mensural-and-modern-music-from-the-same-source">Using tags to produce mensural and modern music from the same source</a></li>
    <li><a name="toc-Vertical-line-as-a-baroque-articulation-mark-1" href="#ancient-notation-vertical-line-as-a-baroque-articulation-mark">Vertical line as a baroque articulation mark</a></li>
  </ul></li>
  <li><a name="toc-World-music-1" href="#world-music">World music</a>
  <ul class="toc">
    <li><a name="toc-Arabic-improvisation" href="#world-music-arabic-improvisation">Arabic improvisation</a></li>
    <li><a name="toc-Makam-example-1" href="#world-music-makam-example">Makam example</a></li>
    <li><a name="toc-Printing-text-from-right-to-left-1" href="#world-music-printing-text-from-right-to-left">Printing text from right to left</a></li>
  </ul></li>
  <li><a name="toc-Contexts-and-engravers-1" href="#contexts-and-engravers">Contexts and engravers</a>
  <ul class="toc">
    <li><a name="toc-Adding-a-figured-bass-above-or-below-the-notes-2" href="#contexts-and-engravers-adding-a-figured-bass-above-or-below-the-notes">Adding a figured bass above or below the notes</a></li>
    <li><a name="toc-Adding-an-extra-staff-at-a-line-break-1" href="#contexts-and-engravers-adding-an-extra-staff-at-a-line-break">Adding an extra staff at a line break</a></li>
    <li><a name="toc-Adding-an-extra-staff" href="#contexts-and-engravers-adding-an-extra-staff">Adding an extra staff</a></li>
    <li><a name="toc-Automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody-1" href="#contexts-and-engravers-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody">Automatically changing the stem direction of the middle note based on the melody</a></li>
    <li><a name="toc-Centered-measure-numbers-2" href="#contexts-and-engravers-centered-measure-numbers">Centered measure numbers</a></li>
    <li><a name="toc-Changing-MIDI-output-to-one-channel-per-voice" href="#contexts-and-engravers-changing-midi-output-to-one-channel-per-voice">Changing MIDI output to one channel per voice</a></li>
    <li><a name="toc-Changing-time-signatures-inside-a-polymetric-section-using-_005cscaleDurations-1" href="#contexts-and-engravers-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations">Changing time signatures inside a polymetric section using \scaleDurations</a></li>
    <li><a name="toc-Chant-or-psalms-notation" href="#contexts-and-engravers-chant-or-psalms-notation">Chant or psalms notation</a></li>
    <li><a name="toc-Creating-blank-staves" href="#contexts-and-engravers-creating-blank-staves">Creating blank staves</a></li>
    <li><a name="toc-Creating-custom-key-signatures-3" href="#contexts-and-engravers-creating-custom-key-signatures">Creating custom key signatures</a></li>
    <li><a name="toc-Cross-staff-stems" href="#contexts-and-engravers-cross-staff-stems">Cross staff stems</a></li>
    <li><a name="toc-Defining-an-engraver-in-Scheme_003a-ambitus-engraver" href="#contexts-and-engravers-defining-an-engraver-in-scheme_003a-ambitus-engraver">Defining an engraver in Scheme: ambitus engraver</a></li>
    <li><a name="toc-Displaying-a-whole-GrandStaff-system-if-only-one-of-its-staves-is-alive" href="#contexts-and-engravers-displaying-a-whole-grandstaff-system-if-only-one-of-its-staves-is-alive">Displaying a whole GrandStaff system if only one of its staves is alive</a></li>
    <li><a name="toc-Engravers-one_002dby_002done" href="#contexts-and-engravers-engravers-one_002dby_002done">Engravers one-by-one</a></li>
    <li><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029-2" href="#contexts-and-engravers-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a></li>
    <li><a name="toc-Nesting-staves" href="#contexts-and-engravers-nesting-staves">Nesting staves</a></li>
    <li><a name="toc-Numbering-groups-of-measures-2" href="#contexts-and-engravers-numbering-groups-of-measures">Numbering groups of measures</a></li>
    <li><a name="toc-Removing-bar-numbers-from-a-score" href="#contexts-and-engravers-removing-bar-numbers-from-a-score">Removing bar numbers from a score</a></li>
    <li><a name="toc-Use-square-bracket-at-the-start-of-a-staff-group" href="#contexts-and-engravers-use-square-bracket-at-the-start-of-a-staff-group">Use square bracket at the start of a staff group</a></li>
    <li><a name="toc-Using-marklines-in-a-Frenched-score-1" href="#contexts-and-engravers-using-marklines-in-a-frenched-score">Using marklines in a Frenched score</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves-1" href="#contexts-and-engravers-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-verse-and-refrain-2" href="#contexts-and-engravers-vocal-ensemble-template-with-verse-and-refrain">Vocal ensemble template with verse and refrain</a></li>
  </ul></li>
  <li><a name="toc-Tweaks-and-overrides-1" href="#tweaks-and-overrides">Tweaks and overrides</a>
  <ul class="toc">
    <li><a name="toc-Adding-an-ottava-marking-to-a-single-voice" href="#tweaks-and-overrides-adding-an-ottava-marking-to-a-single-voice">Adding an ottava marking to a single voice</a></li>
    <li><a name="toc-Adding-links-to-objects-1" href="#tweaks-and-overrides-adding-links-to-objects">Adding links to objects</a></li>
    <li><a name="toc-Adding-markups-in-a-tablature-1" href="#tweaks-and-overrides-adding-markups-in-a-tablature">Adding markups in a tablature</a></li>
    <li><a name="toc-Adding-timing-marks-to-long-glissandi-2" href="#tweaks-and-overrides-adding-timing-marks-to-long-glissandi">Adding timing marks to long glissandi</a></li>
    <li><a name="toc-Adjusting-grace-note-spacing-1" href="#tweaks-and-overrides-adjusting-grace-note-spacing">Adjusting grace note spacing</a></li>
    <li><a name="toc-Adjusting-lyrics-vertical-spacing" href="#tweaks-and-overrides-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a></li>
    <li><a name="toc-Altering-the-length-of-beamed-stems" href="#tweaks-and-overrides-altering-the-length-of-beamed-stems">Altering the length of beamed stems</a></li>
    <li><a name="toc-Alternative-bar-numbering" href="#tweaks-and-overrides-alternative-bar-numbering">Alternative bar numbering</a></li>
    <li><a name="toc-Analysis-brackets-above-the-staff" href="#tweaks-and-overrides-analysis-brackets-above-the-staff">Analysis brackets above the staff</a></li>
    <li><a name="toc-Analysis-brackets-with-labels-1" href="#tweaks-and-overrides-analysis-brackets-with-labels">Analysis brackets with labels</a></li>
    <li><a name="toc-Asymmetric-slurs" href="#tweaks-and-overrides-asymmetric-slurs">Asymmetric slurs</a></li>
    <li><a name="toc-Avoiding-collisions-with-chord-fingerings" href="#tweaks-and-overrides-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a></li>
    <li><a name="toc-Caesura-_0028_0022railtracks_0022_0029-with-fermata" href="#tweaks-and-overrides-caesura-_0028_0022railtracks_0022_0029-with-fermata">Caesura (&quot;railtracks&quot;) with fermata</a></li>
    <li><a name="toc-Changing-a-single-note_0027s-size-in-a-chord-1" href="#tweaks-and-overrides-changing-a-single-note_0027s-size-in-a-chord">Changing a single note&rsquo;s size in a chord</a></li>
    <li><a name="toc-Changing-beam-thickness-and-spacing" href="#tweaks-and-overrides-changing-beam-thickness-and-spacing">Changing beam thickness and spacing</a></li>
    <li><a name="toc-Changing-form-of-multi_002dmeasure-rests-1" href="#tweaks-and-overrides-changing-form-of-multi_002dmeasure-rests">Changing form of multi-measure rests</a></li>
    <li><a name="toc-Changing-properties-for-individual-grobs" href="#tweaks-and-overrides-changing-properties-for-individual-grobs">Changing properties for individual grobs</a></li>
    <li><a name="toc-Changing-text-and-spanner-styles-for-text-dynamics" href="#tweaks-and-overrides-changing-text-and-spanner-styles-for-text-dynamics">Changing text and spanner styles for text dynamics</a></li>
    <li><a name="toc-Changing-the-default-text-font-family" href="#tweaks-and-overrides-changing-the-default-text-font-family">Changing the default text font family</a></li>
    <li><a name="toc-Changing-the-staff-size-2" href="#tweaks-and-overrides-changing-the-staff-size">Changing the staff size</a></li>
    <li><a name="toc-Changing-the-tempo-without-a-metronome-mark-1" href="#tweaks-and-overrides-changing-the-tempo-without-a-metronome-mark">Changing the tempo without a metronome mark</a></li>
    <li><a name="toc-Changing-the-text-for-sustain-markings-1" href="#tweaks-and-overrides-changing-the-text-for-sustain-markings">Changing the text for sustain markings</a></li>
    <li><a name="toc-Controlling-spanner-visibility-after-a-line-break" href="#tweaks-and-overrides-controlling-spanner-visibility-after-a-line-break">Controlling spanner visibility after a line break</a></li>
    <li><a name="toc-Controlling-the-vertical-ordering-of-scripts-1" href="#tweaks-and-overrides-controlling-the-vertical-ordering-of-scripts">Controlling the vertical ordering of scripts</a></li>
    <li><a name="toc-Controlling-tuplet-bracket-visibility" href="#tweaks-and-overrides-controlling-tuplet-bracket-visibility">Controlling tuplet bracket visibility</a></li>
    <li><a name="toc-Creating-a-delayed-turn" href="#tweaks-and-overrides-creating-a-delayed-turn">Creating a delayed turn</a></li>
    <li><a name="toc-Creating-custom-key-signatures-1" href="#tweaks-and-overrides-creating-custom-key-signatures">Creating custom key signatures</a></li>
    <li><a name="toc-Creating-double_002ddigit-fingerings-3" href="#tweaks-and-overrides-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a></li>
    <li><a name="toc-Creating-simultaneous-rehearsal-marks-2" href="#tweaks-and-overrides-creating-simultaneous-rehearsal-marks">Creating simultaneous rehearsal marks</a></li>
    <li><a name="toc-Creating-text-spanners-2" href="#tweaks-and-overrides-creating-text-spanners">Creating text spanners</a></li>
    <li><a name="toc-Cross_002dstaff-chords-_002d-beaming-problems-workaround-2" href="#tweaks-and-overrides-cross_002dstaff-chords-_002d-beaming-problems-workaround">Cross-staff chords - beaming problems workaround</a></li>
    <li><a name="toc-Cross-staff-stems-1" href="#tweaks-and-overrides-cross-staff-stems">Cross staff stems</a></li>
    <li><a name="toc-Custodes" href="#tweaks-and-overrides-custodes">Custodes</a></li>
    <li><a name="toc-Customizing-fretboard-fret-diagrams" href="#tweaks-and-overrides-customizing-fretboard-fret-diagrams">Customizing fretboard fret diagrams</a></li>
    <li><a name="toc-Customizing-markup-fret-diagrams" href="#tweaks-and-overrides-customizing-markup-fret-diagrams">Customizing markup fret diagrams</a></li>
    <li><a name="toc-Display-bracket-with-only-one-staff-in-a-system-1" href="#tweaks-and-overrides-display-bracket-with-only-one-staff-in-a-system">Display bracket with only one staff in a system</a></li>
    <li><a name="toc-Displaying-grob-ancestry" href="#tweaks-and-overrides-displaying-grob-ancestry">Displaying grob ancestry</a></li>
    <li><a name="toc-Dotted-harmonics-1" href="#tweaks-and-overrides-dotted-harmonics">Dotted harmonics</a></li>
    <li><a name="toc-Drawing-boxes-around-grobs" href="#tweaks-and-overrides-drawing-boxes-around-grobs">Drawing boxes around grobs</a></li>
    <li><a name="toc-Drawing-circles-around-various-objects" href="#tweaks-and-overrides-drawing-circles-around-various-objects">Drawing circles around various objects</a></li>
    <li><a name="toc-Dynamics-custom-text-spanner-postfix-1" href="#tweaks-and-overrides-dynamics-custom-text-spanner-postfix">Dynamics custom text spanner postfix</a></li>
    <li><a name="toc-Dynamics-text-spanner-postfix-1" href="#tweaks-and-overrides-dynamics-text-spanner-postfix">Dynamics text spanner postfix</a></li>
    <li><a name="toc-Extending-a-TrillSpanner-1" href="#tweaks-and-overrides-extending-a-trillspanner">Extending a TrillSpanner</a></li>
    <li><a name="toc-Extending-glissandi-across-repeats-1" href="#tweaks-and-overrides-extending-glissandi-across-repeats">Extending glissandi across repeats</a></li>
    <li><a name="toc-Fine_002dtuning-pedal-brackets" href="#tweaks-and-overrides-fine_002dtuning-pedal-brackets">Fine-tuning pedal brackets</a></li>
    <li><a name="toc-Flat-Ties-1" href="#tweaks-and-overrides-flat-ties">Flat Ties</a></li>
    <li><a name="toc-Forcing-horizontal-shift-of-notes-1" href="#tweaks-and-overrides-forcing-horizontal-shift-of-notes">Forcing horizontal shift of notes</a></li>
    <li><a name="toc-Fret-diagrams-explained-and-developed" href="#tweaks-and-overrides-fret-diagrams-explained-and-developed">Fret diagrams explained and developed</a></li>
    <li><a name="toc-Generating-custom-flags-1" href="#tweaks-and-overrides-generating-custom-flags">Generating custom flags</a></li>
    <li><a name="toc-Glissandi-can-skip-grobs-2" href="#tweaks-and-overrides-glissandi-can-skip-grobs">Glissandi can skip grobs</a></li>
    <li><a name="toc-Hairpins-with-different-line-styles-1" href="#tweaks-and-overrides-hairpins-with-different-line-styles">Hairpins with different line styles</a></li>
    <li><a name="toc-Horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029-1" href="#tweaks-and-overrides-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029">Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)</a></li>
    <li><a name="toc-How-to-change-fret-diagram-position" href="#tweaks-and-overrides-how-to-change-fret-diagram-position">How to change fret diagram position</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" href="#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a></li>
    <li><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029-3" href="#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a></li>
    <li><a name="toc-Inserting-a-caesura" href="#tweaks-and-overrides-inserting-a-caesura">Inserting a caesura</a></li>
    <li><a name="toc-Keep-change-clefs-full-sized-1" href="#tweaks-and-overrides-keep-change-clefs-full-sized">Keep change clefs full sized</a></li>
    <li><a name="toc-Line-arrows-1" href="#tweaks-and-overrides-line-arrows">Line arrows</a></li>
    <li><a name="toc-Making-an-object-invisible-with-the-_0027transparent-property" href="#tweaks-and-overrides-making-an-object-invisible-with-the-_0027transparent-property">Making an object invisible with the &rsquo;transparent property</a></li>
    <li><a name="toc-Making-glissandi-breakable" href="#tweaks-and-overrides-making-glissandi-breakable">Making glissandi breakable</a></li>
    <li><a name="toc-Manually-controlling-beam-positions-1" href="#tweaks-and-overrides-manually-controlling-beam-positions">Manually controlling beam positions</a></li>
    <li><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029-3" href="#tweaks-and-overrides-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a></li>
    <li><a name="toc-Modifying-the-Ottava-spanner-slope-2" href="#tweaks-and-overrides-modifying-the-ottava-spanner-slope">Modifying the Ottava spanner slope</a></li>
    <li><a name="toc-Moving-dotted-notes-in-polyphony-1" href="#tweaks-and-overrides-moving-dotted-notes-in-polyphony">Moving dotted notes in polyphony</a></li>
    <li><a name="toc-Moving-slur-positions-vertically" href="#tweaks-and-overrides-moving-slur-positions-vertically">Moving slur positions vertically</a></li>
    <li><a name="toc-Nesting-staves-1" href="#tweaks-and-overrides-nesting-staves">Nesting staves</a></li>
    <li><a name="toc-Overriding-articulations-of-destinct-type" href="#tweaks-and-overrides-overriding-articulations-of-destinct-type">Overriding articulations of destinct type</a></li>
    <li><a name="toc-Percent-repeat-count-visibility" href="#tweaks-and-overrides-percent-repeat-count-visibility">Percent repeat count visibility</a></li>
    <li><a name="toc-Positioning-arpeggios" href="#tweaks-and-overrides-positioning-arpeggios">Positioning arpeggios</a></li>
    <li><a name="toc-Positioning-multi_002dmeasure-rests-1" href="#tweaks-and-overrides-positioning-multi_002dmeasure-rests">Positioning multi-measure rests</a></li>
    <li><a name="toc-Positioning-text-markups-inside-slurs" href="#tweaks-and-overrides-positioning-text-markups-inside-slurs">Positioning text markups inside slurs</a></li>
    <li><a name="toc-Printing-bar-numbers-inside-boxes-or-circles" href="#tweaks-and-overrides-printing-bar-numbers-inside-boxes-or-circles">Printing bar numbers inside boxes or circles</a></li>
    <li><a name="toc-Printing-metronome-and-rehearsal-marks-below-the-staff" href="#tweaks-and-overrides-printing-metronome-and-rehearsal-marks-below-the-staff">Printing metronome and rehearsal marks below the staff</a></li>
    <li><a name="toc-Printing-note-names-with-and-without-an-octave-marker" href="#tweaks-and-overrides-printing-note-names-with-and-without-an-octave-marker">Printing note names with and without an octave marker</a></li>
    <li><a name="toc-Proportional-strict-notespacing" href="#tweaks-and-overrides-proportional-strict-notespacing">Proportional strict notespacing</a></li>
    <li><a name="toc-Removing-brace-on-first-line-of-piano-score-1" href="#tweaks-and-overrides-removing-brace-on-first-line-of-piano-score">Removing brace on first line of piano score</a></li>
    <li><a name="toc-Removing-connecting-bar-lines-on-StaffGroup-PianoStaff-or-GrandStaff-1" href="#tweaks-and-overrides-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff">Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff</a></li>
    <li><a name="toc-Removing-the-first-empty-line" href="#tweaks-and-overrides-removing-the-first-empty-line">Removing the first empty line</a></li>
    <li><a name="toc-Rest-styles" href="#tweaks-and-overrides-rest-styles">Rest styles</a></li>
    <li><a name="toc-Rhythmic-slashes" href="#tweaks-and-overrides-rhythmic-slashes">Rhythmic slashes</a></li>
    <li><a name="toc-Separating-key-cancellations-from-key-signature-changes" href="#tweaks-and-overrides-separating-key-cancellations-from-key-signature-changes">Separating key cancellations from key signature changes</a></li>
    <li><a name="toc-Setting-hairpin-behavior-at-bar-lines" href="#tweaks-and-overrides-setting-hairpin-behavior-at-bar-lines">Setting hairpin behavior at bar lines</a></li>
    <li><a name="toc-Setting-system-separators-1" href="#tweaks-and-overrides-setting-system-separators">Setting system separators</a></li>
    <li><a name="toc-Showing-the-same-articulation-above-and-below-a-note-or-chord" href="#tweaks-and-overrides-showing-the-same-articulation-above-and-below-a-note-or-chord">Showing the same articulation above and below a note or chord</a></li>
    <li><a name="toc-String-number-extender-lines-2" href="#tweaks-and-overrides-string-number-extender-lines">String number extender lines</a></li>
    <li><a name="toc-Suppressing-warnings-for-clashing-note-columns-1" href="#tweaks-and-overrides-suppressing-warnings-for-clashing-note-columns">Suppressing warnings for clashing note columns</a></li>
    <li><a name="toc-Time-signature-in-parentheses-_002d-method-3-2" href="#tweaks-and-overrides-time-signature-in-parentheses-_002d-method-3">Time signature in parentheses - method 3</a></li>
    <li><a name="toc-Time-signature-in-parentheses-1" href="#tweaks-and-overrides-time-signature-in-parentheses">Time signature in parentheses</a></li>
    <li><a name="toc-Time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029-1" href="#tweaks-and-overrides-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029">Time signature printing only the numerator as a number (instead of the fraction)</a></li>
    <li><a name="toc-Tuplet-bracket-and-change-staff" href="#tweaks-and-overrides-tuplet-bracket-and-change-staff">Tuplet bracket and change staff</a></li>
    <li><a name="toc-Tweaking-clef-properties-1" href="#tweaks-and-overrides-tweaking-clef-properties">Tweaking clef properties</a></li>
    <li><a name="toc-Tweaking-grace-layout-within-music-1" href="#tweaks-and-overrides-tweaking-grace-layout-within-music">Tweaking grace layout within music</a></li>
    <li><a name="toc-Using-alternative-flag-styles-1" href="#tweaks-and-overrides-using-alternative-flag-styles">Using alternative flag styles</a></li>
    <li><a name="toc-Using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak" href="#tweaks-and-overrides-using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak">Using ly:grob-object to access grobs with \tweak</a></li>
    <li><a name="toc-Using-PostScript-to-generate-special-note-head-shapes" href="#tweaks-and-overrides-using-postscript-to-generate-special-note-head-shapes">Using PostScript to generate special note head shapes</a></li>
    <li><a name="toc-Using-the-_005ctweak-command-to-tweak-individual-grobs" href="#tweaks-and-overrides-using-the-_005ctweak-command-to-tweak-individual-grobs">Using the \tweak command to tweak individual grobs</a></li>
    <li><a name="toc-Vertically-aligned-dynamics-and-textscripts-1" href="#tweaks-and-overrides-vertically-aligned-dynamics-and-textscripts">Vertically aligned dynamics and textscripts</a></li>
    <li><a name="toc-Vertically-aligning-ossias-and-lyrics-1" href="#tweaks-and-overrides-vertically-aligning-ossias-and-lyrics">Vertically aligning ossias and lyrics</a></li>
    <li><a name="toc-Vertically-centering-paired-figured-bass-extenders" href="#tweaks-and-overrides-vertically-centering-paired-figured-bass-extenders">Vertically centering paired figured bass extenders</a></li>
  </ul></li>
  <li><a name="toc-Paper-and-layout-1" href="#paper-and-layout">Paper and layout</a>
  <ul class="toc">
    <li><a name="toc-Aligning-and-centering-instrument-names-1" href="#paper-and-layout-aligning-and-centering-instrument-names">Aligning and centering instrument names</a></li>
    <li><a name="toc-Arranging-separate-lyrics-on-a-single-line" href="#paper-and-layout-arranging-separate-lyrics-on-a-single-line">Arranging separate lyrics on a single line</a></li>
    <li><a name="toc-Book-parts" href="#paper-and-layout-book-parts">Book parts</a></li>
    <li><a name="toc-Changing-the-staff-size-1" href="#paper-and-layout-changing-the-staff-size">Changing the staff size</a></li>
    <li><a name="toc-Clip-systems" href="#paper-and-layout-clip-systems">Clip systems</a></li>
    <li><a name="toc-Creating-blank-staves-2" href="#paper-and-layout-creating-blank-staves">Creating blank staves</a></li>
    <li><a name="toc-Demonstrating-all-headers" href="#paper-and-layout-demonstrating-all-headers">Demonstrating all headers</a></li>
    <li><a name="toc-Setting-system-separators-2" href="#paper-and-layout-setting-system-separators">Setting system separators</a></li>
    <li><a name="toc-Table-of-contents" href="#paper-and-layout-table-of-contents">Table of contents</a></li>
    <li><a name="toc-Vertical-aligned-StaffGroups-without-connecting-SystemStartBar-1" href="#paper-and-layout-vertical-aligned-staffgroups-without-connecting-systemstartbar">Vertical aligned StaffGroups without connecting SystemStartBar</a></li>
  </ul></li>
  <li><a name="toc-Titles-1" href="#titles">Titles</a>
  <ul class="toc">
    <li><a name="toc-Adding-the-current-date-to-a-score-1" href="#titles-adding-the-current-date-to-a-score">Adding the current date to a score</a></li>
    <li><a name="toc-Aligning-and-centering-instrument-names-2" href="#titles-aligning-and-centering-instrument-names">Aligning and centering instrument names</a></li>
    <li><a name="toc-Demonstrating-all-headers-1" href="#titles-demonstrating-all-headers">Demonstrating all headers</a></li>
    <li><a name="toc-Outputting-the-version-number" href="#titles-outputting-the-version-number">Outputting the version number</a></li>
  </ul></li>
  <li><a name="toc-Spacing-1" href="#spacing">Spacing</a>
  <ul class="toc">
    <li><a name="toc-Adjusting-lyrics-vertical-spacing-1" href="#spacing-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a></li>
    <li><a name="toc-Allowing-fingerings-to-be-printed-inside-the-staff-2" href="#spacing-allowing-fingerings-to-be-printed-inside-the-staff">Allowing fingerings to be printed inside the staff</a></li>
    <li><a name="toc-Page-label" href="#spacing-page-label">Page label</a></li>
    <li><a name="toc-Proportional-strict-notespacing-1" href="#spacing-proportional-strict-notespacing">Proportional strict notespacing</a></li>
    <li><a name="toc-Vertically-aligned-dynamics-and-textscripts" href="#spacing-vertically-aligned-dynamics-and-textscripts">Vertically aligned dynamics and textscripts</a></li>
    <li><a name="toc-Vertically-aligning-ossias-and-lyrics" href="#spacing-vertically-aligning-ossias-and-lyrics">Vertically aligning ossias and lyrics</a></li>
  </ul></li>
  <li><a name="toc-MIDI-1" href="#midi">MIDI</a>
  <ul class="toc">
    <li><a name="toc-Changing-MIDI-output-to-one-channel-per-voice-1" href="#midi-changing-midi-output-to-one-channel-per-voice">Changing MIDI output to one channel per voice</a></li>
    <li><a name="toc-Changing-the-tempo-without-a-metronome-mark-2" href="#midi-changing-the-tempo-without-a-metronome-mark">Changing the tempo without a metronome mark</a></li>
    <li><a name="toc-Creating-custom-dynamics-in-MIDI-output" href="#midi-creating-custom-dynamics-in-midi-output">Creating custom dynamics in MIDI output</a></li>
    <li><a name="toc-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi" href="#midi-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</a></li>
    <li><a name="toc-Demo-MidiInstruments" href="#midi-demo-midiinstruments">Demo MidiInstruments</a></li>
    <li><a name="toc-Replacing-default-MIDI-instrument-equalization" href="#midi-replacing-default-midi-instrument-equalization">Replacing default MIDI instrument equalization</a></li>
  </ul></li>
  <li><a name="toc-Templates-1" href="#templates">Templates</a>
  <ul class="toc">
    <li><a name="toc-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music-2" href="#templates-ancient-notation-template-_002d-modern-transcription-of-gregorian-music">Ancient notation template &ndash; modern transcription of gregorian music</a></li>
    <li><a name="toc-Anglican-psalm-template" href="#templates-anglican-psalm-template">Anglican psalm template</a></li>
    <li><a name="toc-Hymn-template-1" href="#templates-hymn-template">Hymn template</a></li>
    <li><a name="toc-Jazz-combo-template" href="#templates-jazz-combo-template">Jazz combo template</a></li>
    <li><a name="toc-Orchestra-choir-and-piano-template-1" href="#templates-orchestra-choir-and-piano-template">Orchestra choir and piano template</a></li>
    <li><a name="toc-Piano-template-_0028simple_0029-1" href="#templates-piano-template-_0028simple_0029">Piano template (simple)</a></li>
    <li><a name="toc-Piano-template-with-centered-lyrics" href="#templates-piano-template-with-centered-lyrics">Piano template with centered lyrics</a></li>
    <li><a name="toc-Piano-template-with-melody-and-lyrics" href="#templates-piano-template-with-melody-and-lyrics">Piano template with melody and lyrics</a></li>
    <li><a name="toc-SATB-Choir-template-_002d-four-staves-1" href="#templates-satb-choir-template-_002d-four-staves">SATB Choir template - four staves</a></li>
    <li><a name="toc-Score-for-diatonic-accordion" href="#templates-score-for-diatonic-accordion">Score for diatonic accordion</a></li>
    <li><a name="toc-Single-staff-template-with-notes-lyrics-and-chords-2" href="#templates-single-staff-template-with-notes-lyrics-and-chords">Single staff template with notes lyrics and chords</a></li>
    <li><a name="toc-Single-staff-template-with-notes-lyrics-chords-and-frets-2" href="#templates-single-staff-template-with-notes-lyrics-chords-and-frets">Single staff template with notes lyrics chords and frets</a></li>
    <li><a name="toc-Single-staff-template-with-notes-and-chords-1" href="#templates-single-staff-template-with-notes-and-chords">Single staff template with notes and chords</a></li>
    <li><a name="toc-Single-staff-template-with-notes-and-lyrics" href="#templates-single-staff-template-with-notes-and-lyrics">Single staff template with notes and lyrics</a></li>
    <li><a name="toc-Single-staff-template-with-only-notes" href="#templates-single-staff-template-with-only-notes">Single staff template with only notes</a></li>
    <li><a name="toc-String-quartet-template-_0028simple_0029-1" href="#templates-string-quartet-template-_0028simple_0029">String quartet template (simple)</a></li>
    <li><a name="toc-String-quartet-template-with-separate-parts-1" href="#templates-string-quartet-template-with-separate-parts">String quartet template with separate parts</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-automatic-piano-reduction-1" href="#templates-vocal-ensemble-template-with-automatic-piano-reduction">Vocal ensemble template with automatic piano reduction</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves-3" href="#templates-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a></li>
    <li><a name="toc-Vocal-ensemble-template-with-verse-and-refrain" href="#templates-vocal-ensemble-template-with-verse-and-refrain">Vocal ensemble template with verse and refrain</a></li>
    <li><a name="toc-Vocal-ensemble-template" href="#templates-vocal-ensemble-template">Vocal ensemble template</a></li>
  </ul>
</li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][Index][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>GUB</em> on <em>August 6, 2017</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.19.65 (development-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="#index" title="Start of the manual">LilyPond &mdash; Snippets  v2.19.65 (development-branch). </a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Pitches-1" href="snippets-big-page.html#pitches">Pitches</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-ambitus-per-voice-1" href="snippets-big-page.html#pitches-adding-ambitus-per-voice">Adding ambitus per voice</a>    </li>
    <li class=""><a name="toc-Adding-an-ottava-marking-to-a-single-voice-1" href="snippets-big-page.html#pitches-adding-an-ottava-marking-to-a-single-voice">Adding an ottava marking to a single voice</a>    </li>
    <li class=""><a name="toc-Altering-the-length-of-beamed-stems-1" href="snippets-big-page.html#pitches-altering-the-length-of-beamed-stems">Altering the length of beamed stems</a>    </li>
    <li class=""><a name="toc-Ambitus-with-multiple-voices-1" href="snippets-big-page.html#pitches-ambitus-with-multiple-voices">Ambitus with multiple voices</a>    </li>
    <li class=""><a name="toc-Ambitus-1" href="snippets-big-page.html#pitches-ambitus">Ambitus</a>    </li>
    <li class=""><a name="toc-Applying-note-head-styles-depending-on-the-step-of-the-scale" href="snippets-big-page.html#pitches-applying-note-head-styles-depending-on-the-step-of-the-scale">Applying note head styles depending on the step of the scale</a>    </li>
    <li class=""><a name="toc-Automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody" href="snippets-big-page.html#pitches-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody">Automatically changing the stem direction of the middle note based on the melody</a>    </li>
    <li class=""><a name="toc-Changing-ottava-text" href="snippets-big-page.html#pitches-changing-ottava-text">Changing ottava text</a>    </li>
    <li class=""><a name="toc-Changing-the-ambitus-gap" href="snippets-big-page.html#pitches-changing-the-ambitus-gap">Changing the ambitus gap</a>    </li>
    <li class=""><a name="toc-Changing-the-interval-of-lines-on-the-stave" href="snippets-big-page.html#pitches-changing-the-interval-of-lines-on-the-stave">Changing the interval of lines on the stave</a>    </li>
    <li class=""><a name="toc-Clefs-can-be-transposed-by-arbitrary-amounts" href="snippets-big-page.html#pitches-clefs-can-be-transposed-by-arbitrary-amounts">Clefs can be transposed by arbitrary amounts</a>    </li>
    <li class=""><a name="toc-Coloring-notes-depending-on-their-pitch-1" href="snippets-big-page.html#pitches-coloring-notes-depending-on-their-pitch">Coloring notes depending on their pitch</a>    </li>
    <li class=""><a name="toc-Creating-a-sequence-of-notes-on-various-pitches" href="snippets-big-page.html#pitches-creating-a-sequence-of-notes-on-various-pitches">Creating a sequence of notes on various pitches</a>    </li>
    <li class=""><a name="toc-Creating-custom-key-signatures" href="snippets-big-page.html#pitches-creating-custom-key-signatures">Creating custom key signatures</a>    </li>
    <li class=""><a name="toc-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi-1" href="snippets-big-page.html#pitches-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</a>    </li>
    <li class=""><a name="toc-Forcing-a-clef-symbol-to-be-displayed" href="snippets-big-page.html#pitches-forcing-a-clef-symbol-to-be-displayed">Forcing a clef symbol to be displayed</a>    </li>
    <li class=""><a name="toc-Generating-random-notes" href="snippets-big-page.html#pitches-generating-random-notes">Generating random notes</a>    </li>
    <li class=""><a name="toc-Hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system" href="snippets-big-page.html#pitches-hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system">Hiding accidentals on tied notes at the start of a new system</a>    </li>
    <li class=""><a name="toc-Keep-change-clefs-full-sized" href="snippets-big-page.html#pitches-keep-change-clefs-full-sized">Keep change clefs full sized</a>    </li>
    <li class=""><a name="toc-Makam-example" href="snippets-big-page.html#pitches-makam-example">Makam example</a>    </li>
    <li class=""><a name="toc-Modifying-the-Ottava-spanner-slope" href="snippets-big-page.html#pitches-modifying-the-ottava-spanner-slope">Modifying the Ottava spanner slope</a>    </li>
    <li class=""><a name="toc-Non_002dtraditional-key-signatures" href="snippets-big-page.html#pitches-non_002dtraditional-key-signatures">Non-traditional key signatures</a>    </li>
    <li class=""><a name="toc-Numbers-as-easy-note-heads" href="snippets-big-page.html#pitches-numbers-as-easy-note-heads">Numbers as easy note heads</a>    </li>
    <li class=""><a name="toc-Orchestra-choir-and-piano-template-2" href="snippets-big-page.html#pitches-orchestra-choir-and-piano-template">Orchestra choir and piano template</a>    </li>
    <li class=""><a name="toc-Ottava-text-1" href="snippets-big-page.html#pitches-ottava-text">Ottava text</a>    </li>
    <li class=""><a name="toc-Preventing-extra-naturals-from-being-automatically-added" href="snippets-big-page.html#pitches-preventing-extra-naturals-from-being-automatically-added">Preventing extra naturals from being automatically added</a>    </li>
    <li class=""><a name="toc-Preventing-natural-signs-from-being-printed-when-the-key-signature-changes" href="snippets-big-page.html#pitches-preventing-natural-signs-from-being-printed-when-the-key-signature-changes">Preventing natural signs from being printed when the key signature changes</a>    </li>
    <li class=""><a name="toc-Quoting-another-voice-with-transposition" href="snippets-big-page.html#pitches-quoting-another-voice-with-transposition">Quoting another voice with transposition</a>    </li>
    <li class=""><a name="toc-Separating-key-cancellations-from-key-signature-changes-1" href="snippets-big-page.html#pitches-separating-key-cancellations-from-key-signature-changes">Separating key cancellations from key signature changes</a>    </li>
    <li class=""><a name="toc-Transposing-pitches-with-minimum-accidentals-_0028_0022Smart_0022-transpose_0029" href="snippets-big-page.html#pitches-transposing-pitches-with-minimum-accidentals-_0028_0022smart_0022-transpose_0029">Transposing pitches with minimum accidentals (&quot;Smart&quot; transpose)</a>    </li>
    <li class=""><a name="toc-Tweaking-clef-properties" href="snippets-big-page.html#pitches-tweaking-clef-properties">Tweaking clef properties</a>    </li>
    <li class=""><a name="toc-Using-autochange-with-more-than-one-voice-1" href="snippets-big-page.html#pitches-using-autochange-with-more-than-one-voice">Using autochange with more than one voice</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Rhythms-1" href="snippets-big-page.html#rhythms">Rhythms</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms" href="snippets-big-page.html#rhythms-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms">Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms</a>    </li>
    <li class=""><a name="toc-Adding-drum-parts-1" href="snippets-big-page.html#rhythms-adding-drum-parts">Adding drum parts</a>    </li>
    <li class=""><a name="toc-Adjusting-grace-note-spacing" href="snippets-big-page.html#rhythms-adjusting-grace-note-spacing">Adjusting grace note spacing</a>    </li>
    <li class=""><a name="toc-Aligning-bar-numbers" href="snippets-big-page.html#rhythms-aligning-bar-numbers">Aligning bar numbers</a>    </li>
    <li class=""><a name="toc-Alternative-breve-notes" href="snippets-big-page.html#rhythms-alternative-breve-notes">Alternative breve notes</a>    </li>
    <li class=""><a name="toc-Automatic-beam-subdivisions" href="snippets-big-page.html#rhythms-automatic-beam-subdivisions">Automatic beam subdivisions</a>    </li>
    <li class=""><a name="toc-Automatically-change-durations" href="snippets-big-page.html#rhythms-automatically-change-durations">Automatically change durations</a>    </li>
    <li class=""><a name="toc-Avoiding-collisions-with-chord-fingerings-1" href="snippets-big-page.html#rhythms-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a>    </li>
    <li class=""><a name="toc-Beam-endings-in-Score-context" href="snippets-big-page.html#rhythms-beam-endings-in-score-context">Beam endings in Score context</a>    </li>
    <li class=""><a name="toc-Beams-across-line-breaks" href="snippets-big-page.html#rhythms-beams-across-line-breaks">Beams across line breaks</a>    </li>
    <li class=""><a name="toc-Changing-beam-knee-gap" href="snippets-big-page.html#rhythms-changing-beam-knee-gap">Changing beam knee gap</a>    </li>
    <li class=""><a name="toc-Changing-form-of-multi_002dmeasure-rests" href="snippets-big-page.html#rhythms-changing-form-of-multi_002dmeasure-rests">Changing form of multi-measure rests</a>    </li>
    <li class=""><a name="toc-Changing-the-number-of-augmentation-dots-per-note-1" href="snippets-big-page.html#rhythms-changing-the-number-of-augmentation-dots-per-note">Changing the number of augmentation dots per note</a>    </li>
    <li class=""><a name="toc-Changing-the-tempo-without-a-metronome-mark" href="snippets-big-page.html#rhythms-changing-the-tempo-without-a-metronome-mark">Changing the tempo without a metronome mark</a>    </li>
    <li class=""><a name="toc-Changing-the-tuplet-number" href="snippets-big-page.html#rhythms-changing-the-tuplet-number">Changing the tuplet number</a>    </li>
    <li class=""><a name="toc-Changing-time-signatures-inside-a-polymetric-section-using-_005cscaleDurations" href="snippets-big-page.html#rhythms-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations">Changing time signatures inside a polymetric section using \scaleDurations</a>    </li>
    <li class=""><a name="toc-Chant-or-psalms-notation-1" href="snippets-big-page.html#rhythms-chant-or-psalms-notation">Chant or psalms notation</a>    </li>
    <li class=""><a name="toc-Compound-time-signatures" href="snippets-big-page.html#rhythms-compound-time-signatures">Compound time signatures</a>    </li>
    <li class=""><a name="toc-Conducting-signs-measure-grouping-signs" href="snippets-big-page.html#rhythms-conducting-signs-measure-grouping-signs">Conducting signs measure grouping signs</a>    </li>
    <li class=""><a name="toc-Consistently-left-aligned-bar-numbers" href="snippets-big-page.html#rhythms-consistently-left-aligned-bar-numbers">Consistently left aligned bar numbers</a>    </li>
    <li class=""><a name="toc-Controlling-tuplet-bracket-visibility-1" href="snippets-big-page.html#rhythms-controlling-tuplet-bracket-visibility">Controlling tuplet bracket visibility</a>    </li>
    <li class=""><a name="toc-Creating-metronome-marks-in-markup-mode" href="snippets-big-page.html#rhythms-creating-metronome-marks-in-markup-mode">Creating metronome marks in markup mode</a>    </li>
    <li class=""><a name="toc-Engraving-ties-manually" href="snippets-big-page.html#rhythms-engraving-ties-manually">Engraving ties manually</a>    </li>
    <li class=""><a name="toc-Engraving-tremolos-with-floating-beams" href="snippets-big-page.html#rhythms-engraving-tremolos-with-floating-beams">Engraving tremolos with floating beams</a>    </li>
    <li class=""><a name="toc-Entering-several-tuplets-using-only-one-_005ctuplet-command" href="snippets-big-page.html#rhythms-entering-several-tuplets-using-only-one-_005ctuplet-command">Entering several tuplets using only one \tuplet command</a>    </li>
    <li class=""><a name="toc-Flat-flags-and-beam-nibs" href="snippets-big-page.html#rhythms-flat-flags-and-beam-nibs">Flat flags and beam nibs</a>    </li>
    <li class=""><a name="toc-Forcing-rehearsal-marks-to-start-from-a-given-letter-or-number" href="snippets-big-page.html#rhythms-forcing-rehearsal-marks-to-start-from-a-given-letter-or-number">Forcing rehearsal marks to start from a given letter or number</a>    </li>
    <li class=""><a name="toc-Generating-custom-flags" href="snippets-big-page.html#rhythms-generating-custom-flags">Generating custom flags</a>    </li>
    <li class=""><a name="toc-Guitar-strum-rhythms-1" href="snippets-big-page.html#rhythms-guitar-strum-rhythms">Guitar strum rhythms</a>    </li>
    <li class=""><a name="toc-Heavily-customized-polymetric-time-signatures" href="snippets-big-page.html#rhythms-heavily-customized-polymetric-time-signatures">Heavily customized polymetric time signatures</a>    </li>
    <li class=""><a name="toc-Making-an-object-invisible-with-the-_0027transparent-property-2" href="snippets-big-page.html#rhythms-making-an-object-invisible-with-the-_0027transparent-property">Making an object invisible with the &rsquo;transparent property</a>    </li>
    <li class=""><a name="toc-Making-slurs-with-complex-dash-structure" href="snippets-big-page.html#rhythms-making-slurs-with-complex-dash-structure">Making slurs with complex dash structure</a>    </li>
    <li class=""><a name="toc-Manually-controlling-beam-positions" href="snippets-big-page.html#rhythms-manually-controlling-beam-positions">Manually controlling beam positions</a>    </li>
    <li class=""><a name="toc-Merging-multi_002dmeasure-rests-in-a-polyphonic-part" href="snippets-big-page.html#rhythms-merging-multi_002dmeasure-rests-in-a-polyphonic-part">Merging multi-measure rests in a polyphonic part</a>    </li>
    <li class=""><a name="toc-Modifying-tuplet-bracket-length" href="snippets-big-page.html#rhythms-modifying-tuplet-bracket-length">Modifying tuplet bracket length</a>    </li>
    <li class=""><a name="toc-Moving-dotted-notes-in-polyphony-2" href="snippets-big-page.html#rhythms-moving-dotted-notes-in-polyphony">Moving dotted notes in polyphony</a>    </li>
    <li class=""><a name="toc-Multi_002dmeasure-rest-markup" href="snippets-big-page.html#rhythms-multi_002dmeasure-rest-markup">Multi-measure rest markup</a>    </li>
    <li class=""><a name="toc-Non_002ddefault-tuplet-numbers" href="snippets-big-page.html#rhythms-non_002ddefault-tuplet-numbers">Non-default tuplet numbers</a>    </li>
    <li class=""><a name="toc-Partcombine-and-autoBeamOff" href="snippets-big-page.html#rhythms-partcombine-and-autobeamoff">Partcombine and autoBeamOff</a>    </li>
    <li class=""><a name="toc-Permitting-line-breaks-within-beamed-tuplets" href="snippets-big-page.html#rhythms-permitting-line-breaks-within-beamed-tuplets">Permitting line breaks within beamed tuplets</a>    </li>
    <li class=""><a name="toc-Positioning-grace-note-beams-at-the-height-of-normal-note-beams" href="snippets-big-page.html#rhythms-positioning-grace-note-beams-at-the-height-of-normal-note-beams">Positioning grace note beams at the height of normal note beams</a>    </li>
    <li class=""><a name="toc-Positioning-grace-notes-with-floating-space" href="snippets-big-page.html#rhythms-positioning-grace-notes-with-floating-space">Positioning grace notes with floating space</a>    </li>
    <li class=""><a name="toc-Positioning-multi_002dmeasure-rests" href="snippets-big-page.html#rhythms-positioning-multi_002dmeasure-rests">Positioning multi-measure rests</a>    </li>
    <li class=""><a name="toc-Preventing-final-mark-from-removing-final-tuplet" href="snippets-big-page.html#rhythms-preventing-final-mark-from-removing-final-tuplet">Preventing final mark from removing final tuplet</a>    </li>
    <li class=""><a name="toc-Printing-bar-numbers-at-regular-intervals" href="snippets-big-page.html#rhythms-printing-bar-numbers-at-regular-intervals">Printing bar numbers at regular intervals</a>    </li>
    <li class=""><a name="toc-Printing-bar-numbers-inside-boxes-or-circles-1" href="snippets-big-page.html#rhythms-printing-bar-numbers-inside-boxes-or-circles">Printing bar numbers inside boxes or circles</a>    </li>
    <li class=""><a name="toc-Printing-bar-numbers-with-changing-regular-intervals-1" href="snippets-big-page.html#rhythms-printing-bar-numbers-with-changing-regular-intervals">Printing bar numbers with changing regular intervals</a>    </li>
    <li class=""><a name="toc-Printing-metronome-and-rehearsal-marks-below-the-staff-1" href="snippets-big-page.html#rhythms-printing-metronome-and-rehearsal-marks-below-the-staff">Printing metronome and rehearsal marks below the staff</a>    </li>
    <li class=""><a name="toc-Printing-music-with-different-time-signatures-1" href="snippets-big-page.html#rhythms-printing-music-with-different-time-signatures">Printing music with different time signatures</a>    </li>
    <li class=""><a name="toc-Printing-the-bar-number-for-the-first-measure" href="snippets-big-page.html#rhythms-printing-the-bar-number-for-the-first-measure">Printing the bar number for the first measure</a>    </li>
    <li class=""><a name="toc-Redefining-grace-note-global-defaults" href="snippets-big-page.html#rhythms-redefining-grace-note-global-defaults">Redefining grace note global defaults</a>    </li>
    <li class=""><a name="toc-Removing-bar-numbers-from-a-score-1" href="snippets-big-page.html#rhythms-removing-bar-numbers-from-a-score">Removing bar numbers from a score</a>    </li>
    <li class=""><a name="toc-Removing-connecting-bar-lines-on-StaffGroup-PianoStaff-or-GrandStaff" href="snippets-big-page.html#rhythms-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff">Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff</a>    </li>
    <li class=""><a name="toc-Rest-styles-2" href="snippets-big-page.html#rhythms-rest-styles">Rest styles</a>    </li>
    <li class=""><a name="toc-Reverting-default-beam-endings" href="snippets-big-page.html#rhythms-reverting-default-beam-endings">Reverting default beam endings</a>    </li>
    <li class=""><a name="toc-Rhythmic-slashes-1" href="snippets-big-page.html#rhythms-rhythmic-slashes">Rhythmic slashes</a>    </li>
    <li class=""><a name="toc-Skips-in-lyric-mode-_00282_0029-1" href="snippets-big-page.html#rhythms-skips-in-lyric-mode-_00282_0029">Skips in lyric mode (2)</a>    </li>
    <li class=""><a name="toc-Skips-in-lyric-mode-1" href="snippets-big-page.html#rhythms-skips-in-lyric-mode">Skips in lyric mode</a>    </li>
    <li class=""><a name="toc-Stemlets" href="snippets-big-page.html#rhythms-stemlets">Stemlets</a>    </li>
    <li class=""><a name="toc-Strict-beat-beaming" href="snippets-big-page.html#rhythms-strict-beat-beaming">Strict beat beaming</a>    </li>
    <li class=""><a name="toc-Subdividing-beams" href="snippets-big-page.html#rhythms-subdividing-beams">Subdividing beams</a>    </li>
    <li class=""><a name="toc-Three_002dsided-box" href="snippets-big-page.html#rhythms-three_002dsided-box">Three-sided box</a>    </li>
    <li class=""><a name="toc-Time-signature-in-parentheses-_002d-method-3" href="snippets-big-page.html#rhythms-time-signature-in-parentheses-_002d-method-3">Time signature in parentheses - method 3</a>    </li>
    <li class=""><a name="toc-Time-signature-in-parentheses" href="snippets-big-page.html#rhythms-time-signature-in-parentheses">Time signature in parentheses</a>    </li>
    <li class=""><a name="toc-Time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029" href="snippets-big-page.html#rhythms-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029">Time signature printing only the numerator as a number (instead of the fraction)</a>    </li>
    <li class=""><a name="toc-Tweaking-grace-layout-within-music" href="snippets-big-page.html#rhythms-tweaking-grace-layout-within-music">Tweaking grace layout within music</a>    </li>
    <li class=""><a name="toc-User-defined-time-signatures" href="snippets-big-page.html#rhythms-user-defined-time-signatures">User defined time signatures</a>    </li>
    <li class=""><a name="toc-Using-alternative-flag-styles" href="snippets-big-page.html#rhythms-using-alternative-flag-styles">Using alternative flag styles</a>    </li>
    <li class=""><a name="toc-Using-grace-note-slashes-with-normal-heads" href="snippets-big-page.html#rhythms-using-grace-note-slashes-with-normal-heads">Using grace note slashes with normal heads</a>    </li>
    <li class=""><a name="toc-Using-ties-with-arpeggios" href="snippets-big-page.html#rhythms-using-ties-with-arpeggios">Using ties with arpeggios</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Expressive-marks-1" href="snippets-big-page.html#expressive-marks">Expressive marks</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms-1" href="snippets-big-page.html#expressive-marks-adding-beams-slurs-ties-etc_002e-when-using-tuplet-and-non_002dtuplet-rhythms">Adding beams slurs ties etc. when using tuplet and non-tuplet rhythms</a>    </li>
    <li class=""><a name="toc-Adding-parentheses-around-an-expressive-mark-or-chordal-note" href="snippets-big-page.html#expressive-marks-adding-parentheses-around-an-expressive-mark-or-chordal-note">Adding parentheses around an expressive mark or chordal note</a>    </li>
    <li class=""><a name="toc-Adding-timing-marks-to-long-glissandi" href="snippets-big-page.html#expressive-marks-adding-timing-marks-to-long-glissandi">Adding timing marks to long glissandi</a>    </li>
    <li class=""><a name="toc-Adjusting-the-shape-of-falls-and-doits" href="snippets-big-page.html#expressive-marks-adjusting-the-shape-of-falls-and-doits">Adjusting the shape of falls and doits</a>    </li>
    <li class=""><a name="toc-Alternative-breve-notes-1" href="snippets-big-page.html#expressive-marks-alternative-breve-notes">Alternative breve notes</a>    </li>
    <li class=""><a name="toc-Asymmetric-slurs-1" href="snippets-big-page.html#expressive-marks-asymmetric-slurs">Asymmetric slurs</a>    </li>
    <li class=""><a name="toc-Breathing-signs" href="snippets-big-page.html#expressive-marks-breathing-signs">Breathing signs</a>    </li>
    <li class=""><a name="toc-Broken-Crescendo-Hairpin" href="snippets-big-page.html#expressive-marks-broken-crescendo-hairpin">Broken Crescendo Hairpin</a>    </li>
    <li class=""><a name="toc-Caesura-_0028_0022railtracks_0022_0029-with-fermata-1" href="snippets-big-page.html#expressive-marks-caesura-_0028_0022railtracks_0022_0029-with-fermata">Caesura (&quot;railtracks&quot;) with fermata</a>    </li>
    <li class=""><a name="toc-Center-text-below-hairpin-dynamics" href="snippets-big-page.html#expressive-marks-center-text-below-hairpin-dynamics">Center text below hairpin dynamics</a>    </li>
    <li class=""><a name="toc-Changing-_005cflageolet-mark-size-1" href="snippets-big-page.html#expressive-marks-changing-_005cflageolet-mark-size">Changing \flageolet mark size</a>    </li>
    <li class=""><a name="toc-Changing-text-and-spanner-styles-for-text-dynamics-1" href="snippets-big-page.html#expressive-marks-changing-text-and-spanner-styles-for-text-dynamics">Changing text and spanner styles for text dynamics</a>    </li>
    <li class=""><a name="toc-Changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed" href="snippets-big-page.html#expressive-marks-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed">Changing the appearance of a slur from solid to dotted or dashed</a>    </li>
    <li class=""><a name="toc-Changing-the-breath-mark-symbol" href="snippets-big-page.html#expressive-marks-changing-the-breath-mark-symbol">Changing the breath mark symbol</a>    </li>
    <li class=""><a name="toc-Changing-the-number-of-augmentation-dots-per-note" href="snippets-big-page.html#expressive-marks-changing-the-number-of-augmentation-dots-per-note">Changing the number of augmentation dots per note</a>    </li>
    <li class=""><a name="toc-Combining-dynamics-with-markup-texts-1" href="snippets-big-page.html#expressive-marks-combining-dynamics-with-markup-texts">Combining dynamics with markup texts</a>    </li>
    <li class=""><a name="toc-Contemporary-glissando" href="snippets-big-page.html#expressive-marks-contemporary-glissando">Contemporary glissando</a>    </li>
    <li class=""><a name="toc-Controlling-spanner-visibility-after-a-line-break-1" href="snippets-big-page.html#expressive-marks-controlling-spanner-visibility-after-a-line-break">Controlling spanner visibility after a line break</a>    </li>
    <li class=""><a name="toc-Controlling-the-vertical-ordering-of-scripts" href="snippets-big-page.html#expressive-marks-controlling-the-vertical-ordering-of-scripts">Controlling the vertical ordering of scripts</a>    </li>
    <li class=""><a name="toc-Creating-a-delayed-turn-2" href="snippets-big-page.html#expressive-marks-creating-a-delayed-turn">Creating a delayed turn</a>    </li>
    <li class=""><a name="toc-Creating-arpeggios-across-notes-in-different-voices" href="snippets-big-page.html#expressive-marks-creating-arpeggios-across-notes-in-different-voices">Creating arpeggios across notes in different voices</a>    </li>
    <li class=""><a name="toc-Creating-cross_002dstaff-arpeggios-in-a-piano-staff" href="snippets-big-page.html#expressive-marks-creating-cross_002dstaff-arpeggios-in-a-piano-staff">Creating cross-staff arpeggios in a piano staff</a>    </li>
    <li class=""><a name="toc-Creating-cross_002dstaff-arpeggios-in-other-contexts" href="snippets-big-page.html#expressive-marks-creating-cross_002dstaff-arpeggios-in-other-contexts">Creating cross-staff arpeggios in other contexts</a>    </li>
    <li class=""><a name="toc-Creating-double_002ddigit-fingerings" href="snippets-big-page.html#expressive-marks-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a>    </li>
    <li class=""><a name="toc-Creating-_0022real_0022-parenthesized-dynamics" href="snippets-big-page.html#expressive-marks-creating-_0022real_0022-parenthesized-dynamics">Creating &quot;real&quot; parenthesized dynamics</a>    </li>
    <li class=""><a name="toc-Creating-simultaneous-rehearsal-marks-1" href="snippets-big-page.html#expressive-marks-creating-simultaneous-rehearsal-marks">Creating simultaneous rehearsal marks</a>    </li>
    <li class=""><a name="toc-Creating-slurs-across-voices-1" href="snippets-big-page.html#expressive-marks-creating-slurs-across-voices">Creating slurs across voices</a>    </li>
    <li class=""><a name="toc-Creating-text-spanners" href="snippets-big-page.html#expressive-marks-creating-text-spanners">Creating text spanners</a>    </li>
    <li class=""><a name="toc-Double-glissando-1" href="snippets-big-page.html#expressive-marks-double-glissando">Double glissando</a>    </li>
    <li class=""><a name="toc-Dynamics-custom-text-spanner-postfix" href="snippets-big-page.html#expressive-marks-dynamics-custom-text-spanner-postfix">Dynamics custom text spanner postfix</a>    </li>
    <li class=""><a name="toc-Dynamics-text-spanner-postfix" href="snippets-big-page.html#expressive-marks-dynamics-text-spanner-postfix">Dynamics text spanner postfix</a>    </li>
    <li class=""><a name="toc-Glissandi-can-skip-grobs" href="snippets-big-page.html#expressive-marks-glissandi-can-skip-grobs">Glissandi can skip grobs</a>    </li>
    <li class=""><a name="toc-Hairpins-with-different-line-styles" href="snippets-big-page.html#expressive-marks-hairpins-with-different-line-styles">Hairpins with different line styles</a>    </li>
    <li class=""><a name="toc-Hiding-the-extender-line-for-text-dynamics" href="snippets-big-page.html#expressive-marks-hiding-the-extender-line-for-text-dynamics">Hiding the extender line for text dynamics</a>    </li>
    <li class=""><a name="toc-Horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029" href="snippets-big-page.html#expressive-marks-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029">Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029-3" href="snippets-big-page.html#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029-1" href="snippets-big-page.html#expressive-marks-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a>    </li>
    <li class=""><a name="toc-Inserting-a-caesura-1" href="snippets-big-page.html#expressive-marks-inserting-a-caesura">Inserting a caesura</a>    </li>
    <li class=""><a name="toc-Laissez-vibrer-ties-1" href="snippets-big-page.html#expressive-marks-laissez-vibrer-ties">Laissez vibrer ties</a>    </li>
    <li class=""><a name="toc-Line-arrows" href="snippets-big-page.html#expressive-marks-line-arrows">Line arrows</a>    </li>
    <li class=""><a name="toc-Making-slurs-with-complex-dash-structure-1" href="snippets-big-page.html#expressive-marks-making-slurs-with-complex-dash-structure">Making slurs with complex dash structure</a>    </li>
    <li class=""><a name="toc-Modifying-default-values-for-articulation-shorthand-notation" href="snippets-big-page.html#expressive-marks-modifying-default-values-for-articulation-shorthand-notation">Modifying default values for articulation shorthand notation</a>    </li>
    <li class=""><a name="toc-Moving-slur-positions-vertically-1" href="snippets-big-page.html#expressive-marks-moving-slur-positions-vertically">Moving slur positions vertically</a>    </li>
    <li class=""><a name="toc-Moving-the-ends-of-hairpins" href="snippets-big-page.html#expressive-marks-moving-the-ends-of-hairpins">Moving the ends of hairpins</a>    </li>
    <li class=""><a name="toc-Positioning-arpeggios-1" href="snippets-big-page.html#expressive-marks-positioning-arpeggios">Positioning arpeggios</a>    </li>
    <li class=""><a name="toc-Positioning-text-markups-inside-slurs-1" href="snippets-big-page.html#expressive-marks-positioning-text-markups-inside-slurs">Positioning text markups inside slurs</a>    </li>
    <li class=""><a name="toc-Printing-hairpins-in-various-styles" href="snippets-big-page.html#expressive-marks-printing-hairpins-in-various-styles">Printing hairpins in various styles</a>    </li>
    <li class=""><a name="toc-Printing-hairpins-using-al-niente-notation" href="snippets-big-page.html#expressive-marks-printing-hairpins-using-al-niente-notation">Printing hairpins using al niente notation</a>    </li>
    <li class=""><a name="toc-Printing-metronome-and-rehearsal-marks-below-the-staff-2" href="snippets-big-page.html#expressive-marks-printing-metronome-and-rehearsal-marks-below-the-staff">Printing metronome and rehearsal marks below the staff</a>    </li>
    <li class=""><a name="toc-Setting-hairpin-behavior-at-bar-lines-1" href="snippets-big-page.html#expressive-marks-setting-hairpin-behavior-at-bar-lines">Setting hairpin behavior at bar lines</a>    </li>
    <li class=""><a name="toc-Setting-the-minimum-length-of-hairpins" href="snippets-big-page.html#expressive-marks-setting-the-minimum-length-of-hairpins">Setting the minimum length of hairpins</a>    </li>
    <li class=""><a name="toc-Showing-the-same-articulation-above-and-below-a-note-or-chord-1" href="snippets-big-page.html#expressive-marks-showing-the-same-articulation-above-and-below-a-note-or-chord">Showing the same articulation above and below a note or chord</a>    </li>
    <li class=""><a name="toc-Snap_002dpizzicato-or-Bartok-pizzicato" href="snippets-big-page.html#expressive-marks-snap_002dpizzicato-or-bartok-pizzicato">Snap-pizzicato or Bartok pizzicato</a>    </li>
    <li class=""><a name="toc-Using-a-tick-as-the-breath-mark-symbol" href="snippets-big-page.html#expressive-marks-using-a-tick-as-the-breath-mark-symbol">Using a tick as the breath mark symbol</a>    </li>
    <li class=""><a name="toc-Using-arpeggioBracket-to-make-divisi-more-visible" href="snippets-big-page.html#expressive-marks-using-arpeggiobracket-to-make-divisi-more-visible">Using arpeggioBracket to make divisi more visible</a>    </li>
    <li class=""><a name="toc-Using-double-slurs-for-legato-chords" href="snippets-big-page.html#expressive-marks-using-double-slurs-for-legato-chords">Using double slurs for legato chords</a>    </li>
    <li class=""><a name="toc-Using-the-whiteout-property-1" href="snippets-big-page.html#expressive-marks-using-the-whiteout-property">Using the whiteout property</a>    </li>
    <li class=""><a name="toc-Vertical-line-as-a-baroque-articulation-mark" href="snippets-big-page.html#expressive-marks-vertical-line-as-a-baroque-articulation-mark">Vertical line as a baroque articulation mark</a>    </li>
    <li class=""><a name="toc-Vertically-aligning-dynamics-across-multiple-notes" href="snippets-big-page.html#expressive-marks-vertically-aligning-dynamics-across-multiple-notes">Vertically aligning dynamics across multiple notes</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Repeats-1" href="snippets-big-page.html#repeats">Repeats</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-volta-brackets-to-additional-staves" href="snippets-big-page.html#repeats-adding-volta-brackets-to-additional-staves">Adding volta brackets to additional staves</a>    </li>
    <li class=""><a name="toc-Centered-measure-numbers" href="snippets-big-page.html#repeats-centered-measure-numbers">Centered measure numbers</a>    </li>
    <li class=""><a name="toc-Changing-the-default-bar-lines" href="snippets-big-page.html#repeats-changing-the-default-bar-lines">Changing the default bar lines</a>    </li>
    <li class=""><a name="toc-Cross_002dstaff-tremolos-1" href="snippets-big-page.html#repeats-cross_002dstaff-tremolos">Cross-staff tremolos</a>    </li>
    <li class=""><a name="toc-Engraving-tremolos-with-floating-beams-1" href="snippets-big-page.html#repeats-engraving-tremolos-with-floating-beams">Engraving tremolos with floating beams</a>    </li>
    <li class=""><a name="toc-Isolated-percent-repeats" href="snippets-big-page.html#repeats-isolated-percent-repeats">Isolated percent repeats</a>    </li>
    <li class=""><a name="toc-Measure-counter-2" href="snippets-big-page.html#repeats-measure-counter">Measure counter</a>    </li>
    <li class=""><a name="toc-Numbering-groups-of-measures-3" href="snippets-big-page.html#repeats-numbering-groups-of-measures">Numbering groups of measures</a>    </li>
    <li class=""><a name="toc-Percent-repeat-count-visibility-1" href="snippets-big-page.html#repeats-percent-repeat-count-visibility">Percent repeat count visibility</a>    </li>
    <li class=""><a name="toc-Percent-repeat-counter" href="snippets-big-page.html#repeats-percent-repeat-counter">Percent repeat counter</a>    </li>
    <li class=""><a name="toc-Positioning-segno-and-coda-_0028with-line-break_0029" href="snippets-big-page.html#repeats-positioning-segno-and-coda-_0028with-line-break_0029">Positioning segno and coda (with line break)</a>    </li>
    <li class=""><a name="toc-Setting-the-double-repeat-default-for-volte" href="snippets-big-page.html#repeats-setting-the-double-repeat-default-for-volte">Setting the double repeat default for volte</a>    </li>
    <li class=""><a name="toc-Shortening-volta-brackets" href="snippets-big-page.html#repeats-shortening-volta-brackets">Shortening volta brackets</a>    </li>
    <li class=""><a name="toc-Volta-below-chords-2" href="snippets-big-page.html#repeats-volta-below-chords">Volta below chords</a>    </li>
    <li class=""><a name="toc-Volta-multi-staff" href="snippets-big-page.html#repeats-volta-multi-staff">Volta multi staff</a>    </li>
    <li class=""><a name="toc-Volta-text-markup-using-repeatCommands-1" href="snippets-big-page.html#repeats-volta-text-markup-using-repeatcommands">Volta text markup using repeatCommands</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Simultaneous-notes-1" href="snippets-big-page.html#simultaneous-notes">Simultaneous notes</a>
  <ul class="toc">
    <li class=""><a name="toc-Additional-voices-to-avoid-collisions" href="snippets-big-page.html#simultaneous-notes-additional-voices-to-avoid-collisions">Additional voices to avoid collisions</a>    </li>
    <li class=""><a name="toc-Changing-a-single-note_0027s-size-in-a-chord-2" href="snippets-big-page.html#simultaneous-notes-changing-a-single-note_0027s-size-in-a-chord">Changing a single note&rsquo;s size in a chord</a>    </li>
    <li class=""><a name="toc-Changing-partcombine-texts" href="snippets-big-page.html#simultaneous-notes-changing-partcombine-texts">Changing partcombine texts</a>    </li>
    <li class=""><a name="toc-Clusters-2" href="snippets-big-page.html#simultaneous-notes-clusters">Clusters</a>    </li>
    <li class=""><a name="toc-Combining-two-parts-on-the-same-staff-1" href="snippets-big-page.html#simultaneous-notes-combining-two-parts-on-the-same-staff">Combining two parts on the same staff</a>    </li>
    <li class=""><a name="toc-Displaying-complex-chords" href="snippets-big-page.html#simultaneous-notes-displaying-complex-chords">Displaying complex chords</a>    </li>
    <li class=""><a name="toc-Double-glissando" href="snippets-big-page.html#simultaneous-notes-double-glissando">Double glissando</a>    </li>
    <li class=""><a name="toc-Forcing-horizontal-shift-of-notes" href="snippets-big-page.html#simultaneous-notes-forcing-horizontal-shift-of-notes">Forcing horizontal shift of notes</a>    </li>
    <li class=""><a name="toc-Making-an-object-invisible-with-the-_0027transparent-property-1" href="snippets-big-page.html#simultaneous-notes-making-an-object-invisible-with-the-_0027transparent-property">Making an object invisible with the &rsquo;transparent property</a>    </li>
    <li class=""><a name="toc-Moving-dotted-notes-in-polyphony" href="snippets-big-page.html#simultaneous-notes-moving-dotted-notes-in-polyphony">Moving dotted notes in polyphony</a>    </li>
    <li class=""><a name="toc-Suppressing-warnings-for-clashing-note-columns" href="snippets-big-page.html#simultaneous-notes-suppressing-warnings-for-clashing-note-columns">Suppressing warnings for clashing note columns</a>    </li>
    <li class=""><a name="toc-Two-_005cpartcombine-pairs-on-one-staff" href="snippets-big-page.html#simultaneous-notes-two-_005cpartcombine-pairs-on-one-staff">Two \partcombine pairs on one staff</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Staff-notation-1" href="snippets-big-page.html#staff-notation">Staff notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-ambitus-per-voice-2" href="snippets-big-page.html#staff-notation-adding-ambitus-per-voice">Adding ambitus per voice</a>    </li>
    <li class=""><a name="toc-Adding-an-extra-staff-at-a-line-break" href="snippets-big-page.html#staff-notation-adding-an-extra-staff-at-a-line-break">Adding an extra staff at a line break</a>    </li>
    <li class=""><a name="toc-Adding-an-extra-staff-1" href="snippets-big-page.html#staff-notation-adding-an-extra-staff">Adding an extra staff</a>    </li>
    <li class=""><a name="toc-Adding-indicators-to-staves-which-get-split-after-a-break" href="snippets-big-page.html#staff-notation-adding-indicators-to-staves-which-get-split-after-a-break">Adding indicators to staves which get split after a break</a>    </li>
    <li class=""><a name="toc-Adding-orchestral-cues-to-a-vocal-score" href="snippets-big-page.html#staff-notation-adding-orchestral-cues-to-a-vocal-score">Adding orchestral cues to a vocal score</a>    </li>
    <li class=""><a name="toc-Adding-timing-marks-to-long-glissandi-1" href="snippets-big-page.html#staff-notation-adding-timing-marks-to-long-glissandi">Adding timing marks to long glissandi</a>    </li>
    <li class=""><a name="toc-Alternative-bar-numbering-2" href="snippets-big-page.html#staff-notation-alternative-bar-numbering">Alternative bar numbering</a>    </li>
    <li class=""><a name="toc-Centered-measure-numbers-1" href="snippets-big-page.html#staff-notation-centered-measure-numbers">Centered measure numbers</a>    </li>
    <li class=""><a name="toc-Changing-the-default-bar-lines-1" href="snippets-big-page.html#staff-notation-changing-the-default-bar-lines">Changing the default bar lines</a>    </li>
    <li class=""><a name="toc-Changing-the-number-of-lines-in-a-staff" href="snippets-big-page.html#staff-notation-changing-the-number-of-lines-in-a-staff">Changing the number of lines in a staff</a>    </li>
    <li class=""><a name="toc-Changing-the-staff-size" href="snippets-big-page.html#staff-notation-changing-the-staff-size">Changing the staff size</a>    </li>
    <li class=""><a name="toc-Creating-blank-staves-3" href="snippets-big-page.html#staff-notation-creating-blank-staves">Creating blank staves</a>    </li>
    <li class=""><a name="toc-Creating-custom-key-signatures-2" href="snippets-big-page.html#staff-notation-creating-custom-key-signatures">Creating custom key signatures</a>    </li>
    <li class=""><a name="toc-Creating-double_002ddigit-fingerings-2" href="snippets-big-page.html#staff-notation-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a>    </li>
    <li class=""><a name="toc-Cross-staff-stems-2" href="snippets-big-page.html#staff-notation-cross-staff-stems">Cross staff stems</a>    </li>
    <li class=""><a name="toc-Display-bracket-with-only-one-staff-in-a-system" href="snippets-big-page.html#staff-notation-display-bracket-with-only-one-staff-in-a-system">Display bracket with only one staff in a system</a>    </li>
    <li class=""><a name="toc-Extending-a-TrillSpanner" href="snippets-big-page.html#staff-notation-extending-a-trillspanner">Extending a TrillSpanner</a>    </li>
    <li class=""><a name="toc-Extending-glissandi-across-repeats" href="snippets-big-page.html#staff-notation-extending-glissandi-across-repeats">Extending glissandi across repeats</a>    </li>
    <li class=""><a name="toc-Flat-Ties" href="snippets-big-page.html#staff-notation-flat-ties">Flat Ties</a>    </li>
    <li class=""><a name="toc-Forcing-measure-width-to-adapt-to-MetronomeMark_0027s-width" href="snippets-big-page.html#staff-notation-forcing-measure-width-to-adapt-to-metronomemark_0027s-width">Forcing measure width to adapt to MetronomeMark&rsquo;s width</a>    </li>
    <li class=""><a name="toc-Glissandi-can-skip-grobs-1" href="snippets-big-page.html#staff-notation-glissandi-can-skip-grobs">Glissandi can skip grobs</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029-1" href="snippets-big-page.html#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029" href="snippets-big-page.html#staff-notation-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a>    </li>
    <li class=""><a name="toc-Incipit-1" href="snippets-big-page.html#staff-notation-incipit">Incipit</a>    </li>
    <li class=""><a name="toc-Inserting-score-fragments-above-a-staff-as-markups" href="snippets-big-page.html#staff-notation-inserting-score-fragments-above-a-staff-as-markups">Inserting score fragments above a staff as markups</a>    </li>
    <li class=""><a name="toc-Let-TabStaff-print-the-topmost-string-at-bottom-1" href="snippets-big-page.html#staff-notation-let-tabstaff-print-the-topmost-string-at-bottom">Let TabStaff print the topmost string at bottom</a>    </li>
    <li class=""><a name="toc-Letter-tablature-formatting" href="snippets-big-page.html#staff-notation-letter-tablature-formatting">Letter tablature formatting</a>    </li>
    <li class=""><a name="toc-Making-glissandi-breakable-1" href="snippets-big-page.html#staff-notation-making-glissandi-breakable">Making glissandi breakable</a>    </li>
    <li class=""><a name="toc-Making-some-staff-lines-thicker-than-the-others" href="snippets-big-page.html#staff-notation-making-some-staff-lines-thicker-than-the-others">Making some staff lines thicker than the others</a>    </li>
    <li class=""><a name="toc-Measure-counter" href="snippets-big-page.html#staff-notation-measure-counter">Measure counter</a>    </li>
    <li class=""><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029" href="snippets-big-page.html#staff-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a>    </li>
    <li class=""><a name="toc-Modifying-the-Ottava-spanner-slope-1" href="snippets-big-page.html#staff-notation-modifying-the-ottava-spanner-slope">Modifying the Ottava spanner slope</a>    </li>
    <li class=""><a name="toc-Nesting-staves-2" href="snippets-big-page.html#staff-notation-nesting-staves">Nesting staves</a>    </li>
    <li class=""><a name="toc-Non_002dtraditional-key-signatures-1" href="snippets-big-page.html#staff-notation-non_002dtraditional-key-signatures">Non-traditional key signatures</a>    </li>
    <li class=""><a name="toc-Numbering-groups-of-measures" href="snippets-big-page.html#staff-notation-numbering-groups-of-measures">Numbering groups of measures</a>    </li>
    <li class=""><a name="toc-Orchestra-choir-and-piano-template-3" href="snippets-big-page.html#staff-notation-orchestra-choir-and-piano-template">Orchestra choir and piano template</a>    </li>
    <li class=""><a name="toc-Putting-lyrics-inside-the-staff-1" href="snippets-big-page.html#staff-notation-putting-lyrics-inside-the-staff">Putting lyrics inside the staff</a>    </li>
    <li class=""><a name="toc-Quoting-another-voice-with-transposition-1" href="snippets-big-page.html#staff-notation-quoting-another-voice-with-transposition">Quoting another voice with transposition</a>    </li>
    <li class=""><a name="toc-Quoting-another-voice" href="snippets-big-page.html#staff-notation-quoting-another-voice">Quoting another voice</a>    </li>
    <li class=""><a name="toc-Removing-brace-on-first-line-of-piano-score" href="snippets-big-page.html#staff-notation-removing-brace-on-first-line-of-piano-score">Removing brace on first line of piano score</a>    </li>
    <li class=""><a name="toc-Removing-the-first-empty-line-1" href="snippets-big-page.html#staff-notation-removing-the-first-empty-line">Removing the first empty line</a>    </li>
    <li class=""><a name="toc-Setting-system-separators" href="snippets-big-page.html#staff-notation-setting-system-separators">Setting system separators</a>    </li>
    <li class=""><a name="toc-Tick-bar-lines" href="snippets-big-page.html#staff-notation-tick-bar-lines">Tick bar lines</a>    </li>
    <li class=""><a name="toc-Time-signature-in-parentheses-_002d-method-3-1" href="snippets-big-page.html#staff-notation-time-signature-in-parentheses-_002d-method-3">Time signature in parentheses - method 3</a>    </li>
    <li class=""><a name="toc-Time-signature-in-parentheses-2" href="snippets-big-page.html#staff-notation-time-signature-in-parentheses">Time signature in parentheses</a>    </li>
    <li class=""><a name="toc-Tweaking-clef-properties-2" href="snippets-big-page.html#staff-notation-tweaking-clef-properties">Tweaking clef properties</a>    </li>
    <li class=""><a name="toc-Two-_005cpartcombine-pairs-on-one-staff-1" href="snippets-big-page.html#staff-notation-two-_005cpartcombine-pairs-on-one-staff">Two \partcombine pairs on one staff</a>    </li>
    <li class=""><a name="toc-Use-square-bracket-at-the-start-of-a-staff-group-1" href="snippets-big-page.html#staff-notation-use-square-bracket-at-the-start-of-a-staff-group">Use square bracket at the start of a staff group</a>    </li>
    <li class=""><a name="toc-Using-autochange-with-more-than-one-voice" href="snippets-big-page.html#staff-notation-using-autochange-with-more-than-one-voice">Using autochange with more than one voice</a>    </li>
    <li class=""><a name="toc-Using-marklines-in-a-Frenched-score" href="snippets-big-page.html#staff-notation-using-marklines-in-a-frenched-score">Using marklines in a Frenched score</a>    </li>
    <li class=""><a name="toc-Vertical-aligned-StaffGroups-without-connecting-SystemStartBar" href="snippets-big-page.html#staff-notation-vertical-aligned-staffgroups-without-connecting-systemstartbar">Vertical aligned StaffGroups without connecting SystemStartBar</a>    </li>
    <li class=""><a name="toc-Volta-below-chords-1" href="snippets-big-page.html#staff-notation-volta-below-chords">Volta below chords</a>    </li>
    <li class=""><a name="toc-Volta-multi-staff-1" href="snippets-big-page.html#staff-notation-volta-multi-staff">Volta multi staff</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Editorial-annotations-1" href="snippets-big-page.html#editorial-annotations">Editorial annotations</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-fingerings-to-a-score" href="snippets-big-page.html#editorial-annotations-adding-fingerings-to-a-score">Adding fingerings to a score</a>    </li>
    <li class=""><a name="toc-Adding-links-to-objects" href="snippets-big-page.html#editorial-annotations-adding-links-to-objects">Adding links to objects</a>    </li>
    <li class=""><a name="toc-Adding-markups-in-a-tablature-3" href="snippets-big-page.html#editorial-annotations-adding-markups-in-a-tablature">Adding markups in a tablature</a>    </li>
    <li class=""><a name="toc-Allowing-fingerings-to-be-printed-inside-the-staff-1" href="snippets-big-page.html#editorial-annotations-allowing-fingerings-to-be-printed-inside-the-staff">Allowing fingerings to be printed inside the staff</a>    </li>
    <li class=""><a name="toc-Alternative-bar-numbering-1" href="snippets-big-page.html#editorial-annotations-alternative-bar-numbering">Alternative bar numbering</a>    </li>
    <li class=""><a name="toc-Analysis-brackets-above-the-staff-1" href="snippets-big-page.html#editorial-annotations-analysis-brackets-above-the-staff">Analysis brackets above the staff</a>    </li>
    <li class=""><a name="toc-Analysis-brackets-with-labels" href="snippets-big-page.html#editorial-annotations-analysis-brackets-with-labels">Analysis brackets with labels</a>    </li>
    <li class=""><a name="toc-Applying-note-head-styles-depending-on-the-step-of-the-scale-1" href="snippets-big-page.html#editorial-annotations-applying-note-head-styles-depending-on-the-step-of-the-scale">Applying note head styles depending on the step of the scale</a>    </li>
    <li class=""><a name="toc-Avoiding-collisions-with-chord-fingerings-3" href="snippets-big-page.html#editorial-annotations-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a>    </li>
    <li class=""><a name="toc-Blanking-staff-lines-using-the-_005cwhiteout-command-1" href="snippets-big-page.html#editorial-annotations-blanking-staff-lines-using-the-_005cwhiteout-command">Blanking staff lines using the \whiteout command</a>    </li>
    <li class=""><a name="toc-Changing-a-single-note_0027s-size-in-a-chord" href="snippets-big-page.html#editorial-annotations-changing-a-single-note_0027s-size-in-a-chord">Changing a single note&rsquo;s size in a chord</a>    </li>
    <li class=""><a name="toc-Changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed-1" href="snippets-big-page.html#editorial-annotations-changing-the-appearance-of-a-slur-from-solid-to-dotted-or-dashed">Changing the appearance of a slur from solid to dotted or dashed</a>    </li>
    <li class=""><a name="toc-Coloring-notes-depending-on-their-pitch" href="snippets-big-page.html#editorial-annotations-coloring-notes-depending-on-their-pitch">Coloring notes depending on their pitch</a>    </li>
    <li class=""><a name="toc-Controlling-the-placement-of-chord-fingerings" href="snippets-big-page.html#editorial-annotations-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a>    </li>
    <li class=""><a name="toc-Creating-a-delayed-turn-1" href="snippets-big-page.html#editorial-annotations-creating-a-delayed-turn">Creating a delayed turn</a>    </li>
    <li class=""><a name="toc-Creating-blank-staves-1" href="snippets-big-page.html#editorial-annotations-creating-blank-staves">Creating blank staves</a>    </li>
    <li class=""><a name="toc-Creating-double_002ddigit-fingerings-1" href="snippets-big-page.html#editorial-annotations-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a>    </li>
    <li class=""><a name="toc-Default-direction-of-stems-on-the-center-line-of-the-staff" href="snippets-big-page.html#editorial-annotations-default-direction-of-stems-on-the-center-line-of-the-staff">Default direction of stems on the center line of the staff</a>    </li>
    <li class=""><a name="toc-Drawing-boxes-around-grobs-1" href="snippets-big-page.html#editorial-annotations-drawing-boxes-around-grobs">Drawing boxes around grobs</a>    </li>
    <li class=""><a name="toc-Drawing-circles-around-note-heads" href="snippets-big-page.html#editorial-annotations-drawing-circles-around-note-heads">Drawing circles around note heads</a>    </li>
    <li class=""><a name="toc-Drawing-circles-around-various-objects-1" href="snippets-big-page.html#editorial-annotations-drawing-circles-around-various-objects">Drawing circles around various objects</a>    </li>
    <li class=""><a name="toc-Embedding-native-PostScript-in-a-_005cmarkup-block-1" href="snippets-big-page.html#editorial-annotations-embedding-native-postscript-in-a-_005cmarkup-block">Embedding native PostScript in a \markup block</a>    </li>
    <li class=""><a name="toc-Grid-lines_003a-changing-their-appearance" href="snippets-big-page.html#editorial-annotations-grid-lines_003a-changing-their-appearance">Grid lines: changing their appearance</a>    </li>
    <li class=""><a name="toc-Grid-lines_003a-emphasizing-rhythms-and-notes-synchronization" href="snippets-big-page.html#editorial-annotations-grid-lines_003a-emphasizing-rhythms-and-notes-synchronization">Grid lines: emphasizing rhythms and notes synchronization</a>    </li>
    <li class=""><a name="toc-Hammer-on-and-pull-off-using-chords-1" href="snippets-big-page.html#editorial-annotations-hammer-on-and-pull-off-using-chords">Hammer on and pull off using chords</a>    </li>
    <li class=""><a name="toc-Hammer-on-and-pull-off-using-voices" href="snippets-big-page.html#editorial-annotations-hammer-on-and-pull-off-using-voices">Hammer on and pull off using voices</a>    </li>
    <li class=""><a name="toc-Hammer-on-and-pull-off" href="snippets-big-page.html#editorial-annotations-hammer-on-and-pull-off">Hammer on and pull off</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029-2" href="snippets-big-page.html#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029-2" href="snippets-big-page.html#editorial-annotations-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a>    </li>
    <li class=""><a name="toc-Making-some-staff-lines-thicker-than-the-others-1" href="snippets-big-page.html#editorial-annotations-making-some-staff-lines-thicker-than-the-others">Making some staff lines thicker than the others</a>    </li>
    <li class=""><a name="toc-Marking-notes-of-spoken-parts-with-a-cross-on-the-stem" href="snippets-big-page.html#editorial-annotations-marking-notes-of-spoken-parts-with-a-cross-on-the-stem">Marking notes of spoken parts with a cross on the stem</a>    </li>
    <li class=""><a name="toc-Measure-counter-1" href="snippets-big-page.html#editorial-annotations-measure-counter">Measure counter</a>    </li>
    <li class=""><a name="toc-Numbering-groups-of-measures-1" href="snippets-big-page.html#editorial-annotations-numbering-groups-of-measures">Numbering groups of measures</a>    </li>
    <li class=""><a name="toc-Positioning-fingering-indications-precisely" href="snippets-big-page.html#editorial-annotations-positioning-fingering-indications-precisely">Positioning fingering indications precisely</a>    </li>
    <li class=""><a name="toc-Positioning-text-markups-inside-slurs-2" href="snippets-big-page.html#editorial-annotations-positioning-text-markups-inside-slurs">Positioning text markups inside slurs</a>    </li>
    <li class=""><a name="toc-Printing-text-from-right-to-left" href="snippets-big-page.html#editorial-annotations-printing-text-from-right-to-left">Printing text from right to left</a>    </li>
    <li class=""><a name="toc-String-number-extender-lines" href="snippets-big-page.html#editorial-annotations-string-number-extender-lines">String number extender lines</a>    </li>
    <li class=""><a name="toc-Using-PostScript-to-generate-special-note-head-shapes-1" href="snippets-big-page.html#editorial-annotations-using-postscript-to-generate-special-note-head-shapes">Using PostScript to generate special note head shapes</a>    </li>
    <li class=""><a name="toc-Using-the-whiteout-property" href="snippets-big-page.html#editorial-annotations-using-the-whiteout-property">Using the whiteout property</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Text-1" href="snippets-big-page.html#text">Text</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-markups-in-a-tablature-2" href="snippets-big-page.html#text-adding-markups-in-a-tablature">Adding markups in a tablature</a>    </li>
    <li class=""><a name="toc-Adding-the-current-date-to-a-score" href="snippets-big-page.html#text-adding-the-current-date-to-a-score">Adding the current date to a score</a>    </li>
    <li class=""><a name="toc-Adjusting-lyrics-vertical-spacing-3" href="snippets-big-page.html#text-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a>    </li>
    <li class=""><a name="toc-Aligning-and-centering-instrument-names" href="snippets-big-page.html#text-aligning-and-centering-instrument-names">Aligning and centering instrument names</a>    </li>
    <li class=""><a name="toc-Aligning-objects-created-with-the-_005cmark-command" href="snippets-big-page.html#text-aligning-objects-created-with-the-_005cmark-command">Aligning objects created with the \mark command</a>    </li>
    <li class=""><a name="toc-Aligning-syllables-with-melisma-1" href="snippets-big-page.html#text-aligning-syllables-with-melisma">Aligning syllables with melisma</a>    </li>
    <li class=""><a name="toc-Blanking-staff-lines-using-the-_005cwhiteout-command" href="snippets-big-page.html#text-blanking-staff-lines-using-the-_005cwhiteout-command">Blanking staff lines using the \whiteout command</a>    </li>
    <li class=""><a name="toc-Center-text-below-hairpin-dynamics-1" href="snippets-big-page.html#text-center-text-below-hairpin-dynamics">Center text below hairpin dynamics</a>    </li>
    <li class=""><a name="toc-Changing-ottava-text-1" href="snippets-big-page.html#text-changing-ottava-text">Changing ottava text</a>    </li>
    <li class=""><a name="toc-Changing-the-default-text-font-family-1" href="snippets-big-page.html#text-changing-the-default-text-font-family">Changing the default text font family</a>    </li>
    <li class=""><a name="toc-Combining-dynamics-with-markup-texts" href="snippets-big-page.html#text-combining-dynamics-with-markup-texts">Combining dynamics with markup texts</a>    </li>
    <li class=""><a name="toc-Combining-two-parts-on-the-same-staff" href="snippets-big-page.html#text-combining-two-parts-on-the-same-staff">Combining two parts on the same staff</a>    </li>
    <li class=""><a name="toc-Creating-_0022real_0022-parenthesized-dynamics-1" href="snippets-big-page.html#text-creating-_0022real_0022-parenthesized-dynamics">Creating &quot;real&quot; parenthesized dynamics</a>    </li>
    <li class=""><a name="toc-Creating-simultaneous-rehearsal-marks" href="snippets-big-page.html#text-creating-simultaneous-rehearsal-marks">Creating simultaneous rehearsal marks</a>    </li>
    <li class=""><a name="toc-Creating-text-spanners-1" href="snippets-big-page.html#text-creating-text-spanners">Creating text spanners</a>    </li>
    <li class=""><a name="toc-Demonstrating-all-headers-2" href="snippets-big-page.html#text-demonstrating-all-headers">Demonstrating all headers</a>    </li>
    <li class=""><a name="toc-Embedding-native-PostScript-in-a-_005cmarkup-block" href="snippets-big-page.html#text-embedding-native-postscript-in-a-_005cmarkup-block">Embedding native PostScript in a \markup block</a>    </li>
    <li class=""><a name="toc-Formatting-lyrics-syllables-1" href="snippets-big-page.html#text-formatting-lyrics-syllables">Formatting lyrics syllables</a>    </li>
    <li class=""><a name="toc-How-to-put-ties-between-syllables-in-lyrics-1" href="snippets-big-page.html#text-how-to-put-ties-between-syllables-in-lyrics">How to put ties between syllables in lyrics</a>    </li>
    <li class=""><a name="toc-Lyrics-alignment" href="snippets-big-page.html#text-lyrics-alignment">Lyrics alignment</a>    </li>
    <li class=""><a name="toc-Markup-lines" href="snippets-big-page.html#text-markup-lines">Markup lines</a>    </li>
    <li class=""><a name="toc-Multi_002dmeasure-rest-markup-1" href="snippets-big-page.html#text-multi_002dmeasure-rest-markup">Multi-measure rest markup</a>    </li>
    <li class=""><a name="toc-Ottava-text" href="snippets-big-page.html#text-ottava-text">Ottava text</a>    </li>
    <li class=""><a name="toc-Outputting-the-version-number-1" href="snippets-big-page.html#text-outputting-the-version-number">Outputting the version number</a>    </li>
    <li class=""><a name="toc-Piano-template-with-centered-lyrics-2" href="snippets-big-page.html#text-piano-template-with-centered-lyrics">Piano template with centered lyrics</a>    </li>
    <li class=""><a name="toc-Printing-bar-numbers-with-changing-regular-intervals" href="snippets-big-page.html#text-printing-bar-numbers-with-changing-regular-intervals">Printing bar numbers with changing regular intervals</a>    </li>
    <li class=""><a name="toc-Printing-marks-at-the-end-of-a-line" href="snippets-big-page.html#text-printing-marks-at-the-end-of-a-line">Printing marks at the end of a line</a>    </li>
    <li class=""><a name="toc-Printing-marks-on-every-staff" href="snippets-big-page.html#text-printing-marks-on-every-staff">Printing marks on every staff</a>    </li>
    <li class=""><a name="toc-Printing-text-from-right-to-left-2" href="snippets-big-page.html#text-printing-text-from-right-to-left">Printing text from right to left</a>    </li>
    <li class=""><a name="toc-Putting-lyrics-inside-the-staff-2" href="snippets-big-page.html#text-putting-lyrics-inside-the-staff">Putting lyrics inside the staff</a>    </li>
    <li class=""><a name="toc-Stand_002dalone-two_002dcolumn-markup" href="snippets-big-page.html#text-stand_002dalone-two_002dcolumn-markup">Stand-alone two-column markup</a>    </li>
    <li class=""><a name="toc-String-number-extender-lines-3" href="snippets-big-page.html#text-string-number-extender-lines">String number extender lines</a>    </li>
    <li class=""><a name="toc-Three_002dsided-box-1" href="snippets-big-page.html#text-three_002dsided-box">Three-sided box</a>    </li>
    <li class=""><a name="toc-UTF_002d8" href="snippets-big-page.html#text-utf_002d8">UTF-8</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves" href="snippets-big-page.html#text-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a>    </li>
    <li class=""><a name="toc-Volta-text-markup-using-repeatCommands" href="snippets-big-page.html#text-volta-text-markup-using-repeatcommands">Volta text markup using repeatCommands</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Vocal-music-1" href="snippets-big-page.html#vocal-music">Vocal music</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-ambitus-per-voice" href="snippets-big-page.html#vocal-music-adding-ambitus-per-voice">Adding ambitus per voice</a>    </li>
    <li class=""><a name="toc-Adding-indicators-to-staves-which-get-split-after-a-break-1" href="snippets-big-page.html#vocal-music-adding-indicators-to-staves-which-get-split-after-a-break">Adding indicators to staves which get split after a break</a>    </li>
    <li class=""><a name="toc-Adding-orchestral-cues-to-a-vocal-score-1" href="snippets-big-page.html#vocal-music-adding-orchestral-cues-to-a-vocal-score">Adding orchestral cues to a vocal score</a>    </li>
    <li class=""><a name="toc-Adjusting-lyrics-vertical-spacing-2" href="snippets-big-page.html#vocal-music-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a>    </li>
    <li class=""><a name="toc-Aligning-syllables-with-melisma" href="snippets-big-page.html#vocal-music-aligning-syllables-with-melisma">Aligning syllables with melisma</a>    </li>
    <li class=""><a name="toc-Ambitus-with-multiple-voices" href="snippets-big-page.html#vocal-music-ambitus-with-multiple-voices">Ambitus with multiple voices</a>    </li>
    <li class=""><a name="toc-Ambitus" href="snippets-big-page.html#vocal-music-ambitus">Ambitus</a>    </li>
    <li class=""><a name="toc-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music" href="snippets-big-page.html#vocal-music-ancient-notation-template-_002d-modern-transcription-of-gregorian-music">Ancient notation template &ndash; modern transcription of gregorian music</a>    </li>
    <li class=""><a name="toc-Anglican-psalm-template-1" href="snippets-big-page.html#vocal-music-anglican-psalm-template">Anglican psalm template</a>    </li>
    <li class=""><a name="toc-Arranging-separate-lyrics-on-a-single-line-1" href="snippets-big-page.html#vocal-music-arranging-separate-lyrics-on-a-single-line">Arranging separate lyrics on a single line</a>    </li>
    <li class=""><a name="toc-Changing-stanza-fonts" href="snippets-big-page.html#vocal-music-changing-stanza-fonts">Changing stanza fonts</a>    </li>
    <li class=""><a name="toc-Chant-or-psalms-notation-2" href="snippets-big-page.html#vocal-music-chant-or-psalms-notation">Chant or psalms notation</a>    </li>
    <li class=""><a name="toc-Forcing-hyphens-to-be-shown" href="snippets-big-page.html#vocal-music-forcing-hyphens-to-be-shown">Forcing hyphens to be shown</a>    </li>
    <li class=""><a name="toc-Formatting-lyrics-syllables" href="snippets-big-page.html#vocal-music-formatting-lyrics-syllables">Formatting lyrics syllables</a>    </li>
    <li class=""><a name="toc-How-to-put-ties-between-syllables-in-lyrics" href="snippets-big-page.html#vocal-music-how-to-put-ties-between-syllables-in-lyrics">How to put ties between syllables in lyrics</a>    </li>
    <li class=""><a name="toc-Hymn-template" href="snippets-big-page.html#vocal-music-hymn-template">Hymn template</a>    </li>
    <li class=""><a name="toc-Lyrics-alignment-1" href="snippets-big-page.html#vocal-music-lyrics-alignment">Lyrics alignment</a>    </li>
    <li class=""><a name="toc-Marking-notes-of-spoken-parts-with-a-cross-on-the-stem-1" href="snippets-big-page.html#vocal-music-marking-notes-of-spoken-parts-with-a-cross-on-the-stem">Marking notes of spoken parts with a cross on the stem</a>    </li>
    <li class=""><a name="toc-Obtaining-2_002e12-lyrics-spacing-in-newer-versions" href="snippets-big-page.html#vocal-music-obtaining-2_002e12-lyrics-spacing-in-newer-versions">Obtaining 2.12 lyrics spacing in newer versions</a>    </li>
    <li class=""><a name="toc-Orchestra-choir-and-piano-template" href="snippets-big-page.html#vocal-music-orchestra-choir-and-piano-template">Orchestra choir and piano template</a>    </li>
    <li class=""><a name="toc-Piano-template-with-melody-and-lyrics-2" href="snippets-big-page.html#vocal-music-piano-template-with-melody-and-lyrics">Piano template with melody and lyrics</a>    </li>
    <li class=""><a name="toc-Putting-lyrics-inside-the-staff" href="snippets-big-page.html#vocal-music-putting-lyrics-inside-the-staff">Putting lyrics inside the staff</a>    </li>
    <li class=""><a name="toc-SATB-Choir-template-_002d-four-staves" href="snippets-big-page.html#vocal-music-satb-choir-template-_002d-four-staves">SATB Choir template - four staves</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-lyrics-and-chords" href="snippets-big-page.html#vocal-music-single-staff-template-with-notes-lyrics-and-chords">Single staff template with notes lyrics and chords</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-lyrics-chords-and-frets" href="snippets-big-page.html#vocal-music-single-staff-template-with-notes-lyrics-chords-and-frets">Single staff template with notes lyrics chords and frets</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-and-lyrics-1" href="snippets-big-page.html#vocal-music-single-staff-template-with-notes-and-lyrics">Single staff template with notes and lyrics</a>    </li>
    <li class=""><a name="toc-Skips-in-lyric-mode-_00282_0029" href="snippets-big-page.html#vocal-music-skips-in-lyric-mode-_00282_0029">Skips in lyric mode (2)</a>    </li>
    <li class=""><a name="toc-Skips-in-lyric-mode" href="snippets-big-page.html#vocal-music-skips-in-lyric-mode">Skips in lyric mode</a>    </li>
    <li class=""><a name="toc-Using-arpeggioBracket-to-make-divisi-more-visible-1" href="snippets-big-page.html#vocal-music-using-arpeggiobracket-to-make-divisi-more-visible">Using arpeggioBracket to make divisi more visible</a>    </li>
    <li class=""><a name="toc-Using-tags-to-produce-mensural-and-modern-music-from-the-same-source-1" href="snippets-big-page.html#vocal-music-using-tags-to-produce-mensural-and-modern-music-from-the-same-source">Using tags to produce mensural and modern music from the same source</a>    </li>
    <li class=""><a name="toc-Vertically-aligning-ossias-and-lyrics-2" href="snippets-big-page.html#vocal-music-vertically-aligning-ossias-and-lyrics">Vertically aligning ossias and lyrics</a>    </li>
    <li class=""><a name="toc-Vertically-centered-common-lyrics" href="snippets-big-page.html#vocal-music-vertically-centered-common-lyrics">Vertically centered common lyrics</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-automatic-piano-reduction" href="snippets-big-page.html#vocal-music-vocal-ensemble-template-with-automatic-piano-reduction">Vocal ensemble template with automatic piano reduction</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves-2" href="snippets-big-page.html#vocal-music-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-verse-and-refrain-1" href="snippets-big-page.html#vocal-music-vocal-ensemble-template-with-verse-and-refrain">Vocal ensemble template with verse and refrain</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-1" href="snippets-big-page.html#vocal-music-vocal-ensemble-template">Vocal ensemble template</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Chords-1" href="snippets-big-page.html#chords">Chords</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-a-figured-bass-above-or-below-the-notes" href="snippets-big-page.html#chords-adding-a-figured-bass-above-or-below-the-notes">Adding a figured bass above or below the notes</a>    </li>
    <li class=""><a name="toc-Adding-bar-lines-to-ChordNames-context" href="snippets-big-page.html#chords-adding-bar-lines-to-chordnames-context">Adding bar lines to ChordNames context</a>    </li>
    <li class=""><a name="toc-Avoiding-collisions-with-chord-fingerings-2" href="snippets-big-page.html#chords-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a>    </li>
    <li class=""><a name="toc-Bar-chords-notation-for-Guitar-_0028with-Text-Spanner_0029" href="snippets-big-page.html#chords-bar-chords-notation-for-guitar-_0028with-text-spanner_0029">Bar chords notation for Guitar (with Text Spanner)</a>    </li>
    <li class=""><a name="toc-Changing-chord-separator" href="snippets-big-page.html#chords-changing-chord-separator">Changing chord separator</a>    </li>
    <li class=""><a name="toc-Changing-the-chord-names-to-German-or-semi_002dGerman-notation" href="snippets-big-page.html#chords-changing-the-chord-names-to-german-or-semi_002dgerman-notation">Changing the chord names to German or semi-German notation</a>    </li>
    <li class=""><a name="toc-Changing-the-positions-of-figured-bass-alterations" href="snippets-big-page.html#chords-changing-the-positions-of-figured-bass-alterations">Changing the positions of figured bass alterations</a>    </li>
    <li class=""><a name="toc-Chord-name-exceptions" href="snippets-big-page.html#chords-chord-name-exceptions">Chord name exceptions</a>    </li>
    <li class=""><a name="toc-chord-name-major7" href="snippets-big-page.html#chords-chord-name-major7">chord name major7</a>    </li>
    <li class=""><a name="toc-Clusters-1" href="snippets-big-page.html#chords-clusters">Clusters</a>    </li>
    <li class=""><a name="toc-Controlling-the-placement-of-chord-fingerings-1" href="snippets-big-page.html#chords-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a>    </li>
    <li class=""><a name="toc-Cross_002dstaff-chords-_002d-beaming-problems-workaround-1" href="snippets-big-page.html#chords-cross_002dstaff-chords-_002d-beaming-problems-workaround">Cross-staff chords - beaming problems workaround</a>    </li>
    <li class=""><a name="toc-Displaying-complex-chords-1" href="snippets-big-page.html#chords-displaying-complex-chords">Displaying complex chords</a>    </li>
    <li class=""><a name="toc-Manually-break-figured-bass-extenders-for-only-some-numbers" href="snippets-big-page.html#chords-manually-break-figured-bass-extenders-for-only-some-numbers">Manually break figured bass extenders for only some numbers</a>    </li>
    <li class=""><a name="toc-Showing-chords-at-changes" href="snippets-big-page.html#chords-showing-chords-at-changes">Showing chords at changes</a>    </li>
    <li class=""><a name="toc-Simple-lead-sheet" href="snippets-big-page.html#chords-simple-lead-sheet">Simple lead sheet</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-lyrics-and-chords-1" href="snippets-big-page.html#chords-single-staff-template-with-notes-lyrics-and-chords">Single staff template with notes lyrics and chords</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-lyrics-chords-and-frets-1" href="snippets-big-page.html#chords-single-staff-template-with-notes-lyrics-chords-and-frets">Single staff template with notes lyrics chords and frets</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-and-chords" href="snippets-big-page.html#chords-single-staff-template-with-notes-and-chords">Single staff template with notes and chords</a>    </li>
    <li class=""><a name="toc-Vertically-centering-paired-figured-bass-extenders-1" href="snippets-big-page.html#chords-vertically-centering-paired-figured-bass-extenders">Vertically centering paired figured bass extenders</a>    </li>
    <li class=""><a name="toc-Volta-below-chords" href="snippets-big-page.html#chords-volta-below-chords">Volta below chords</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Keyboards-1" href="snippets-big-page.html#keyboards">Keyboards</a>
  <ul class="toc">
    <li class=""><a name="toc-Accordion_002ddiscant-symbols" href="snippets-big-page.html#keyboards-accordion_002ddiscant-symbols">Accordion-discant symbols</a>    </li>
    <li class=""><a name="toc-Accordion-register-symbols" href="snippets-big-page.html#keyboards-accordion-register-symbols">Accordion register symbols</a>    </li>
    <li class=""><a name="toc-Changing-the-text-for-sustain-markings" href="snippets-big-page.html#keyboards-changing-the-text-for-sustain-markings">Changing the text for sustain markings</a>    </li>
    <li class=""><a name="toc-Clusters" href="snippets-big-page.html#keyboards-clusters">Clusters</a>    </li>
    <li class=""><a name="toc-Controlling-the-placement-of-chord-fingerings-3" href="snippets-big-page.html#keyboards-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a>    </li>
    <li class=""><a name="toc-Creating-slurs-across-voices" href="snippets-big-page.html#keyboards-creating-slurs-across-voices">Creating slurs across voices</a>    </li>
    <li class=""><a name="toc-Cross_002dstaff-chords-_002d-beaming-problems-workaround" href="snippets-big-page.html#keyboards-cross_002dstaff-chords-_002d-beaming-problems-workaround">Cross-staff chords - beaming problems workaround</a>    </li>
    <li class=""><a name="toc-Cross_002dstaff-tremolos" href="snippets-big-page.html#keyboards-cross_002dstaff-tremolos">Cross-staff tremolos</a>    </li>
    <li class=""><a name="toc-Fine_002dtuning-pedal-brackets-1" href="snippets-big-page.html#keyboards-fine_002dtuning-pedal-brackets">Fine-tuning pedal brackets</a>    </li>
    <li class=""><a name="toc-Indicating-cross_002dstaff-chords-with-arpeggio-bracket" href="snippets-big-page.html#keyboards-indicating-cross_002dstaff-chords-with-arpeggio-bracket">Indicating cross-staff chords with arpeggio bracket</a>    </li>
    <li class=""><a name="toc-Jazz-combo-template-2" href="snippets-big-page.html#keyboards-jazz-combo-template">Jazz combo template</a>    </li>
    <li class=""><a name="toc-Laissez-vibrer-ties-2" href="snippets-big-page.html#keyboards-laissez-vibrer-ties">Laissez vibrer ties</a>    </li>
    <li class=""><a name="toc-Piano-template-_0028simple_0029" href="snippets-big-page.html#keyboards-piano-template-_0028simple_0029">Piano template (simple)</a>    </li>
    <li class=""><a name="toc-Piano-template-with-centered-lyrics-1" href="snippets-big-page.html#keyboards-piano-template-with-centered-lyrics">Piano template with centered lyrics</a>    </li>
    <li class=""><a name="toc-Piano-template-with-melody-and-lyrics-1" href="snippets-big-page.html#keyboards-piano-template-with-melody-and-lyrics">Piano template with melody and lyrics</a>    </li>
    <li class=""><a name="toc-Removing-brace-on-first-line-of-piano-score-2" href="snippets-big-page.html#keyboards-removing-brace-on-first-line-of-piano-score">Removing brace on first line of piano score</a>    </li>
    <li class=""><a name="toc-Using-autochange-with-more-than-one-voice-2" href="snippets-big-page.html#keyboards-using-autochange-with-more-than-one-voice">Using autochange with more than one voice</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-automatic-piano-reduction-2" href="snippets-big-page.html#keyboards-vocal-ensemble-template-with-automatic-piano-reduction">Vocal ensemble template with automatic piano reduction</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Percussion-1" href="snippets-big-page.html#percussion">Percussion</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-drum-parts" href="snippets-big-page.html#percussion-adding-drum-parts">Adding drum parts</a>    </li>
    <li class=""><a name="toc-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi-2" href="snippets-big-page.html#percussion-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</a>    </li>
    <li class=""><a name="toc-Heavily-customized-polymetric-time-signatures-1" href="snippets-big-page.html#percussion-heavily-customized-polymetric-time-signatures">Heavily customized polymetric time signatures</a>    </li>
    <li class=""><a name="toc-Jazz-combo-template-3" href="snippets-big-page.html#percussion-jazz-combo-template">Jazz combo template</a>    </li>
    <li class=""><a name="toc-Percussion-beaters" href="snippets-big-page.html#percussion-percussion-beaters">Percussion beaters</a>    </li>
    <li class=""><a name="toc-Printing-music-with-different-time-signatures" href="snippets-big-page.html#percussion-printing-music-with-different-time-signatures">Printing music with different time signatures</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Fretted-strings-1" href="snippets-big-page.html#fretted-strings">Fretted strings</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-fingerings-to-a-score-1" href="snippets-big-page.html#fretted-strings-adding-fingerings-to-a-score">Adding fingerings to a score</a>    </li>
    <li class=""><a name="toc-Adding-fingerings-to-tablatures" href="snippets-big-page.html#fretted-strings-adding-fingerings-to-tablatures">Adding fingerings to tablatures</a>    </li>
    <li class=""><a name="toc-Adding-markups-in-a-tablature" href="snippets-big-page.html#fretted-strings-adding-markups-in-a-tablature">Adding markups in a tablature</a>    </li>
    <li class=""><a name="toc-Allowing-fingerings-to-be-printed-inside-the-staff" href="snippets-big-page.html#fretted-strings-allowing-fingerings-to-be-printed-inside-the-staff">Allowing fingerings to be printed inside the staff</a>    </li>
    <li class=""><a name="toc-Bar-chords-notation-for-Guitar-_0028with-Text-Spanner_0029-1" href="snippets-big-page.html#fretted-strings-bar-chords-notation-for-guitar-_0028with-text-spanner_0029">Bar chords notation for Guitar (with Text Spanner)</a>    </li>
    <li class=""><a name="toc-Changing-fret-orientations" href="snippets-big-page.html#fretted-strings-changing-fret-orientations">Changing fret orientations</a>    </li>
    <li class=""><a name="toc-Chord-glissando-in-tablature" href="snippets-big-page.html#fretted-strings-chord-glissando-in-tablature">Chord glissando in tablature</a>    </li>
    <li class=""><a name="toc-ChordChanges-for-FretBoards" href="snippets-big-page.html#fretted-strings-chordchanges-for-fretboards">ChordChanges for FretBoards</a>    </li>
    <li class=""><a name="toc-Controlling-the-placement-of-chord-fingerings-2" href="snippets-big-page.html#fretted-strings-controlling-the-placement-of-chord-fingerings">Controlling the placement of chord fingerings</a>    </li>
    <li class=""><a name="toc-Customizing-fretboard-fret-diagrams-1" href="snippets-big-page.html#fretted-strings-customizing-fretboard-fret-diagrams">Customizing fretboard fret diagrams</a>    </li>
    <li class=""><a name="toc-Customizing-markup-fret-diagrams-1" href="snippets-big-page.html#fretted-strings-customizing-markup-fret-diagrams">Customizing markup fret diagrams</a>    </li>
    <li class=""><a name="toc-Defining-predefined-fretboards-for-other-instruments" href="snippets-big-page.html#fretted-strings-defining-predefined-fretboards-for-other-instruments">Defining predefined fretboards for other instruments</a>    </li>
    <li class=""><a name="toc-Faking-a-hammer-in-tablatures" href="snippets-big-page.html#fretted-strings-faking-a-hammer-in-tablatures">Faking a hammer in tablatures</a>    </li>
    <li class=""><a name="toc-Fingerings-string-indications-and-right_002dhand-fingerings" href="snippets-big-page.html#fretted-strings-fingerings-string-indications-and-right_002dhand-fingerings">Fingerings string indications and right-hand fingerings</a>    </li>
    <li class=""><a name="toc-Flamenco-notation" href="snippets-big-page.html#fretted-strings-flamenco-notation">Flamenco notation</a>    </li>
    <li class=""><a name="toc-Fret-diagrams-explained-and-developed-1" href="snippets-big-page.html#fretted-strings-fret-diagrams-explained-and-developed">Fret diagrams explained and developed</a>    </li>
    <li class=""><a name="toc-Fretboards-alternate-tables" href="snippets-big-page.html#fretted-strings-fretboards-alternate-tables">Fretboards alternate tables</a>    </li>
    <li class=""><a name="toc-Fretted_002dstring-harmonics-in-tablature" href="snippets-big-page.html#fretted-strings-fretted_002dstring-harmonics-in-tablature">Fretted-string harmonics in tablature</a>    </li>
    <li class=""><a name="toc-Guitar-slides" href="snippets-big-page.html#fretted-strings-guitar-slides">Guitar slides</a>    </li>
    <li class=""><a name="toc-Guitar-strum-rhythms" href="snippets-big-page.html#fretted-strings-guitar-strum-rhythms">Guitar strum rhythms</a>    </li>
    <li class=""><a name="toc-Hammer-on-and-pull-off-using-chords" href="snippets-big-page.html#fretted-strings-hammer-on-and-pull-off-using-chords">Hammer on and pull off using chords</a>    </li>
    <li class=""><a name="toc-Hammer-on-and-pull-off-using-voices-1" href="snippets-big-page.html#fretted-strings-hammer-on-and-pull-off-using-voices">Hammer on and pull off using voices</a>    </li>
    <li class=""><a name="toc-Hammer-on-and-pull-off-1" href="snippets-big-page.html#fretted-strings-hammer-on-and-pull-off">Hammer on and pull off</a>    </li>
    <li class=""><a name="toc-How-to-change-fret-diagram-position-1" href="snippets-big-page.html#fretted-strings-how-to-change-fret-diagram-position">How to change fret diagram position</a>    </li>
    <li class=""><a name="toc-Jazz-combo-template-1" href="snippets-big-page.html#fretted-strings-jazz-combo-template">Jazz combo template</a>    </li>
    <li class=""><a name="toc-Laissez-vibrer-ties" href="snippets-big-page.html#fretted-strings-laissez-vibrer-ties">Laissez vibrer ties</a>    </li>
    <li class=""><a name="toc-Let-TabStaff-print-the-topmost-string-at-bottom" href="snippets-big-page.html#fretted-strings-let-tabstaff-print-the-topmost-string-at-bottom">Let TabStaff print the topmost string at bottom</a>    </li>
    <li class=""><a name="toc-Letter-tablature-formatting-1" href="snippets-big-page.html#fretted-strings-letter-tablature-formatting">Letter tablature formatting</a>    </li>
    <li class=""><a name="toc-Open-string-harmonics-in-tablature" href="snippets-big-page.html#fretted-strings-open-string-harmonics-in-tablature">Open string harmonics in tablature</a>    </li>
    <li class=""><a name="toc-Placement-of-right_002dhand-fingerings" href="snippets-big-page.html#fretted-strings-placement-of-right_002dhand-fingerings">Placement of right-hand fingerings</a>    </li>
    <li class=""><a name="toc-Polyphony-in-tablature" href="snippets-big-page.html#fretted-strings-polyphony-in-tablature">Polyphony in tablature</a>    </li>
    <li class=""><a name="toc-Slides-in-tablature" href="snippets-big-page.html#fretted-strings-slides-in-tablature">Slides in tablature</a>    </li>
    <li class=""><a name="toc-Stem-and-beam-behavior-in-tablature" href="snippets-big-page.html#fretted-strings-stem-and-beam-behavior-in-tablature">Stem and beam behavior in tablature</a>    </li>
    <li class=""><a name="toc-String-number-extender-lines-1" href="snippets-big-page.html#fretted-strings-string-number-extender-lines">String number extender lines</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Unfretted-strings-1" href="snippets-big-page.html#unfretted-strings">Unfretted strings</a>
  <ul class="toc">
    <li class=""><a name="toc-Changing-_005cflageolet-mark-size" href="snippets-big-page.html#unfretted-strings-changing-_005cflageolet-mark-size">Changing \flageolet mark size</a>    </li>
    <li class=""><a name="toc-Creating-slurs-across-voices-2" href="snippets-big-page.html#unfretted-strings-creating-slurs-across-voices">Creating slurs across voices</a>    </li>
    <li class=""><a name="toc-Dotted-harmonics" href="snippets-big-page.html#unfretted-strings-dotted-harmonics">Dotted harmonics</a>    </li>
    <li class=""><a name="toc-Snap_002dpizzicato-or-Bartok-pizzicato-1" href="snippets-big-page.html#unfretted-strings-snap_002dpizzicato-or-bartok-pizzicato">Snap-pizzicato or Bartok pizzicato</a>    </li>
    <li class=""><a name="toc-String-quartet-template-_0028simple_0029" href="snippets-big-page.html#unfretted-strings-string-quartet-template-_0028simple_0029">String quartet template (simple)</a>    </li>
    <li class=""><a name="toc-String-quartet-template-with-separate-parts" href="snippets-big-page.html#unfretted-strings-string-quartet-template-with-separate-parts">String quartet template with separate parts</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Winds-1" href="snippets-big-page.html#winds">Winds</a>
  <ul class="toc">
    <li class=""><a name="toc-Changing-the-size-of-woodwind-diagrams" href="snippets-big-page.html#winds-changing-the-size-of-woodwind-diagrams">Changing the size of woodwind diagrams</a>    </li>
    <li class=""><a name="toc-Fingering-symbols-for-wind-instruments" href="snippets-big-page.html#winds-fingering-symbols-for-wind-instruments">Fingering symbols for wind instruments</a>    </li>
    <li class=""><a name="toc-Flute-slap-notation" href="snippets-big-page.html#winds-flute-slap-notation">Flute slap notation</a>    </li>
    <li class=""><a name="toc-Graphical-and-text-woodwind-diagrams" href="snippets-big-page.html#winds-graphical-and-text-woodwind-diagrams">Graphical and text woodwind diagrams</a>    </li>
    <li class=""><a name="toc-Recorder-fingering-chart" href="snippets-big-page.html#winds-recorder-fingering-chart">Recorder fingering chart</a>    </li>
    <li class=""><a name="toc-Woodwind-diagrams-key-lists" href="snippets-big-page.html#winds-woodwind-diagrams-key-lists">Woodwind diagrams key lists</a>    </li>
    <li class=""><a name="toc-Woodwind-diagrams-listing" href="snippets-big-page.html#winds-woodwind-diagrams-listing">Woodwind diagrams listing</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Ancient-notation-1" href="snippets-big-page.html#ancient-notation">Ancient notation</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-a-figured-bass-above-or-below-the-notes-1" href="snippets-big-page.html#ancient-notation-adding-a-figured-bass-above-or-below-the-notes">Adding a figured bass above or below the notes</a>    </li>
    <li class=""><a name="toc-Ancient-fonts" href="snippets-big-page.html#ancient-notation-ancient-fonts">Ancient fonts</a>    </li>
    <li class=""><a name="toc-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music-1" href="snippets-big-page.html#ancient-notation-ancient-notation-template-_002d-modern-transcription-of-gregorian-music">Ancient notation template &ndash; modern transcription of gregorian music</a>    </li>
    <li class=""><a name="toc-Ancient-time-signatures" href="snippets-big-page.html#ancient-notation-ancient-time-signatures">Ancient time signatures</a>    </li>
    <li class=""><a name="toc-Chant-or-psalms-notation-3" href="snippets-big-page.html#ancient-notation-chant-or-psalms-notation">Chant or psalms notation</a>    </li>
    <li class=""><a name="toc-Custodes-1" href="snippets-big-page.html#ancient-notation-custodes">Custodes</a>    </li>
    <li class=""><a name="toc-Incipit" href="snippets-big-page.html#ancient-notation-incipit">Incipit</a>    </li>
    <li class=""><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029-1" href="snippets-big-page.html#ancient-notation-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a>    </li>
    <li class=""><a name="toc-Rest-styles-1" href="snippets-big-page.html#ancient-notation-rest-styles">Rest styles</a>    </li>
    <li class=""><a name="toc-Using-tags-to-produce-mensural-and-modern-music-from-the-same-source" href="snippets-big-page.html#ancient-notation-using-tags-to-produce-mensural-and-modern-music-from-the-same-source">Using tags to produce mensural and modern music from the same source</a>    </li>
    <li class=""><a name="toc-Vertical-line-as-a-baroque-articulation-mark-1" href="snippets-big-page.html#ancient-notation-vertical-line-as-a-baroque-articulation-mark">Vertical line as a baroque articulation mark</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-World-music-1" href="snippets-big-page.html#world-music">World music</a>
  <ul class="toc">
    <li class=""><a name="toc-Arabic-improvisation" href="snippets-big-page.html#world-music-arabic-improvisation">Arabic improvisation</a>    </li>
    <li class=""><a name="toc-Makam-example-1" href="snippets-big-page.html#world-music-makam-example">Makam example</a>    </li>
    <li class=""><a name="toc-Printing-text-from-right-to-left-1" href="snippets-big-page.html#world-music-printing-text-from-right-to-left">Printing text from right to left</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Contexts-and-engravers-1" href="snippets-big-page.html#contexts-and-engravers">Contexts and engravers</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-a-figured-bass-above-or-below-the-notes-2" href="snippets-big-page.html#contexts-and-engravers-adding-a-figured-bass-above-or-below-the-notes">Adding a figured bass above or below the notes</a>    </li>
    <li class=""><a name="toc-Adding-an-extra-staff-at-a-line-break-1" href="snippets-big-page.html#contexts-and-engravers-adding-an-extra-staff-at-a-line-break">Adding an extra staff at a line break</a>    </li>
    <li class=""><a name="toc-Adding-an-extra-staff" href="snippets-big-page.html#contexts-and-engravers-adding-an-extra-staff">Adding an extra staff</a>    </li>
    <li class=""><a name="toc-Automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody-1" href="snippets-big-page.html#contexts-and-engravers-automatically-changing-the-stem-direction-of-the-middle-note-based-on-the-melody">Automatically changing the stem direction of the middle note based on the melody</a>    </li>
    <li class=""><a name="toc-Centered-measure-numbers-2" href="snippets-big-page.html#contexts-and-engravers-centered-measure-numbers">Centered measure numbers</a>    </li>
    <li class=""><a name="toc-Changing-MIDI-output-to-one-channel-per-voice" href="snippets-big-page.html#contexts-and-engravers-changing-midi-output-to-one-channel-per-voice">Changing MIDI output to one channel per voice</a>    </li>
    <li class=""><a name="toc-Changing-time-signatures-inside-a-polymetric-section-using-_005cscaleDurations-1" href="snippets-big-page.html#contexts-and-engravers-changing-time-signatures-inside-a-polymetric-section-using-_005cscaledurations">Changing time signatures inside a polymetric section using \scaleDurations</a>    </li>
    <li class=""><a name="toc-Chant-or-psalms-notation" href="snippets-big-page.html#contexts-and-engravers-chant-or-psalms-notation">Chant or psalms notation</a>    </li>
    <li class=""><a name="toc-Creating-blank-staves" href="snippets-big-page.html#contexts-and-engravers-creating-blank-staves">Creating blank staves</a>    </li>
    <li class=""><a name="toc-Creating-custom-key-signatures-3" href="snippets-big-page.html#contexts-and-engravers-creating-custom-key-signatures">Creating custom key signatures</a>    </li>
    <li class=""><a name="toc-Cross-staff-stems" href="snippets-big-page.html#contexts-and-engravers-cross-staff-stems">Cross staff stems</a>    </li>
    <li class=""><a name="toc-Defining-an-engraver-in-Scheme_003a-ambitus-engraver" href="snippets-big-page.html#contexts-and-engravers-defining-an-engraver-in-scheme_003a-ambitus-engraver">Defining an engraver in Scheme: ambitus engraver</a>    </li>
    <li class=""><a name="toc-Displaying-a-whole-GrandStaff-system-if-only-one-of-its-staves-is-alive" href="snippets-big-page.html#contexts-and-engravers-displaying-a-whole-grandstaff-system-if-only-one-of-its-staves-is-alive">Displaying a whole GrandStaff system if only one of its staves is alive</a>    </li>
    <li class=""><a name="toc-Engravers-one_002dby_002done" href="snippets-big-page.html#contexts-and-engravers-engravers-one_002dby_002done">Engravers one-by-one</a>    </li>
    <li class=""><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029-2" href="snippets-big-page.html#contexts-and-engravers-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a>    </li>
    <li class=""><a name="toc-Nesting-staves" href="snippets-big-page.html#contexts-and-engravers-nesting-staves">Nesting staves</a>    </li>
    <li class=""><a name="toc-Numbering-groups-of-measures-2" href="snippets-big-page.html#contexts-and-engravers-numbering-groups-of-measures">Numbering groups of measures</a>    </li>
    <li class=""><a name="toc-Removing-bar-numbers-from-a-score" href="snippets-big-page.html#contexts-and-engravers-removing-bar-numbers-from-a-score">Removing bar numbers from a score</a>    </li>
    <li class=""><a name="toc-Use-square-bracket-at-the-start-of-a-staff-group" href="snippets-big-page.html#contexts-and-engravers-use-square-bracket-at-the-start-of-a-staff-group">Use square bracket at the start of a staff group</a>    </li>
    <li class=""><a name="toc-Using-marklines-in-a-Frenched-score-1" href="snippets-big-page.html#contexts-and-engravers-using-marklines-in-a-frenched-score">Using marklines in a Frenched score</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves-1" href="snippets-big-page.html#contexts-and-engravers-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-verse-and-refrain-2" href="snippets-big-page.html#contexts-and-engravers-vocal-ensemble-template-with-verse-and-refrain">Vocal ensemble template with verse and refrain</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Tweaks-and-overrides-1" href="snippets-big-page.html#tweaks-and-overrides">Tweaks and overrides</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-an-ottava-marking-to-a-single-voice" href="snippets-big-page.html#tweaks-and-overrides-adding-an-ottava-marking-to-a-single-voice">Adding an ottava marking to a single voice</a>    </li>
    <li class=""><a name="toc-Adding-links-to-objects-1" href="snippets-big-page.html#tweaks-and-overrides-adding-links-to-objects">Adding links to objects</a>    </li>
    <li class=""><a name="toc-Adding-markups-in-a-tablature-1" href="snippets-big-page.html#tweaks-and-overrides-adding-markups-in-a-tablature">Adding markups in a tablature</a>    </li>
    <li class=""><a name="toc-Adding-timing-marks-to-long-glissandi-2" href="snippets-big-page.html#tweaks-and-overrides-adding-timing-marks-to-long-glissandi">Adding timing marks to long glissandi</a>    </li>
    <li class=""><a name="toc-Adjusting-grace-note-spacing-1" href="snippets-big-page.html#tweaks-and-overrides-adjusting-grace-note-spacing">Adjusting grace note spacing</a>    </li>
    <li class=""><a name="toc-Adjusting-lyrics-vertical-spacing" href="snippets-big-page.html#tweaks-and-overrides-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a>    </li>
    <li class=""><a name="toc-Altering-the-length-of-beamed-stems" href="snippets-big-page.html#tweaks-and-overrides-altering-the-length-of-beamed-stems">Altering the length of beamed stems</a>    </li>
    <li class=""><a name="toc-Alternative-bar-numbering" href="snippets-big-page.html#tweaks-and-overrides-alternative-bar-numbering">Alternative bar numbering</a>    </li>
    <li class=""><a name="toc-Analysis-brackets-above-the-staff" href="snippets-big-page.html#tweaks-and-overrides-analysis-brackets-above-the-staff">Analysis brackets above the staff</a>    </li>
    <li class=""><a name="toc-Analysis-brackets-with-labels-1" href="snippets-big-page.html#tweaks-and-overrides-analysis-brackets-with-labels">Analysis brackets with labels</a>    </li>
    <li class=""><a name="toc-Asymmetric-slurs" href="snippets-big-page.html#tweaks-and-overrides-asymmetric-slurs">Asymmetric slurs</a>    </li>
    <li class=""><a name="toc-Avoiding-collisions-with-chord-fingerings" href="snippets-big-page.html#tweaks-and-overrides-avoiding-collisions-with-chord-fingerings">Avoiding collisions with chord fingerings</a>    </li>
    <li class=""><a name="toc-Caesura-_0028_0022railtracks_0022_0029-with-fermata" href="snippets-big-page.html#tweaks-and-overrides-caesura-_0028_0022railtracks_0022_0029-with-fermata">Caesura (&quot;railtracks&quot;) with fermata</a>    </li>
    <li class=""><a name="toc-Changing-a-single-note_0027s-size-in-a-chord-1" href="snippets-big-page.html#tweaks-and-overrides-changing-a-single-note_0027s-size-in-a-chord">Changing a single note&rsquo;s size in a chord</a>    </li>
    <li class=""><a name="toc-Changing-beam-thickness-and-spacing" href="snippets-big-page.html#tweaks-and-overrides-changing-beam-thickness-and-spacing">Changing beam thickness and spacing</a>    </li>
    <li class=""><a name="toc-Changing-form-of-multi_002dmeasure-rests-1" href="snippets-big-page.html#tweaks-and-overrides-changing-form-of-multi_002dmeasure-rests">Changing form of multi-measure rests</a>    </li>
    <li class=""><a name="toc-Changing-properties-for-individual-grobs" href="snippets-big-page.html#tweaks-and-overrides-changing-properties-for-individual-grobs">Changing properties for individual grobs</a>    </li>
    <li class=""><a name="toc-Changing-text-and-spanner-styles-for-text-dynamics" href="snippets-big-page.html#tweaks-and-overrides-changing-text-and-spanner-styles-for-text-dynamics">Changing text and spanner styles for text dynamics</a>    </li>
    <li class=""><a name="toc-Changing-the-default-text-font-family" href="snippets-big-page.html#tweaks-and-overrides-changing-the-default-text-font-family">Changing the default text font family</a>    </li>
    <li class=""><a name="toc-Changing-the-staff-size-2" href="snippets-big-page.html#tweaks-and-overrides-changing-the-staff-size">Changing the staff size</a>    </li>
    <li class=""><a name="toc-Changing-the-tempo-without-a-metronome-mark-1" href="snippets-big-page.html#tweaks-and-overrides-changing-the-tempo-without-a-metronome-mark">Changing the tempo without a metronome mark</a>    </li>
    <li class=""><a name="toc-Changing-the-text-for-sustain-markings-1" href="snippets-big-page.html#tweaks-and-overrides-changing-the-text-for-sustain-markings">Changing the text for sustain markings</a>    </li>
    <li class=""><a name="toc-Controlling-spanner-visibility-after-a-line-break" href="snippets-big-page.html#tweaks-and-overrides-controlling-spanner-visibility-after-a-line-break">Controlling spanner visibility after a line break</a>    </li>
    <li class=""><a name="toc-Controlling-the-vertical-ordering-of-scripts-1" href="snippets-big-page.html#tweaks-and-overrides-controlling-the-vertical-ordering-of-scripts">Controlling the vertical ordering of scripts</a>    </li>
    <li class=""><a name="toc-Controlling-tuplet-bracket-visibility" href="snippets-big-page.html#tweaks-and-overrides-controlling-tuplet-bracket-visibility">Controlling tuplet bracket visibility</a>    </li>
    <li class=""><a name="toc-Creating-a-delayed-turn" href="snippets-big-page.html#tweaks-and-overrides-creating-a-delayed-turn">Creating a delayed turn</a>    </li>
    <li class=""><a name="toc-Creating-custom-key-signatures-1" href="snippets-big-page.html#tweaks-and-overrides-creating-custom-key-signatures">Creating custom key signatures</a>    </li>
    <li class=""><a name="toc-Creating-double_002ddigit-fingerings-3" href="snippets-big-page.html#tweaks-and-overrides-creating-double_002ddigit-fingerings">Creating double-digit fingerings</a>    </li>
    <li class=""><a name="toc-Creating-simultaneous-rehearsal-marks-2" href="snippets-big-page.html#tweaks-and-overrides-creating-simultaneous-rehearsal-marks">Creating simultaneous rehearsal marks</a>    </li>
    <li class=""><a name="toc-Creating-text-spanners-2" href="snippets-big-page.html#tweaks-and-overrides-creating-text-spanners">Creating text spanners</a>    </li>
    <li class=""><a name="toc-Cross_002dstaff-chords-_002d-beaming-problems-workaround-2" href="snippets-big-page.html#tweaks-and-overrides-cross_002dstaff-chords-_002d-beaming-problems-workaround">Cross-staff chords - beaming problems workaround</a>    </li>
    <li class=""><a name="toc-Cross-staff-stems-1" href="snippets-big-page.html#tweaks-and-overrides-cross-staff-stems">Cross staff stems</a>    </li>
    <li class=""><a name="toc-Custodes" href="snippets-big-page.html#tweaks-and-overrides-custodes">Custodes</a>    </li>
    <li class=""><a name="toc-Customizing-fretboard-fret-diagrams" href="snippets-big-page.html#tweaks-and-overrides-customizing-fretboard-fret-diagrams">Customizing fretboard fret diagrams</a>    </li>
    <li class=""><a name="toc-Customizing-markup-fret-diagrams" href="snippets-big-page.html#tweaks-and-overrides-customizing-markup-fret-diagrams">Customizing markup fret diagrams</a>    </li>
    <li class=""><a name="toc-Display-bracket-with-only-one-staff-in-a-system-1" href="snippets-big-page.html#tweaks-and-overrides-display-bracket-with-only-one-staff-in-a-system">Display bracket with only one staff in a system</a>    </li>
    <li class=""><a name="toc-Displaying-grob-ancestry" href="snippets-big-page.html#tweaks-and-overrides-displaying-grob-ancestry">Displaying grob ancestry</a>    </li>
    <li class=""><a name="toc-Dotted-harmonics-1" href="snippets-big-page.html#tweaks-and-overrides-dotted-harmonics">Dotted harmonics</a>    </li>
    <li class=""><a name="toc-Drawing-boxes-around-grobs" href="snippets-big-page.html#tweaks-and-overrides-drawing-boxes-around-grobs">Drawing boxes around grobs</a>    </li>
    <li class=""><a name="toc-Drawing-circles-around-various-objects" href="snippets-big-page.html#tweaks-and-overrides-drawing-circles-around-various-objects">Drawing circles around various objects</a>    </li>
    <li class=""><a name="toc-Dynamics-custom-text-spanner-postfix-1" href="snippets-big-page.html#tweaks-and-overrides-dynamics-custom-text-spanner-postfix">Dynamics custom text spanner postfix</a>    </li>
    <li class=""><a name="toc-Dynamics-text-spanner-postfix-1" href="snippets-big-page.html#tweaks-and-overrides-dynamics-text-spanner-postfix">Dynamics text spanner postfix</a>    </li>
    <li class=""><a name="toc-Extending-a-TrillSpanner-1" href="snippets-big-page.html#tweaks-and-overrides-extending-a-trillspanner">Extending a TrillSpanner</a>    </li>
    <li class=""><a name="toc-Extending-glissandi-across-repeats-1" href="snippets-big-page.html#tweaks-and-overrides-extending-glissandi-across-repeats">Extending glissandi across repeats</a>    </li>
    <li class=""><a name="toc-Fine_002dtuning-pedal-brackets" href="snippets-big-page.html#tweaks-and-overrides-fine_002dtuning-pedal-brackets">Fine-tuning pedal brackets</a>    </li>
    <li class=""><a name="toc-Flat-Ties-1" href="snippets-big-page.html#tweaks-and-overrides-flat-ties">Flat Ties</a>    </li>
    <li class=""><a name="toc-Forcing-horizontal-shift-of-notes-1" href="snippets-big-page.html#tweaks-and-overrides-forcing-horizontal-shift-of-notes">Forcing horizontal shift of notes</a>    </li>
    <li class=""><a name="toc-Fret-diagrams-explained-and-developed" href="snippets-big-page.html#tweaks-and-overrides-fret-diagrams-explained-and-developed">Fret diagrams explained and developed</a>    </li>
    <li class=""><a name="toc-Generating-custom-flags-1" href="snippets-big-page.html#tweaks-and-overrides-generating-custom-flags">Generating custom flags</a>    </li>
    <li class=""><a name="toc-Glissandi-can-skip-grobs-2" href="snippets-big-page.html#tweaks-and-overrides-glissandi-can-skip-grobs">Glissandi can skip grobs</a>    </li>
    <li class=""><a name="toc-Hairpins-with-different-line-styles-1" href="snippets-big-page.html#tweaks-and-overrides-hairpins-with-different-line-styles">Hairpins with different line styles</a>    </li>
    <li class=""><a name="toc-Horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029-1" href="snippets-big-page.html#tweaks-and-overrides-horizontally-aligning-custom-dynamics-_0028e_002eg_002e-_0022sempre-pp_0022-_0022piu-f_0022-_0022subito-p_0022_0029">Horizontally aligning custom dynamics (e.g. &quot;sempre pp&quot; &quot;piu f&quot; &quot;subito p&quot;)</a>    </li>
    <li class=""><a name="toc-How-to-change-fret-diagram-position" href="snippets-big-page.html#tweaks-and-overrides-how-to-change-fret-diagram-position">How to change fret diagram position</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029" href="snippets-big-page.html#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-1_0029">How to print two rehearsal marks above and below the same barline (method 1)</a>    </li>
    <li class=""><a name="toc-How-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029-3" href="snippets-big-page.html#tweaks-and-overrides-how-to-print-two-rehearsal-marks-above-and-below-the-same-barline-_0028method-2_0029">How to print two rehearsal marks above and below the same barline (method 2)</a>    </li>
    <li class=""><a name="toc-Inserting-a-caesura" href="snippets-big-page.html#tweaks-and-overrides-inserting-a-caesura">Inserting a caesura</a>    </li>
    <li class=""><a name="toc-Keep-change-clefs-full-sized-1" href="snippets-big-page.html#tweaks-and-overrides-keep-change-clefs-full-sized">Keep change clefs full sized</a>    </li>
    <li class=""><a name="toc-Line-arrows-1" href="snippets-big-page.html#tweaks-and-overrides-line-arrows">Line arrows</a>    </li>
    <li class=""><a name="toc-Making-an-object-invisible-with-the-_0027transparent-property" href="snippets-big-page.html#tweaks-and-overrides-making-an-object-invisible-with-the-_0027transparent-property">Making an object invisible with the &rsquo;transparent property</a>    </li>
    <li class=""><a name="toc-Making-glissandi-breakable" href="snippets-big-page.html#tweaks-and-overrides-making-glissandi-breakable">Making glissandi breakable</a>    </li>
    <li class=""><a name="toc-Manually-controlling-beam-positions-1" href="snippets-big-page.html#tweaks-and-overrides-manually-controlling-beam-positions">Manually controlling beam positions</a>    </li>
    <li class=""><a name="toc-Mensurstriche-layout-_0028bar-lines-between-the-staves_0029-3" href="snippets-big-page.html#tweaks-and-overrides-mensurstriche-layout-_0028bar-lines-between-the-staves_0029">Mensurstriche layout (bar lines between the staves)</a>    </li>
    <li class=""><a name="toc-Modifying-the-Ottava-spanner-slope-2" href="snippets-big-page.html#tweaks-and-overrides-modifying-the-ottava-spanner-slope">Modifying the Ottava spanner slope</a>    </li>
    <li class=""><a name="toc-Moving-dotted-notes-in-polyphony-1" href="snippets-big-page.html#tweaks-and-overrides-moving-dotted-notes-in-polyphony">Moving dotted notes in polyphony</a>    </li>
    <li class=""><a name="toc-Moving-slur-positions-vertically" href="snippets-big-page.html#tweaks-and-overrides-moving-slur-positions-vertically">Moving slur positions vertically</a>    </li>
    <li class=""><a name="toc-Nesting-staves-1" href="snippets-big-page.html#tweaks-and-overrides-nesting-staves">Nesting staves</a>    </li>
    <li class=""><a name="toc-Overriding-articulations-of-destinct-type" href="snippets-big-page.html#tweaks-and-overrides-overriding-articulations-of-destinct-type">Overriding articulations of destinct type</a>    </li>
    <li class=""><a name="toc-Percent-repeat-count-visibility" href="snippets-big-page.html#tweaks-and-overrides-percent-repeat-count-visibility">Percent repeat count visibility</a>    </li>
    <li class=""><a name="toc-Positioning-arpeggios" href="snippets-big-page.html#tweaks-and-overrides-positioning-arpeggios">Positioning arpeggios</a>    </li>
    <li class=""><a name="toc-Positioning-multi_002dmeasure-rests-1" href="snippets-big-page.html#tweaks-and-overrides-positioning-multi_002dmeasure-rests">Positioning multi-measure rests</a>    </li>
    <li class=""><a name="toc-Positioning-text-markups-inside-slurs" href="snippets-big-page.html#tweaks-and-overrides-positioning-text-markups-inside-slurs">Positioning text markups inside slurs</a>    </li>
    <li class=""><a name="toc-Printing-bar-numbers-inside-boxes-or-circles" href="snippets-big-page.html#tweaks-and-overrides-printing-bar-numbers-inside-boxes-or-circles">Printing bar numbers inside boxes or circles</a>    </li>
    <li class=""><a name="toc-Printing-metronome-and-rehearsal-marks-below-the-staff" href="snippets-big-page.html#tweaks-and-overrides-printing-metronome-and-rehearsal-marks-below-the-staff">Printing metronome and rehearsal marks below the staff</a>    </li>
    <li class=""><a name="toc-Printing-note-names-with-and-without-an-octave-marker" href="snippets-big-page.html#tweaks-and-overrides-printing-note-names-with-and-without-an-octave-marker">Printing note names with and without an octave marker</a>    </li>
    <li class=""><a name="toc-Proportional-strict-notespacing" href="snippets-big-page.html#tweaks-and-overrides-proportional-strict-notespacing">Proportional strict notespacing</a>    </li>
    <li class=""><a name="toc-Removing-brace-on-first-line-of-piano-score-1" href="snippets-big-page.html#tweaks-and-overrides-removing-brace-on-first-line-of-piano-score">Removing brace on first line of piano score</a>    </li>
    <li class=""><a name="toc-Removing-connecting-bar-lines-on-StaffGroup-PianoStaff-or-GrandStaff-1" href="snippets-big-page.html#tweaks-and-overrides-removing-connecting-bar-lines-on-staffgroup-pianostaff-or-grandstaff">Removing connecting bar lines on StaffGroup PianoStaff or GrandStaff</a>    </li>
    <li class=""><a name="toc-Removing-the-first-empty-line" href="snippets-big-page.html#tweaks-and-overrides-removing-the-first-empty-line">Removing the first empty line</a>    </li>
    <li class=""><a name="toc-Rest-styles" href="snippets-big-page.html#tweaks-and-overrides-rest-styles">Rest styles</a>    </li>
    <li class=""><a name="toc-Rhythmic-slashes" href="snippets-big-page.html#tweaks-and-overrides-rhythmic-slashes">Rhythmic slashes</a>    </li>
    <li class=""><a name="toc-Separating-key-cancellations-from-key-signature-changes" href="snippets-big-page.html#tweaks-and-overrides-separating-key-cancellations-from-key-signature-changes">Separating key cancellations from key signature changes</a>    </li>
    <li class=""><a name="toc-Setting-hairpin-behavior-at-bar-lines" href="snippets-big-page.html#tweaks-and-overrides-setting-hairpin-behavior-at-bar-lines">Setting hairpin behavior at bar lines</a>    </li>
    <li class=""><a name="toc-Setting-system-separators-1" href="snippets-big-page.html#tweaks-and-overrides-setting-system-separators">Setting system separators</a>    </li>
    <li class=""><a name="toc-Showing-the-same-articulation-above-and-below-a-note-or-chord" href="snippets-big-page.html#tweaks-and-overrides-showing-the-same-articulation-above-and-below-a-note-or-chord">Showing the same articulation above and below a note or chord</a>    </li>
    <li class=""><a name="toc-String-number-extender-lines-2" href="snippets-big-page.html#tweaks-and-overrides-string-number-extender-lines">String number extender lines</a>    </li>
    <li class=""><a name="toc-Suppressing-warnings-for-clashing-note-columns-1" href="snippets-big-page.html#tweaks-and-overrides-suppressing-warnings-for-clashing-note-columns">Suppressing warnings for clashing note columns</a>    </li>
    <li class=""><a name="toc-Time-signature-in-parentheses-_002d-method-3-2" href="snippets-big-page.html#tweaks-and-overrides-time-signature-in-parentheses-_002d-method-3">Time signature in parentheses - method 3</a>    </li>
    <li class=""><a name="toc-Time-signature-in-parentheses-1" href="snippets-big-page.html#tweaks-and-overrides-time-signature-in-parentheses">Time signature in parentheses</a>    </li>
    <li class=""><a name="toc-Time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029-1" href="snippets-big-page.html#tweaks-and-overrides-time-signature-printing-only-the-numerator-as-a-number-_0028instead-of-the-fraction_0029">Time signature printing only the numerator as a number (instead of the fraction)</a>    </li>
    <li class=""><a name="toc-Tuplet-bracket-and-change-staff" href="snippets-big-page.html#tweaks-and-overrides-tuplet-bracket-and-change-staff">Tuplet bracket and change staff</a>    </li>
    <li class=""><a name="toc-Tweaking-clef-properties-1" href="snippets-big-page.html#tweaks-and-overrides-tweaking-clef-properties">Tweaking clef properties</a>    </li>
    <li class=""><a name="toc-Tweaking-grace-layout-within-music-1" href="snippets-big-page.html#tweaks-and-overrides-tweaking-grace-layout-within-music">Tweaking grace layout within music</a>    </li>
    <li class=""><a name="toc-Using-alternative-flag-styles-1" href="snippets-big-page.html#tweaks-and-overrides-using-alternative-flag-styles">Using alternative flag styles</a>    </li>
    <li class=""><a name="toc-Using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak" href="snippets-big-page.html#tweaks-and-overrides-using-ly_003agrob_002dobject-to-access-grobs-with-_005ctweak">Using ly:grob-object to access grobs with \tweak</a>    </li>
    <li class=""><a name="toc-Using-PostScript-to-generate-special-note-head-shapes" href="snippets-big-page.html#tweaks-and-overrides-using-postscript-to-generate-special-note-head-shapes">Using PostScript to generate special note head shapes</a>    </li>
    <li class=""><a name="toc-Using-the-_005ctweak-command-to-tweak-individual-grobs" href="snippets-big-page.html#tweaks-and-overrides-using-the-_005ctweak-command-to-tweak-individual-grobs">Using the \tweak command to tweak individual grobs</a>    </li>
    <li class=""><a name="toc-Vertically-aligned-dynamics-and-textscripts-1" href="snippets-big-page.html#tweaks-and-overrides-vertically-aligned-dynamics-and-textscripts">Vertically aligned dynamics and textscripts</a>    </li>
    <li class=""><a name="toc-Vertically-aligning-ossias-and-lyrics-1" href="snippets-big-page.html#tweaks-and-overrides-vertically-aligning-ossias-and-lyrics">Vertically aligning ossias and lyrics</a>    </li>
    <li class=""><a name="toc-Vertically-centering-paired-figured-bass-extenders" href="snippets-big-page.html#tweaks-and-overrides-vertically-centering-paired-figured-bass-extenders">Vertically centering paired figured bass extenders</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Paper-and-layout-1" href="snippets-big-page.html#paper-and-layout">Paper and layout</a>
  <ul class="toc">
    <li class=""><a name="toc-Aligning-and-centering-instrument-names-1" href="snippets-big-page.html#paper-and-layout-aligning-and-centering-instrument-names">Aligning and centering instrument names</a>    </li>
    <li class=""><a name="toc-Arranging-separate-lyrics-on-a-single-line" href="snippets-big-page.html#paper-and-layout-arranging-separate-lyrics-on-a-single-line">Arranging separate lyrics on a single line</a>    </li>
    <li class=""><a name="toc-Book-parts" href="snippets-big-page.html#paper-and-layout-book-parts">Book parts</a>    </li>
    <li class=""><a name="toc-Changing-the-staff-size-1" href="snippets-big-page.html#paper-and-layout-changing-the-staff-size">Changing the staff size</a>    </li>
    <li class=""><a name="toc-Clip-systems" href="snippets-big-page.html#paper-and-layout-clip-systems">Clip systems</a>    </li>
    <li class=""><a name="toc-Creating-blank-staves-2" href="snippets-big-page.html#paper-and-layout-creating-blank-staves">Creating blank staves</a>    </li>
    <li class=""><a name="toc-Demonstrating-all-headers" href="snippets-big-page.html#paper-and-layout-demonstrating-all-headers">Demonstrating all headers</a>    </li>
    <li class=""><a name="toc-Setting-system-separators-2" href="snippets-big-page.html#paper-and-layout-setting-system-separators">Setting system separators</a>    </li>
    <li class=""><a name="toc-Table-of-contents" href="snippets-big-page.html#paper-and-layout-table-of-contents">Table of contents</a>    </li>
    <li class=""><a name="toc-Vertical-aligned-StaffGroups-without-connecting-SystemStartBar-1" href="snippets-big-page.html#paper-and-layout-vertical-aligned-staffgroups-without-connecting-systemstartbar">Vertical aligned StaffGroups without connecting SystemStartBar</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Titles-1" href="snippets-big-page.html#titles">Titles</a>
  <ul class="toc">
    <li class=""><a name="toc-Adding-the-current-date-to-a-score-1" href="snippets-big-page.html#titles-adding-the-current-date-to-a-score">Adding the current date to a score</a>    </li>
    <li class=""><a name="toc-Aligning-and-centering-instrument-names-2" href="snippets-big-page.html#titles-aligning-and-centering-instrument-names">Aligning and centering instrument names</a>    </li>
    <li class=""><a name="toc-Demonstrating-all-headers-1" href="snippets-big-page.html#titles-demonstrating-all-headers">Demonstrating all headers</a>    </li>
    <li class=""><a name="toc-Outputting-the-version-number" href="snippets-big-page.html#titles-outputting-the-version-number">Outputting the version number</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Spacing-1" href="snippets-big-page.html#spacing">Spacing</a>
  <ul class="toc">
    <li class=""><a name="toc-Adjusting-lyrics-vertical-spacing-1" href="snippets-big-page.html#spacing-adjusting-lyrics-vertical-spacing">Adjusting lyrics vertical spacing</a>    </li>
    <li class=""><a name="toc-Allowing-fingerings-to-be-printed-inside-the-staff-2" href="snippets-big-page.html#spacing-allowing-fingerings-to-be-printed-inside-the-staff">Allowing fingerings to be printed inside the staff</a>    </li>
    <li class=""><a name="toc-Page-label" href="snippets-big-page.html#spacing-page-label">Page label</a>    </li>
    <li class=""><a name="toc-Proportional-strict-notespacing-1" href="snippets-big-page.html#spacing-proportional-strict-notespacing">Proportional strict notespacing</a>    </li>
    <li class=""><a name="toc-Vertically-aligned-dynamics-and-textscripts" href="snippets-big-page.html#spacing-vertically-aligned-dynamics-and-textscripts">Vertically aligned dynamics and textscripts</a>    </li>
    <li class=""><a name="toc-Vertically-aligning-ossias-and-lyrics" href="snippets-big-page.html#spacing-vertically-aligning-ossias-and-lyrics">Vertically aligning ossias and lyrics</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-MIDI-1" href="snippets-big-page.html#midi">MIDI</a>
  <ul class="toc">
    <li class=""><a name="toc-Changing-MIDI-output-to-one-channel-per-voice-1" href="snippets-big-page.html#midi-changing-midi-output-to-one-channel-per-voice">Changing MIDI output to one channel per voice</a>    </li>
    <li class=""><a name="toc-Changing-the-tempo-without-a-metronome-mark-2" href="snippets-big-page.html#midi-changing-the-tempo-without-a-metronome-mark">Changing the tempo without a metronome mark</a>    </li>
    <li class=""><a name="toc-Creating-custom-dynamics-in-MIDI-output" href="snippets-big-page.html#midi-creating-custom-dynamics-in-midi-output">Creating custom dynamics in MIDI output</a>    </li>
    <li class=""><a name="toc-Customize-drumPitchNames-drumStyleTable-and-drumPitchTable-in-layout-and-midi" href="snippets-big-page.html#midi-customize-drumpitchnames-drumstyletable-and-drumpitchtable-in-layout-and-midi">Customize drumPitchNames drumStyleTable and drumPitchTable in layout and midi</a>    </li>
    <li class=""><a name="toc-Demo-MidiInstruments" href="snippets-big-page.html#midi-demo-midiinstruments">Demo MidiInstruments</a>    </li>
    <li class=""><a name="toc-Replacing-default-MIDI-instrument-equalization" href="snippets-big-page.html#midi-replacing-default-midi-instrument-equalization">Replacing default MIDI instrument equalization</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Templates-1" href="snippets-big-page.html#templates">Templates</a>
  <ul class="toc">
    <li class=""><a name="toc-Ancient-notation-template-_002d_002d-modern-transcription-of-gregorian-music-2" href="snippets-big-page.html#templates-ancient-notation-template-_002d-modern-transcription-of-gregorian-music">Ancient notation template &ndash; modern transcription of gregorian music</a>    </li>
    <li class=""><a name="toc-Anglican-psalm-template" href="snippets-big-page.html#templates-anglican-psalm-template">Anglican psalm template</a>    </li>
    <li class=""><a name="toc-Hymn-template-1" href="snippets-big-page.html#templates-hymn-template">Hymn template</a>    </li>
    <li class=""><a name="toc-Jazz-combo-template" href="snippets-big-page.html#templates-jazz-combo-template">Jazz combo template</a>    </li>
    <li class=""><a name="toc-Orchestra-choir-and-piano-template-1" href="snippets-big-page.html#templates-orchestra-choir-and-piano-template">Orchestra choir and piano template</a>    </li>
    <li class=""><a name="toc-Piano-template-_0028simple_0029-1" href="snippets-big-page.html#templates-piano-template-_0028simple_0029">Piano template (simple)</a>    </li>
    <li class=""><a name="toc-Piano-template-with-centered-lyrics" href="snippets-big-page.html#templates-piano-template-with-centered-lyrics">Piano template with centered lyrics</a>    </li>
    <li class=""><a name="toc-Piano-template-with-melody-and-lyrics" href="snippets-big-page.html#templates-piano-template-with-melody-and-lyrics">Piano template with melody and lyrics</a>    </li>
    <li class=""><a name="toc-SATB-Choir-template-_002d-four-staves-1" href="snippets-big-page.html#templates-satb-choir-template-_002d-four-staves">SATB Choir template - four staves</a>    </li>
    <li class=""><a name="toc-Score-for-diatonic-accordion" href="snippets-big-page.html#templates-score-for-diatonic-accordion">Score for diatonic accordion</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-lyrics-and-chords-2" href="snippets-big-page.html#templates-single-staff-template-with-notes-lyrics-and-chords">Single staff template with notes lyrics and chords</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-lyrics-chords-and-frets-2" href="snippets-big-page.html#templates-single-staff-template-with-notes-lyrics-chords-and-frets">Single staff template with notes lyrics chords and frets</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-and-chords-1" href="snippets-big-page.html#templates-single-staff-template-with-notes-and-chords">Single staff template with notes and chords</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-notes-and-lyrics" href="snippets-big-page.html#templates-single-staff-template-with-notes-and-lyrics">Single staff template with notes and lyrics</a>    </li>
    <li class=""><a name="toc-Single-staff-template-with-only-notes" href="snippets-big-page.html#templates-single-staff-template-with-only-notes">Single staff template with only notes</a>    </li>
    <li class=""><a name="toc-String-quartet-template-_0028simple_0029-1" href="snippets-big-page.html#templates-string-quartet-template-_0028simple_0029">String quartet template (simple)</a>    </li>
    <li class=""><a name="toc-String-quartet-template-with-separate-parts-1" href="snippets-big-page.html#templates-string-quartet-template-with-separate-parts">String quartet template with separate parts</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-automatic-piano-reduction-1" href="snippets-big-page.html#templates-vocal-ensemble-template-with-automatic-piano-reduction">Vocal ensemble template with automatic piano reduction</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves-3" href="snippets-big-page.html#templates-vocal-ensemble-template-with-lyrics-aligned-below-and-above-the-staves">Vocal ensemble template with lyrics aligned below and above the staves</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template-with-verse-and-refrain" href="snippets-big-page.html#templates-vocal-ensemble-template-with-verse-and-refrain">Vocal ensemble template with verse and refrain</a>    </li>
    <li class=""><a name="toc-Vocal-ensemble-template" href="snippets-big-page.html#templates-vocal-ensemble-template">Vocal ensemble template</a>    </li>
  </ul>
  </li>
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.19 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.19 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.19 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
