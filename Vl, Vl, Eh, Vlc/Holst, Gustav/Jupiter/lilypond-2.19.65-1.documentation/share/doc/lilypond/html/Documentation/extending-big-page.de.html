<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 2003-2015 bei den Autoren.

The translation of the following copyright notice is provided
for courtesy to non-English speakers, but only the notice in English
legally counts.

Die Übersetzung der folgenden Lizenzanmerkung ist zur Orientierung
für Leser, die nicht Englisch sprechen. Im rechtlichen Sinne ist aber
nur die englische Version gültig.

Es ist erlaubt, dieses Dokument unter den Bedingungen der
GNU Free Documentation Lizenz (Version 1.1 oder
spätere, von der Free Software Foundation publizierte Versionen, ohne
invariante Abschnitte),
zu kopieren, zu verbreiten und/oder
zu verändern. Eine Kopie der Lizenz ist im Abschnitt "GNU
Free Documentation License" angefügt.


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on 6. August 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond erweitern</title>

<meta name="description" content="LilyPond erweitern">
<meta name="keywords" content="LilyPond erweitern">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#index" rel="start" title="LilyPond &ndash; Extending">
<link href="#lilypond-index" rel="index" title="B. LilyPond-Index">
<link href="#SEC_Contents" rel="contents" title="Inhaltsverzeichnis">
<link href="#SEC_About" rel="help" title="&Uuml;ber dieses Dokument">
<link rel="stylesheet" type="text/css" title="Default style" href="../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../Documentation/css/lilypond-manuals-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="de" class="extending devStatus">


<div id="main">
<a name="Top"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td></tr></table>
<a name="index"></a>
<h1 class="settitle">LilyPond &ndash; Extending</h1>

<table class="cartouche" border="1"><tr><td>
<p>Diese Datei erklärt, wie man die Funktionalität von
LilyPond Version 2.19.65 erweitern kann.
</p></td></tr></table>







<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#scheme-tutorial" accesskey="1">1. Scheme-Tutorium</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Programmieren innerhalb von LilyPond.
</td></tr>
<tr><td align="left" valign="top"><a href="#interfaces-for-programmers" accesskey="2">2. Schnittstellen für Programmierer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Wie man mit Scheme kommunizieren kann.
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-scheme-interfaces" accesskey="3">3. LilyPond Scheme-Schnittstellen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Information in die Noten senden und aus den Noten erhalten.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Anhänge

</pre></th></tr><tr><td align="left" valign="top"><a href="#gnu-free-documentation-license" accesskey="4">A. GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Die Lizenz dieses Dokuments.
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-index" accesskey="5">B. LilyPond-Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<table class="cartouche" border="1"><tr><td>
<p>Zu mehr Information, wie dieses Handbuch unter den anderen Handbüchern
positioniert, oder um dieses Handbuch in einem anderen Format
zu lesen, besuchen Sie bitte <a name="index-Manuals"></a>
<a href="web-big-page.de.html#manuals">Manuals</a>.
</p>
<p>Wenn Ihnen Handbücher fehlen, finden Sie die gesamte Dokumentation
unter <a href="http://lilypond.org">http://lilypond.org/</a>.
</p></td></tr></table>









<hr size="1">
<a name="Scheme_002dTutorium"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#index" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#index" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#introduction-to-scheme" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Einleitung in Scheme &gt; </a>]</td></tr></table>
<a name="scheme-tutorial"></a>
<h1 class="chapter">1. Scheme-Tutorium</h1>


<a name="index-Scheme"></a>
<a name="index-GUILE"></a>
<a name="index-Scheme_002c-in-einer-LilyPond_002dDatei"></a>
<a name="index-LISP"></a>
<a name="index-Auswertung-von-Scheme_002dCode"></a>

<p>LilyPond verwendet die Scheme-Programmiersprache sowohl als Teil
der Eingabesyntax als auch als internen Mechanismus, um Programmmodule
zusammenzufügen.  Dieser Abschnitt ist ein sehr kurzer Überblick über
die Dateneingabe mit Scheme.  Wenn Sie mehr über Scheme wissen wollen,
gehen Sie zu <a href="http://www.schemers.org">http://www.schemers.org</a>.
</p>
<p>LilyPond benutzt die GNU Guile-Implementation von Scheme, die auf dem
&bdquo;R5RS&ldquo;-Standard von Scheme basiert.  Wenn Sie Scheme lernen wollen,
um es innerhalb von LilyPond zu benutzen, wird es nicht empfohlen,
mit einer anderen Implementation (die sich auf einen anderen
Standard bezieht) zu arbeiten.  Information zu Guile findet sich
unter <a href="http://www.gnu.org/software/guile">http://www.gnu.org/software/guile/</a>.  Der
&bdquo;R5RS&ldquo;-Standard von Scheme befindet sich unter der Adresse
<a href="http://www.schemers.org/Documents/Standards/R5RS">http://www.schemers.org/Documents/Standards/R5RS/</a>.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#introduction-to-scheme" accesskey="1">1.1 Einleitung in Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-in-lilypond" accesskey="2">1.2 Scheme in LilyPond</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#building-complicated-functions" accesskey="3">1.3 Komplizierte Funktionen erstellen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Einleitung-in-Scheme"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-tutorial" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-tutorial" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-sandbox" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme-Sandkasten &gt; </a>]</td></tr></table>
<a name="introduction-to-scheme"></a>
<h2 class="section">1.1 Einleitung in Scheme</h2>

<p>Wir wollen mit einer Einführung in Scheme beginnen.  Für diese kurze Einfürung
soll der GUILE-Interpreter genommen werden, um zu erforschen, wie die Sprache
funktioniert.  Nach besserer Bekanntschaft mit Scheme soll gezeigt werden, wie
die Sprache in LilyPond-Dateien eingefügt werden kann.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#scheme-sandbox" accesskey="1">1.1.1 Scheme-Sandkasten</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-variables" accesskey="2">1.1.2 Scheme-Variablen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-simple-data-types" accesskey="3">1.1.3 Einfache Scheme-Datentypen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-compound-data-types" accesskey="4">1.1.4 Zusammengesetzte Scheme-Datentypen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#calculations-in-scheme" accesskey="5">1.1.5 Berechnungen in Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-procedures" accesskey="6">1.1.6 Scheme-Prozeduren</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-conditionals" accesskey="7">1.1.7 Scheme-Konditionale</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Scheme_002dSandkasten"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#introduction-to-scheme" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-variables" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme-Variablen &gt; </a>]</td></tr></table>
<a name="scheme-sandbox"></a>
<h3 class="subsection">1.1.1 Scheme-Sandkasten</h3>

<p>Die LilyPond-Installation enthält gleichzeitig auch die
Guile-Implementation von Scheme.  Auf den meisten Systemen kann
man in einer Scheme-sandbox experimentieren, indem man ein
Kommandozeilen-Fenster öffnet und <code>guile</code> aufruft.  Unter
einigen Systemen, insbesondere unter Windows, muss man evtl.
die Umgebungsvariable <code>GUILE_LOAD_PATH</code> auf das Verzeichnis
<code>../usr/share/guile/1.8</code> innerhalb des LilyPond-Installationsverzeichnisses
setzen (der vollständige Pfad ist erklärt in <a name="index-Mehr-Information"></a>
<a href="learning-big-page.de.html#other-sources-of-information">Mehr Information</a>).
Alternativ können Windows-Benutzer auch einfach &bdquo;Ausführen&ldquo; im
Startmenü wählen und <code>guile</code> schreiben.
</p>
<p>Es gibt auch eine direkte Scheme-Umgebung mit allen LilyPond-Voreinstellungen,
die man auf der Kommandozeile mit folgendem Befehl aufrufen kann:
</p>
<blockquote><pre class="example">lilypond scheme-sandbox
</pre></blockquote>

<p>Wenn guile einmal läuft, erhält man die Eingabeaufforderung von guile:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt;
</pre></td></tr></table>

<p>Man kann Scheme-Ausdrucke hier eingeben und mit Scheme experimentieren.
Siehe die Datei &lsquo;<tt>ly/scheme-sandbox.ly</tt>&rsquo; zu Information, wie man
die GNU readline-Bibliothek benutzen kann, um bessere Scheme-Formatierung
der Kommandozeile zu erhalten.  Wenn die readline-Bibliothek für interaktive
Guile-Sitzungen außerhalb von LilyPond schon aktiviert ist, sollte es auch
in der Sandbox funktionieren.
</p>

<hr size="6">
<a name="Scheme_002dVariablen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-sandbox" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Sandkasten&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-simple-data-types" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Einfache Scheme-Datentypen &gt; </a>]</td></tr></table>
<a name="scheme-variables"></a>
<h3 class="subsection">1.1.2 Scheme-Variablen</h3>

<p>Scheme-Variablen können jedlichen gültigen Scheme-Wert erhalten, auch
Scheme-Prozeduren.
</p>
<p>Scheme-Variablen werden mit <code>define</code> definiert:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define a 2)
guile&gt;
</pre></td></tr></table>

<p>Scheme-Variablen können an der Guile-Eingabeaufforderung ausgewertet werden,
indem man einfach die Variable eintippt.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; a
2
guile&gt;
</pre></td></tr></table>

<p>Scheme-Variablen können auf dem Bildschirm ausgegeben werden, indem man
<code>display</code> zum Anzeigen benutzt:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (display a)
2guile&gt;
</pre></td></tr></table>

<p>Sowohl der Wert <code>2</code> als auch die Eingabeaufforderung <code>guile</code>
werden auf der gleichen Zeile ausgegeben.  Das kann man vermeiden, indem
man eine <code>newline</code>-Prozedur für eine Leerzeile aufruft oder das
Zeichen für eine neue Zeile anzeigen lässt:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (display a)(newline)
2
guile&gt; (display a)(display &quot;\n&quot;)
2
guile&gt;
</pre></td></tr></table>

<p>Wenn eine Variable einmal erstellt wurde, kann ihr Wert durch <code>set!</code>
verändert werden:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (set! a 12345)
guile&gt; a
12345
guile&gt;
</pre></td></tr></table>

<hr size="6">
<a name="Einfache-Scheme_002dDatentypen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-variables" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Variablen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-compound-data-types" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Zusammengesetzte Scheme-Datentypen &gt; </a>]</td></tr></table>
<a name="scheme-simple-data-types"></a>
<h3 class="subsection">1.1.3 Einfache Scheme-Datentypen</h3>

<p>Das Grundlegendste an einer Sprache sind Daten: Zahlen, Zeichen,
Zeichenketten, Listen usw.  Hier ist eine Liste der Datentypen, die für
LilyPond-Eingabedateien relevant sind.
</p>
<dl compact="compact">
<dt> Boolesche Variablen</dt>
<dd><p>Werte einer Booleschen Variable sind Wahr oder Falsch. Die Scheme-Entsprechung
für Wahr ist <code>#t</code> und für Falsch <code>#f</code>.
<a name="index-_0023_0023t"></a>
<a name="index-_0023_0023t-1"></a>
<a name="index-_0023_0023f"></a>
<a name="index-_0023_0023f-1"></a>
</p>
</dd>
<dt> Zahlen</dt>
<dd><p>Zahlen werden wie üblich eingegeben, <code>1</code> ist die (ganze)
Zahl Eins, während <code>-1.5</code> eine Gleitkommazahl (also
eine nicht-ganze) ist.
</p>
</dd>
<dt> Zeichenketten</dt>
<dd><p>Zeichenketten werden in doppelte Anführungszeichen gesetzt:
</p>
<blockquote><pre class="example">&quot;Das ist eine Zeichenkette&quot;
</pre></blockquote>

<p>Zeichenketten können über mehrere Zeilen reichen:
</p>
<blockquote><pre class="example">&quot;Das
ist
eine Zeichenkette&quot;
</pre></blockquote>

<p>und die Zeichen für eine neue Zeile am Ende jeder Zeile werden auch
in die Zeichenkette aufgenommen.
</p>
<p>Zeichen für eine neue Zeile können auch hinzugefügt werden, indem man
<code>\n</code> in die Zeichenkette aufnimmt.
</p>
<blockquote><pre class="example">&quot;das\nist eine\nmehrzeilige Zeichenkette&quot;
</pre></blockquote>

<p>Anführungszeichen und neue Zeilen können auch mit sogenannten
Fluchtsequenzen eingefügt werden. Die Zeichenkette
<code>a sagt &quot;b&quot;</code> wird wie folgt eingegeben:
</p>
<blockquote><pre class="example">&quot;a sagt \&quot;b\&quot;&quot;
</pre></blockquote>

</dd>
</dl>

<p>Weitere zusätzliche Scheme-Datentypen, die hier nicht besprochen wurden,
finden sich in einer vollständigen Liste der Scheme-Datentypen in der
Guile-Referenzanleitung:
<a href="http://www.gnu.org/software/guile/manual/html_node/Simple-Data-Types.html">http://www.gnu.org/software/guile/manual/html_node/Simple-Data-Types.html</a>.
</p>

<hr size="6">
<a name="Zusammengesetzte-Scheme_002dDatentypen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-simple-data-types" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Einfache Scheme-Datentypen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#calculations-in-scheme" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Berechnungen in Scheme &gt; </a>]</td></tr></table>
<a name="scheme-compound-data-types"></a>
<h3 class="subsection">1.1.4 Zusammengesetzte Scheme-Datentypen</h3>

<p>Es gibt auch zusammengesetzte Datentypen in Scheme.  Die Datentypen, die in
LilyPond häufig benutzt werden, beinhalten Paare, Listen, assoziative Listen
und Hash-Tabellen.
</p>
<a name="Paare-_0028pair_0029"></a>
<h3 class="subheading">Paare (pair)</h3>

<p>Der wichtigeste zusammengesetzte Datentyp in Scheme ist ein Paar (<code>pair</code>).
Wie aus dem Namen schon hervorgeht, besteht ein Paar aus zwei zusammengeschweißten
Werten.  Die Prozedur um ein Paar zu erstellen ist <code>cons</code>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (cons 4 5)
(4 . 5)
guile&gt;
</pre></td></tr></table>

<p>Das Paar wird dargestellt als zwei Elemente, von Klammern umgeben
und durch Leerzeichen und einen Punkt (<code>.</code>) getrennt.  Der Punkt ist
<em>kein</em> Dezimalpunkt, sondern markiert die Gruppe als Paar.
</p>
<p>Paare können auch wörtlich eingegeben werden, indem man ihnen voraus ein
einfaches Anführungszeichen (<code>'</code> setzt.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; '(4 . 5)
(4 . 5)
guile&gt;
</pre></td></tr></table>

<p>Beide Elemente eines Paares können beliebige gültige Scheme-Werte sein:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (cons #t #f)
(#t . #f)
guile&gt; '(&quot;blah-blah&quot; . 3.1415926535)
(&quot;blah-blah&quot; . 3.1415926535)
guile&gt;
</pre></td></tr></table>

<p>Das erste Element eines Paares kann mit der Prozedur <code>car</code>,
das zweite mit der Prozedur <code>cdr</code> angesprochen werden.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define mypair (cons 123 &quot;hello there&quot;)
... )
guile&gt; (car mypair)
123
guile&gt; (cdr mypair)
&quot;hello there&quot;
guile&gt;
</pre></td></tr></table>


<p>Achtung:  <code>cdr</code> wird ausgeprochen wie &quot;kudd-err&quot;, nach Sussman und
Abelson, siehe
<a href="http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-14.html#footnote_Temp_133">http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-14.html#footnote_Temp_133</a>
</p>
<a name="Listen-_0028list_0029"></a>
<h3 class="subheading">Listen (list)</h3>

<p>Ein sehr häufiger Datentyp in Scheme ist die Liste (<em>list</em>).  Formal
gesehen wird eine Liste entweder als leere Liste definiert
(repräsentiert als <code>'()</code>), oder als ein Paar, dessen <code>cdr</code>
eine Liste ist.
</p>
<p>Es gibt viele Arten, Listen zu erstellen.  Die vielleicht häufigste Methode
ist die <code>list</code>-Prozedur:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (list 1 2 3 &quot;abc&quot; 17.5)
(1 2 3 &quot;abc&quot; 17.5)
</pre></td></tr></table>

<p>Wie man sehen kann, wird eine Liste dargestellt in Form der einzelnen
Elemente, getrennt durch ein Leerzeichen und als Gruppe in Klammern eingeschlossen.
Anders als bei einem Paar, befindet sich kein Punkt zwischen den Elementen.
</p>
<p>Eine Liste kann auch als wörtliche Liste notiert werden, indem man die
enthaltenen Elemente in Klammern einschließt und ein einfaches Anführungszeichen
voranschreibt:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; '(17 23 &quot;foo&quot; &quot;bar&quot; &quot;bazzle&quot;)
(17 23 &quot;foo&quot; &quot;bar&quot; &quot;bazzle&quot;)
</pre></td></tr></table>

<p>Listen haben eine zentrale Stellung in Scheme.  Scheme wird als Dialekt
von Lisp angesehen, und das Wort &bdquo;lisp&ldquo; steht für &bdquo;List Processing&ldquo;.
Scheme-Ausdrücke sind immer Listen.
</p>
<a name="Assoziative-Listen-_0028alist_0029"></a>
<h3 class="subheading">Assoziative Listen (alist)</h3>

<p>Eine besonderer Listentyp ist die <em>assoziative Liste</em> oder <em>alist</em>.
Eine Alist wird benutzt, um Daten zum einfachen Abrufen zu speichern.
</p>
<p>Alisten sind Listen, deren Elemente als Paare kommen.  Der <code>car</code>-Teil
jedes Elements wird als <em>Schlüssel</em> (key) bezeichnet, der
<code>cdr</code>-Teil jedes Elements wird <em>Wert</em> (value) genannt.
Die Scheme-Prozedur <code>assoc</code> wird benutzt, um einen Eintrag aus einer
Aliste aufzurufen, und mit <code>cdr</code> wird sein Wert abgefragt:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define my-alist '((1  . &quot;A&quot;) (2 . &quot;B&quot;) (3 . &quot;C&quot;)))
guile&gt; my-alist
((1 . &quot;A&quot;) (2 . &quot;B&quot;) (3 . &quot;C&quot;))
guile&gt; (assoc 2 my-alist)
(2 . &quot;B&quot;)
guile&gt; (cdr (assoc 2 my-alist))
&quot;B&quot;
guile&gt;
</pre></td></tr></table>

<p>Alisten werden sehr viel in LilyPond genutzt, um Eigenschaften und
andere Daten zu speichern.
</p>
<a name="Hash_002dTabellen-_0028hash-table_0029"></a>
<h3 class="subheading">Hash-Tabellen (hash table)</h3>

<p>Eine Datenstruktur, die ab und zu in LilyPond eingesetzt wird.
Eine Hash-Tabelle ähnelt einem Array, aber die Indexe des Arrays
können beliebige Scheme-Werte sein, nicht nur Integre.
</p>
<p>Hash-Tabellen sind effizienter als Alisten, wenn man viele Daten
speichern will und die Daten sich oft ändern.
</p>
<p>Die Syntax, mit der Hash-Tabellen erstellt werden, ist etwas komplex,
aber man kann Beispiele hierzu im LilyPond-Quellcode finden.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define h (make-hash-table 10))
guile&gt; h
#&lt;hash-table 0/31&gt;
guile&gt; (hashq-set! h 'key1 &quot;val1&quot;)
&quot;val1&quot;
guile&gt; (hashq-set! h 'key2 &quot;val2&quot;)
&quot;val2&quot;
guile&gt; (hashq-set! h 3 &quot;val3&quot;)
&quot;val3&quot;
</pre></td></tr></table>

<p>Werte werden aus den Hash-Tabellen mit <code>hashq-ref</code> ausgelesen.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (hashq-ref h 3)
&quot;val3&quot;
guile&gt; (hashq-ref h 'key2)
&quot;val2&quot;
guile&gt;
</pre></td></tr></table>

<p>Schlüssel und Werte werden als Paar mit <code>hashq-get-handle</code> ausgelesen.
Das ist die beste Art, weil hier <code>#f</code> ausgegeben wird, wenn ein
Schlüssel nicht gefunden werden kann.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (hashq-get-handle h 'key1)
(key1 . &quot;val1&quot;)
guile&gt; (hashq-get-handle h 'frob)
#f
guile&gt;
</pre></td></tr></table>


<hr size="6">
<a name="Berechnungen-in-Scheme"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-compound-data-types" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Zusammengesetzte Scheme-Datentypen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-procedures" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme-Prozeduren &gt; </a>]</td></tr></table>
<a name="calculations-in-scheme"></a>
<h3 class="subsection">1.1.5 Berechnungen in Scheme</h3>


<p>Scheme kann verwendet werden, um Berechnungen durchzuführen. Es
verwendet eine <em>Präfix</em>-Syntax. Um 1 und&nbsp;2 zu addieren, muss
man <code>(+ 1 2)</code> schreiben, und nicht <em>1+2</em>, wie in traditioneller
Mathematik.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (+ 1 2)
3
</pre></td></tr></table>

<p>Berechnungen können geschachtelt werden und das Ergebnis einer Berechnung
kann für eine neue Berechnung eingesetzt werden.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (+ 1 (* 3 4))
13
</pre></td></tr></table>

<p>Diese Berechnungen sind Beispiele von Auswertungen. Ein Ausdruck
wie <code>(* 3 4)</code> wird durch seinen Wert <code>12</code> ersetzt.
</p>
<p>Scheme-Berechnungen können zwischen Integren und Nich-Integren
unterscheiden.  Integre Berechnungen sind exakt, während Nicht-Integre
nach den passenden Genauigkeitseinschränkungen berechnet werden:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (/ 7 3)
7/3
guile&gt; (/ 7.0 3.0)
2.33333333333333
</pre></td></tr></table>

<p>Wenn der Scheme-Berechner einen Ausdruck antrifft, der eine Liste darstellt,
wird das erste Element der Liste als Prozedur behandelt, die mit
Argumenten des Restes der Liste ausgewertet werden.  Darum sind alle
Operatoren in Scheme vorangestellt.
</p>
<p>Wenn das erste Element eines Scheme-Ausdrucks, der eine Liste darstellt,
<em>kein</em> Operator oder keine Prozedur ist, gibt es einen Fehler:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (1 2 3)

Backtrace:
In current input:
  52: 0* [1 2 3]

&lt;unnamed port&gt;:52:1: In expression (1 2 3):
&lt;unnamed port&gt;:52:1: Wrong type to apply: 1
ABORT: (misc-error)
guile&gt;
</pre></td></tr></table>

<p>Hier kann man sehen, dass Scheme versucht hat, 1 als einen Operator oder
eine Prozedur zu behandeln, was aber nicht möglich war.  Darum der Fehler
&quot;Wrong type to apply: 1&quot;.
</p>
<p>Wenn man also eine Liste erstellen will, braucht man also einen Listen-Operator
oder man muss die Liste als wörtliches Zitat schreiben, sodass Scheme sie
nicht auszuwerten versucht.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (list 1 2 3)
(1 2 3)
guile&gt; '(1 2 3)
(1 2 3)
guile&gt;
</pre></td></tr></table>

<p>Dieser Fehler kann durchaus vorkommen, wenn man Scheme unter LilyPond
einsetzt.
</p>


<hr size="6">
<a name="Scheme_002dProzeduren"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#calculations-in-scheme" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Berechnungen in Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-conditionals" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme-Konditionale &gt; </a>]</td></tr></table>
<a name="scheme-procedures"></a>
<h3 class="subsection">1.1.6 Scheme-Prozeduren</h3>

<p>Scheme-Prozeduren sind ausführbare Scheme-Ausdrücke, die einen
Wert ausgeben, der das Resultat ihrer Ausführung darstellt.  Sie können
auch Variablen verändern, die außerhalb dieser Prozedur definiert wurden.
</p>
<a name="Prozeduren-definieren"></a>
<h3 class="subheading">Prozeduren definieren</h3>

<p>Prozeduren werden in Scheme mit <code>define</code> definiert:
</p>
<blockquote><pre class="example">(define (function-name arg1 arg2 ... argn)
 scheme-expression-that-gives-a-return-value)
</pre></blockquote>

<p>Beispielsweise könnte man eine Prozedur definieren, die den Durchschnitt
berechnet:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define (average x y) (/ (+ x y) 2))
guile&gt; average
#&lt;procedure average (x y)&gt;
</pre></td></tr></table>

<p>Wenn die Prozedur einmal definiert ist, wird sie aufgerufen indem man
die Prozedur und die Argumente in eine Liste schreibt.  Man könnte also den
Durchschnitt von 3 und 12 berechnen:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (average 3 12)
15/2
</pre></td></tr></table>

<a name="Pradikate"></a>
<h3 class="subheading">Prädikate</h3>

<p>Scheme-Prozeduren, die Boolsche Werte ausgeben, werden oft als Prädikate
(predicate) bezeichnet.  Es herrscht die Übereinkunft, Prädikat-Bezeichnungen
mit einem Fragezeichen abzuschließen:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define (less-than-ten? x) (&lt; x 10))
guile&gt; (less-than-ten? 9)
#t
guile&gt; (less-than-ten? 15)
#f
</pre></td></tr></table>

<a name="Wiedergabe_002dWerte"></a>
<h3 class="subheading">Wiedergabe-Werte</h3>

<p>Scheme-Prozeduren geben immer einen Wiedergabe-Wert (return value) aus, welcher
der Wert des letzten Ausdrucks ist, der in der Prozedur ausgeführt wurde.  Der
Wiedergabewert kann ein beliebiger gültiger Scheme-Wert sein, auch eine
komplexe Datenstruktur oder eine Prozedur.
</p>
<p>Manchmal würden Benutzer gerne mehrere Scheme-Ausdrucke in einer Prozedur haben.
Es gibt zwei Arten, wie merhere Ausdrücke kombiniert werden können.  Die erste
Art ist die <code>begin</code>-Prozedur, der es ermöglicht, dass mehrere Ausdrücke
ausgewertet werden und den Wert des letzten Ausdrucks wiedergibt.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (begin (+ 1 2) (- 5 8) (* 2 2))
4
</pre></td></tr></table>

<p>Die andere Art, mehrere Ausdrücke zu kombinieren, ist eine <code>let</code>-Umgebung.
In dieser Umgebung wird eine Serie von Verbindungen erstellt, und dann wird eine
Sequenz von Ausdrücken ausgewertet, die diese Bindungen einschließen können.
Der Wiedergabewert der let-Umgebung ist der Wiedergabewert der letzten Aussage
in der let-Umgebung:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (let ((x 2) (y 3) (z 4)) (display (+ x y)) (display (- z 4))
... (+ (* x y) (/ z x)))
508
</pre></td></tr></table>


<hr size="6">
<a name="Scheme_002dKonditionale"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-procedures" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Prozeduren&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#introduction-to-scheme" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Einleitung in Scheme&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-in-lilypond" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme in LilyPond &gt; </a>]</td></tr></table>
<a name="scheme-conditionals"></a>
<h3 class="subsection">1.1.7 Scheme-Konditionale</h3>

<a name="if"></a>
<h3 class="subheading">if</h3>

<p>Scheme hat eine <code>if</code>-Prozedur:
</p>
<blockquote><pre class="example">(if test-expression true-expression false-expression)
</pre></blockquote>

<p><var>test-expression</var> ist ein Ausdruck, der einen Booleschen
Wert zurück gibt.  Wenn <var>test-expression</var> den Wert <code>#t</code>
ausgibt, gibt die if-Prozedur den Wert von <var>true-expression</var> aus,
in allen anderen Fällen den Wert von <var>false-expression</var>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define a 3)
guile&gt; (define b 5)
guile&gt; (if (&gt; a b) &quot;a is greater than b&quot; &quot;a is not greater than b&quot;)
&quot;a is not greater than b&quot;
</pre></td></tr></table>

<a name="cond"></a>
<h3 class="subheading">cond</h3>

<p>Eine andere konditionale Prozedur in Scheme ist
<code>cond</code>:
</p>
<blockquote><pre class="example">(cond (test-expression-1 result-expression-sequence-1)
      (test-expression-2 result-expression-sequence-2)
      ...
      (test-expression-n result-expression-sequence-n))
</pre></blockquote>

<p>Beispielsweise:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">guile&gt; (define a 6)
guile&gt; (define b 8)
guile&gt; (cond ((&lt; a b) &quot;a is less than b&quot;)
...          ((= a b) &quot;a equals b&quot;)
...          ((&gt; a b) &quot;a is greater than b&quot;))
&quot;a is less than b&quot;
</pre></td></tr></table>



<hr size="6">
<a name="Scheme-in-LilyPond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-conditionals" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Konditionale&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-tutorial" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-scheme-syntax" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;LilyPond Scheme-Syntax &gt; </a>]</td></tr></table>
<a name="scheme-in-lilypond"></a>
<h2 class="section">1.2 Scheme in LilyPond</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#lilypond-scheme-syntax" accesskey="1">1.2.1 LilyPond Scheme-Syntax</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-variables" accesskey="2">1.2.2 LilyPond-Variablen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#input-variables-and-scheme" accesskey="3">1.2.3 Eingabe-Variablen und Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#importing-scheme-in-lilypond" accesskey="4">1.2.4 Scheme in LilyPond importieren</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#object-properties" accesskey="5">1.2.5 Objekteigenschaften</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond-compound-variables" accesskey="6">1.2.6 Zusammengesetzte LilyPond-Variablen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#internal-music-representation" accesskey="7">1.2.7 Interne musikalische Repräsentation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="LilyPond-Scheme_002dSyntax"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-in-lilypond" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-variables" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;LilyPond-Variablen &gt; </a>]</td></tr></table>
<a name="lilypond-scheme-syntax"></a>
<h3 class="subsection">1.2.1 LilyPond Scheme-Syntax</h3>

<a name="index-_0024"></a>
<a name="index-_0024-1"></a>
<a name="index-_0023"></a>
<a name="index-_0023-1"></a>

<p>Der Guile-Auswerter ist ein Teil von LilyPond, sodass Scheme also auch in
normale LilyPond-Eingabedateien eingefügt werden kann.  Es gibt mehrere
Methoden, um Scheme in LilyPond zu integrieren.
</p>
<p>Die einfachste Weise ist es, ein Rautenzeichen&nbsp;<code>#</code> vor einem
Scheme-Ausdruck zu benutzen.
</p>
<p>Die Eingabe von LilyPond ist in Zeichen und Ausdrücke gegliedert, so etwa
wie die menschliche Sprache sich in Wörter und Sätze gliedert.  LilyPond
hat einen Lexer, der Zeichen erkennt (Zahlen, Zeichenketten, Scheme-Elemente,
Tonhöhen usw.) und einen Parser, der die Syntax versteht,
<a name="index-LilyPond-grammar"></a>
<a href="contributor-big-page.html#lilypond-grammar">LilyPond-Grammatik</a>.
Wenn dann eine bestimmte Syntaxregel als zuständig erkannt wurde, werden die
damit verknüpften Aktionen ausgeführt.
</p>
<p>Die Rautenzeichenmethode (<code>#</code>), mit der Scheme eingebettet werden kann,
passt sehr gut in dieses System.  Wenn der Lexer ein Rautenzeichen sieht, ruft
er den Scheme-reader auf, um den ganzen Scheme-Ausdruck zu lesen (das kann eine
Variable, ein Ausdruck in Klammern oder verschiedene andere Sachen sein).  Nachdem
der Scheme-Ausdruck gelesen wurde, wird er als Wert eines <code>SCM_TOKEN</code> in der
Grammatik gespeichert.  Wenn der Parser weiß, wie er diesen Wert benutzen kann,
ruft er Guile auf, um den Scheme-Ausdruck auszuwerten.  Weil der Parser normalerweise
dem Lexer etwas voraus sein muss, ist die Trennung von Lesen und Auswerten zwischen
Lexer und Parser genau das richtige, um die Auswertung von LilyPond- und
Scheme-Ausdrücken synchron zu halten.  Aus diesem Grund sollte das Rautenzeichen
zum Einbinden von Scheme immer benutzt werden, wenn es möglich ist.
</p>
<p>Eine andere Möglichkeit, Scheme aufzurufen, ist die Benutzung des Dollarzeichens
(<code>$</code>) anstelle der Raute.  In diesem Fall wertet LilyPond den Code sofort
aus, nachdem der Lexer ihn gelesen hat.  Dabei wird der resultierende
Scheme-Ausdruckstyp geprüft und eine Tokentyp dafür ausgesucht (einer von mehreren
<code>xxx_IDENTIFIER</code> in der Syntax).  Wenn der Wert des Ausdrucks gültig ist
(der Guilde-Wert für <code>*unspecified*</code>), dann wird nichts an den Parser
übergeben.
</p>
<p>Das ist auch der gleiche Mechanismus, nach dem LilyPond funktioniert, wenn man eine Variable oder musikalische Funktion mit ihrer Bezeichnung ausruft, wie
in <code>\Bezeichnung</code>, mit dem einzigen Unterschied, dass ihre Bezeichnung durch den
LilyPond-Lexer bestimmt wird, ohne den Scheme-reader einzubeziehen, und also
nur Variablen akzeptiert werden, die im aktuellen LilyPond-Modus gültig sind.
</p>
<p>Die direkte Auswirkung von <code>$</code> kann zu Überraschungen führen, siehe
<a href="#input-variables-and-scheme">Eingabe-Variablen und Scheme</a>.  Es bietet sich daher an, <code>#</code> immer
zu benützen, wenn der Parser es unterstützt.  Innerhalb von musikalischen
Ausdrücken werden Ausdrücke, die mit <code>#</code> erstellt werden, <em>tatsächlich</em>
als Noten interpretiert.  Sie werden jedoch <em>nicht</em> vor der Benutzung
kopiert.  Wenn Sie Teil einer Struktur sind, die noch einmal benutzt werden
soll, muss man eventuell <code>ly:music-deep-copy</code> explizit einsetzen.
</p>
<a name="index-_0024_0040"></a>
<a name="index-_0024_0040-1"></a>
<a name="index-_0023_0040"></a>
<a name="index-_0023_0040-1"></a>

<p>Es gibt auch die Operatoren <code>$@</code> und <code>#@</code>, die eine &bdquo;listentrennende&ldquo;
Funktion aufweisen, indem sie alle Elemente einer Liste in den umgebenden
Kontext einfügen.
</p>
<p>Jetzt wollen wir uns tatsächlichen Scheme-Code anschauen.  Scheme-Prozeduren
können in LilyPond-Eingabedateien definiert werden:
</p>
<blockquote><pre class="example">#(define (average a b c) (/ (+ a b c) 3))
</pre></blockquote>

<p>LilyPond-Kommentare (<code>%</code> oder <code>%{ %}</code>) können innerhalb
von Scheme-Code nicht benutzt werden, nicht einmal in einer LilyPond-Eingabedatei,
weil der Guile-Interpreter und nicht der LilyPond-Parser den Scheme-Ausdruck
liest.  Kommentare in Guile Scheme werden wie folgt notiert:
</p>
<blockquote><pre class="example">; Einzeiliges Kommentar

#!
  Guile-Stil Blockkommentar (nicht schachtelbar)
  Diese Kommentare werden von Scheme-Programmierern
  selten benutzt und nie im Quellcode
  von LilyPond
!#
</pre></blockquote>

<p>Für den Rest dieses Abschnitts soll angenommen werden, dass die Daten in
einer LilyPond-Eingabedatei notiert werden sollen, sodass immer&nbsp;<code>#</code>
vor die Scheme-Ausdrücke gestellt wird.
</p>
<p>Alle Scheme-Ausdrücke auf oberster Ebene in einer LilyPond-Eingabedatei
können in einen einzigen Scheme-Ausdruck zusammengefasst werden mit
<code>begin</code>:
</p>
<blockquote><pre class="example">#(begin
  (define foo 0)
  (define bar 1))
</pre></blockquote>


<hr size="6">
<a name="LilyPond_002dVariablen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-scheme-syntax" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; LilyPond Scheme-Syntax&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#input-variables-and-scheme" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Eingabe-Variablen und Scheme &gt; </a>]</td></tr></table>
<a name="lilypond-variables"></a>
<h3 class="subsection">1.2.2 LilyPond-Variablen</h3>

<p>LilyPond-Variablen werden intern als Scheme-Variablen gespeichert. Darum
ist
</p>
<blockquote><pre class="example">Zwoelf = 12
</pre></blockquote>

<p>das Gleiche wie
</p>
<blockquote><pre class="example">#(define Zwoelf 12)
</pre></blockquote>

<p>Das bedeutet, dass Scheme-Ausdrücke auf LilyPond-Variablen zugreifen können.
Man könnte also schreiben:
</p>
<blockquote><pre class="example">Vierundzwanzig = #(* 2 Zwoelf)
</pre></blockquote>

<p>was zur Folge hätte, dass die Zahl 24 in der LilyPond (und Scheme-)Variablen
<code>Vierundzwanzig</code> gespeichert wird.
</p>
<p>Üblicherweise greift man auf LilyPond-Variablen zu, indem man ihnen einen
Backslash voranstellt. Siehe auch <a href="#lilypond-scheme-syntax">LilyPond Scheme-Syntax</a>, also etwa
<code>\Vierundzwanzig</code>.  Weil dadurch eine Kopie des Wertes für die meisten
von LilyPonds internen Typen erstellt wird (insbesondere musikalische Funktionen),
erstellen musikalische Funktionen normalerweise Kopien von Material, das sie
verändern.  Aus diesem Grund sollten musikalische Funktionen, die mit <code>#</code>
aufgerufen werden, kein Material enthalten, dass entweder von Grund auf neu
erstellt wird oder explizit kopiert wird, sondern besser direkt auf das relevante
Material verweisen.
</p>

<hr size="6">
<a name="Eingabe_002dVariablen-und-Scheme"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-variables" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; LilyPond-Variablen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#importing-scheme-in-lilypond" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme in LilyPond importieren &gt; </a>]</td></tr></table>
<a name="input-variables-and-scheme"></a>
<h3 class="subsection">1.2.3 Eingabe-Variablen und Scheme</h3>

<p>Das Eingabeformat unterstützt die Notation von Variablen: Im folgenden
Beispiel wird ein musikalischer Ausdruck einer Variablen mit der
Bezeichnung <code>traLaLa</code> zugewiesen:
</p>
<blockquote><pre class="example">traLaLa = { c'4 d'4 }
</pre></blockquote>

<p>Variablen haben beschränkte Geltungsbereiche: im unten stehenden Beispiel
enthält auch die <code>\layout</code>-Umgebung eine <code>traLaLa</code>-Variable,
die sich aber von der <code>traLaLa</code>-Variable auf oberster Ebene unterscheidet:
</p>
<blockquote><pre class="example">traLaLa = { c'4 d'4 }
\layout { traLaLa = 1.0 }
</pre></blockquote>

<p>Jede Eingabedatei ist solch ein Gültigkeitsbereich, und alle
<code>\header</code>-, <code>\midi</code>- und <code>\layout</code>-Umgebungen
sind Gültigkeitsbereiche, die in diesen obersten Gültigkeitsbereich
eingebettet sind.
</p>
<p>Sowohl Variablen als auch Gültigkeitsbereiche sind im Guile Modulsystem
eingebaut.  Ein anonymes Scheme-Modul wird jedem Gültigkeitsbereich
angehängt.  Eine Zuweisen in der Form von
</p>
<blockquote><pre class="example">traLaLa = { c'4 d'4 }
</pre></blockquote>

<p>wird intern in die Scheme-Definition
</p>
<blockquote><pre class="example">(define traLaLa <var>Scheme-Wert von `... '</var>)
</pre></blockquote>

<p>konvertiert.
</p>
<p>Das bedeutet, dass LilyPond-Variablen und Scheme-Variablen frei gemischt
werden können.  Im folgenden Beispiel wird ein Notenfragment in der
Variable <code>traLaLa</code> gespeichert und mit Scheme dupliziert.  Das
Resultat wird in eine <code>\score</code>-Umgebung mit einer weiteren
Variable <code>twice</code> importiert:
</p>
<pre class="verbatim">traLaLa = { c'4 d'4 }

#(define newLa (map ly:music-deep-copy
  (list traLaLa traLaLa)))
#(define twice
  (make-sequential-music newLa))

\twice
</pre><p>
 <a href="24/lily-4302bdaa.ly">
  <img align="middle"
       border="0"
       src="24/lily-4302bdaa.png"
       alt="[image of music]">
 </a>
</p>



<p>Das ist ein interessantes Beispiel.  Die Zuweisung findet erst statt,
nachdem der Parser sichergestellt hat, dass nichts folgt, das Ähnlichkeit
mit <code>\addlyrics</code> hat, sodass er prüfen muss, was als nächstes kommt.
Er liest <code>#</code> und den darauf folgenden Scheme-Ausdruck, <em>ohne</em> ihn
auszuwerten, so dass er weiterlesen und erst <em>danach</em>
wird der Scheme-Code ohne Probleme ausführen kann.
</p>

<hr size="6">
<a name="Scheme-in-LilyPond-importieren"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#input-variables-and-scheme" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Eingabe-Variablen und Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#object-properties" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Objekteigenschaften &gt; </a>]</td></tr></table>
<a name="importing-scheme-in-lilypond"></a>
<h3 class="subsection">1.2.4 Scheme in LilyPond importieren</h3>

<a name="index-_0024-2"></a>
<a name="index-_0024-3"></a>
<a name="index-_0023-2"></a>
<a name="index-_0023-3"></a>

<p>Das Beispiel zeigt, wie man musikalische Ausdrücke aus der Eingabe in den
Scheme-Auswerter &bdquo;exportieren&ldquo; kann.  Es geht auch andersherum.  Indem
man Scheme-Werte nach <code>$</code> schreibt, wird ein
Scheme-Wert interpretiert, als ob er in LilyPond-Syntax eingeben wäre.
Anstatt <code>\twice</code> zu definieren, könne man also auch schreiben:
</p>
<blockquote><pre class="example">...
$(make-sequential-music newLa)
</pre></blockquote>

<p>Mann kann <code>$</code> zusammen mit einem Scheme-Ausdruck überall benutzen,
wo auch <code>\<var>Bezeichnung</var></code> gültig wäre, nachdem der Scheme-Ausdruck
einmal einer Variable <var>Bezeichnung</var> zugewiesen worden ist.  Der Austausch
geschieht im Lexer, sodass LilyPond den Unterschied gar nicht merkt.
</p>
<p>Ein negativer Effekt ist aber das Timing.  Wenn man <code>$</code> anstelle von
<code>#</code> für die Definition von <code>newLa</code> im obigen Beispiel eingesetzt
hätte, würde der folgende Scheme-Ausdruck fehlschlagen, weil <code>traLaLa</code>
noch nicht definiert worden wäre.  Zu einer Erklärung dieses Timingproblems
siehe <a href="#lilypond-scheme-syntax">LilyPond Scheme-Syntax</a>.
</p>
<a name="index-_0024_0040-2"></a>
<a name="index-_0024_0040-3"></a>
<a name="index-_0023_0040-2"></a>
<a name="index-_0023_0040-3"></a>

<p>Eine weitere Bequemlichkeit können die &bdquo;listentrennenden&ldquo; Operatoren
<code>$@</code> und <code>#@</code> bieten, indem sie die Elemente einer Liste
in den umgebenden Kontext einfügen.  Wenn man sie einsetzt, hätte der
letzte Teil des Beispiels auch so geschrieben werden können:
</p>
<blockquote><pre class="example">...
{ #@newLa }
</pre></blockquote>

<p>Hier wird jedes Element der Liste, welche in <code>newLa</code> gespeichert ist,
der Reihenfolge nach genommen und in die Liste eingefügt, als ob man
geschrieben hätte:
</p>
<blockquote><pre class="example">{ #(first newLa) #(second newLa) }
</pre></blockquote>

<p>In allen diesen Formen findet die Auswertung des Scheme-Codes statt,
während die Eingabe noch gelesen wird, entweder im Lexer oder im Parser.
Wenn man es später ausgeführt haben möchte, muss man 
<a href="#void-scheme-functions">Leere Scheme-Funktionen</a> benutzen oder es in einem Makro speichern:
</p>
<blockquote><pre class="example">#(define (nopc)
  (ly:set-option 'point-and-click #f))

...
#(nopc)
{ c'4 }
</pre></blockquote>

<a name="Bekannte-Probleme-und-Warnungen-1"></a>
<h4 class="subsubheading">Bekannte Probleme und Warnungen</h4>

<p>Scheme- und LilyPond-Variablen können nicht gemischt werden, wenn man die
&lsquo;<samp>--safe</samp>&rsquo;-Option benutzt.
</p>

<hr size="6">
<a name="Objekteigenschaften"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#importing-scheme-in-lilypond" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme in LilyPond importieren&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-compound-variables" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Zusammengesetzte LilyPond-Variablen &gt; </a>]</td></tr></table>
<a name="object-properties"></a>
<h3 class="subsection">1.2.5 Objekteigenschaften</h3>

<p>Objekteigenschaften werden in LilyPond in Form von Alisten-Ketten
gespeichert, also als Listen von Alisten.  Eigenschaften werden
geändert, indem man Werte an den Anfang der Eigenschaftsliste
hinzufügt.  Eigenschaften werden gelesen, indem Werte aus der
Aliste gelesen werden.
</p>
<p>Ein neuer Wert für eine Eigenschaft kann gesetzt werden, indem man
der Alist einen Wert mit Schlüssel und dem Wert zuweist.  Die
LilyPond-Syntax hierfür ist:
</p>
<blockquote><pre class="example">\override Stem.thickness = #2.6
</pre></blockquote>

<p>Diese Anweisung verändert die Erscheinung der Notenhälse. Der Alist-Eintrag
<code>'(thickness . 2.6)</code> wird zu der Eigenschaftsliste eines
<code>Stem</code>-(Hals-)Objektes hinzugefügt.
<code>thickness</code> wird relativ zu den Notenlinien errechnet, in diesem
Fall sind die Hälse also 2,6 mal so dick wie die Notenlinien.  Dadurch
werden Hälse fast zweimal so dick dargestellt, wie sie normalerweise sind.
Um zwischen Variablen zu unterscheiden, die in den Quelldateien direkt
definiert werden (wie <code>Vierundzwanzig</code> weiter oben), und zwischen denen,
die für interne Objekte zuständig sind, werden hier die ersteren
&bdquo;Variablen&ldquo; genannt, die letzteren dagegen &bdquo;Eigenschaften&ldquo;.
Das Hals-Objekt hat also eine <code>thickness</code>-Eigenschaft, während
<code>Vierundzwanzig</code> eine Variable ist.
</p>
<a name="index-Eigenschaften-versus-Bezeichner"></a>
<a name="index-Bezeichner-versus-Eigenschaften"></a>


<hr size="6">
<a name="Zusammengesetzte-LilyPond_002dVariablen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#object-properties" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Objekteigenschaften&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#internal-music-representation" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Interne musikalische Repräsentation &gt; </a>]</td></tr></table>
<a name="lilypond-compound-variables"></a>
<h3 class="subsection">1.2.6 Zusammengesetzte LilyPond-Variablen</h3>

<a name="Abstande-_0028offset_0029"></a>
<h3 class="subheading">Abstände (offset)</h3>

<p>Zweidimensionale Abstände (X- und Y-Koordinaten) werden
als <em>pairs</em> (Paare) gespeichert. Der <code>car</code>-Wert des
Abstands ist die X-Koordinate und der <code>cdr</code>-Wert die
Y-Koordinate.
</p>
<blockquote><pre class="example">\override TextScript.extra-offset = #'(1 . 2)
</pre></blockquote>

<p>Hierdurch wird das Paar <code>(1 . 2)</code> mit der Eigenschaft <code>extra-offset</code>
des TextScript-Objektes verknüpft. Diese Zahlen werden in
Systembreiten  gemessen, so dass der Befehl das Objekt eine Systembreite
nach rechts verschiebt und zwei Breiten nach oben.
</p>
<p>Prozeduren, um mit Abständen zu arbeiten, finden sich in &lsquo;<tt>scm/lily-library.scm</tt>&rsquo;.
</p>
<a name="Bruche-_0028fractions_0029"></a>
<h3 class="subheading">Brüche (fractions)</h3>

<p>Brüche, wie sie LilyPond benutzt, werden wiederum als Paare gespeichert,
dieses Mal als unbezeichnete ganze Zahlen.  Während Scheme rationale Zahlen
als einen negativen Typ darstellen kann, sind musikalische gesehen
&lsquo;<samp>2/4</samp>&rsquo; und &lsquo;<samp>1/2</samp>&rsquo; nicht das selbe, sodass man zwischen beiden unterscheiden
können muss.  Ähnlich gibt es auch keine negativen Brüche in LilyPonds Sinn.
Somit bedeutet <code>2/4</code> in LilyPond  <code>(2 . 4)</code> in Scheme, und <code>#2/4</code> in
LilyPond bedeutet <code>1/2</code> in Scheme.
</p>
<a name="Bereiche-_0028extend_0029"></a>
<h3 class="subheading">Bereiche (extend)</h3>

<p>Paare werden auch benutzt, um Intervalle zu speichern, die einen Zahlenbereich
vom Minimum (dem <code>car</code>) bis zum Maximum (dem <code>cdr</code>) darstellen.
Intervalle werden benutzt, um die X- und Y-Ausdehnung von druckbaren
Objekten zu speichern.  Bei X-Ausdehnungen ist <code>car</code> die linke
X-Koordinate und <code>cdr</code> die rechte X-Koordinate.  Für Y-Ausdehnungen
ist <code>car</code> die untere Koordinate und <code>cdr</code> die obere Koordinate.
</p>
<p>Prozeduren, um mit Intervallen zu arbeiten, finden sich in
&lsquo;<tt>scm/lily-library.scm</tt>&rsquo;.  Diese Prozeduren sollten benutzt, wenn es möglich
ist, um den Code konsistent zu halten.
</p>
<a name="Eigenschafts_002dAlisten-_0028property-alist_0029"></a>
<h3 class="subheading">Eigenschafts-Alisten (property alist)</h3>

<p>Eine Eigenschafts-Aliste ist eine LilyPond-Datenstruktur, die eine Aliste
darstellt, deren Schlüssel Eigenschaften sind und deren Werte
Scheme-Ausdrücke sind, die den erwünschen Wert der Eigenschaft ausgeben.
</p>
<p>LilyPond-Eigenschaften sind Scheme-Symbole, wie etwa <code>'thickness</code>
(Dicke).
</p>
<a name="Alisten_002dKetten-_0028alist-chains_0029"></a>
<h3 class="subheading">Alisten-Ketten (alist chains)</h3>

<p>Eine Alisten-Kette ist eine Liste, die Eigenschafts-Alisten enthält.
</p>
<p>Die Menge aller Eigenschaften, die sich auf einen Grob auswirken, wird
typischerweise in einer Alisten-Kette gespeichert.  Um den Wert einer
bestimmten Eigenschaft zu finden, die ein Grob haben soll, wird jede
Liste in der Kette nach einander durchsucht, wobei nach einem Eintrag
geschaut wird, der den Eigenschaftsschlüssel enthält.  Der erste
gefundene Alisten-Eintrag wird benutzt und dessen Wert ist der
Wert der Eigenschaft.
</p>
<p>Die Scheme-Prozedur <code>chain-assoc-get</code> wird normalerweise benutzt,
um Grob-Eigenschaftenwerte zu erhalten.
</p>

<hr size="6">
<a name="Interne-musikalische-Repr_00e4sentation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-compound-variables" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Zusammengesetzte LilyPond-Variablen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-in-lilypond" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme in LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#building-complicated-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Komplizierte Funktionen erstellen &gt; </a>]</td></tr></table>
<a name="internal-music-representation"></a>
<h3 class="subsection">1.2.7 Interne musikalische Repräsentation</h3>

<p>Intern werden Noten als Scheme-Liste dargestellt.  Die Liste enthält
verschiedene Elemente, die die Druckausgabe beeinflussen.  Parsen
nennt man den Prozess, der die Noten aus der LilyPond-Repräsentation
in die interne Scheme-Repräsentation überführt.
</p>
<p>Wenn ein musikalischer Ausdruck geparst wird, wird er in eine Gruppe
von Scheme-Musikobjekten konvertiert.  Die definierende Eigenschaft
eines Musikobjektes ist, dass es Zeit einnimmt.  Die Zeit, die
ein Objekt braucht, wird Dauer (engl. <em>duration</em>) genannt.
Dauern werden in rationalen Zahlen ausgedrückt, die die Länge des
Musikobjekts in Ganzen Noten angeben.
</p>
<p>Ein Musikobjekt hat drei Typen:
</p>
<ul>
<li>
Musikbezeichnung (music name): Jeder Musikausdruck hat eine Bezeichnung.  Eine
Note beispielsweise erzeugt ein <a name="index-NoteEvent"></a>
<a href="internals-big-page.html#noteevent">NoteEvent</a> und <code>\simultaneous</code>
produziert <a name="index-SimultaneousMusic"></a>
<a href="internals-big-page.html#simultaneousmusic">SimultaneousMusic</a>.  Eine Liste aller möglichen
Ausdrücke findet sich in der Referenz der Interna, unter
<a name="index-Music-expressions"></a>
<a href="internals-big-page.html#music-expressions">Music expressions</a>.

</li><li>
Typ (type) oder Schnittstelle (interface): Jede Musikbezeichnung hat mehrere
Typen oder Schnittstellen, beispielsweise eine Note ist ein Ereignis (<code>event</code>),
aber auch ein Notenereignis (<code>note-event</code>), ein rhythmisches Ereignis
(<code>rhythmic-event</code>) und ein Melodieereignis (<code>melodic-event</code>).
Alle Musikklassen sind in der Referenz der Interna aufgelistet, unter
<a name="index-Music-classes"></a>
<a href="internals-big-page.html#music-classes">Music classes</a>.

</li><li>
C++-Objekt: Jedes Musikobjekt ist durch ein Objekt der C++-Klasse <code>Music</code>
repräsentiert.
</li></ul>

<p>Die eigentliche Information eines musikalischen Ausdrucks wird in Eigenschaften
gespeichert.  Ein <a name="index-NoteEvent-1"></a>
<a href="internals-big-page.html#noteevent">NoteEvent</a> beispielsweise hat die Eigenschaften
Tonhöhe (<code>pitch</code>) und Dauer (<code>duration</code>), die die Dauer und die
Tonhöhe der Note speichern.  Eine Liste aller möglichen Eigenschaften findet
sich in der Referenz der Interna, unter
<a name="index-Music-properties"></a>
<a href="internals-big-page.html#eigenschaften-von-musikobjekten">Music properties</a>.
</p>
<p>Ein zusammengesetzter musikalischer Ausdruck ist ein Musikobjekt, das andere
Musikobjekte als Eigenschaften enthält.  Eine Liste an Objekten kann in der
<code>elements</code>-Eigenschaft eines Musikobjekts bzw. ein einziges
Ableger-Musikelement in der <code>element</code>-Eigenschaft gespeichert werden.
<a name="index-SequentialMusic"></a>
<a href="internals-big-page.html#sequentialmusic">SequentialMusic</a> beispielsweise hat sein einziges Argument in
<code>element</code>.  Der Körper einer Wiederholung wird in der <code>element</code>-Eigenschaft
von <a name="index-RepeatedMusic"></a>
<a href="internals-big-page.html#repeatedmusic">RepeatedMusic</a> gespeichert, und die alternativen Endungen
in <code>elements</code>.
</p>

<hr size="6">
<a name="Komplizierte-Funktionen-erstellen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#internal-music-representation" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Interne musikalische Repräsentation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-tutorial" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#displaying-music-expressions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Musikalische Funktionen darstellen &gt; </a>]</td></tr></table>
<a name="building-complicated-functions"></a>
<h2 class="section">1.3 Komplizierte Funktionen erstellen</h2>

<p>Dieser Abschnitt zeigt, wie man Information zusammensucht,
um komplizierte musikalische Funktionen  zu erstellen.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#displaying-music-expressions" accesskey="1">1.3.1 Musikalische Funktionen darstellen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#music-properties" accesskey="2">1.3.2 Eigenschaften von Musikobjekten</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#doubling-a-note-with-slurs-_0028example_0029" accesskey="3">1.3.3 Verdoppelung einer Note mit Bindebögen (Beispiel)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#adding-articulation-to-notes-_0028example_0029" accesskey="4">1.3.4 Artikulationszeichen zu Noten hinzufügen (Beispiel)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Musikalische-Funktionen-darstellen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#building-complicated-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Komplizierte Funktionen erstellen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#building-complicated-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Komplizierte Funktionen erstellen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#music-properties" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Eigenschaften von Musikobjekten &gt; </a>]</td></tr></table>
<a name="displaying-music-expressions"></a>
<h3 class="subsection">1.3.1 Musikalische Funktionen darstellen</h3>

<a name="index-interne-Speicherung"></a>
<a name="index-Musikausdrucke-anzeigen"></a>
<a name="index-Anzeigen-von-Musikausdrucken"></a>

<a name="index-_005cdisplayMusic"></a>
<a name="index-_005cdisplayMusic-1"></a>

<p>Wenn man eine musikalische Funktion erstellt, ist es oft
hilfreich sich anzuschauen, wie musikalische Funktionen
intern gespeichert werden.  Das kann mit der Funktion
<code>\displayMusic</code> erreicht werden:
</p>
<blockquote><pre class="example">{
  \displayMusic { c'4\f }
}
</pre></blockquote>

<p>zeigt:
</p>
<blockquote><pre class="example">(make-music
  'SequentialMusic
  'elements
  (list (make-music
          'NoteEvent
          'articulations
          (list (make-music
                  'AbsoluteDynamicEvent
                  'text
                  &quot;f&quot;))
          'duration
          (ly:make-duration 2 0 1/1)
          'pitch
          (ly:make-pitch 0 0 0))))
</pre></blockquote>

<p>Normalerweise gibt LilyPond diese Ausgabe auf der Konsole mit
allen anderen Nachrichten aus.  Um die wichtigen Nachrichten
in einer Datei zu speichern, kann die Ausgabe in eine Datei
umgeleitet werden:
</p>
<blockquote><pre class="example">lilypond file.ly &gt;display.txt
</pre></blockquote>

<p>Mit LilyPond- und Scheme-Magie kann man LilyPond anweisen, genau
diese Ausgabe an eine eigene Datei zu senden:
</p>
<blockquote><pre class="example">{
  #(with-output-to-file &quot;display.txt&quot;
      (lambda () #{ \displayMusic { c'4\f } #}))
}
</pre></blockquote>

<p>Mit etwas Umformatierung ist die gleiche Information sehr viel
einfacher zu lesen:
</p>
<blockquote><pre class="example">(make-music 'SequentialMusic
  'elements (list
	     (make-music 'NoteEvent
               'articulations (list
			       (make-music 'AbsoluteDynamicEvent
				 'text
				 &quot;f&quot;))
	       'duration (ly:make-duration 2 0 1/1)
	       'pitch    (ly:make-pitch 0 0 0))))
</pre></blockquote>

<p>Eine musikalische <code>{ ... }</code>-Sequenz hat die Bezeichnung
<code>SequentialMusic</code> und ihre inneren Ausdrücke werden als
Liste in seiner <code>'elements</code>-Eigenschaft gespeichert.  Eine
Note ist als als ein <code>EventChord</code>-Objekt dargestellt (welches Dauer und
Tonhöhe speichert) und zusätzliche Information enthält (in
diesem Fall ein <code>AbsoluteDynamicEvent</code> mit einer
<code>&quot;f&quot;</code>-Text-Eigenschaft).
</p>
<a name="index-_005cvoid"></a>
<a name="index-_005cvoid-1"></a>

<p><code>\displayMusic</code> gibt die Noten aus, die dargestellt werden, sodass
sie sowohl angezeigt als auch ausgewertet werden.  Um die Auswertung zu
vermeiden, kann <code>\void</code> vor <code>\displayMusic</code> geschrieben werden.
</p>

<hr size="6">
<a name="Eigenschaften-von-Musikobjekten"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#displaying-music-expressions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Musikalische Funktionen darstellen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#building-complicated-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Komplizierte Funktionen erstellen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#doubling-a-note-with-slurs-_0028example_0029" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Verdoppelung einer Note mit Bindebögen (Beispiel) &gt; </a>]</td></tr></table>
<a name="music-properties"></a>
<h3 class="subsection">1.3.2 Eigenschaften von Musikobjekten</h3>

<p>TODO &ndash; make sure we delineate between <em>music</em> properties,
<em>context</em> properties, and <em>layout</em> properties.  These
are potentially confusing.
</p>
<p>Schauen wir uns ein Beispiel an:
</p>
<blockquote><pre class="example">someNote = c'
\displayMusic \someNote
===&gt;
(make-music
  'NoteEvent
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch 0 0 0))
</pre></blockquote>

<p>Das <code>NoteEvent</code>-Objekt ist die Repräsentation von <code>someNote</code>.
Einfach.  Wie fügt man denn ein c&rsquo; in einen Akkorde ein?
</p>
<blockquote><pre class="example">someNote = &lt;c'&gt;
\displayMusic \someNote
===&gt;
(make-music
  'EventChord
  'elements
  (list (make-music
          'NoteEvent
          'duration
          (ly:make-duration 2 0 1/1)
          'pitch
          (ly:make-pitch 0 0 0))))
</pre></blockquote>

<p>Jetzt ist das <code>NoteEvent</code>-Objekt das erste Objekt der
<code>'elements</code>-Eigenschaft von <code>someNote</code>.
</p>
<p>Die <code>display-scheme-music</code>-Funktion ist die Funktion, die von
<code>\displayMusic</code> eingesetzt wird, um die Scheme-Repräsentation
eines musikalischen Ausdrucks anzuzeigen.
</p>
<blockquote><pre class="example">#(display-scheme-music (first (ly:music-property someNote 'elements)))
===&gt;
(make-music
  'NoteEvent
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch 0 0 0))
</pre></blockquote>

<p>Danach wird die Tonhöhe der Note von der <code>'pitch</code>-Eigenschaft
des <code>NoteEvent</code>-Objektes gelesen:
</p>
<blockquote><pre class="example">#(display-scheme-music
   (ly:music-property (first (ly:music-property someNote 'elements))
                      'pitch))
===&gt;
(ly:make-pitch 0 0 0)
</pre></blockquote>

<p>Die Tonhöhe einer Note kann geändert werden, indem man diese
<code>'pitch</code>-Eigenschaft umdefiniert:
</p>
<a name="index-_005cdisplayLilyMusic"></a>
<a name="index-_005cdisplayLilyMusic-1"></a>

<blockquote><pre class="example">#(set! (ly:music-property (first (ly:music-property someNote 'elements))
                          'pitch)
       (ly:make-pitch 0 1 0)) ;; Die Tonhöhen auf d' verändern.
\displayLilyMusic \someNote
===&gt;
d'
</pre></blockquote>


<hr size="6">
<a name="Verdoppelung-einer-Note-mit-Bindeb_00f6gen-_0028Beispiel_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#music-properties" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Eigenschaften von Musikobjekten&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#building-complicated-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Komplizierte Funktionen erstellen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#adding-articulation-to-notes-_0028example_0029" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Artikulationszeichen zu Noten hinzufügen (Beispiel) &gt; </a>]</td></tr></table>
<a name="doubling-a-note-with-slurs-_0028example_0029"></a>
<h3 class="subsection">1.3.3 Verdoppelung einer Note mit Bindebögen (Beispiel)</h3>

<p>In diesem Abschnitt soll gezeigt, werden, wie man eine
Funktion erstellt, die eine Eingabe wie <code>a</code>
nach <code>{ a( a) }</code> umdefiniert.  Dazu wird zuerst die
interne Repräsentation der Musik betrachtet, die
das Endergebnis darstellt:
</p>
<blockquote><pre class="example">\displayMusic{ a'( a') }
===&gt;
(make-music
  'SequentialMusic
  'elements
  (list (make-music
          'NoteEvent
          'articulations
          (list (make-music
                  'SlurEvent
                  'span-direction
                  -1))
          'duration
          (ly:make-duration 2 0 1/1)
          'pitch
          (ly:make-pitch 0 5 0))
        (make-music
          'NoteEvent
          'articulations
          (list (make-music
                  'SlurEvent
                  'span-direction
                  1))
          'duration
          (ly:make-duration 2 0 1/1)
          'pitch
          (ly:make-pitch 0 5 0))))
</pre></blockquote>

<p>Eine schlechte Nachricht ist, dass die
<code>SlurEvent</code>-Ausdrücke &bdquo;innerhalb&ldquo;
der Noten (in ihrer <code>articulations</code>-Eigenschaft) hinzugefügt werden müssen.
</p>
<p>Jetzt folgt eine Betrachtung der Eingabe:
</p>
<blockquote><pre class="example">\displayMusic a'
===&gt;
(make-music
  'NoteEvent
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch 0 5 0))))
</pre></blockquote>

<p>In der gewünschten Funktion muss also dieser Ausdruck
kopiert werden (sodass zwei Noten vorhanden sind, die
eine Sequenz bilden), dann müssen <code>SlurEvent</code>
zu der <code>'articulations</code>-Eigenschaft jeder Noten hinzugefügt
werden, und schließlich muss eine <code>SequentialMusic</code>
mit den beiden <code>EventChords</code> erstellt werden.  Um zu
einer Eigenschaft etwas hinzuzufügen, ist es nützlich zu wissen, dass
eine nicht gesetzte Eigenschaft als <code>'()</code> gelesen wird, sodass
keine speziellen Überprüfungen nötig sind, bevor ein anderes
Element vor die <code>articulations</code>-Eigenschaft gesetzt wird.
</p>
<blockquote><pre class="example">doubleSlur = #(define-music-function (note) (ly:music?)
         &quot;Return: { note ( note ) }.
         `note' is supposed to be a single note.&quot;
         (let ((note2 (ly:music-deep-copy note)))
           (set! (ly:music-property note 'articulations)
                 (cons (make-music 'SlurEvent 'span-direction -1)
                       (ly:music-property note 'articulations)))
           (set! (ly:music-property note2 'articulations)
                 (cons (make-music 'SlurEvent 'span-direction 1)
                       (ly:music-property note2 'articulations)))
           (make-music 'SequentialMusic 'elements (list note note2))))
</pre></blockquote>


<hr size="6">
<a name="Artikulationszeichen-zu-Noten-hinzuf_00fcgen-_0028Beispiel_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#interfaces-for-programmers" title="N&auml;chstes Kapitel">&nbsp;Schnittstellen für Programmierer &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#doubling-a-note-with-slurs-_0028example_0029" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Verdoppelung einer Note mit Bindebögen (Beispiel)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#building-complicated-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Komplizierte Funktionen erstellen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#interfaces-for-programmers" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Schnittstellen für Programmierer &gt; </a>]</td></tr></table>
<a name="adding-articulation-to-notes-_0028example_0029"></a>
<h3 class="subsection">1.3.4 Artikulationszeichen zu Noten hinzufügen (Beispiel)</h3>

<p>Am einfachsten können Artikulationszeichen zu Noten
hinzugefügt werden, indem man zwei musikalische Funktionen
in einen Kontext einfügt, wie erklärt in
<a name="index-Kontexte-erstellen-und-referenzieren"></a>
<a href="notation-big-page.de.html#creating-and-referencing-contexts">Kontexte erstellen und referenzieren</a>.  Hier soll jetzt eine musikalische
Funktion entwickelt werden, die das vornimmt.  Daraus ergibt sich
der zusätzliche Vorteil, dass diese musikalische Funktion eingesetzt
werden kann, um eine Artikulation (wie etwa eine Fingersatzanweisung)
einer einzigen Note innerhalb eines Akkordes hinzugefügt werden
kann, was nicht möglich ist, wenn einfach unabhängige Noten ein einem
Kontext miteinander verschmolzen werden.
</p>
<p>Eine <code>$variable</code> innerhalb von <code>#{...#}</code> ist das
gleiche wie die normale Befehlsform <code>\variable</code> in
üblicher LilyPond-Notation.  Es ist bekannt dass
</p>
<blockquote><pre class="example">{ \music -. -&gt; }
</pre></blockquote>

<p>in LilyPond nicht funktioniert.  Das Problem könnte vermieden
werden, indem das Artikulationszeichen an einen leeren Akkord
gehängt wird:
</p>
<blockquote><pre class="example">{ &lt;&lt; \music &lt;&gt; -. -&gt; &gt;&gt; }
</pre></blockquote>

<p>aber in diesem Beispiel soll gezeigt werden, wie man das in
Scheme vornimmt.  Zunächst wird die Eingabe und die gewünschte
Ausgabe examiniert:
</p>
<blockquote><pre class="example">%  Eingabe
\displayMusic c4
===&gt;
(make-music
  'NoteEvent
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch -1 0 0))))
=====
%  gewünschte Ausgabe
\displayMusic c4-&gt;
===&gt;
(make-music
  'NoteEvent
  'articulations
  (list (make-music
          'ArticulationEvent
          'articulation-type
          &quot;accent&quot;))
  'duration
  (ly:make-duration 2 0 1/1)
  'pitch
  (ly:make-pitch -1 0 0))
\displayMusic c4
===&gt;
(make-music
  'EventChord
  'elements
  (list (make-music
          'NoteEvent
          'duration
          (ly:make-duration 2 0 1/1)
          'pitch
          (ly:make-pitch -1 0 0))))
</pre></blockquote>

<p>Dabei ist zu sehen, dass eine Note (<code>c4</code>) als <code>NoteEvent</code>-Ausdruck
repräsentiert ist.  Um eine Akzent-Artikulation hinzuzufügen, muss
ein <code>ArticulationEvent</code>-Ausdruck zu der Elementeigenschaft <code>articulations</code>
des <code>NoteEvent</code>-Ausdrucks hinzugefügt werden.
</p>
<p>Um diese Funktion zu bauen, wird folgendermaßen begonnen:
</p>
<blockquote><pre class="example">(define (add-accent note-event)
  &quot;Add an accent ArticulationEvent to the articulations of `note-event',
  which is supposed to be a NoteEvent expression.&quot;
  (set! (ly:music-property note-event 'articulations)
        (cons (make-music 'ArticulationEvent
                'articulation-type &quot;accent&quot;)
              (ly:music-property note-event 'articulations)))
  note-event)
</pre></blockquote>

<p>Die erste Zeile definiert eine Funktion in Scheme: Die Bezeichnung
der Funktion ist <code>add-accent</code> und sie hat eine Variable
mit der Bezeichnung <code>note-event</code>.  In Scheme geht der Typ
einer Variable oft direkt aus der Bezeichnung hervor (das ist auch
eine gute Methode für andere Programmiersprachen).
</p>
<blockquote><pre class="example">&quot;Add an accent...&quot;
</pre></blockquote>

<p>ist eine (englische) Beschreibung, was diese Funktion tut.  Sie ist
nicht unbedingt notwendig, aber genauso wie klare Variablen-Bezeichnungen
ist auch das eine gute Methode.
</p>
<p>Es kann seltsam scheinen, warum das Notenereignis direkt verändert wird,
anstatt mit einer Kopie zu arbeiten (<code>ly:music-deep-copy</code> kann dafür
benützt werden).  Der Grund ist eine stille Übereinkunft: musikalische
Funktionen dürfen ihre Argumente verändern: sie werden entweder von
Grund auf erstellt (wie Eingabe des Benutzers) oder sind schon kopiert
(etwa Verweis auf eine Variable mit  &lsquo;<samp>\Bezeichnung</samp>&rsquo; oder Noten aus
einem Scheme-Ausdruck &lsquo;<samp>$(&hellip;)</samp>&rsquo; sind Kopien).  Weil es uneffizient
wäre, unnötige Kopien zu erstellen, wird der Wiedergabewert einer musikalischen
Funktion <em>nicht</em> kopiert.  Um sich also an die Übereinkunft zu halten,
dürfen Argumente nicht mehr als einmal benützt werden, und sie wiederzugeben
zählt als eine Benutzung.
</p>
<p>In einem früheren Beispiel wurden Noten konstruiert, indem ein musikalisches
Argument wiederholt wurde.  In diesem Fall muss wenigstens eine Wiederholung
eine Kopie ihres Arguments sein.  Wenn es keine Kopie ist, können seltsame
Dinge passieren.  Wenn man beispielsweise <code>\relative</code> oder <code>\transpose</code>
auf die resultierenden Noten anwendet, die die gleichen Elemente mehrmals
enthalten, werden die Elemente mehrmals der <code>\relative</code>-Veränderung
oder Transposition unterworfen.  Wenn man sie einer musikalischen Variable
zuweist, wird dieser Fluch aufgehoben, denn der Verweis auf &lsquo;<samp>\Bezeichnung</samp>&rsquo;
erstellt wiederum eine Kopie, die nicht die Identität der wiederholten
Elemente überträgt.
</p>
<p>Während die Funktion oben keine musikalische Funktion ist, wird sie
normalerweise inmitten musikalischer Funktionen eingesetzt.  Darum
ist es sinnvoll, der gleichen Übereinkunft zu folgen, die für musikalische
Funktionen gelten:  Die Eingabe kann verändert worden sein, um die
Ausgabe zu produzieren, und der den Aufruf erstellt, ist verantwortlich
für die Erstellung von Kopien, wenn er immernoch die unveränderten
Argumente benötigt.  Wenn man sich LilyPonds eigene Funktionen wie etwa
<code>music-map</code> anschaut, sieht man, dass sie denselben Prinzipien folgen.
</p>
<p>Aber wo waren wir?  Jetzt gibt es ein <code>note-event</code>, das verändert
werden kann, nicht unter Einsatz von <code>ly:music-deep-copy</code> sondern
aufgrund einer langen Erklärung.  Der Akzent wird zu seiner
<code>'articulations</code>-Liste hinzugefügt:
</p>
<blockquote><pre class="example">(set! place neuer-Wert)
</pre></blockquote>

<p>Was in diesem Fall &bdquo;gesetzt&ldquo; werden soll (&bdquo;place&ldquo;) ist die
&sbquo;&rsquo;articulations&lsquo;-Eigenschaft des <code>note-event</code>-Ausdrucks.
</p>
<blockquote><pre class="example">(ly:music-property note-event 'articulations)
</pre></blockquote>

<p><code>ly:music-property</code> ist die Funktion, mit der musikalische
Eigenschaften erreicht werden können (die <code>'articulations</code>,
<code>'duration</code>, <code>'pitch</code> usw., die in der Ausgabe von
<code>\displayMusic</code> weiter oben angezeigt werden).  Der neue
Wert ist, was ehemals die <code>'articulations</code>-Eigenschaft war, mit einem
zusätzlichen Element: dem <code>ArticulationEvent</code>-Ausdruck,
der aus der Ausgabe von <code>\displayMusic</code> kopiert werden kann:
</p>
<blockquote><pre class="example">(cons (make-music 'ArticulationEvent
        'articulation-type &quot;accent&quot;)
      (ly:music-property result-event-chord 'articulations))
</pre></blockquote>

<p><code>cons</code> wird benutzt, um ein Element vorne an eine Liste hinzuzufügen,
ohne dass die originale Liste verändert wird.  Das ist es, was die
Funktion tun soll:  die gleiche Liste wie vorher, aber mit dem neuen
<code>ArticulationEvent</code>-Ausdruck.  Die Reihenfolge innerhalb
der Elementeeigenschaft ist hier nicht relevant.
</p>
<p>Wenn schließlich die Akzent-Artikulation zu der entsprechenden
<code>elements</code>-Eigenschaft hinzugefügt ist, kann
<code>note-event</code> ausgegeben werden, darum die letzte Zeile
der Funktion.
</p>
<p>Jetzt wird die <code>add-accent</code>-Funktion in eine musikalische
Funktion umgewandelt (hierzu gehört etwas syntaktischer Zuckerguß und
eine Deklaration des Typs ihres einzigen &bdquo;wirklichen&ldquo; Arguments:
</p>
<blockquote><pre class="example">addAccent = #(define-music-function (note-event)
                                     (ly:music?)
  &quot;Add an accent ArticulationEvent to the articulations of `note-event',
  which is supposed to be a NoteEvent expression.&quot;
  (set! (ly:music-property note-event 'articulations)
        (cons (make-music 'ArticulationEvent
                'articulation-type &quot;accent&quot;)
              (ly:music-property note-event 'articulations)))
  note-event)
</pre></blockquote>

<p>Eine Überprüfung, dass die Funktion richtig arbeitet, geschieht
folgendermaßen:
</p>
<blockquote><pre class="example">\displayMusic \addAccent c4
</pre></blockquote>







<hr size="6">
<a name="Schnittstellen-f_00fcr-Programmierer"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#scheme-tutorial" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Scheme-Tutorium&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#adding-articulation-to-notes-_0028example_0029" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Artikulationszeichen zu Noten hinzufügen (Beispiel)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-code-blocks" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;LilyPond-Codeabschnitte &gt; </a>]</td></tr></table>
<a name="interfaces-for-programmers"></a>
<h1 class="chapter">2. Schnittstellen für Programmierer</h1>

<p>Fortgeschrittene Anpassungen können mithilfe der Programmiersprache
Scheme vorgenommen werden.  Wenn Sie Scheme nicht kennen, gibt
es eine grundlegende Einleitung in LilyPonds
<a href="#scheme-tutorial">Scheme-Tutorium</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#lilypond-code-blocks" accesskey="1">2.1 LilyPond-Codeabschnitte</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-functions" accesskey="2">2.2 Scheme-Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#music-functions" accesskey="3">2.3 Musikalische Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#event-functions" accesskey="4">2.4 Ereignisfunktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#markup-functions" accesskey="5">2.5 Textbeschriftungsfunktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#contexts-for-programmers" accesskey="6">2.6 Kontexte für Programmierer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#callback-functions" accesskey="7">2.7 Callback-Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#inline-scheme-code" accesskey="8">2.8 Scheme-Code innerhalb LilyPonds</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#difficult-tweaks" accesskey="9">2.9 Schwierige Korrekturen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="LilyPond_002dCodeabschnitte"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#interfaces-for-programmers" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme-Funktionen &gt; </a>]</td></tr></table>
<a name="lilypond-code-blocks"></a>
<h2 class="section">2.1 LilyPond-Codeabschnitte</h2>

<p>Codeabschnitte in LilyPond sehen etwa so aus:
</p>
<blockquote><pre class="example">  #{ <var>LilyPond code</var> #}
</pre></blockquote>

<p>Sie können überall eingesetzt werden, wo man Scheme-Code schreiben
kann: der Scheme-Einleser wurde geändert, um LilyPond-Codeabschnitte
zu akzeptieren und kann mit eingebetteten Scheme-Ausdrücken umgehen,
die mit <code>$</code> und <code>#</code> beginnen.
</p>
<p>Er extrahiert den LilyPond-Codeabschnitt und erstellt einen Aufruf
zum LilyPond-Parser, welcher während der Prorammausführung zur
Interpretation des LilyPond-Codeabschnittes aufgerufen wird.  Alle
eingebetteten Scheme-Ausdrücke werden in der lokalen Umgebung des
LilyPond-Codeabschnittes ausgeführt, sodass man Zugruff auf lokale
Variablen und Funktionsparameter zu dem Zeitpunkt hat, an dem
der LilyPond-Codeabschnitt geschrieben wird.
</p>
<p>Ein LilyPond-Codeabschnitt kann jeden Inhalt haben, den man auf
der rechten Seite einer Zuweisung einsetzt.  Zusätzlich entspricht
ein leerer LilyPond-Abschnitt einem gültigen musikalischen Ausdruck,
und ein LilyPond-Abschnitt, der mehrere musikalische Ereignisse enthält,
wird in einen sequenziellen musikalischen Ausdruck umgewandelt.
</p>

<hr size="6">
<a name="Scheme_002dFunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-code-blocks" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; LilyPond-Codeabschnitte&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-function-definitions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Definition von Scheme-Funktionen &gt; </a>]</td></tr></table>
<a name="scheme-functions"></a>
<h2 class="section">2.2 Scheme-Funktionen</h2>

<a name="index-Scheme_002dFunktionen-_0028LilyPond-syntax_0029"></a>

<p><em>Scheme-Funktionen</em> sind Scheme-Prozeduren, die Scheme-Ausdrücke
aus einer Eingabe erstellen können, die in LilyPond-Syntax geschrieben
wurde.  Sie können in so gut wie allen Fällen aufgerufen werden, in
denen es erlaubt ist, <code>#</code> zur Angabe eines Wertes in Scheme-Syntax
einzusetzen.  Während Scheme auch eigene Funktionen besitzt, handelt
% dieses kapitel von <em>syntaktischen</em> Funktionen, Funktionen, die
Argumente in LilyPond-Syntax annehmen.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#scheme-function-definitions" accesskey="1">2.2.1 Definition von Scheme-Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#scheme-function-usage" accesskey="2">2.2.2 Benutzung von Scheme-Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#void-scheme-functions" accesskey="3">2.2.3 Leere Scheme-Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Definition-von-Scheme_002dFunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#scheme-function-usage" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Benutzung von Scheme-Funktionen &gt; </a>]</td></tr></table>
<a name="scheme-function-definitions"></a>
<h3 class="subsection">2.2.1 Definition von Scheme-Funktionen</h3>

<a name="index-define_002dscheme_002dfunction"></a>
<a name="index-define_002dscheme_002dfunction-1"></a>

<p>Die übliche Form zur Definition von Scheme-Funktionen ist:
</p>
<blockquote><pre class="example">function =
#(define-scheme-function
     (<var>Arg1</var> <var>Arg2</var> &hellip;)
     (<var>Typ1?</var> <var>Typ2?</var> &hellip;)
   <var>body</var>)
</pre></blockquote>

<p>wobei
</p>
<table>
<tr><td width="33%"><code>parser</code></td><td width="66%">ganz genau das Wort <code>parser</code> sein muss, damit LilyPond
eine Umgebung (<code>#{</code>&hellip;<code>#}</code>) mit Zugriff
auf den Parser bekommt.</td></tr>
<tr><td width="33%"><code><var>ArgN</var></code></td><td width="66%"><var>n</var>te Argument</td></tr>
<tr><td width="33%"><code><var>TypN?</var></code></td><td width="66%">eine Scheme-<em>Typenprädikat</em>, für welches <code><var>argN</var></code>
<code>#t</code> ausgeben muss.  Manche dieser Prädikate werden vom Parser
besonders erkannt, siehe unten.  Es gibt auch eine Spezialform
<code>(<em>predicate?</em> <em>default</em>)</code>, um optionale Argumente
anzugeben.  Wenn das eigentlich Argument fehlt, während die Funktion
aufgerufen wird, wird der Standardwert anstelle eingesetzt.  Standardwerte
werden bei ihrer Definition evaluiert (gilt auch für
LilyPond-Codeabschnitte), so dass man besser einen speziellen Wert
schreibt, den man einfach erkennen kann, wenn der Wert während der
Ausführung der Position evaluiert weren soll.  Wenn man das Prädikat
in Klammern setzt, aber  kein Standardwert folt, wird <code>#f</code>
als Standard eingesetzt.  Standardwerte werden weder bei der Definition
noch bei der Ausführung mit <em>predicate?</em> verifiziert, sodass
man selber verantworlich für funktionsfähige Werte ist.  Standardwerte,
die musikalische Ausdrücke darstellen, werden kopiert und <code>origin</code>
auf den Parameter <code>location</code> gesetzt.</td></tr>
<tr><td width="33%"><code><var>body</var></code></td><td width="66%">Eine Folge von Scheme-Formeln, die der Reihe nach ausgewertet
werden, wobei die letzte als Ausgabewert der Scheme-Funktion eingesetzt
wird.  Sie kann LilyPond-Codeabschnitte enthalten, eingeschlossen mit
Raute-Klammern (&nbsp;<code>#{&hellip;#}</code>&nbsp;), wie beschrieben
in <a href="#lilypond-code-blocks">LilyPond-Codeabschnitte</a>.  Innerhalb von LilyPond-Codeabschnitten
wird mit <code>#</code> auf Funktionsargumente (etwa &lsquo;<samp>#Arg1</samp>&rsquo;) verwiesen
oder ein neuer Scheme-Ausdruck mit Funktionsargumenten begonnen
(etwa &lsquo;<samp>#(cons Arg1 Arg2)</samp>&rsquo;).  Wo normale Scheme-Ausdrücke mit
<code>#</code> nicht funktionieren, kann man auf direkte Scheme-Ausdrücke
zurückgreifen, die mit <code>$</code> begonnen werden (etwa &lsquo;<samp>$music</samp>&rsquo;).

Wenn die Funktion eine musikalische Funktion ausgibt, bekommt sie einen
Wert von <code>origin</code>. zugewiesen.</td></tr>
</table>

<p>Einige Typenprädikate werden vom Parser besonders behandelt, weil
er sonst die Argumente nicht zuverlässig erkennen könnte.  Im Moment
handelt es sich um <code>ly:pitch?</code> und <code>ly:duration?</code>.
</p>
<p>Die Eignung der Argumente für alle anderen Prädikate wird festgestellt,
indem das Prädikat aufgerufen wird, nachdem LilyPond es schon in einen
Scheme-Ausdruck umgewandelt hat.  Demzufolge kann das Argument in
Scheme-Syntax angegeben werden, wenn nötig (beginnend mit <code>#</code> oder
als Result des Aufrufes einer Scheme-Funktion), aber LilyPond
konvertiert auch eine Reihe von LilyPond-Strukturen nach Scheme,
bevor dann tatsächlich die Prädikate überprüft werden.  Bei den
letzteren handelt es sich im Moment um music (Noten), postevents,
simple strings (einfache Zeichenketten mit oder ohne Anführungszeichen)
numbers (Zahlen), markup (Beschriftung) und markup lists
(Beschriftungslisten), score (Partitur), book (Buch), bookpart
(Buchteil), Kontextdefinitions- und Ausgabedefinitionsumgebungen.
</p>
<p>Für einige Arten von Ausdrücken (wie die meisten Noten, die nicht
in Klammern geschrieben werden) muss LilyPond weiter nach vorne
schauen als der Ausdruck selber reicht, um das Ende des Ausdrucks
zu bestimmen.  Wenn solche Ausdrücke für optionale Argumente mit
einbezogen würden, indem ihre Prädikate ausgewählt würden, könnte
LilyPond nicht mehr zurückgehen, wenn es feststellt, dass der
Ausdruck nicht zu dem Parameter passt.  Darum müssen manche Formen
von Noten möglicherweise in Klammern eingeschlossen werden, damit
LilyPond sie akzeptiert.  Es gibt auch einige andere Mehrdeutigkeiten,
die LilyPond durch Testen von Prädikatfunktionen eingrenzt:
ist etwa &lsquo;<samp>-3</samp>&rsquo; die Anmerkung für einen Fingersatz oder eine
negative Zahl? Ist <code>&quot;a&quot; 4</code> im Gesangskontext eine Zeichenkette
gefolgt von einer Zahl oder ein Gesangstextereignis mit der Dauer
<code>4</code>?  LilyPond entscheidet, indem es Prädaikate befragt.  Das
heißt, dass man zu durchlässige Prädikate wie <code>scheme?</code>
vermeiden sollte, wenn man eine bestimmmte Verwendung beabsichtigt
und nicht nur eine Funktion für die allgemeine Verwendung schreibt.
</p>
<p>Eine Liste der möglichen vordefinierten Typenprädikte findet sich in
<a name="index-Vordefinierte-Typpradikate"></a>
<a href="notation-big-page.de.html#predefined-type-predicates">Vordefinierte Typprädikate</a>.
</p>
<a name="Siehe-auch-1"></a>
<h4 class="subsubheading">Siehe auch</h4>

<p>Notationsreferenz
<a name="index-Vordefinierte-Typpradikate-1"></a>
<a href="notation-big-page.de.html#predefined-type-predicates">Vordefinierte Typprädikate</a>.
</p>
<p>Installierte Dateien:
&lsquo;<tt>lily/music-scheme.cc</tt>&rsquo;,
&lsquo;<tt>scm/c++.scm</tt>&rsquo;,
&lsquo;<tt>scm/lily.scm</tt>&rsquo;.
</p>

<hr size="6">
<a name="Benutzung-von-Scheme_002dFunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-function-definitions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Definition von Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#void-scheme-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Leere Scheme-Funktionen &gt; </a>]</td></tr></table>
<a name="scheme-function-usage"></a>
<h3 class="subsection">2.2.2 Benutzung von Scheme-Funktionen</h3>

<p>Scheme-Funktionen können überall aufgerufen werden, wo ein
Scheme-Ausdruck beginnend mit <code>#</code> geschrieben werden kann.
Man kann eine Scheme-Funktion aufrufen, indem man ihrer Bezeichnung
<code>\</code> voranstellt und Argumente hinten anfügt.  Wenn ein optionales
Argumentenprädikat nicht mit einem Argument übereinstimmt, lässt
LilyPond dieses und alle folgenden Argumente aus und ersetzt sie
durch ihre Standardwerte und &bdquo;speichert&ldquo; das Argument, das nicht
gepasst hat, bis zum nächsten zwingenden Argument.  Da das gespeicherte
Argument auch noch irgendwo untergebracht werden muss, werden
optionale Argumente nicht wirklich als optional angesehen, es sei denn,
sie werden von einem zwingenden Argument gefolgt.
</p>
<p>Es gibt eine Ausnahme:  Wenn man <code>\default</code> anstelle eines optionalen
Arguments schreibt, wird dieses und alle folgenden Argumente ausgelassen
und durch ihre Standardwerte ersetzt.  Das funktioniert auch, wenn kein
zwingendes Argument folgt, weil <code>\default</code> nicht gespeichert werden
muss.  Die Befehle <code>mark</code> und <code>key</code> benützten diesen Trick,
um ihr Standardverhalten zur verfügung zu stellen, wenn sie
<code>\default</code> nachgestellt haben.
</p>
<p>Abgesehen von Stellen, wo ein Scheme-Wert benötigt ist, gibt es
wenige Stellen, wo <code>#</code>-Ausdrücke zwar für ihre (Neben-)Wirkung
akzeptiert und ausgewertet, aber ansonsten ignoriert werden.  Meistens
handelt es sich dabei um Stellen, wo eine Zuweisung auch in Ordnung
wäre.
</p>
<p>Weil es eine schlechte Idee ist, einen Wert auszugeben, der in einigen
Kontexten misinterpretiert werden könnte, sollte man Scheme-Funktionen
nur in den Fällen benutzen, in welchen sie immer einen sinnvollen
Wert ausgeben, und leere Scheme-Funktionen an anderen stellen
einsetzen.  Siehe auch siehe Abschnitt <a href="#void-scheme-functions">Leere Scheme-Funktionen</a>.
</p>

<hr size="6">
<a name="Leere-Scheme_002dFunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#scheme-function-usage" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Benutzung von Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#scheme-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#music-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Musikalische Funktionen &gt; </a>]</td></tr></table>
<a name="void-scheme-functions"></a>
<h3 class="subsection">2.2.3 Leere Scheme-Funktionen</h3>

<a name="index-define_002dvoid_002dfunction"></a>
<a name="index-define_002dvoid_002dfunction-1"></a>
<a name="index-_005cvoid-2"></a>
<a name="index-_005cvoid-3"></a>

<p>Manchmal wird eine Prozedur ausgeführt, um eine Aktion zu machen und nicht,
um einen Wert auszugeben.  Einige Programmiersprachen (wie C oder Scheme)
setzen Funktionen für beide Konzepte ein und verwerfen einfach den
Rückgabewert (normalerweise, indem einem Ausdruck erlaubt wird, als
Aussage zu funktionieren und das Ergebnis ignoriert wird).  Das ist
klug, aber auch fehleranfällig:  die meisten C-Kompilierer haben heutzutage
Warnungen für verschiedene nicht-&bdquo;gültige&ldquo; Ausdrücke, die verworfen
werden.  Viele Funktionen, die eine Aktion ausführen, werden von den
Scheme-Standards als Funktionen betrachtet, deren Wiedergabewert unspezifiert
ist.  Der Scheme-Interpreter von LilyPond, Guile, hat den eindeutigen
Wert <code>*unspecified*</code>, der normalerweise (etwa wenn man <code>set!</code>
direkt auf eine Variable anwendet), aber leider nicht konsistent in
diesen Fällen ausgegeben wird.
</p>
<p>Indem man eine LilyPond-Funktion mit <code>define-void-function</code> definiert,
geht man sicher, dass dieser Spezialwert (der einzige Wert, der das
Prädikat <code>void?</code> erfüllt) wiedergegeben wird.
</p>
<blockquote><pre class="example">noPointAndClick =
#(define-void-function
     ()
     ()
   (ly:set-option 'point-and-click #f))
...
\noPointAndClick   % Point and Click deaktivieren
</pre></blockquote>

<p>Wenn man einen Ausdruck nur wegen seiner Nebeneffekte evaluieren will
und keinen der möglicherweise ausgegebenen Werte interpretiert haben
will, kann man dem Ausdruck <code>\void</code> voranstellen:
</p>
<blockquote><pre class="example">\void #(hashq-set! eine-Tabelle ein-Schlüssel ein-Wert)
</pre></blockquote>

<p>Auf diese Weise kann man sicher sein, dass LilyPond dem ausgegebenen
Wert keine Bedeutung zuweist, unabhängig davon, wo er angetroffen wird.
Das funktioniert auch für musikalische Funktionen wie <code>\displayMusic</code>.
</p>

<hr size="6">
<a name="Musikalische-Funktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#void-scheme-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Leere Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#music-function-definitions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Definition der musikalischen Funktionen &gt; </a>]</td></tr></table>
<a name="music-functions"></a>
<h2 class="section">2.3 Musikalische Funktionen</h2>

<a name="index-musikalische-Funktionen"></a>

<p><em>Musikalische Funktionen</em> sind Scheme-Prozeduren,
die musikalische Ausdrücke automatisch erstellen können und dadurch die
Eingabedatei maßgeblich vereinfachen können.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#music-function-definitions" accesskey="1">2.3.1 Definition der musikalischen Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#music-function-usage" accesskey="2">2.3.2 Benutzung von musikalischen Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#simple-substitution-functions" accesskey="3">2.3.3 Einfache Ersetzungsfunktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#intermediate-substitution-functions" accesskey="4">2.3.4 Mittlere Ersetzungsfunktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#mathematics-in-functions" accesskey="5">2.3.5 Mathematik in Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#functions-without-arguments" accesskey="6">2.3.6 Funktionen ohne Argumente</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#void-music-functions" accesskey="7">2.3.7 Leere musikalische Funktionen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Definition-der-musikalischen-Funktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#music-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#music-function-usage" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Benutzung von musikalischen Funktionen &gt; </a>]</td></tr></table>
<a name="music-function-definitions"></a>
<h3 class="subsection">2.3.1 Definition der musikalischen Funktionen</h3>

<p>Die allgemeine Form zur Definition musikalischer Funktionen ist:
</p>
<blockquote><pre class="example">function =
#(define-music-function
     (<var>Arg1</var> <var>Arg2</var> &hellip;)
     (<var>Typ1?</var> <var>Typ2?</var> &hellip;)
   <var>body</var>)
</pre></blockquote>

<p>analot zu Scheme-Funktionen, siehe <a href="#scheme-function-definitions">Definition von Scheme-Funktionen</a>.
In der Mehrzahl der Fälle ist <var>body</var> ein LilyPond-Codeabschnitt (siehe
<a href="#lilypond-code-blocks">LilyPond-Codeabschnitte</a>.
</p>
<p>Eine Liste der möglichen Typenprädikate findet sich in
<a name="index-Vordefinierte-Typpradikate-2"></a>
<a href="notation-big-page.de.html#predefined-type-predicates">Vordefinierte Typprädikate</a>.
</p>
<a name="Siehe-auch"></a>
<h4 class="subsubheading">Siehe auch</h4>

<p>Notationsreferenz:
<a name="index-Vordefinierte-Typpradikate-3"></a>
<a href="notation-big-page.de.html#predefined-type-predicates">Vordefinierte Typprädikate</a>.
</p>
<p>Installierte Dateien:
&lsquo;<tt>lily/music-scheme.cc</tt>&rsquo;,
&lsquo;<tt>scm/c++.scm</tt>&rsquo;,
&lsquo;<tt>scm/lily.scm</tt>&rsquo;.
</p>

<hr size="6">
<a name="Benutzung-von-musikalischen-Funktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#music-function-definitions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Definition der musikalischen Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#simple-substitution-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Einfache Ersetzungsfunktionen &gt; </a>]</td></tr></table>
<a name="music-function-usage"></a>
<h3 class="subsection">2.3.2 Benutzung von musikalischen Funktionen</h3>

<p>Musikalische Funktionen können zur Zeit an verschiedenen Stellen benützt
werden.  Abhängig davon, wo sie eingesetzt werden, gibt es Begrenzungen,
damit die Funktionen eindeutig interpretiert werden können.  Das Resultat,
das eine musikalische Funktion wiedergibt, muss mit dem Kontext kompatibel
sein, indem sie aufgerufen wird.
</p>
<ul>
<li>
Auf höchster Ebene in einer musikalischen Funktion.  Keine Begrenzungen.

</li><li>
Als ein Nach-Ereignis, explizit begonnen mit einem Richtungsindikator
(einer von <code>-</code>, <code>^</code>, und <code>_</code>).  Wichtig dabei ist,
dass musikalische Funktionen, die das Nachereignis ausgeben, als
normale Noten akzeptiert werden.  Dabei erhält man ein Resultat, das
etwa folgendem entspricht:

<blockquote><pre class="example">s 1*0-\fun
</pre></blockquote>

<p>In diesem Fall kann man keinen <em>offenen</em> musikalischen Ausdruck als
letztes Argument einsetzen, also ein Argument, das in einem musikalischen
Ausdruck schließt, der weitere Nach-Ereignisse akzeptieren kann.
</p>
</li><li>
Als Element eines Akkordes.  Der ausgegebene Ausdruck muss vom Typ
<code>rhythmic-event</code> sein, wahrscheinlich auch <code>NoteEvent</code>.

</li></ul>

<p>Die besonderen Regeln für noch nicht abgearbeitete Argumente machen es
möglich, polymorphe Funktionen wie <code>\tweak</code> zu schreiben,
die auf unterschiedliche Konstruktionen angewendet werden können.
</p>

<hr size="6">
<a name="Einfache-Ersetzungsfunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#music-function-usage" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Benutzung von musikalischen Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#intermediate-substitution-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Mittlere Ersetzungsfunktionen &gt; </a>]</td></tr></table>
<a name="simple-substitution-functions"></a>
<h3 class="subsection">2.3.3 Einfache Ersetzungsfunktionen</h3>

<p>Einfache Ersetzungsfunktionen sind musikalische Funktionen, deren
musikalische Ausgabe-Funktion im LilyPond-Format geschrieben ist
und Funktionsargumente in der Ausgabefunktion enthält.  Sie werden
beschrieben in <a name="index-Beispiele-der-Ersetzungsfunktionen"></a>
<a href="notation-big-page.de.html#substitution-function-examples">Beispiele der Ersetzungsfunktionen</a>
</p>

<hr size="6">
<a name="Mittlere-Ersetzungsfunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#simple-substitution-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Einfache Ersetzungsfunktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#mathematics-in-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Mathematik in Funktionen &gt; </a>]</td></tr></table>
<a name="intermediate-substitution-functions"></a>
<h3 class="subsection">2.3.4 Mittlere Ersetzungsfunktionen</h3>

<p>Mittlere Ersetzungsfunktionen setzen sich aus einer Mischung von
Scheme-Code und LilyPond-Code in der musikalischen Ausgabe-Funktion
zusammen.
</p>
<p>Einige <code>\override</code>-Befehle benötigen ein Zahlenpaar
(als <code>cons</code>-Zelle in Scheme bezeichnet).
</p>
<p>Das Paar kann direkt an die musikalische Funktion
mit der Variable <code>pair?</code> weitergeleitet werden:
</p>
<blockquote><pre class="example">manualBeam =
#(define-music-function
     (beg-end)
     (pair?)
   #{
     \once \override Beam.positions = #beg-end
   #})

\relative c' {
  \manualBeam #'(3 . 6) c8 d e f
}
</pre></blockquote>

<p>Anstelle dessen können auch die Zahlen, aus denen das Paar besteht,
einzeln als eigenständige Argumente weitergeleitet und der
Scheme-Code, der das Paar erstellt, in die musikalische Funktion
augenommen werden:
</p>
<blockquote><pre class="verbatim">manualBeam =
#(define-music-function
     (beg end)
     (number? number?)
   #{
     \once \override Beam.positions = #(cons beg end)
   #})

\relative c' {
  \manualBeam #3 #6 c8 d e f
}
</pre><p>
 <a href="1a/lily-1c7ee3ea.ly">
  <img align="middle"
       border="0"
       src="1a/lily-1c7ee3ea.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Mathematik-in-Funktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#intermediate-substitution-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Mittlere Ersetzungsfunktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#functions-without-arguments" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Funktionen ohne Argumente &gt; </a>]</td></tr></table>
<a name="mathematics-in-functions"></a>
<h3 class="subsection">2.3.5 Mathematik in Funktionen</h3>

<p>Musikalische Funktionen können neben einfachen Ersetzungen
auch Scheme-Programmcode enthalten:
</p>
<blockquote><pre class="verbatim">AltOn =
#(define-music-function
     (mag)
     (number?)
   #{
     \override Stem.length = #(* 7.0 mag)
     \override NoteHead.font-size =
       #(inexact-&gt;exact (* (/ 6.0 (log 2.0)) (log mag)))
   #})

AltOff = {
  \revert Stem.length
  \revert NoteHead.font-size
}

\relative {
  c'2 \AltOn #0.5 c4 c
  \AltOn #1.5 c c \AltOff c2
}
</pre><p>
 <a href="71/lily-f3e0971d.ly">
  <img align="middle"
       border="0"
       src="71/lily-f3e0971d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Dieses Beispiel kann auch umformuliert werden, um musikalische Ausdrücke
zu integrieren:
</p>
<blockquote><pre class="verbatim">withAlt =
#(define-music-function
     (mag music)
     (number? ly:music?)
   #{
     \override Stem.length = #(* 7.0 mag)
     \override NoteHead.font-size =
       #(inexact-&gt;exact (* (/ 6.0 (log 2.0)) (log mag)))
     #music
     \revert Stem.length
     \revert NoteHead.font-size
   #})

\relative {
  c'2 \withAlt #0.5 { c4 c }
  \withAlt #1.5 { c c } c2
}
</pre><p>
 <a href="b1/lily-5c08a228.ly">
  <img align="middle"
       border="0"
       src="b1/lily-5c08a228.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Funktionen-ohne-Argumente"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#mathematics-in-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Mathematik in Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#void-music-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Leere musikalische Funktionen &gt; </a>]</td></tr></table>
<a name="functions-without-arguments"></a>
<h3 class="subsection">2.3.6 Funktionen ohne Argumente</h3>

<p>In den meisten Fällen sollten Funktionen ohne Argumente mit einer
Variable notiert werden:
</p>
<blockquote><pre class="example">dolce = \markup{ \italic \bold dolce }
</pre></blockquote>

<p>In einigen wenigen Fällen kann es aber auch sinnvoll sein, eine
musikalische Funktion ohne Argumente zu erstellen:
</p>
<blockquote><pre class="example">displayBarNum =
#(define-music-function
     ()
     ()
   (if (eq? #t (ly:get-option 'display-bar-numbers))
       #{ \once \override Score.BarNumber.break-visibility = ##f #}
       #{#}))
</pre></blockquote>

<p>Damit auch wirklich Taktzahlen angezeigt werden, wo die
Funktion eingesetzt wurde, muss <code>lilypond</code> mit
der Option
</p>
<blockquote><pre class="example">lilypond -d display-bar-numbers Dateiname.ly
</pre></blockquote>

<p>aufgerufen werden.
</p>

<hr size="6">
<a name="Leere-musikalische-Funktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#functions-without-arguments" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Funktionen ohne Argumente&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#music-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#event-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Ereignisfunktionen &gt; </a>]</td></tr></table>
<a name="void-music-functions"></a>
<h3 class="subsection">2.3.7 Leere musikalische Funktionen</h3>

<p>Eine musikalische Funktion muss einen musikalischen Ausdruck
ausgeben.  Wenn man eine Funktion nur für ihre Nebeneffekte
ausführt, sollte man <code>define-void-function</code> benützen.
Es kann aber auch Fälle geben, in denen man teilweise eine
musikalische Funktion erstellen will, teilweise aber nicht
(wie im vorherigen Beispiel).  Indem man eine leere (<code>void</code>)
Funktion mit  <code>#{ #}</code> ausgibt, wird das erreicht.
</p>

<hr size="6">
<a name="Ereignisfunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#void-music-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Leere musikalische Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#markup-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Textbeschriftungsfunktionen &gt; </a>]</td></tr></table>
<a name="event-functions"></a>
<h2 class="section">2.4 Ereignisfunktionen</h2>

<a name="index-define_002devent_002dfunction"></a>
<a name="index-define_002devent_002dfunction-1"></a>
<a name="index-Ereignisfunktionen"></a>

<p>Damit man eine musikalische Funktion anstelle eines Ereignisses benützen
kann, muss man ihr einen Richtungsindikator voranstellen.  Manchmal
entspricht dies jedoch nicht der Syntax der Konstruktionen, die man ersetzen
will.  Dynamikbefehle beispielsweise werden normalerweise ohne Richtungsangabe
angehängt, wie <code>c'\pp</code>.  Das Folgende ist eine Möglichkeit, beliebige
Dynamikbefehle zu schreiben:
</p>
<blockquote><pre class="verbatim">dyn=#(define-event-function (arg) (markup?)
         (make-dynamic-script arg))
\relative { c'\dyn pfsss }
</pre><p>
 <a href="4d/lily-e8657a1e.ly">
  <img align="middle"
       border="0"
       src="4d/lily-e8657a1e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Man kann das Gleiche auch mit einer musikalischen Funktion erreichen, aber dann
muss man immer einen Richtungsindikator voranstellen, wie <code>c-\dyn pfsss</code>.
</p>

<hr size="6">
<a name="Textbeschriftungsfunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#event-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Ereignisfunktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#markup-construction-in-scheme" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Beschriftungskonstruktionen in Scheme &gt; </a>]</td></tr></table>
<a name="markup-functions"></a>
<h2 class="section">2.5 Textbeschriftungsfunktionen</h2>

<p>Textbeschriftungselemente sind als besondere Scheme-Funktionen
definiert, die ein <code>Stencil</code>-Objekt erstellen, dem eine Anzahl
an Argumenten übergeben wird.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#markup-construction-in-scheme" accesskey="1">2.5.1 Beschriftungskonstruktionen in Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#how-markups-work-internally" accesskey="2">2.5.2 Wie Beschriftungen intern funktionieren</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#new-markup-command-definition" accesskey="3">2.5.3 Neue Definitionen von Beschriftungsbefehlen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#new-markup-list-command-definition" accesskey="4">2.5.4 Neue Definitionen von Beschriftungslistenbefehlen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Beschriftungskonstruktionen-in-Scheme"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#markup-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Textbeschriftungsfunktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#markup-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Textbeschriftungsfunktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#how-markups-work-internally" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Wie Beschriftungen intern funktionieren &gt; </a>]</td></tr></table>
<a name="markup-construction-in-scheme"></a>
<h3 class="subsection">2.5.1 Beschriftungskonstruktionen in Scheme</h3>

<a name="index-Textbeschriftungsbefehle_002c-definieren"></a>
<a name="index-Textbeschriftung_002c-eigene-Befehle"></a>
<a name="index-eigene-Befehle_002c-Textbeschriftung"></a>
<a name="index-markup_002c-eigene-Befehle"></a>
<a name="index-Befehle-definieren_002c-Textbeschriftung"></a>

<p>Das <code>markup</code>-(Textbeschriftungs)Makro erstellt Textbeschriftungs-Ausdrücke
in Scheme, wobei eine LilyPond-artige Syntax benutzt wird.  Beispielsweise
ist
</p>
<blockquote><pre class="example">(markup #:column (#:line (#:bold #:italic &quot;hello&quot; #:raise 0.4 &quot;world&quot;)
                  #:larger #:line (&quot;foo&quot; &quot;bar&quot; &quot;baz&quot;)))
</pre></blockquote>

<p>identisch mit
</p>
<blockquote><pre class="example">#{ \markup \column { \line { \bold \italic &quot;hello&quot; \raise #0.4 &quot;world&quot; }
                  \larger \line { foo bar baz } } #}
</pre></blockquote>

<p>Dieses Beispiel zeigt die hauptsächlichen Übersetzungsregeln
zwischen normaler Textbeschriftungssyntax von LilyPond und der
Textbeschriftungssyntax in Scheme.  Es ist meistens der beste
Weg, <code>#{ &hellip; #}</code> zur Eingabe von LilyPond-Syntax zu
benützen, aber es soll auch erklärt werden, wie man das
<code>markup</code>-Makro einsetzt, um eine Lösung nur in Scheme zu bekommen.
</p>
<blockquote><table>
<tr><td width="30%"><p> <b>LilyPond</b> </p></td><td width="30%"><p> <b>Scheme</b>
</p></td></tr>
<tr><td width="30%"><p> <code>\markup Text1</code> </p></td><td width="30%"><p> <code>(markup Text1)</code>
</p></td></tr>
<tr><td width="30%"><p> <code>\markup { Text1 Text2 ... }</code> </p></td><td width="30%"><p>        <code>(markup Text1 Text2 ... )</code>
</p></td></tr>
<tr><td width="30%"><p> <code>\Beschriftungsbefehl</code> </p></td><td width="30%"><p> <code>#:Beschriftungsbefehl</code>
</p></td></tr>
<tr><td width="30%"><p> <code>\Variable</code> </p></td><td width="30%"><p> <code>Variable</code>
</p></td></tr>
<tr><td width="30%"><p> <code>\center-column { ... }</code> </p></td><td width="30%"><p> <code>#:center-column ( ... )</code>
</p></td></tr>
<tr><td width="30%"><p> <code>Zeichenkette</code> </p></td><td width="30%"><p> <code>&quot;Zeichenkette&quot;</code>
</p></td></tr>
<tr><td width="30%"><p> <code>#scheme-Arg</code> </p></td><td width="30%"><p> <code>scheme-Arg</code>
</p></td></tr>
</table>
</blockquote>

<p>Die gesamte Scheme-Sprache ist innerhalb des <code>markup</code>-Makros
zugänglich.  Man kann also beispielsweise Funktionen innerhalb
eines <code>markup</code> aufrufen, um Zeichenketten zu manipulieren.
Das ist nützlich, wenn neue Beschriftungsbefehle definiert werden
sollen (siehe auch
<a href="#new-markup-command-definition">Neue Definitionen von Beschriftungsbefehlen</a>).
</p>

<a name="Bekannte-Probleme-und-Warnungen"></a>
<h4 class="subsubheading">Bekannte Probleme und Warnungen</h4>

<p>Das Beschriftungslistenargument von Befehlen wie <code>#:line</code>,
<code>#:center</code> und <code>#:column</code> kann keine Variable oder
das Resultat eines Funktionsaufrufen sein.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(markup #:line (Funktion-die-Textbeschriftung-ausgibt))
</pre></td></tr></table>

<p>ist ungültig.  Man sollte anstatt dessen die Funktionen
<code>make-line-markup</code>, <code>make-center-markup</code> oder
<code>make-column-markup</code> benutzen:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(markup (make-line-markup (Funktion-die-Textbeschriftung-ausgibt)))
</pre></td></tr></table>


<hr size="6">
<a name="Wie-Beschriftungen-intern-funktionieren"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#markup-construction-in-scheme" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Beschriftungskonstruktionen in Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#markup-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Textbeschriftungsfunktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#new-markup-command-definition" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Neue Definitionen von Beschriftungsbefehlen &gt; </a>]</td></tr></table>
<a name="how-markups-work-internally"></a>
<h3 class="subsection">2.5.2 Wie Beschriftungen intern funktionieren</h3>

<p>In einer Textbeschriftung wie
</p>
<blockquote><pre class="example">\raise #0.5 &quot;Textbeispiel&quot;
</pre></blockquote>

<p>ist <code>\raise</code> unter der Haube durch die <code>raise-markup</code>-Funktion
repräsentiert.  Der Beschriftungsausdruck wird gespeichert als
</p>
<blockquote><pre class="example">(list raise-markup 0.5 (list simple-markup &quot;Textbeispiel&quot;))
</pre></blockquote>

<p>Wenn die Beschriftung in druckbare Objekte (Stencils) umgewandelt ist,
wir die <code>raise-markup</code>-Funktion folgendermaßen aufgerufen:
</p>
<blockquote><pre class="example">(apply raise-markup
       <var>\layout object</var>
       <var>Liste der Eigenschafts-alists</var>
       0.5
       <var>die &quot;Textbeispiel&quot;-Beschriftung</var>)
</pre></blockquote>

<p>Die <code>raise-markup</code>-Funktion erstellt zunächst den Stencil für die
<code>Textbeispiel</code>-Beschriftung und verschiebt dann diesen Stencil
um 0.5 Notenlinienzwischenräume nach oben.  Das ist ein einfaches
Beispiel.  Weitere, kompliziertere Beispiele finden sich nachfolgend
in diesem Abschnitt und in der Datei
&lsquo;<tt>scm/define-markup-commands.scm</tt>&rsquo;.
</p>

<hr size="6">
<a name="Neue-Definitionen-von-Beschriftungsbefehlen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#how-markups-work-internally" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Wie Beschriftungen intern funktionieren&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#markup-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Textbeschriftungsfunktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#markup-command-definition-syntax" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Syntax der Definition von Textbeschriftungsbefehlen &gt; </a>]</td></tr></table>
<a name="new-markup-command-definition"></a>
<h3 class="subsection">2.5.3 Neue Definitionen von Beschriftungsbefehlen</h3>

<p>Dieser Abschnitt behandelt die Definition von neuen Textbeschriftungsbefehlen.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#markup-command-definition-syntax" accesskey="1">Syntax der Definition von Textbeschriftungsbefehlen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#on-properties" accesskey="2">Über Eigenschaften</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#a-complete-example" accesskey="3">Ein vollständiges Bespiel</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#adapting-builtin-commands" accesskey="4">Eingebaute Befehle anpassen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Syntax-der-Definition-von-Textbeschriftungsbefehlen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#new-markup-command-definition" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Neue Definitionen von Beschriftungsbefehlen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#new-markup-command-definition" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Neue Definitionen von Beschriftungsbefehlen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#on-properties" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Über Eigenschaften &gt; </a>]</td></tr></table>
<a name="markup-command-definition-syntax"></a>
<h4 class="unnumberedsubsubsec">Syntax der Definition von Textbeschriftungsbefehlen</h4>

<p>Neue Textbeschriftungsbefehle können mit dem
<code>define-markup-command</code>-Scheme-Makro definiert werden.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(define-markup-command (<var>befehl-bezeichnung</var> <var>layout</var> <var>props</var> <var>Arg1</var> <var>Arg2</var> ...)
            (<var>Arg1-typ?</var> <var>Arg2-typ?</var> ...)
    [ #:properties ((<var>Eigenschaft1</var> <var>Standard-Wert1</var>)
                    ...) ]
  ..Befehlkörper..)
</pre></td></tr></table>

<p>Die Argumente sind:
</p>
<dl compact="compact">
<dt> <var><var>befehl-bezeichnung</var></var></dt>
<dd><p>die Bezeichnung des Befehls
</p>
</dd>
<dt> <var><var>layout</var></var></dt>
<dd><p>die &sbquo;layout&lsquo;-Definition
</p>
</dd>
<dt> <var>props</var></dt>
<dd><p>eine Liste an  assoziativen Listen, in der alle aktiven Eigenschaften enthalten sind
</p>
</dd>
<dt> <var><var>argi</var></var></dt>
<dd><p>das <var>i</var>te Befehlsargument
</p>
</dd>
<dt> <var><var>argi-type?</var></var></dt>
<dd><p>eine Eigenschaft für das <var>i</var>te Argument
</p></dd>
</dl>

<p>Wenn der Befehl Eigenschaften des <code>props</code>-Arguments benutzt,
kann das <code>#:properties</code>-Schlüsselwort benutzt werden um zu
bestimmen, welche Eigenschaften mit welchen Standard-Werten benutzt
werden.
</p>
<p>Argumente werden nach ihrem Typ unterschieden:
</p>
<ul>
<li> eine Textbeschriftung entspricht einem Typenprädikat <code>markup?</code>;
</li><li> eine Textbeschriftungsliste entspricht einem Typenprädikat
<code>markup-list?</code>;
</li><li> jedes andere Scheme-Objekt entspricht Typenprädikaten wie etwa
<code>list?</code>, <code>number?</code>, <code>boolean?</code>, usw.
</li></ul>

<p>Es gibt keine Einschränkung in der Reihenfolge der Argumente (nach
den Standard-Argumenten <code>layout</code> und <code>props</code>).  Textbeschriftungsfunktionen,
die als letztes Argument eine Textbeschriftung haben, haben die
Besonderheit, dass sie auf Textbeschriftungslisten angewendet werden
können, und das Resultat ist eine Textbeschriftungsliste, in der
die Textbeschriftungsfuktion (mit den angegebenen Argumenten am Anfang)
auf jedes Element der originalen Textbeschriftungsliste angewendet
wurde.
</p>
<p>Da das Wiederholen der Argumente am Anfang bei der Anwendung einer
Textbeschriftungsfunktion auf eine Textbeschriftungsliste for allem
für Scheme-Argumente sparsam ist, kann man Leistungseinbußen vermeiden,
indem man nur Scheme-Argumente für die Argumente am Anfang einsetzt,
wenn es sich um Textbeschriftungsfunktionen handelt, die eine Textbeschriftung
als letztes Argument haben.
</p>

<hr size="6">
<a name="g_t_00dcber-Eigenschaften"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#markup-command-definition-syntax" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Syntax der Definition von Textbeschriftungsbefehlen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#new-markup-command-definition" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Neue Definitionen von Beschriftungsbefehlen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#a-complete-example" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Ein vollständiges Bespiel &gt; </a>]</td></tr></table>
<a name="on-properties"></a>
<h4 class="unnumberedsubsubsec">Über Eigenschaften</h4>

<p>Die <code>layout</code>- und <code>props</code>-Argumente der Textbeschriftungsbefehle
bringen einen Kontext für die Interpretation der Beschriftung:
Schriftgröße, Zeilenlänge usw.
</p>
<p>Das <code>layout</code>-Argument greift auf Eigenschaften zu, die in der
<code>paper</code>-Umgebung definiert werden, indem man die <code>ly:output-def-lookup</code>-Funktion
benutzt.  Beispielsweise liest man die Zeilenlänge (die gleiche, die auch in
Partituren benutzt wird) aus mit:
</p>
<blockquote><pre class="example">(ly:output-def-lookup layout 'line-width)
</pre></blockquote>

<p>Das <code>props</code>-Argument stellt einige Eigenschaften für die Textbeschriftungsbefehle
zur Verfügung.  Beispielsweise wenn der Überschrifttext einer
<code>book</code>-Umgebung interpretiert wird, werden alle Variablen, die
in der <code>\header</code>-Umgebung definiert werden, automatisch zu <code>props</code>
hinzugefügt, sodass die Beschriftung auf Titel, Komponist usw. der
<code>book</code>-Umgebung zugreifen kann.  Das ist auch eine Möglichkeit, das
Verhalten eines Beschriftungsbefehls zu konfigurieren: Wenn etwa ein
Befehl die Schriftgröße während der Verarbeitung einsetzt, wird die
Schriftgröße aus den <code>props</code> ausgelesen und nicht mit einem eigenen
<code>font-size</code>-Argument definiert.  Beim Aufruf des Beschriftungsbefehls
kann der Wert der Schriftgröße geändert werden, womit sich auch das Verhalten
des Befehls verändert.  Benutzen Sie das <code>#:properties</code>-Schlüsselwort
von <code>define-markup-command</code> um zu definieren, welche Eigenschaften aus den
<code>props</code>-Argumenten ausgelesen werden sollen.
</p>
<p>Das Beispiel im nächsten Abschnitt illustriert, wie man auf Eigenschaften
in einem Beschriftungsbefehl zugreifen und sie verändern kann.
</p>

<hr size="6">
<a name="Ein-vollst_00e4ndiges-Bespiel"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#on-properties" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Über Eigenschaften&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#new-markup-command-definition" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Neue Definitionen von Beschriftungsbefehlen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#adapting-builtin-commands" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Eingebaute Befehle anpassen &gt; </a>]</td></tr></table>
<a name="a-complete-example"></a>
<h4 class="unnumberedsubsubsec">Ein vollständiges Bespiel</h4>

<p>Das folgende Beispiel definiert einen Beschriftungsbefehl, der einen
doppelten Kasten um einen Text zeichnet.
</p>
<p>Zuerst wollen wir ein annäherndes Ergebnis mit Textbeschriftungen definieren.
Nach Stöbern in <a name="index-Textbeschriftungsbefehle"></a>
<a href="notation-big-page.de.html#text-markup-commands">Textbeschriftungsbefehle</a> finden wir den Befehl
<code>\box</code>:
</p>
<blockquote><pre class="verbatim">\markup \box \box HELLO
</pre><p>
 <a href="75/lily-43f5cbce.ly">
  <img align="middle"
       border="0"
       src="75/lily-43f5cbce.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Wir wollen aber etwas mehr Abstand (engl. padding) zwischen dem Text und dem Kasten.
Nach der Dokumentation von <code>\box</code> hat der Befehl eine
<code>box-padding</code>-Eigenschaft, die den Standardwert von 0.2 hat.  Die
Dokumentation zeit auch, wir man den Wert verändert:
</p>
<blockquote><pre class="verbatim">\markup \box \override #'(box-padding . 0.6) \box A
</pre><p>
 <a href="81/lily-7d9eea09.ly">
  <img align="middle"
       border="0"
       src="81/lily-7d9eea09.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Auch der Abstand zwischen den zwei Kästen ist uns zu klein und soll auch
vergrößert werden:
</p>
<blockquote><pre class="verbatim">\markup \override #'(box-padding . 0.4) \box
    \override #'(box-padding . 0.6) \box A
</pre><p>
 <a href="47/lily-5042b2e0.ly">
  <img align="middle"
       border="0"
       src="47/lily-5042b2e0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Diese lange Textbeschriftung immer wieder schreiben zu müssen, ist
anstrengend.  Hier kömmt ein Textbeschriftungsbefehl ins Spiel.  Wir
schreiben uns alle einen <code>double-box</code>-Beschriftungsbefehl, der
ein Argument annimmt (den Text).  Er zeichnet zwei Kästen mit genügend Abstand:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">#(define-markup-command (double-box layout props text) (markup?)
  &quot;Draw a double box around text.&quot;
  (interpret-markup layout props
    #{\markup \override #'(box-padding . 0.4) \box
            \override #'(box-padding . 0.6) \box { #text }#}))
</pre></td></tr></table>

<p>oder äquivalent
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">#(define-markup-command (double-box layout props text) (markup?)
  &quot;Draw a double box around text.&quot;
  (interpret-markup layout props
    (markup #:override '(box-padding . 0.4) #:box
            #:override '(box-padding . 0.6) #:box text)))
</pre></td></tr></table>

<p><code>text</code> ist die Bezeichnung des Arguments dieses Befehls,
und <code>markup?</code> ist seine Art: hiermit wird der Befehl als
Beschriftungsbefehl identifiziert.  Die <code>interpret-markup</code>-Funktion
wird in den meisten Beschriftungsbefehlen benutzt: sie erstellt einen
Stencil, wobei <code>layout</code>, <code>props</code> und eine Beschriftung benutzt
werden.  Im zweiten Fall wird diese Beschriftung durch das
<code>markup</code>-Scheme-Makro erstellt, siehe auche
<a href="#markup-construction-in-scheme">Beschriftungskonstruktionen in Scheme</a>.
Die Transformation des <code>\markup</code>-Ausdrucks in einen
Scheme-Beschriftungsausdruck geschieht durch Umschreiben des LilyPond-Codes
in Scheme-Code.
</p>
<p>Der neue Befehl kann wie folgt benutzt werden:
</p>
<blockquote><pre class="example">\markup \double-box A
</pre></blockquote>

<p>Es wäre schön, den <code>double-box</code>-Befehl noch konfigurierbar zu gestalten:
in unserem Fall sind die Werte von <code>box-padding</code> direkt definiert und
können nicht mehr vom Benutzer verändert werden.  Es wäre auch besser, wenn
der Abstand zwischen den beiden Kästen vom Abstand zwischen dem inneren Kasten
und dem Text unterschieden werden könnte.  Eine neue Eigenschaft muss also
definiert werden: <code>inter-box-padding</code> für den Abstand zwischen den Kästen.
<code>box-padding</code> wird für den inneren Abstand benutzt.  Der neue Befehl wird
so definiert:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">#(define-markup-command (double-box layout props text) (markup?)
  #:properties ((inter-box-padding 0.4)
                (box-padding 0.6))
  &quot;Draw a double box around text.&quot;
  (interpret-markup layout props
    #{\markup \override #`(box-padding . ,inter-box-padding) \box
               \override #`(box-padding . ,box-padding) \box
               { #text } #}))
</pre></td></tr></table>

<p>Wiederum wäre die entsprechende Version mit dem <code>markup</code>-Makro
so aussehen:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">#(define-markup-command (double-box layout props text) (markup?)
  #:properties ((inter-box-padding 0.4)
                (box-padding 0.6))
  &quot;Draw a double box around text.&quot;
  (interpret-markup layout props
    (markup #:override `(box-padding . ,inter-box-padding) #:box
            #:override `(box-padding . ,box-padding) #:box text)))
</pre></td></tr></table>

<p>In diesem Code wird das <code>#:properties</code>-Schlüsselwort benutzt, sodass
die Eigenschaften <code>inter-box-padding</code> und <code>box-padding</code> aus dem
<code>props</code>-Argument ausgelesen werden, und Standardwerte werden gegeben,
falls die Eigenschaften nicht definiert sein sollten.
</p>
<p>Dann werden diese Werte benutzt, um die <code>box-padding</code>-Eigenschaft
zu verändert, die von beiden <code>\box</code>-Befehlen benutzt wird.  Beachten
Sie Akzent und das Komma des <code>\override</code>-Arguments: hiermit kann man
einen Variablenwert in einen wörtlichen Ausdruck überführen.
</p>
<p>Jetzt kann der Befehl in Beschriftungen benutzt werden und der Abstand
der Kästen kann angepasst werden:
</p>
<blockquote><pre class="verbatim">#(define-markup-command (double-box layout props text) (markup?)
  #:properties ((inter-box-padding 0.4)
                (box-padding 0.6))
  &quot;Draw a double box around text.&quot;
  (interpret-markup layout props
    #{\markup \override #`(box-padding . ,inter-box-padding) \box
              \override #`(box-padding . ,box-padding) \box
              { #text } #}))

\markup \double-box A
\markup \override #'(inter-box-padding . 0.8) \double-box A
\markup \override #'(box-padding . 1.0) \double-box A
</pre><p>
 <a href="94/lily-b1443df4.ly">
  <img align="middle"
       border="0"
       src="94/lily-b1443df4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Eingebaute-Befehle-anpassen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#a-complete-example" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Ein vollständiges Bespiel&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#new-markup-command-definition" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Neue Definitionen von Beschriftungsbefehlen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#new-markup-list-command-definition" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Neue Definitionen von Beschriftungslistenbefehlen &gt; </a>]</td></tr></table>
<a name="adapting-builtin-commands"></a>
<h4 class="unnumberedsubsubsec">Eingebaute Befehle anpassen</h4>

<p>Ein guter Weg, einen neuen Beschriftungsbefehl zu schreiben, ist es, als Vorbild
einen existierenden zu nehmen.  Die meisten Beschriftungsbefehle, die
LilyPond mitbringt, finden sich in der Datei
&lsquo;<tt>scm/define-markup-commands.scm</tt>&rsquo;.
</p>
<p>Man könnte beispielsweise den Befehl <code>\draw-line</code>, der eine Linie
zeichnet, anpassen, sodass er eine Doppellinie zeichnet.  Der
Befehl <code>\draw-line</code> ist wie folgend definiert (Dokumentation entfernt):
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(define-markup-command (draw-line layout props dest)
  (number-pair?)
  #:category graphic
  #:properties ((thickness 1))
  &quot;..documentation..&quot;
  (let ((th (* (ly:output-def-lookup layout 'line-thickness)
               thickness))
        (x (car dest))
        (y (cdr dest)))
    (make-line-stencil th 0 0 x y)))
</pre></td></tr></table>

<p>Um einen neuen Befehl, der auf einem existierenden basiert, zu definieren,
wird die Befehlsdefinition kopiert und die Bezeichnung des Befehls
geändert.  Das <code>#:category</code>-Schlagwort kann entfernt werden,
weil es nur zur Erstellung der LilyPond-Dokumentation eingesetzt wird
und keine Bedeutung für selbstdefinierte Befehle hat.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(define-markup-command (draw-double-line layout props dest)
  (number-pair?)
  #:properties ((thickness 1))
  &quot;..documentation..&quot;
  (let ((th (* (ly:output-def-lookup layout 'line-thickness)
               thickness))
        (x (car dest))
        (y (cdr dest)))
    (make-line-stencil th 0 0 x y)))
</pre></td></tr></table>

<p>Dann braucht man eine Eigenschaft, um den Abstand zwischen den zwei
Linien zu definieren, als <code>line-gap</code> bezeichnet und etwa mit
dem Standardwert 0.6:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(define-markup-command (draw-double-line layout props dest)
  (number-pair?)
  #:properties ((thickness 1)
                (line-gap 0.6))
  &quot;..documentation..&quot;
  ...
</pre></td></tr></table>

<p>Schließlich wird der Code, der die zwei Linien zeichnet, hinzugefügt.
Zwei Aufrufe an <code>make-line-stencil</code> werden benutzt, um beide Linien
zu zeichnen, und die beiden sich daraus ergebenden Stencils werden mit
<code>ly:stencil-add</code> kombiniert:
</p>
<blockquote><pre class="verbatim">#(define-markup-command (my-draw-line layout props dest)
  (number-pair?)
  #:properties ((thickness 1)
                (line-gap 0.6))
  &quot;..documentation..&quot;
  (let* ((th (* (ly:output-def-lookup layout 'line-thickness)
                thickness))
         (dx (car dest))
         (dy (cdr dest))
         (w (/ line-gap 2.0))
         (x (cond ((= dx 0) w)
                  ((= dy 0) 0)
                  (else (/ w (sqrt (+ 1 (* (/ dx dy) (/ dx dy))))))))
         (y (* (if (&lt; (* dx dy) 0) 1 -1)
               (cond ((= dy 0) w)
                     ((= dx 0) 0)
                     (else (/ w (sqrt (+ 1 (* (/ dy dx) (/ dy dx))))))))))
     (ly:stencil-add (make-line-stencil th x y (+ dx x) (+ dy y))
                     (make-line-stencil th (- x) (- y) (- dx x) (- dy y)))))

\markup \my-draw-line #'(4 . 3)
\markup \override #'(line-gap . 1.2) \my-draw-line #'(4 . 3)
</pre><p>
 <a href="f2/lily-ee1c28e4.ly">
  <img align="middle"
       border="0"
       src="f2/lily-ee1c28e4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>





<hr size="6">
<a name="Neue-Definitionen-von-Beschriftungslistenbefehlen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#adapting-builtin-commands" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Eingebaute Befehle anpassen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#markup-functions" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Textbeschriftungsfunktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#contexts-for-programmers" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Kontexte für Programmierer &gt; </a>]</td></tr></table>
<a name="new-markup-list-command-definition"></a>
<h3 class="subsection">2.5.4 Neue Definitionen von Beschriftungslistenbefehlen</h3>

<p>Beschriftungslistenbefehle können mit dem Scheme-Makro
<code>define-markup-list-command</code> definiert werden, welches
sich ähnlich verhält wie das
<code>define-markup-command</code>-Makro, das schon beschrieben
wurde in <a href="#new-markup-command-definition">Neue Definitionen von Beschriftungsbefehlen</a>.  Ein Unterschied
ist, dass bei diesem Listen-Makro eine ganze Liste an
Stencils ausgegeben wird.
</p>
<p>Im folgenden Beispiel wird ein <code>\paragraph</code>-Beschriftungslistenbefehl
definiert, welcher eine Liste von Zeilen im Blocksatz ausgibt, von
denen die erste Zeile eingerückt ist.  Der Einzug wird aus dem
<code>props</code>-Argument entnommen.
</p>
<blockquote><pre class="example">#(define-markup-list-command (paragraph layout props args) (markup-list?)
   #:properties ((par-indent 2))
   (interpret-markup-list layout props
     #{\markuplist \justified-lines { \hspace #par-indent #args } #}))
</pre></blockquote>

<p>Die Version nur in Scheme ist etwas komplexer:
</p>
<blockquote><pre class="example">#(define-markup-list-command (paragraph layout props args) (markup-list?)
   #:properties ((par-indent 2))
   (interpret-markup-list layout props
     (make-justified-lines-markup-list (cons (make-hspace-markup par-indent)
                                             args))))
</pre></blockquote>

<p>Neben den üblichen <code>layout</code> und <code>props</code>-Argumenten nimmt der
<code>paragraph</code>-Beschriftungslistenbefehl als Argument eine Beschriftungsliste,
die <code>args</code> genannt wird.  Das Prädikat für Beschriftungslisten ist
<code>markup-list?</code>.
</p>
<p>Zuerst errechnet die Funktion die Breite des Einzugs, eine Eigenschaft
mit der Bezeichnung <code>par-indent</code> anhand der Eigenschaftsliste
<code>props</code>.  Wenn die Eigenschaft nicht gefunden wird, ist der
Standardwert <code>2</code>.  Danach wird eine Liste von Zeilen im Blocksatz
erstellt, wobei der eingebaute <code>\justified-lines</code>-Beschriftungslistenbefehl
eingesetzt wird, der verwandt ist mit der
<code>make-justified-lines-markup-list</code>-Funktion.  Horizontaler
Platz wird zu Beginn eingefügt mit <code>\hspace</code> (oder der
<code>make-hspace-markup</code>-Funktion).  Zuletzt wird die Beschriftungsliste
ausgewertet durch die <code>interpret-markup-list</code>-Funktion.
</p>
<p>Dieser neue Beschriftungslistenbefehl kann wie folgt benutzt werden:
</p>
<blockquote><pre class="example">\markuplist {
  \paragraph {
    Die Kunst des Notensatzes wird auch als \italic {Notenstich} bezeichnet. Dieser
    Begriff stammt aus dem traditionellen Notendruck. Noch bis vor etwa
    20 Jahren wurden Noten erstellt, indem man sie in eine Zink- oder
    Zinnplatte schnitt oder mit Stempeln schlug.
  }
  \override-lines #'(par-indent . 4) \paragraph {
    Diese Platte wurde dann mit Druckerschwärze versehen, so dass sie
    in den geschnittenen und gestempelten Vertiefungen blieb. Diese
    Vertiefungen schwärzten dann ein auf die Platte gelegtes Papier.
    Das Gravieren wurde vollständig von Hand erledigt.
  }
}
</pre></blockquote>


<hr size="6">
<a name="Kontexte-f_00fcr-Programmierer"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#new-markup-list-command-definition" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Neue Definitionen von Beschriftungslistenbefehlen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#context-evaluation" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Kontextauswertung &gt; </a>]</td></tr></table>
<a name="contexts-for-programmers"></a>
<h2 class="section">2.6 Kontexte für Programmierer</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#context-evaluation" accesskey="1">2.6.1 Kontextauswertung</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#running-a-function-on-all-layout-objects" accesskey="2">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Kontextauswertung"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#contexts-for-programmers" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Kontexte für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Kontexte für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#running-a-function-on-all-layout-objects" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Eine Funktion auf alle Layout-Objekte anwenden &gt; </a>]</td></tr></table>
<a name="context-evaluation"></a>
<h3 class="subsection">2.6.1 Kontextauswertung</h3>

<a name="index-Aufrufen-von-Code-wahrend-der-Interpretation"></a>
<a name="index-On_002dthe_002dfly-Code-ausfuhren"></a>

<a name="index-_005capplyContext"></a>
<a name="index-_005capplyContext-1"></a>

<p>Kontexte können während ihrer Interpretation mit Scheme-Code
modifiziert werden.  Die Syntax hierfür ist
</p>
<blockquote><pre class="example">\applyContext <var>function</var>
</pre></blockquote>

<p><var>function</var> sollte eine Scheme-Funktion sein, die ein
einziges Argument braucht, welches der Kontext ist, auf den
sie ausgeführt werden soll.  Der folgende Code schreibt
die aktuelle Taktzahl in die Standardausgabe
während der Kompilation.
</p>
<blockquote><pre class="example">\applyContext
  #(lambda (x)
    (format #t &quot;\nWe were called in barnumber ~a.\n&quot;
     (ly:context-property x 'currentBarNumber)))
</pre></blockquote>



<hr size="6">
<a name="Eine-Funktion-auf-alle-Layout_002dObjekte-anwenden"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#context-evaluation" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Kontextauswertung&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#contexts-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Kontexte für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#callback-functions" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Callback-Funktionen &gt; </a>]</td></tr></table>
<a name="running-a-function-on-all-layout-objects"></a>
<h3 class="subsection">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</h3>


<a name="index-Aufruf-von-Code-fur-Layoutobjekte"></a>

<a name="index-_005capplyOutput"></a>
<a name="index-_005capplyOutput-1"></a>

<p>Der vielfältigste Weg, ein Objekt zu beeinflussen, ist
<code>\applyOutput</code>.  Das funktioniert, indem ein musikalisches
Ereignis in den angegebenen Kontext eingefügt wird
(<a name="index-ApplyOutputEvent"></a>
<a href="internals-big-page.html#applyoutputevent">ApplyOutputEvent</a>).  Die Syntax lautet:
</p>
<blockquote><pre class="example">\applyOutput <var>Kontext</var> <var>proc</var>
</pre></blockquote>

<p>wobei <var>proc</var> eine Scheme-Funktion ist, die drei Argumente
benötigt.
</p>
<p>Während der Interpretation wird die Funktion <code><var>proc</var></code> für
jedes Layoutobjekt aufgerufen, dass im Kontext <code><var>Kontext</var></code>
vorgefunden wird, und zwar mit folgenden Argumenten:
</p>
<ul>
<li> dem Layoutobjekt
</li><li> dem Kontext, in dem das Objekt erstellt wurde
</li><li> dem Kontext, in welchem <code>\applyOutput</code> bearbeitet wird.
</li></ul>

<p>Zusätzlich findet sich der Grund für das Layoutobjekt, etwa
der musikalische Ausdruck oder das Objekt, das für seine Erstellung
verantwortlich war, in der Objekteigenschaft <code>cause</code>.
Für einen Notenkopf beispielsweise ist das ein
<a name="index-NoteHead"></a>
<a href="internals-big-page.html#notehead">NoteHead</a>-Ereignis, und für einen Notenhals ist es
ein <a name="index-Stem"></a>
<a href="internals-big-page.html#stem">Stem</a>-Objekt.
</p>
<p>Hier ist eine Funktion, die mit <code>\applyOutput</code> benutzt
werden kann; sie macht Notenköpfe auf und neben der Mittellinie unsichtbar:
</p>
<blockquote><pre class="verbatim">#(define (blanker grob grob-origin context)
   (if (and (memq 'note-head-interface (ly:grob-interfaces grob))
            (&lt; (abs (ly:grob-property grob 'staff-position)) 2))
       (set! (ly:grob-property grob 'transparent) #t)))

\relative {
  a'4 e8 &lt;&lt;\applyOutput Voice #blanker a c d&gt;&gt; b2
}
</pre><p>
 <a href="73/lily-2db4fc6d.ly">
  <img align="middle"
       border="0"
       src="73/lily-2db4fc6d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Callback_002dFunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#running-a-function-on-all-layout-objects" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Eine Funktion auf alle Layout-Objekte anwenden&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#inline-scheme-code" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Scheme-Code innerhalb LilyPonds &gt; </a>]</td></tr></table>
<a name="callback-functions"></a>
<h2 class="section">2.7 Callback-Funktionen</h2>

<p>Eigenschaften (wie Dicke (<code>thickness</code>), Richtung (<code>direction</code>)
usw.) können mit <code>\override</code> auf feste Werte gesetzt werden, etwa:
</p>
<blockquote><pre class="example">\override Stem.thickness = #2.0
</pre></blockquote>

<p>Eigenschaften können auch auf eine Scheme-Prozedur gesetzt werden:
</p>
<blockquote><pre class="verbatim">\override Stem.thickness = #(lambda (grob)
    (if (= UP (ly:grob-property grob 'direction))
        2.0
        7.0))
\relative { c'' b a g b a g b }
</pre><p>
 <a href="b8/lily-edb9a4ad.ly">
  <img align="middle"
       border="0"
       src="b8/lily-edb9a4ad.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>In diesem Fall wird die Prozedur ausgeführt, sobald der Wert der
Eigenschaft während das Formatierungsprozesses angefordert wird.
</p>
<p>Der größte Teil der Satzmaschinierie funktioniert mit derartigen
Callbacks.  Eigenschaften, die üblicherweise Callbacks
benutzen, sind u. A.:
</p>
<dl compact="compact">
<dt> <code>stencil</code></dt>
<dd><p>  Die Druckfunktion, die eine Ausgabe des Symbols hervorruft
</p></dd>
<dt> <code>X-offset</code></dt>
<dd><p>  Die Funktion, die die horizontale Position setzt
</p></dd>
<dt> <code>X-extent</code></dt>
<dd><p>  Die Funktion, die die Breite eines Objekts errechnet
</p></dd>
</dl>

<p>Die Funktionen brauchen immer ein einziges Argument, das der
Grob ist.
</p>
<p>Wenn Funktionen mit mehreren Argumenten aufgerufen werden müssen,
kann der aktuelle Grob mit einer Grob-Einschließung
eingefügt werden.  Hier eine Einstellung aus
<code>AccidentalSuggestion</code>:
</p>
<blockquote><pre class="example">(X-offset .
  ,(ly:make-simple-closure
    `(,+
        ,(ly:make-simple-closure
           (list ly:self-alignment-interface::centered-on-x-parent))
      ,(ly:make-simple-closure
           (list ly:self-alignment-interface::x-aligned-on-self)))))
</pre></blockquote>

<p>In diesem Beispiel werden sowohl <code>ly:self-alignment-interface::x-aligned-on-self</code>
als auch <code>ly:self-alignment-interface::centered-on-x-parent</code>
mit dem Grob als Argument aufgerufen.  Die Resultate werden mit der
<code>+</code>-Funktion addiert.  Um sicherzugehen, dass die Addition
richtig ausgeführt wird, wird das ganze Konstrukt in
<code>ly:make-simple-closure</code> eingeschlossen.
</p>
<p>In der Tat ist die Benutzung einer einzelnen Funktion als
Eigenschaftswert äquivalent zu
</p>
<blockquote><pre class="example">(ly:make-simple-closure (ly:make-simple-closure (list <var>proc</var>)))
</pre></blockquote>

<p>Das innere <code>ly:make-simple-closure</code> stellt den Grob als Argument
für <var>proc</var> zur Verfügung, das äußere stellt sicher, dass das
Resultat der Funktion ausgegeben wird und nicht das
<code>simple-closure</code>-Objekt.
</p>
<p>Aus dem Callback heraus kann man eine Beschriftung am einfachsten mit
<code>grob-interpret-markup</code> auswerten.  Beispielsweise:
</p>
<blockquote><pre class="example">mein-callback = #(lambda (grob)
                 (grob-interpret-markup grob (markup &quot;foo&quot;)))
</pre></blockquote>


<hr size="6">
<a name="Scheme_002dCode-innerhalb-LilyPonds"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#callback-functions" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Callback-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#difficult-tweaks" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Schwierige Korrekturen &gt; </a>]</td></tr></table>
<a name="inline-scheme-code"></a>
<h2 class="section">2.8 Scheme-Code innerhalb LilyPonds</h2>

<p>TODO: das Beispiel für diesen Abschnitt ist nicht gut gewähtl:
</p>
<blockquote><pre class="example">F = -\tweak font-size #-3 -\flageolet
</pre></blockquote>
<p>(beachte &lsquo;<samp>-</samp>&rsquo;, was ein Nachereignis anzeigt) funktioniert
für den geschilderten Zweck sehr gut.  Aber bis der Abschnitt
neu geschrieben wird, nehmen wir einfach an, dass wir das nicht
wissen.
</p>
<p>Der hauptsächliche Nachteil von <code>\tweak</code> ist seine
syntaktische Inflexibilität.  Folgender Code beispielsweise
ergibt einen Syntaxfehler:
</p>
<blockquote><pre class="example">F = \tweak font-size #-3 -\flageolet

\relative {
  c''4^\F c4_\F
}
</pre></blockquote>

<p>Durch die Verwendung von Scheme kann dieses Problem umgangen werden.
Der Weg zum Resultat wird gezeigt in
<a href="#adding-articulation-to-notes-_0028example_0029">Artikulationszeichen zu Noten hinzufügen (Beispiel)</a>, insbesondere
wie <code>\displayMusic</code> benutzt wird, hilft hier weiter.
</p>
<blockquote><pre class="example">F = #(let ((m (make-music 'ArticulationEvent
                          'articulation-type &quot;flageolet&quot;)))
       (set! (ly:music-property m 'tweaks)
             (acons 'font-size -3
                    (ly:music-property m 'tweaks)))
       m)

\relative {
  c''4^\F c4_\F
}
</pre></blockquote>

<p>In diesem Beispiel werden die <code>tweaks</code>-Eigenschaften
des Flageolet-Objekts <code>m</code> (mit <code>make-music</code> erstellt)
werden mit <code>ly:music-property</code> ausgelesen, ein neues
Schlüssel-Wert-Paar, um die Schriftgröße zu ändern, wird
der Eigenschaftenliste mithilfe der <code>acons</code>-Schemefunktion
vorangestellt, und das Resultat wird schließlich mit
<code>set!</code> zurückgeschrieben.  Das letzte Element des
<code>let</code>-Blocks ist der Wiedergabewert, <code>m</code>.
</p>


<hr size="6">
<a name="Schwierige-Korrekturen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-scheme-interfaces" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#inline-scheme-code" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Code innerhalb LilyPonds&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#interfaces-for-programmers" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-scheme-interfaces" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;LilyPond Scheme-Schnittstellen &gt; </a>]</td></tr></table>
<a name="difficult-tweaks"></a>
<h2 class="section">2.9 Schwierige Korrekturen</h2>

<p>Hier finden sich einige Klassen an schwierigeren Anpassungen.
</p>
<ul>
<li>
Ein Typ der schwierigen Anpassungen ist die Erscheinung von
Strecker-Objekten wie Binde- oder Legatobögen.  Zunächst wird
nur eins dieser Objekte erstellt, und sie können mit dem
normalen Mechanismus verändert werden.  In einigen Fällen
reichen die Strecker jedoch über Zeilenumbrüche.  Wenn das
geschieht, werden diese Objekte geklont.  Ein eigenes
Objekt wird für jedes System erstellt, in dem es sich befindet.
Sie sind Klone des originalen Objektes und erben alle
Eigenschaften, auch <code>\override</code>-Befehle.

<p>Anders gesagt wirkt sich ein <code>\override</code> immer auf alle
Stücke eines geteilten Streckers aus.  Um nur einen Teil eines
Streckers bei einem Zeilenumbruch zu verändern, ist es notwendig,
in den Formatierungsprozess einzugreifen.  Das Callback
<code>after-line-breaking</code> enthält die Schemefunktion, die
aufgerufen wird, nachdem Zeilenumbrüche errechnet worden sind
und die Layout-Objekte über die unterschiedlichen Systeme verteilt
wurden.
</p>
<p>Im folgenden Beispiel wird die Funktion
<code>my-callback</code> definiert.  Diese Funktion
</p>
<ul>
<li>
bestimmt, ob das Objekt durch Zeilenumbrüche geteilt ist,
</li><li>
wenn ja, ruft sie alle geteilten Objekte auf,
</li><li>
testet, ob es sich um das letzte der geteilten Objekte handelt,
</li><li>
wenn ja, wird <code>extra-offset</code> gesetzt.
</li></ul>

<p>Diese Funktion muss in <a name="index-Tie"></a>
<a href="internals-big-page.html#tie">Tie</a> (Bindebogen) installiert
werden, damit der letzte Teil eines gebrochenen Bindebogens
neu ausgerichtet wird.
</p>
<blockquote><pre class="verbatim">#(define (my-callback grob)
  (let* (
         ; have we been split?
         (orig (ly:grob-original grob))

         ; if yes, get the split pieces (our siblings)
         (siblings (if (ly:grob? orig)
                     (ly:spanner-broken-into orig) '() )))

   (if (and (&gt;= (length siblings) 2)
             (eq? (car (last-pair siblings)) grob))
     (ly:grob-set-property! grob 'extra-offset '(-2 . 5)))))

\relative {
  \override Tie.after-line-breaking =
  #my-callback
  c''1 ~ \break c2 ~ 2
}
</pre><p>
 <a href="a7/lily-0e536513.ly">
  <img align="middle"
       border="0"
       src="a7/lily-0e536513.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Wenn man diesen Trick anwendet, sollte das neue <code>after-line-breaking</code>
auch das alte <code>after-line-breaking</code>-Callback aufrufen,
wenn es vorhanden ist.  Wenn diese Funktion etwa mit
<code>Hairpin</code> (Crescendo-Klammer) eingesetzt wird, sollte auch
<code>ly:spanner::kill-zero-spanned-time</code> aufgerufen werden.
</p>

</li><li>
Manche Objekte können aus technischen Gründen nicht mit <code>\override</code>
verändert werden.  Beispiele hiervon sind <code>NonMusicalPaperColumn</code>
und <code>PaperColumn</code>.  Sie können mit der
<code>\overrideProperty</code>-Funktion geändert werden, die ähnlich wie
<code>\once \override</code> funktioniert, aber eine andere Syntax einsetzt.

<blockquote><pre class="example">\overrideProperty
Score.NonMusicalPaperColumn  % Grob-Bezeichnung
#'line-break-system-details     % Eigenschaftsbezeichnung
#'((next-padding . 20))         % Wert
</pre></blockquote>

<p>Es sollte angemerkt werden, dass <code>\override</code>, wenn man es auf
<code>NonMusicalPaperColumn</code> und <code>PaperColumn</code> anwendet, immer noch
innerhalb der <code>\context</code>-Umgebung funktioniert.
</p>
</li></ul>



<hr size="6">
<a name="LilyPond-Scheme_002dSchnittstellen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#interfaces-for-programmers" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#gnu-free-documentation-license" title="N&auml;chstes Kapitel">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#difficult-tweaks" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Schwierige Korrekturen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#gnu-free-documentation-license" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;GNU Free Documentation License &gt; </a>]</td></tr></table>
<a name="lilypond-scheme-interfaces"></a>
<h1 class="chapter">3. LilyPond Scheme-Schnittstellen</h1>

<p>Dieses Kapitel behandelt die verschiedenen Werkzeuge, die LilyPond als
Hilfe für Scheme-Programmierer zur Verfügung stellt, um Information in
den Musik-Stream zu senden und aus ihm herauszubekommen.
</p>
<p>TODO: was gehört hier eigentlich hin?
</p>
<hr size="6">
<a name="GNU-Free-Documentation-License"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#lilypond-scheme-interfaces" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; LilyPond Scheme-Schnittstellen&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#lilypond-index" title="N&auml;chstes Kapitel">&nbsp;LilyPond-Index &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond-scheme-interfaces" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; LilyPond Scheme-Schnittstellen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond-index" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;LilyPond-Index &gt; </a>]</td></tr></table>
<a name="gnu-free-documentation-license"></a>
<h1 class="appendix">A. GNU Free Documentation License</h1>
<p align="center"> Version 1.3, 3 November 2008
</p>

<table><tr><td>&nbsp;</td><td><pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="http://fsf.org">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></table>

<ol>
<li>
PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li>
APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li>
VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li>
COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li>
MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol>
<li>
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li>
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li>
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li>
Preserve all the copyright notices of the Document.

</li><li>
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li>
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li>
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li>
Include an unaltered copy of this License.

</li><li>
Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li>
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li>
For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li>
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li>
Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li>
Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li>
Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li>
COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li>
COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li>
AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li>
TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li>
TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.
</p>
</li><li>
FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy&rsquo;s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.
</p>
</li><li>
RELICENSING

<p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.
</p>
<p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
</p>
<p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.
</p>
<p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.
</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.
</p>
</li></ol>


<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h2 class="heading">ADDENDUM: How to use this License for your documents</h2>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></td></tr></table>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with&hellip;Texts.&rdquo; line with this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></td></tr></table>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>


<hr size="6">
<a name="LilyPond_002dIndex"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#gnu-free-documentation-license" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; GNU Free Documentation License&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#gnu-free-documentation-license" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; GNU Free Documentation License&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#index" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[&nbsp; &gt; ]</td></tr></table>
<a name="lilypond-index"></a>
<h1 class="appendix">B. LilyPond-Index</h1>

<table><tr><th valign="top">Springe zu: &nbsp; </th><td><a href="#lilypond-index_cp_symbol-1" class="summary-letter"><b>#</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_symbol-2" class="summary-letter"><b>$</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_symbol-3" class="summary-letter"><b>\</b></a>
 &nbsp; 
<br>
<a href="#lilypond-index_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Indexeintrag</th><th align="left"> Abschnitt</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_symbol-1">#</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023"><code>#</code></a></td><td valign="top"><a href="#lilypond-scheme-syntax">1.2.1 LilyPond Scheme-Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023-2"><code>#</code></a></td><td valign="top"><a href="#importing-scheme-in-lilypond">1.2.4 Scheme in LilyPond importieren</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0023f"><code>##f</code></a></td><td valign="top"><a href="#scheme-simple-data-types">1.1.3 Einfache Scheme-Datentypen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0023t"><code>##t</code></a></td><td valign="top"><a href="#scheme-simple-data-types">1.1.3 Einfache Scheme-Datentypen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0040"><code>#@</code></a></td><td valign="top"><a href="#lilypond-scheme-syntax">1.2.1 LilyPond Scheme-Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0040-2"><code>#@</code></a></td><td valign="top"><a href="#importing-scheme-in-lilypond">1.2.4 Scheme in LilyPond importieren</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_symbol-2">$</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0024"><code>$</code></a></td><td valign="top"><a href="#lilypond-scheme-syntax">1.2.1 LilyPond Scheme-Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0024-2"><code>$</code></a></td><td valign="top"><a href="#importing-scheme-in-lilypond">1.2.4 Scheme in LilyPond importieren</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0024_0040"><code>$@</code></a></td><td valign="top"><a href="#lilypond-scheme-syntax">1.2.1 LilyPond Scheme-Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0024_0040-2"><code>$@</code></a></td><td valign="top"><a href="#importing-scheme-in-lilypond">1.2.4 Scheme in LilyPond importieren</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_symbol-3">\</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005capplyContext"><code>\applyContext</code></a></td><td valign="top"><a href="#context-evaluation">2.6.1 Kontextauswertung</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005capplyOutput"><code>\applyOutput</code></a></td><td valign="top"><a href="#running-a-function-on-all-layout-objects">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cdisplayLilyMusic"><code>\displayLilyMusic</code></a></td><td valign="top"><a href="#music-properties">1.3.2 Eigenschaften von Musikobjekten</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cdisplayMusic"><code>\displayMusic</code></a></td><td valign="top"><a href="#displaying-music-expressions">1.3.1 Musikalische Funktionen darstellen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoid"><code>\void</code></a></td><td valign="top"><a href="#displaying-music-expressions">1.3.1 Musikalische Funktionen darstellen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoid-2"><code>\void</code></a></td><td valign="top"><a href="#void-scheme-functions">2.2.3 Leere Scheme-Funktionen</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Anzeigen-von-Musikausdrucken">Anzeigen von Musikausdrücken</a></td><td valign="top"><a href="#displaying-music-expressions">1.3.1 Musikalische Funktionen darstellen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ApplyOutputEvent"><code>ApplyOutputEvent</code></a></td><td valign="top"><a href="#running-a-function-on-all-layout-objects">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Aufruf-von-Code-fur-Layoutobjekte">Aufruf von Code für Layoutobjekte</a></td><td valign="top"><a href="#running-a-function-on-all-layout-objects">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Aufrufen-von-Code-wahrend-der-Interpretation">Aufrufen von Code während der Interpretation</a></td><td valign="top"><a href="#context-evaluation">2.6.1 Kontextauswertung</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Auswertung-von-Scheme_002dCode">Auswertung von Scheme-Code</a></td><td valign="top"><a href="#scheme-tutorial">1. Scheme-Tutorium</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Befehle-definieren_002c-Textbeschriftung">Befehle definieren, Textbeschriftung</a></td><td valign="top"><a href="#markup-construction-in-scheme">2.5.1 Beschriftungskonstruktionen in Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Beispiele-der-Ersetzungsfunktionen"><code>Beispiele der Ersetzungsfunktionen</code></a></td><td valign="top"><a href="#simple-substitution-functions">2.3.3 Einfache Ersetzungsfunktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bezeichner-versus-Eigenschaften">Bezeichner versus Eigenschaften</a></td><td valign="top"><a href="#object-properties">1.2.5 Objekteigenschaften</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002devent_002dfunction"><code>define-event-function</code></a></td><td valign="top"><a href="#event-functions">2.4 Ereignisfunktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002dscheme_002dfunction"><code>define-scheme-function</code></a></td><td valign="top"><a href="#scheme-function-definitions">2.2.1 Definition von Scheme-Funktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002dvoid_002dfunction"><code>define-void-function</code></a></td><td valign="top"><a href="#void-scheme-functions">2.2.3 Leere Scheme-Funktionen</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-eigene-Befehle_002c-Textbeschriftung">eigene Befehle, Textbeschriftung</a></td><td valign="top"><a href="#markup-construction-in-scheme">2.5.1 Beschriftungskonstruktionen in Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Eigenschaften-versus-Bezeichner">Eigenschaften versus Bezeichner</a></td><td valign="top"><a href="#object-properties">1.2.5 Objekteigenschaften</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Ereignisfunktionen">Ereignisfunktionen</a></td><td valign="top"><a href="#event-functions">2.4 Ereignisfunktionen</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-GUILE">GUILE</a></td><td valign="top"><a href="#scheme-tutorial">1. Scheme-Tutorium</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-interne-Speicherung">interne Speicherung</a></td><td valign="top"><a href="#displaying-music-expressions">1.3.1 Musikalische Funktionen darstellen</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-K">K</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Kontexte-erstellen-und-referenzieren"><code>Kontexte erstellen und referenzieren</code></a></td><td valign="top"><a href="#adding-articulation-to-notes-_0028example_0029">1.3.4 Artikulationszeichen zu Noten hinzufügen (Beispiel)</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LilyPond-grammar"><code>LilyPond grammar</code></a></td><td valign="top"><a href="#lilypond-scheme-syntax">1.2.1 LilyPond Scheme-Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LISP">LISP</a></td><td valign="top"><a href="#scheme-tutorial">1. Scheme-Tutorium</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index"><code>Manuals</code></a></td><td valign="top"><a href="#index">LilyPond &ndash; Extending</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Manuals"><code>Manuals</code></a></td><td valign="top"><a href="#index">LilyPond &ndash; Extending</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-markup_002c-eigene-Befehle">markup, eigene Befehle</a></td><td valign="top"><a href="#markup-construction-in-scheme">2.5.1 Beschriftungskonstruktionen in Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mehr-Information"><code>Mehr Information</code></a></td><td valign="top"><a href="#scheme-sandbox">1.1.1 Scheme-Sandkasten</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Music-classes"><code>Music classes</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Music-expressions"><code>Music expressions</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Music-properties"><code>Music properties</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-musikalische-Funktionen">musikalische Funktionen</a></td><td valign="top"><a href="#music-functions">2.3 Musikalische Funktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Musikausdrucke-anzeigen">Musikausdrücke anzeigen</a></td><td valign="top"><a href="#displaying-music-expressions">1.3.1 Musikalische Funktionen darstellen</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteEvent"><code>NoteEvent</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteEvent-1"><code>NoteEvent</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead"><code>NoteHead</code></a></td><td valign="top"><a href="#running-a-function-on-all-layout-objects">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-On_002dthe_002dfly-Code-ausfuhren">On-the-fly Code ausführen</a></td><td valign="top"><a href="#context-evaluation">2.6.1 Kontextauswertung</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-RepeatedMusic"><code>RepeatedMusic</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme">Scheme</a></td><td valign="top"><a href="#scheme-tutorial">1. Scheme-Tutorium</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme_002c-in-einer-LilyPond_002dDatei">Scheme, in einer LilyPond-Datei</a></td><td valign="top"><a href="#scheme-tutorial">1. Scheme-Tutorium</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme_002dFunktionen-_0028LilyPond-syntax_0029">Scheme-Funktionen (LilyPond syntax)</a></td><td valign="top"><a href="#scheme-functions">2.2 Scheme-Funktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SequentialMusic"><code>SequentialMusic</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SimultaneousMusic"><code>SimultaneousMusic</code></a></td><td valign="top"><a href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stem"><code>Stem</code></a></td><td valign="top"><a href="#running-a-function-on-all-layout-objects">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Textbeschriftung_002c-eigene-Befehle">Textbeschriftung, eigene Befehle</a></td><td valign="top"><a href="#markup-construction-in-scheme">2.5.1 Beschriftungskonstruktionen in Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Textbeschriftungsbefehle"><code>Textbeschriftungsbefehle</code></a></td><td valign="top"><a href="#a-complete-example">Ein vollständiges Bespiel</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Textbeschriftungsbefehle_002c-definieren">Textbeschriftungsbefehle, definieren</a></td><td valign="top"><a href="#markup-construction-in-scheme">2.5.1 Beschriftungskonstruktionen in Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tie"><code>Tie</code></a></td><td valign="top"><a href="#difficult-tweaks">2.9 Schwierige Korrekturen</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="lilypond-index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vordefinierte-Typpradikate"><code>Vordefinierte Typprädikate</code></a></td><td valign="top"><a href="#scheme-function-definitions">2.2.1 Definition von Scheme-Funktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vordefinierte-Typpradikate-1"><code>Vordefinierte Typprädikate</code></a></td><td valign="top"><a href="#Siehe-auch-1">Siehe auch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vordefinierte-Typpradikate-2"><code>Vordefinierte Typprädikate</code></a></td><td valign="top"><a href="#music-function-definitions">2.3.1 Definition der musikalischen Funktionen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vordefinierte-Typpradikate-3"><code>Vordefinierte Typprädikate</code></a></td><td valign="top"><a href="#Siehe-auch">Siehe auch</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Springe zu: &nbsp; </th><td><a href="#lilypond-index_cp_symbol-1" class="summary-letter"><b>#</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_symbol-2" class="summary-letter"><b>$</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_symbol-3" class="summary-letter"><b>\</b></a>
 &nbsp; 
<br>
<a href="#lilypond-index_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#lilypond-index_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
</td></tr></table>

<hr size="6">
<a name="SEC_Contents"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td></tr></table>
<h1>Inhaltsverzeichnis</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Scheme_002dTutorium-1" href="#scheme-tutorial">1. Scheme-Tutorium</a>
  <ul class="toc">
    <li><a name="toc-Einleitung-in-Scheme-1" href="#introduction-to-scheme">1.1 Einleitung in Scheme</a>
    <ul class="toc">
      <li><a name="toc-Scheme_002dSandkasten-1" href="#scheme-sandbox">1.1.1 Scheme-Sandkasten</a></li>
      <li><a name="toc-Scheme_002dVariablen-1" href="#scheme-variables">1.1.2 Scheme-Variablen</a></li>
      <li><a name="toc-Einfache-Scheme_002dDatentypen-1" href="#scheme-simple-data-types">1.1.3 Einfache Scheme-Datentypen</a></li>
      <li><a name="toc-Zusammengesetzte-Scheme_002dDatentypen-1" href="#scheme-compound-data-types">1.1.4 Zusammengesetzte Scheme-Datentypen</a></li>
      <li><a name="toc-Berechnungen-in-Scheme-1" href="#calculations-in-scheme">1.1.5 Berechnungen in Scheme</a></li>
      <li><a name="toc-Scheme_002dProzeduren-1" href="#scheme-procedures">1.1.6 Scheme-Prozeduren</a></li>
      <li><a name="toc-Scheme_002dKonditionale-1" href="#scheme-conditionals">1.1.7 Scheme-Konditionale</a></li>
    </ul></li>
    <li><a name="toc-Scheme-in-LilyPond-1" href="#scheme-in-lilypond">1.2 Scheme in LilyPond</a>
    <ul class="toc">
      <li><a name="toc-LilyPond-Scheme_002dSyntax-1" href="#lilypond-scheme-syntax">1.2.1 LilyPond Scheme-Syntax</a></li>
      <li><a name="toc-LilyPond_002dVariablen-1" href="#lilypond-variables">1.2.2 LilyPond-Variablen</a></li>
      <li><a name="toc-Eingabe_002dVariablen-und-Scheme-1" href="#input-variables-and-scheme">1.2.3 Eingabe-Variablen und Scheme</a></li>
      <li><a name="toc-Scheme-in-LilyPond-importieren-1" href="#importing-scheme-in-lilypond">1.2.4 Scheme in LilyPond importieren</a></li>
      <li><a name="toc-Objekteigenschaften-1" href="#object-properties">1.2.5 Objekteigenschaften</a></li>
      <li><a name="toc-Zusammengesetzte-LilyPond_002dVariablen-1" href="#lilypond-compound-variables">1.2.6 Zusammengesetzte LilyPond-Variablen</a></li>
      <li><a name="toc-Interne-musikalische-Reprasentation" href="#internal-music-representation">1.2.7 Interne musikalische Repräsentation</a></li>
    </ul></li>
    <li><a name="toc-Komplizierte-Funktionen-erstellen-1" href="#building-complicated-functions">1.3 Komplizierte Funktionen erstellen</a>
    <ul class="toc">
      <li><a name="toc-Musikalische-Funktionen-darstellen-1" href="#displaying-music-expressions">1.3.1 Musikalische Funktionen darstellen</a></li>
      <li><a name="toc-Eigenschaften-von-Musikobjekten-1" href="#music-properties">1.3.2 Eigenschaften von Musikobjekten</a></li>
      <li><a name="toc-Verdoppelung-einer-Note-mit-Bindebogen-_0028Beispiel_0029" href="#doubling-a-note-with-slurs-_0028example_0029">1.3.3 Verdoppelung einer Note mit Bindebögen (Beispiel)</a></li>
      <li><a name="toc-Artikulationszeichen-zu-Noten-hinzufugen-_0028Beispiel_0029" href="#adding-articulation-to-notes-_0028example_0029">1.3.4 Artikulationszeichen zu Noten hinzufügen (Beispiel)</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Schnittstellen-fur-Programmierer" href="#interfaces-for-programmers">2. Schnittstellen für Programmierer</a>
  <ul class="toc">
    <li><a name="toc-LilyPond_002dCodeabschnitte-1" href="#lilypond-code-blocks">2.1 LilyPond-Codeabschnitte</a></li>
    <li><a name="toc-Scheme_002dFunktionen-1" href="#scheme-functions">2.2 Scheme-Funktionen</a>
    <ul class="toc">
      <li><a name="toc-Definition-von-Scheme_002dFunktionen-1" href="#scheme-function-definitions">2.2.1 Definition von Scheme-Funktionen</a></li>
      <li><a name="toc-Benutzung-von-Scheme_002dFunktionen-1" href="#scheme-function-usage">2.2.2 Benutzung von Scheme-Funktionen</a></li>
      <li><a name="toc-Leere-Scheme_002dFunktionen-1" href="#void-scheme-functions">2.2.3 Leere Scheme-Funktionen</a></li>
    </ul></li>
    <li><a name="toc-Musikalische-Funktionen-1" href="#music-functions">2.3 Musikalische Funktionen</a>
    <ul class="toc">
      <li><a name="toc-Definition-der-musikalischen-Funktionen-1" href="#music-function-definitions">2.3.1 Definition der musikalischen Funktionen</a></li>
      <li><a name="toc-Benutzung-von-musikalischen-Funktionen-1" href="#music-function-usage">2.3.2 Benutzung von musikalischen Funktionen</a></li>
      <li><a name="toc-Einfache-Ersetzungsfunktionen-1" href="#simple-substitution-functions">2.3.3 Einfache Ersetzungsfunktionen</a></li>
      <li><a name="toc-Mittlere-Ersetzungsfunktionen-1" href="#intermediate-substitution-functions">2.3.4 Mittlere Ersetzungsfunktionen</a></li>
      <li><a name="toc-Mathematik-in-Funktionen-1" href="#mathematics-in-functions">2.3.5 Mathematik in Funktionen</a></li>
      <li><a name="toc-Funktionen-ohne-Argumente-1" href="#functions-without-arguments">2.3.6 Funktionen ohne Argumente</a></li>
      <li><a name="toc-Leere-musikalische-Funktionen-1" href="#void-music-functions">2.3.7 Leere musikalische Funktionen</a></li>
    </ul></li>
    <li><a name="toc-Ereignisfunktionen-1" href="#event-functions">2.4 Ereignisfunktionen</a></li>
    <li><a name="toc-Textbeschriftungsfunktionen-1" href="#markup-functions">2.5 Textbeschriftungsfunktionen</a>
    <ul class="toc">
      <li><a name="toc-Beschriftungskonstruktionen-in-Scheme-1" href="#markup-construction-in-scheme">2.5.1 Beschriftungskonstruktionen in Scheme</a></li>
      <li><a name="toc-Wie-Beschriftungen-intern-funktionieren-1" href="#how-markups-work-internally">2.5.2 Wie Beschriftungen intern funktionieren</a></li>
      <li><a name="toc-Neue-Definitionen-von-Beschriftungsbefehlen-1" href="#new-markup-command-definition">2.5.3 Neue Definitionen von Beschriftungsbefehlen</a>
      <ul class="toc">
        <li><a name="toc-Syntax-der-Definition-von-Textbeschriftungsbefehlen-1" href="#markup-command-definition-syntax">Syntax der Definition von Textbeschriftungsbefehlen</a></li>
        <li><a name="toc-Uber-Eigenschaften" href="#on-properties">Über Eigenschaften</a></li>
        <li><a name="toc-Ein-vollstandiges-Bespiel" href="#a-complete-example">Ein vollständiges Bespiel</a></li>
        <li><a name="toc-Eingebaute-Befehle-anpassen-1" href="#adapting-builtin-commands">Eingebaute Befehle anpassen</a></li>
      </ul></li>
      <li><a name="toc-Neue-Definitionen-von-Beschriftungslistenbefehlen-1" href="#new-markup-list-command-definition">2.5.4 Neue Definitionen von Beschriftungslistenbefehlen</a></li>
    </ul></li>
    <li><a name="toc-Kontexte-fur-Programmierer" href="#contexts-for-programmers">2.6 Kontexte für Programmierer</a>
    <ul class="toc">
      <li><a name="toc-Kontextauswertung-1" href="#context-evaluation">2.6.1 Kontextauswertung</a></li>
      <li><a name="toc-Eine-Funktion-auf-alle-Layout_002dObjekte-anwenden-1" href="#running-a-function-on-all-layout-objects">2.6.2 Eine Funktion auf alle Layout-Objekte anwenden</a></li>
    </ul></li>
    <li><a name="toc-Callback_002dFunktionen-1" href="#callback-functions">2.7 Callback-Funktionen</a></li>
    <li><a name="toc-Scheme_002dCode-innerhalb-LilyPonds-1" href="#inline-scheme-code">2.8 Scheme-Code innerhalb LilyPonds</a></li>
    <li><a name="toc-Schwierige-Korrekturen-1" href="#difficult-tweaks">2.9 Schwierige Korrekturen</a></li>
  </ul></li>
  <li><a name="toc-LilyPond-Scheme_002dSchnittstellen-1" href="#lilypond-scheme-interfaces">3. LilyPond Scheme-Schnittstellen</a></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#gnu-free-documentation-license">A. GNU Free Documentation License</a></li>
  <li><a name="toc-LilyPond_002dIndex-1" href="#lilypond-index">B. LilyPond-Index</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#index" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="#lilypond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td></tr></table>
<h1>&Uuml;ber dieses Dokument</h1>
<p>
  Dieses Dokument wurde erzeugt von <em>GUB</em> am <em>6. August 2017</em> durch <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
 Die Links in der Navigationsleiste haben die folgende Bedeutung: 
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Gehe zu </th>
    <th> Von 1.2.3 gehe zu</th>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Anfang dieses oder des letzten Kapitels</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [Anfang] </td>
    <td align="center">Anfang</td>
    <td>Titelseite des Dokuments</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Inhalt] </td>
    <td align="center">Inhalt</td>
    <td>Inhaltsverzeichnis</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">&Uuml;ber</td>
    <td>&Uuml;ber (Hilfe)</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>N&auml;chstes Kapitel</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Zur&uuml;ck</td>
    <td>Voriger Abschnitt in Lesereihenfolge</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ Nach oben ] </td>
    <td align="center">Nach oben</td>
    <td>Abschnitt nach oben</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Nach vorne</td>
    <td>N&auml;chster Abschnitt in Lesereihenfolge</td>
    <td>1.2.4</td>
  </tr>
</table>

<p>
 wobei das <strong> Beispiel </strong> annimmt, dass die aktuelle Position bei <strong> Unterabschnitt 1-2-3 </strong> in einem Dokument mit folgender Struktur liegt:
</p>

<ul>
  <li> 1. Abschnitt 1
    <ul>
      <li>1.1 Unterabschnitt 1-1
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Unterabschnitt 1-2
        <ul>
          <li>1.2.1 Unterabschnitt 1-2-1</li>
          <li>1.2.2 Unterabschnitt 1-2-2</li>
          <li>1.2.3 Unterabschnitt 1-2-3 &nbsp; &nbsp;
            <strong>&lt;== Aktuelle Position </strong></li>
          <li>1.2.4 Unterabschnitt 1-2-4</li>
        </ul>
      </li>
      <li>1.3 Unterabschnitt 1-3
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Unterabschnitt 1-4</li>
    </ul>
  </li>
</ul>

<hr size="1">
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
<p class="footer_version">
Diese Seite ist für LilyPond-2.19.65 (Entwicklungszweig).
</p>
<p class="footer_report">
Ihre Hilfe ist willkommen. Bitte <a href="http://lilypond.org/help-us.html">helfen Sie</a> uns, indem Sie Probleme und Fehler an unsere <a·href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">Fehler-Liste</a> schicken.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
 Andere Sprachen: <a href="extending-big-page.html">English</a>, <a href="extending-big-page.es.html">español</a>, <a href="extending-big-page.fr.html">français</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../Documentation/web/manuals.de.html"
         title="Documentation Index">&lt;&lt; Zur Dokumentationsübersicht</a></p>
<h4 class="toc_header"> <a href="#index" title="Start of the manual">LilyPond &ndash; Extending  v2.19.65 (Entwicklungszweig). </a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Scheme_002dTutorium-1" href="extending-big-page.de.html#scheme-tutorial">1. Scheme-Tutorium</a>
  <ul class="toc">
    <li class=""><a name="toc-Einleitung-in-Scheme-1" href="extending-big-page.de.html#introduction-to-scheme">1.1 Einleitung in Scheme</a>    </li>
    <li class=""><a name="toc-Scheme-in-LilyPond-1" href="extending-big-page.de.html#scheme-in-lilypond">1.2 Scheme in LilyPond</a>    </li>
    <li class=""><a name="toc-Komplizierte-Funktionen-erstellen-1" href="extending-big-page.de.html#building-complicated-functions">1.3 Komplizierte Funktionen erstellen</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Schnittstellen-fur-Programmierer" href="extending-big-page.de.html#interfaces-for-programmers">2. Schnittstellen für Programmierer</a>
  <ul class="toc">
    <li class=""><a name="toc-LilyPond_002dCodeabschnitte-1" href="extending-big-page.de.html#lilypond-code-blocks">2.1 LilyPond-Codeabschnitte</a>    </li>
    <li class=""><a name="toc-Scheme_002dFunktionen-1" href="extending-big-page.de.html#scheme-functions">2.2 Scheme-Funktionen</a>    </li>
    <li class=""><a name="toc-Musikalische-Funktionen-1" href="extending-big-page.de.html#music-functions">2.3 Musikalische Funktionen</a>    </li>
    <li class=""><a name="toc-Ereignisfunktionen-1" href="extending-big-page.de.html#event-functions">2.4 Ereignisfunktionen</a>    </li>
    <li class=""><a name="toc-Textbeschriftungsfunktionen-1" href="extending-big-page.de.html#markup-functions">2.5 Textbeschriftungsfunktionen</a>    </li>
    <li class=""><a name="toc-Kontexte-fur-Programmierer" href="extending-big-page.de.html#contexts-for-programmers">2.6 Kontexte für Programmierer</a>    </li>
    <li class=""><a name="toc-Callback_002dFunktionen-1" href="extending-big-page.de.html#callback-functions">2.7 Callback-Funktionen</a>    </li>
    <li class=""><a name="toc-Scheme_002dCode-innerhalb-LilyPonds-1" href="extending-big-page.de.html#inline-scheme-code">2.8 Scheme-Code innerhalb LilyPonds</a>    </li>
    <li class=""><a name="toc-Schwierige-Korrekturen-1" href="extending-big-page.de.html#difficult-tweaks">2.9 Schwierige Korrekturen</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-LilyPond-Scheme_002dSchnittstellen-1" href="extending-big-page.de.html#lilypond-scheme-interfaces">3. LilyPond Scheme-Schnittstellen</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="extending-big-page.de.html#gnu-free-documentation-license">A. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond_002dIndex-1" href="extending-big-page.de.html#lilypond-index">B. LilyPond-Index</a>  </li>
<li>
<!--
    Translation of GIT committish: ebe492ca408fb0d9abf80b94c56197eef8dc2f09

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
-->

<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.19 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.19 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.19 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Mit Google suchen">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Suche">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
