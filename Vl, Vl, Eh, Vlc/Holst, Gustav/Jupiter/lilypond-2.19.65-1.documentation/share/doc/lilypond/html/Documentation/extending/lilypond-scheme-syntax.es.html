<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 2003-2015 por los autores.

La traducción de la siguiente nota de copyright se ofrece como
cortesía para las personas de habla no inglesa, pero únicamente la
nota en inglés tiene validez legal.

The translation of the following copyright notice is provided
for courtesy to non-English speakers, but only the notice in English
legally counts.

Se otorga permiso para copiar, distribuir y/o modificar este documento
bajo los términos de la Licencia de Documentación Libre de GNU, versión 1.1
o cualquier versión posterior publicada por la Free Software Foundation;
sin ninguna de las secciones invariantes.
Se incluye una copia de esta licencia dentro de la sección titulada "Licencia
de Documentación Libre de GNU".


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on el 6 agosto 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Extender LilyPond: A.2.1 Sintaxis del Scheme de LilyPond</title>

<meta name="description" content="Extender LilyPond: A.2.1 Sintaxis del Scheme de LilyPond">
<meta name="keywords" content="Extender LilyPond: A.2.1 Sintaxis del Scheme de LilyPond">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.es.html#index" rel="start" title="LilyPond &mdash; Extender">
<link href="lilypond-index.es.html#lilypond-index" rel="index" title="E. Índice de LilyPond">
<link href="index_toc.es.html#SEC_Contents" rel="contents" title="&Iacute;ndice General">
<link href="index_abt.es.html#SEC_About" rel="help" title="Acerca de este documento">
<link href="scheme-in-lilypond.es.html#scheme-in-lilypond" rel="up" title="A.2 Scheme dentro de LilyPond">
<link href="lilypond-index.es.html#lilypond-index" rel="next" title="E. Índice de LilyPond">
<link href="scheme-in-lilypond.es.html#scheme-in-lilypond" rel="previous" title="A.2 Scheme dentro de LilyPond">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-manuals-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="es" class="extending devStatus">


<div id="main">
<a name="Sintaxis-del-Scheme-de-LilyPond"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="scheme-tutorial.es.html" title="Inicio de este cap&iacute;tulo o cap&iacute;tulo anterior"> &lt;&lt; Tutorial de Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.es.html" title="Portada del documento" rel="start">Arriba</a>][<a href="index_toc.es.html#SEC_Contents" title="&Iacute;ndice general" rel="contents">&Iacute;ndice general</a>][<a href="lilypond-index.es.html" title="&Iacute;ndice" rel="index">&Iacute;ndice</a>][<a href="index_abt.es.html#SEC_About" title="Acerca de (p&aacute;gina de ayuda)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="interfaces-for-programmers.es.html" title="Cap&iacute;tulo siguiente">&nbsp;Interfaces para programadores &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="scheme-in-lilypond.es.html" title="Secci&oacute;n anterior en orden de lectura" accesskey="p" rel="previous"> &lt; Scheme dentro de LilyPond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="scheme-in-lilypond.es.html" title="Subir secci&oacute;n" accesskey="u" rel="up">&nbsp; Subir :&nbsp;Scheme dentro de LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="lilypond-variables.es.html" title="Secci&oacute;n siguiente en orden de lectura" accesskey="n" rel="next">&nbsp;Variables de LilyPond &gt; </a>]</td></tr></table>
<a name="lilypond-scheme-syntax"></a>
<h3 class="subsection">A.2.1 Sintaxis del Scheme de LilyPond</h3>
<a name="index-_0024"></a>
<a name="index-_0024-1"></a>
<a name="index-_0023"></a>
<a name="index-_0023-1"></a>

<p>El intérprete Guile forma parte de LilyPond, lo que significa que
se puede incluir Scheme dentro de los archivos de entrada de
LilyPond.  Existen varios métodos para incluir Scheme dentro de
LilyPond.
</p>
<p>La manera más sencilla es utilizar el símbolo de
almohadilla&nbsp;<code>#</code> antes de una expresión de Scheme.
</p>
<p>Ahora bien, el código de entrada de LilyPond se estructura en
elementos y expresiones, de forma parecida a cómo el lenguaje
humano se estructura en palabras y frases.  LilyPond tiene un
analizador léxico que reconoce elementos indivisibles (números
literales, cadenas de texto, elementos de Scheme, nombres de nota,
etc.), y un analizador que entiende la sintaxis, la Gramática de
LilyPond (<a name="index-LilyPond-grammar"></a>
<a href="../contributor/lilypond-grammar.html">LilyPond grammar</a>).  Una vez que sabe que se
aplica una regla sintáctica concreta, ejecuta las acciones
asociadas con ella.
</p>
<p>El método del símbolo de almohadilla&nbsp;<code>#</code> para incrustar
Scheme se adapta de forma natural a este sistema.  Una vez que el
analizador léxico ve un símbolo de almohadilla, llama al lector de
Scheme para que lea una expresión de Scheme completa (que puede
ser un identificador, una expresión encerrada entre paréntesis, o
algunas otras cosas).  Después de que se ha leído la expresión de
Scheme, se almacena como el valor de un elemento <code>SCM_TOKEN</code>
de la gramática.  Después de que el analizador sintáctico ya sabe
cómo hacer uso de este elemento, llama a Guila para que evalúe la
expresión de Scheme.  Dado que el analizador sintáctico suele
requerir un poco de lectura por delante por parte del analizador
léxico para tomar sus decisiones de análisis sintáctico, esta
separación de lectura y evaluación entre los analizadores léxico y
sintáctico es justamente lo que se necesita para mantener
sincronizadas las ejecuciones de expresiones de LilyPond y de
Scheme.  Por este motivo se debe usar el símbolo de
almohadilla&nbsp;<code>#</code> para llamar a Scheme siempre que sea
posible.
</p>
<p>Otra forma de llamar al intérprete de Scheme desde LilyPond es el
uso del símbolo de dólar&nbsp;<code>$</code> en lugar de la almohadilla
para introducir las expresiondes de Scheme.  En este caso,
LilyPond evalúa el código justo después de que el analizador
léxico lo ha leído.  Comprueba el tipo resultante de la expresión
de Scheme y después selecciona un tipo de elemento (uno de los
varios elementos <code>xxx_IDENTIFIER</code> dentro de la sintaxis) para
él.  Crea una <em>copia</em> del valor y la usa como valor del
elemento.  Si el valor de la expresión es vacío (El valor de Guile
de <code>*unspecified*</code>), no se pasa nada en absoluto al
analizador sintáctico.
</p>
<p>Éste es, de hecho, el mismo mecanismo exactamente que LilyPond
emplea cuando llamamos a cualquier variable o función musical por
su nombre, como <code>\nombre</code>, con la única diferencia de que el
nombre viene determinado por el analizador léxico de LilyPond sin
consultar al lector de Scheme, y así solamente se aceptan los
nombres de variable consistentes con el modo actual de LilyPond.
</p>
<p>La acción inmediata de <code>$</code> puede llevar a alguna que otra
sorpresa, véase <a href="importing-scheme-in-lilypond.es.html">Importación de Scheme dentro de LilyPond</a>.
La utilización de <code>#</code> donde el analizador sintáctico lo
contempla es normalmente preferible.  Dentro de las expresiones
musicales, aquellas que se crean utilizando <code>#</code> <em>se
interprentan</em> como música.  Sin embargo, <em>no se copian</em> antes
de ser utilizadas.  Si forman parte de alguna estructura que aún
podría tener algún uso, quizá tenga que utilizar explícitamente
<code>ly:music-deep-copy</code>.
</p>
<a name="index-_0024_0040"></a>
<a name="index-_0024_0040-1"></a>
<a name="index-_0023_0040"></a>
<a name="index-_0023_0040-1"></a>
<p>También existen los operadores de &lsquo;división de listas&rsquo;
<code>$@</code> y <code>#@</code> que insertan todos los elementos de una
lista dentro del contexto circundante.
</p>
<p>Ahora echemos un vistazo a algo de código de Scheme real.  Los
procedimientos de Scheme se pueden definir dentro de los archivos
de entrada de LilyPond:
</p>
<blockquote><pre class="example">#(define (media a b c) (/ (+ a b c) 3))
</pre></blockquote>

<p>Observe que los comentarios de LilyPond (<code>%</code> y <code>%{
%}</code>) no se pueden utilizar dentro del código de Scheme, ni
siquiera dentro de un archivo de entrada de LilyPond, porque es el
intérprete Guile, y no el analizador léxico de LilyPond, el que
está leyendo la expresión de Scheme.  Los comentarios en el Scheme
de Guile se introducen como sigue:
</p>
<blockquote><pre class="example">; esto es un comentario de una línea

#!
  Esto es un comentario de bloque (no anidable) estilo Guile
  Pero se usan rara vez por parte de los Schemers
  y nunca dentro del código fuente de LilyPond
!#
</pre></blockquote>

<p>Durante el resto de esta sección, supondremos que los datos se
introducen en un archivo de música, por lo que añadiremos una
almohadilla&nbsp;<code>#</code> al principio de cada una de las
expresiones de Scheme.
</p>
<p>Todas las expresiones de Scheme del nivel jerárquico superior
dentro de un archivo de entrada de LilyPond se pueden combinar en
una sola expresión de Scheme mediante la utilización del operador
<code>begin</code>:
</p>
<blockquote><pre class="example">#(begin
  (define fulanito 0)
  (define menganito 1))
</pre></blockquote>


<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="scheme-tutorial.es.html" title="Inicio de este cap&iacute;tulo o cap&iacute;tulo anterior"> &lt;&lt; Tutorial de Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.es.html" title="Portada del documento" rel="start">Arriba</a>][<a href="index_toc.es.html#SEC_Contents" title="&Iacute;ndice general" rel="contents">&Iacute;ndice general</a>][<a href="lilypond-index.es.html" title="&Iacute;ndice" rel="index">&Iacute;ndice</a>][<a href="index_abt.es.html#SEC_About" title="Acerca de (p&aacute;gina de ayuda)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="interfaces-for-programmers.es.html" title="Cap&iacute;tulo siguiente">&nbsp;Interfaces para programadores &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="scheme-in-lilypond.es.html" title="Secci&oacute;n anterior en orden de lectura" accesskey="p" rel="previous"> &lt; Scheme dentro de LilyPond&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="scheme-in-lilypond.es.html" title="Subir secci&oacute;n" accesskey="u" rel="up">&nbsp; Subir :&nbsp;Scheme dentro de LilyPond&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="lilypond-variables.es.html" title="Secci&oacute;n siguiente en orden de lectura" accesskey="n" rel="next">&nbsp;Variables de LilyPond &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
<p class="footer_version">
Esta página corresponde a LilyPond-2.19.65 (rama de desarrollo).
</p>
<p class="footer_report">
Se agradecen las <a href="http://lilypond.org/help-us.html">sugerencias para la documentación</a>. Informe de los fallos a través de la lista en español <a href="http://lists.gnu.org/mailman/listinfo/lilypond-es">lilypond-es</a>, o en inglés a través de <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">la lista oficial de fallos</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
 Otros idiomas: <a href="lilypond-scheme-syntax.html">English</a>, <a href="lilypond-scheme-syntax.de.html">deutsch</a>, <a href="lilypond-scheme-syntax.fr.html">français</a>.
 <br>
 Acerca de la <a href="http://www.lilypond.org/website/misc/browser-language">selección automática del idioma</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.es.html"
         title="Documentation Index">&lt;&lt; Volver al índice de la documentación</a></p>
<h4 class="toc_header"> <a href="index.es.html" title="Start of the manual">LilyPond &mdash; Extender  v2.19.65 (rama de desarrollo). </a></h4>
<div class="contents">
<ul class="toc">
  <li class=" toc_current"><a name="toc-Tutorial-de-Scheme-1" href="scheme-tutorial.es.html">A. Tutorial de Scheme</a>
  <ul class="toc">
    <li class=""><a name="toc-Introduccion-a-Scheme" href="introduction-to-scheme.es.html">A.1 Introducción a Scheme</a>    </li>
    <li class=" toc_current"><a name="toc-Scheme-dentro-de-LilyPond-1" href="scheme-in-lilypond.es.html">A.2 Scheme dentro de LilyPond</a>
    <ul class="toc">
      <li class=" toc_current"><a name="toc-Sintaxis-del-Scheme-de-LilyPond-1" href="lilypond-scheme-syntax.es.html">A.2.1 Sintaxis del Scheme de LilyPond</a>      </li>
      <li class=""><a name="toc-Variables-de-LilyPond-1" href="lilypond-variables.es.html">A.2.2 Variables de LilyPond</a>      </li>
      <li class=""><a name="toc-Variables-de-entrada-y-Scheme-1" href="input-variables-and-scheme.es.html">A.2.3 Variables de entrada y Scheme</a>      </li>
      <li class=""><a name="toc-Importacion-de-Scheme-dentro-de-LilyPond" href="importing-scheme-in-lilypond.es.html">A.2.4 Importación de Scheme dentro de LilyPond</a>      </li>
      <li class=""><a name="toc-Propiedades-de-los-objetos-1" href="object-properties.es.html">A.2.5 Propiedades de los objetos</a>      </li>
      <li class=""><a name="toc-Variables-de-LilyPond-compuestas-1" href="lilypond-compound-variables.es.html">A.2.6 Variables de LilyPond compuestas</a>      </li>
      <li class=""><a name="toc-Representacion-interna-de-la-musica" href="internal-music-representation.es.html">A.2.7 Representación interna de la música</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Construir-funciones-complicadas-1" href="building-complicated-functions.es.html">A.3 Construir funciones complicadas</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Interfaces-para-programadores-1" href="interfaces-for-programmers.es.html">B. Interfaces para programadores</a>
  <ul class="toc">
    <li class=""><a name="toc-Bloques-de-codigo-de-LilyPond" href="lilypond-code-blocks.es.html">B.1 Bloques de código de LilyPond</a>    </li>
    <li class=""><a name="toc-Funciones-de-Scheme-1" href="scheme-functions.es.html">B.2 Funciones de Scheme</a>    </li>
    <li class=""><a name="toc-Funciones-musicales-1" href="music-functions.es.html">B.3 Funciones musicales</a>    </li>
    <li class=""><a name="toc-Funciones-de-eventos-1" href="event-functions.es.html">B.4 Funciones de eventos</a>    </li>
    <li class=""><a name="toc-Funciones-de-marcado-1" href="markup-functions.es.html">B.5 Funciones de marcado</a>    </li>
    <li class=""><a name="toc-Contextos-para-programadores-1" href="contexts-for-programmers.es.html">B.6 Contextos para programadores</a>    </li>
    <li class=""><a name="toc-Funciones-de-callback-1" href="callback-functions.es.html">B.7 Funciones de callback</a>    </li>
    <li class=""><a name="toc-Trucos-dificiles" href="difficult-tweaks.es.html">B.8 Trucos difíciles</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-Interfaces-de-Scheme-de-LilyPond-1" href="lilypond-scheme-interfaces.es.html">C. Interfaces de Scheme de LilyPond</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.es.html">D. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-Indice-de-LilyPond" href="lilypond-index.es.html">E. Índice de LilyPond</a>  </li>
<li>
<!--
    Translation of GIT committish: 1df9fc42197a6b2931f448cfba717527aead5e5a

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.

we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.19 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.19 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.19 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Búsqueda de Google">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Buscar">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
