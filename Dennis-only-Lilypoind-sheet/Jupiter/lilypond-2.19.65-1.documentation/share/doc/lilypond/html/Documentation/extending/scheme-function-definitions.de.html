<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright C 2003-2015 bei den Autoren.

The translation of the following copyright notice is provided
for courtesy to non-English speakers, but only the notice in English
legally counts.

Die Übersetzung der folgenden Lizenzanmerkung ist zur Orientierung
für Leser, die nicht Englisch sprechen. Im rechtlichen Sinne ist aber
nur die englische Version gültig.

Es ist erlaubt, dieses Dokument unter den Bedingungen der
GNU Free Documentation Lizenz (Version 1.1 oder
spätere, von der Free Software Foundation publizierte Versionen, ohne
invariante Abschnitte),
zu kopieren, zu verbreiten und/oder
zu verändern. Eine Kopie der Lizenz ist im Abschnitt "GNU
Free Documentation License" angefügt.


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on 6. August 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond erweitern: 2.2.1 Definition von Scheme-Funktionen</title>

<meta name="description" content="LilyPond erweitern: 2.2.1 Definition von Scheme-Funktionen">
<meta name="keywords" content="LilyPond erweitern: 2.2.1 Definition von Scheme-Funktionen">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.de.html#index" rel="start" title="LilyPond &ndash; Extending">
<link href="lilypond-index.de.html#lilypond-index" rel="index" title="B. LilyPond-Index">
<link href="index_toc.de.html#SEC_Contents" rel="contents" title="Inhaltsverzeichnis">
<link href="index_abt.de.html#SEC_About" rel="help" title="&Uuml;ber dieses Dokument">
<link href="scheme-functions.de.html#scheme-functions" rel="up" title="2.2 Scheme-Funktionen">
<link href="lilypond-index.de.html#lilypond-index" rel="next" title="B. LilyPond-Index">
<link href="scheme-functions.de.html#scheme-functions" rel="previous" title="2.2 Scheme-Funktionen">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-manuals-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="de" class="extending devStatus">


<div id="main">
<a name="Definition-von-Scheme_002dFunktionen"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="interfaces-for-programmers.de.html" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.de.html" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="index_toc.de.html#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="lilypond-index.de.html" title="Index" rel="index">Index</a>][<a href="index_abt.de.html#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="lilypond-scheme-interfaces.de.html" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="scheme-functions.de.html" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="scheme-functions.de.html" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="scheme-function-usage.de.html" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Benutzung von Scheme-Funktionen &gt; </a>]</td></tr></table>
<a name="scheme-function-definitions"></a>
<h3 class="subsection">2.2.1 Definition von Scheme-Funktionen</h3>

<a name="index-define_002dscheme_002dfunction"></a>
<a name="index-define_002dscheme_002dfunction-1"></a>

<p>Die übliche Form zur Definition von Scheme-Funktionen ist:
</p>
<blockquote><pre class="example">function =
#(define-scheme-function
     (<var>Arg1</var> <var>Arg2</var> &hellip;)
     (<var>Typ1?</var> <var>Typ2?</var> &hellip;)
   <var>body</var>)
</pre></blockquote>

<p>wobei
</p>
<table>
<tr><td width="33%"><code>parser</code></td><td width="66%">ganz genau das Wort <code>parser</code> sein muss, damit LilyPond
eine Umgebung (<code>#{</code>&hellip;<code>#}</code>) mit Zugriff
auf den Parser bekommt.</td></tr>
<tr><td width="33%"><code><var>ArgN</var></code></td><td width="66%"><var>n</var>te Argument</td></tr>
<tr><td width="33%"><code><var>TypN?</var></code></td><td width="66%">eine Scheme-<em>Typenprädikat</em>, für welches <code><var>argN</var></code>
<code>#t</code> ausgeben muss.  Manche dieser Prädikate werden vom Parser
besonders erkannt, siehe unten.  Es gibt auch eine Spezialform
<code>(<em>predicate?</em> <em>default</em>)</code>, um optionale Argumente
anzugeben.  Wenn das eigentlich Argument fehlt, während die Funktion
aufgerufen wird, wird der Standardwert anstelle eingesetzt.  Standardwerte
werden bei ihrer Definition evaluiert (gilt auch für
LilyPond-Codeabschnitte), so dass man besser einen speziellen Wert
schreibt, den man einfach erkennen kann, wenn der Wert während der
Ausführung der Position evaluiert weren soll.  Wenn man das Prädikat
in Klammern setzt, aber  kein Standardwert folt, wird <code>#f</code>
als Standard eingesetzt.  Standardwerte werden weder bei der Definition
noch bei der Ausführung mit <em>predicate?</em> verifiziert, sodass
man selber verantworlich für funktionsfähige Werte ist.  Standardwerte,
die musikalische Ausdrücke darstellen, werden kopiert und <code>origin</code>
auf den Parameter <code>location</code> gesetzt.</td></tr>
<tr><td width="33%"><code><var>body</var></code></td><td width="66%">Eine Folge von Scheme-Formeln, die der Reihe nach ausgewertet
werden, wobei die letzte als Ausgabewert der Scheme-Funktion eingesetzt
wird.  Sie kann LilyPond-Codeabschnitte enthalten, eingeschlossen mit
Raute-Klammern (&nbsp;<code>#{&hellip;#}</code>&nbsp;), wie beschrieben
in <a href="lilypond-code-blocks.de.html">LilyPond-Codeabschnitte</a>.  Innerhalb von LilyPond-Codeabschnitten
wird mit <code>#</code> auf Funktionsargumente (etwa &lsquo;<samp>#Arg1</samp>&rsquo;) verwiesen
oder ein neuer Scheme-Ausdruck mit Funktionsargumenten begonnen
(etwa &lsquo;<samp>#(cons Arg1 Arg2)</samp>&rsquo;).  Wo normale Scheme-Ausdrücke mit
<code>#</code> nicht funktionieren, kann man auf direkte Scheme-Ausdrücke
zurückgreifen, die mit <code>$</code> begonnen werden (etwa &lsquo;<samp>$music</samp>&rsquo;).

Wenn die Funktion eine musikalische Funktion ausgibt, bekommt sie einen
Wert von <code>origin</code>. zugewiesen.</td></tr>
</table>

<p>Einige Typenprädikate werden vom Parser besonders behandelt, weil
er sonst die Argumente nicht zuverlässig erkennen könnte.  Im Moment
handelt es sich um <code>ly:pitch?</code> und <code>ly:duration?</code>.
</p>
<p>Die Eignung der Argumente für alle anderen Prädikate wird festgestellt,
indem das Prädikat aufgerufen wird, nachdem LilyPond es schon in einen
Scheme-Ausdruck umgewandelt hat.  Demzufolge kann das Argument in
Scheme-Syntax angegeben werden, wenn nötig (beginnend mit <code>#</code> oder
als Result des Aufrufes einer Scheme-Funktion), aber LilyPond
konvertiert auch eine Reihe von LilyPond-Strukturen nach Scheme,
bevor dann tatsächlich die Prädikate überprüft werden.  Bei den
letzteren handelt es sich im Moment um music (Noten), postevents,
simple strings (einfache Zeichenketten mit oder ohne Anführungszeichen)
numbers (Zahlen), markup (Beschriftung) und markup lists
(Beschriftungslisten), score (Partitur), book (Buch), bookpart
(Buchteil), Kontextdefinitions- und Ausgabedefinitionsumgebungen.
</p>
<p>Für einige Arten von Ausdrücken (wie die meisten Noten, die nicht
in Klammern geschrieben werden) muss LilyPond weiter nach vorne
schauen als der Ausdruck selber reicht, um das Ende des Ausdrucks
zu bestimmen.  Wenn solche Ausdrücke für optionale Argumente mit
einbezogen würden, indem ihre Prädikate ausgewählt würden, könnte
LilyPond nicht mehr zurückgehen, wenn es feststellt, dass der
Ausdruck nicht zu dem Parameter passt.  Darum müssen manche Formen
von Noten möglicherweise in Klammern eingeschlossen werden, damit
LilyPond sie akzeptiert.  Es gibt auch einige andere Mehrdeutigkeiten,
die LilyPond durch Testen von Prädikatfunktionen eingrenzt:
ist etwa &lsquo;<samp>-3</samp>&rsquo; die Anmerkung für einen Fingersatz oder eine
negative Zahl? Ist <code>&quot;a&quot; 4</code> im Gesangskontext eine Zeichenkette
gefolgt von einer Zahl oder ein Gesangstextereignis mit der Dauer
<code>4</code>?  LilyPond entscheidet, indem es Prädaikate befragt.  Das
heißt, dass man zu durchlässige Prädikate wie <code>scheme?</code>
vermeiden sollte, wenn man eine bestimmmte Verwendung beabsichtigt
und nicht nur eine Funktion für die allgemeine Verwendung schreibt.
</p>
<p>Eine Liste der möglichen vordefinierten Typenprädikte findet sich in
<a name="index-Vordefinierte-Typpradikate"></a>
<a href="../notation/predefined-type-predicates.de.html">Vordefinierte Typprädikate</a>.
</p>
<a name="Siehe-auch-1"></a>
<h4 class="subsubheading">Siehe auch</h4>

<p>Notationsreferenz
<a name="index-Vordefinierte-Typpradikate-1"></a>
<a href="../notation/predefined-type-predicates.de.html">Vordefinierte Typprädikate</a>.
</p>
<p>Installierte Dateien:
&lsquo;<tt>lily/music-scheme.cc</tt>&rsquo;,
&lsquo;<tt>scm/c++.scm</tt>&rsquo;,
&lsquo;<tt>scm/lily.scm</tt>&rsquo;.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="interfaces-for-programmers.de.html" title="Anfang dieses oder des letzten Kapitels"> &lt;&lt; Schnittstellen für Programmierer&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.de.html" title="Titelseite des Dokuments" rel="start">Anfang</a>][<a href="index_toc.de.html#SEC_Contents" title="Inhaltsverzeichnis" rel="contents">Inhalt</a>][<a href="lilypond-index.de.html" title="Index" rel="index">Index</a>][<a href="index_abt.de.html#SEC_About" title="&Uuml;ber (Hilfe)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="lilypond-scheme-interfaces.de.html" title="N&auml;chstes Kapitel">&nbsp;LilyPond Scheme-Schnittstellen &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="scheme-functions.de.html" title="Voriger Abschnitt in Lesereihenfolge" accesskey="p" rel="previous"> &lt; Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="scheme-functions.de.html" title="Abschnitt nach oben" accesskey="u" rel="up">&nbsp; Nach oben :&nbsp;Scheme-Funktionen&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="scheme-function-usage.de.html" title="N&auml;chster Abschnitt in Lesereihenfolge" accesskey="n" rel="next">&nbsp;Benutzung von Scheme-Funktionen &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
<p class="footer_version">
Diese Seite ist für LilyPond-2.19.65 (Entwicklungszweig).
</p>
<p class="footer_report">
Ihre Hilfe ist willkommen. Bitte <a href="http://lilypond.org/help-us.html">helfen Sie</a> uns, indem Sie Probleme und Fehler an unsere <a·href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">Fehler-Liste</a> schicken.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-release-unstable/scripts/build/out/www_post -->
 Andere Sprachen: <a href="scheme-function-definitions.html">English</a>, <a href="scheme-function-definitions.es.html">español</a>, <a href="scheme-function-definitions.fr.html">français</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.de.html"
         title="Documentation Index">&lt;&lt; Zur Dokumentationsübersicht</a></p>
<h4 class="toc_header"> <a href="index.de.html" title="Start of the manual">LilyPond &ndash; Extending  v2.19.65 (Entwicklungszweig). </a></h4>
<div class="contents">
<ul class="toc">
  <li class=""><a name="toc-Scheme_002dTutorium-1" href="scheme-tutorial.de.html">1. Scheme-Tutorium</a>
  <ul class="toc">
    <li class=""><a name="toc-Einleitung-in-Scheme-1" href="introduction-to-scheme.de.html">1.1 Einleitung in Scheme</a>    </li>
    <li class=""><a name="toc-Scheme-in-LilyPond-1" href="scheme-in-lilypond.de.html">1.2 Scheme in LilyPond</a>    </li>
    <li class=""><a name="toc-Komplizierte-Funktionen-erstellen-1" href="building-complicated-functions.de.html">1.3 Komplizierte Funktionen erstellen</a>    </li>
  </ul>
  </li>
  <li class=" toc_current"><a name="toc-Schnittstellen-fur-Programmierer" href="interfaces-for-programmers.de.html">2. Schnittstellen für Programmierer</a>
  <ul class="toc">
    <li class=""><a name="toc-LilyPond_002dCodeabschnitte-1" href="lilypond-code-blocks.de.html">2.1 LilyPond-Codeabschnitte</a>    </li>
    <li class=" toc_current"><a name="toc-Scheme_002dFunktionen-1" href="scheme-functions.de.html">2.2 Scheme-Funktionen</a>
    <ul class="toc">
      <li class=" toc_current"><a name="toc-Definition-von-Scheme_002dFunktionen-1" href="scheme-function-definitions.de.html">2.2.1 Definition von Scheme-Funktionen</a>      </li>
      <li class=""><a name="toc-Benutzung-von-Scheme_002dFunktionen-1" href="scheme-function-usage.de.html">2.2.2 Benutzung von Scheme-Funktionen</a>      </li>
      <li class=""><a name="toc-Leere-Scheme_002dFunktionen-1" href="void-scheme-functions.de.html">2.2.3 Leere Scheme-Funktionen</a>      </li>
    </ul>
    </li>
    <li class=""><a name="toc-Musikalische-Funktionen-1" href="music-functions.de.html">2.3 Musikalische Funktionen</a>    </li>
    <li class=""><a name="toc-Ereignisfunktionen-1" href="event-functions.de.html">2.4 Ereignisfunktionen</a>    </li>
    <li class=""><a name="toc-Textbeschriftungsfunktionen-1" href="markup-functions.de.html">2.5 Textbeschriftungsfunktionen</a>    </li>
    <li class=""><a name="toc-Kontexte-fur-Programmierer" href="contexts-for-programmers.de.html">2.6 Kontexte für Programmierer</a>    </li>
    <li class=""><a name="toc-Callback_002dFunktionen-1" href="callback-functions.de.html">2.7 Callback-Funktionen</a>    </li>
    <li class=""><a name="toc-Scheme_002dCode-innerhalb-LilyPonds-1" href="inline-scheme-code.de.html">2.8 Scheme-Code innerhalb LilyPonds</a>    </li>
    <li class=""><a name="toc-Schwierige-Korrekturen-1" href="difficult-tweaks.de.html">2.9 Schwierige Korrekturen</a>    </li>
  </ul>
  </li>
  <li class=""><a name="toc-LilyPond-Scheme_002dSchnittstellen-1" href="lilypond-scheme-interfaces.de.html">3. LilyPond Scheme-Schnittstellen</a>  </li>
  <li class=""><a name="toc-GNU-Free-Documentation-License-1" href="gnu-free-documentation-license.de.html">A. GNU Free Documentation License</a>  </li>
  <li class=""><a name="toc-LilyPond_002dIndex-1" href="lilypond-index.de.html">B. LilyPond-Index</a>  </li>
<li>
<!--
    Translation of GIT committish: ebe492ca408fb0d9abf80b94c56197eef8dc2f09

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
-->

<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.19 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.19 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.19 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Mit Google suchen">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Suche">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
